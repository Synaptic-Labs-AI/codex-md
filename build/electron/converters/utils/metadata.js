"use strict";

/**
 * metadata.js
 * 
 * Utility functions for handling metadata formatting and extraction.
 * Provides standardized metadata structure across all converters.
 * 
 * Related files:
 * - src/electron/converters/UnifiedConverterFactory.js: Uses these utilities
 * - src/electron/services/ConversionResultManager.js: Uses metadata formatting
 */

/**
 * Create standardized metadata object for conversions
 * @param {object} options - Metadata options
 * @param {string} options.title - Document title
 * @param {string} options.fileType - File type (pdf, docx, url, video, audio, etc.)
 * @param {Date} [options.convertedDate] - Conversion date (defaults to now)
 * @returns {object} - Standardized metadata object
 */
function createStandardMetadata(options) {
  // Extract only the allowed fields, ignoring any extra properties
  const {
    title,
    fileType,
    convertedDate
  } = options || {};
  const metadata = {
    title: title || 'Untitled',
    converted: (convertedDate || new Date()).toISOString(),
    fileType: fileType
  };
  return metadata;
}

/**
 * Format metadata as YAML frontmatter
 * @param {object} metadata - Metadata object to format
 * @returns {string} - Formatted YAML frontmatter
 */
function formatMetadata(metadata) {
  const lines = ['---'];
  Object.entries(metadata || {}).forEach(([key, value]) => {
    if (Array.isArray(value)) {
      if (value.length > 0) {
        lines.push(`${key}:`);
        value.forEach(item => lines.push(`  - ${item}`));
      }
    } else if (value !== null && value !== undefined && value !== '') {
      // Escape special characters and wrap in quotes if needed
      const needsQuotes = /[:#\[\]{}",\n]/g.test(String(value));
      const escapedValue = String(value).replace(/"/g, '\\"');
      lines.push(`${key}: ${needsQuotes ? `"${escapedValue}"` : value}`);
    }
  });
  lines.push('---', '');
  return lines.join('\n');
}

/**
 * Create and format standardized metadata as YAML frontmatter
 * @param {object} options - Metadata options (same as createStandardMetadata)
 * @returns {string} - Formatted YAML frontmatter with standardized metadata
 */
function createStandardFrontmatter(options) {
  const metadata = createStandardMetadata(options);
  return formatMetadata(metadata);
}

/**
 * Extract metadata from a URL
 * @param {string} url - URL to extract metadata from
 * @returns {Promise<object>} - Extracted metadata
 */
async function extractMetadata(url) {
  try {
    const urlObj = new URL(url);
    return {
      title: urlObj.hostname,
      source: url,
      captured: new Date().toISOString()
    };
  } catch (error) {
    console.error('Failed to extract metadata:', error);
    return {
      source: url,
      captured: new Date().toISOString()
    };
  }
}

/**
 * Clean any metadata fields that might contain temporary filenames
 * @param {object} metadata - Metadata object to clean
 * @returns {object} - Cleaned metadata object
 */
function cleanMetadata(metadata) {
  const cleanedMetadata = {
    ...metadata
  };
  if (cleanedMetadata.originalFile && typeof cleanedMetadata.originalFile === 'string') {
    cleanedMetadata.originalFile = cleanTemporaryFilename(cleanedMetadata.originalFile);
  }
  return cleanedMetadata;
}

/**
 * Helper function to clean temporary filenames
 * @param {string} filename - The filename to clean
 * @returns {string} - The cleaned filename
 */
function cleanTemporaryFilename(filename) {
  if (!filename || typeof filename !== 'string') {
    console.warn(`⚠️ Invalid input to cleanTemporaryFilename: ${filename}`);
    return filename || '';
  }
  try {
    // Extract the base name without extension
    const extension = filename.includes('.') ? filename.substring(filename.lastIndexOf('.')) : '';
    const baseName = filename.includes('.') ? filename.substring(0, filename.lastIndexOf('.')) : filename;

    // Clean the base name - remove temp_ prefix and any numeric identifiers
    let cleanedName = baseName;
    if (baseName.startsWith('temp_')) {
      cleanedName = baseName.replace(/^temp_\d*_?/, '');
    }

    // Return the cleaned name with extension if it had one
    return cleanedName + extension;
  } catch (error) {
    console.error(`❌ Error in cleanTemporaryFilename:`, error);
    return filename;
  }
}
module.exports = {
  createStandardMetadata,
  formatMetadata,
  createStandardFrontmatter,
  extractMetadata,
  cleanMetadata,
  cleanTemporaryFilename
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVTdGFuZGFyZE1ldGFkYXRhIiwib3B0aW9ucyIsInRpdGxlIiwiZmlsZVR5cGUiLCJjb252ZXJ0ZWREYXRlIiwibWV0YWRhdGEiLCJjb252ZXJ0ZWQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJmb3JtYXRNZXRhZGF0YSIsImxpbmVzIiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXkiLCJ2YWx1ZSIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsInB1c2giLCJpdGVtIiwidW5kZWZpbmVkIiwibmVlZHNRdW90ZXMiLCJ0ZXN0IiwiU3RyaW5nIiwiZXNjYXBlZFZhbHVlIiwicmVwbGFjZSIsImpvaW4iLCJjcmVhdGVTdGFuZGFyZEZyb250bWF0dGVyIiwiZXh0cmFjdE1ldGFkYXRhIiwidXJsIiwidXJsT2JqIiwiVVJMIiwiaG9zdG5hbWUiLCJzb3VyY2UiLCJjYXB0dXJlZCIsImVycm9yIiwiY29uc29sZSIsImNsZWFuTWV0YWRhdGEiLCJjbGVhbmVkTWV0YWRhdGEiLCJvcmlnaW5hbEZpbGUiLCJjbGVhblRlbXBvcmFyeUZpbGVuYW1lIiwiZmlsZW5hbWUiLCJ3YXJuIiwiZXh0ZW5zaW9uIiwiaW5jbHVkZXMiLCJzdWJzdHJpbmciLCJsYXN0SW5kZXhPZiIsImJhc2VOYW1lIiwiY2xlYW5lZE5hbWUiLCJzdGFydHNXaXRoIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9lbGVjdHJvbi9jb252ZXJ0ZXJzL3V0aWxzL21ldGFkYXRhLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBtZXRhZGF0YS5qc1xyXG4gKiBcclxuICogVXRpbGl0eSBmdW5jdGlvbnMgZm9yIGhhbmRsaW5nIG1ldGFkYXRhIGZvcm1hdHRpbmcgYW5kIGV4dHJhY3Rpb24uXHJcbiAqIFByb3ZpZGVzIHN0YW5kYXJkaXplZCBtZXRhZGF0YSBzdHJ1Y3R1cmUgYWNyb3NzIGFsbCBjb252ZXJ0ZXJzLlxyXG4gKiBcclxuICogUmVsYXRlZCBmaWxlczpcclxuICogLSBzcmMvZWxlY3Ryb24vY29udmVydGVycy9VbmlmaWVkQ29udmVydGVyRmFjdG9yeS5qczogVXNlcyB0aGVzZSB1dGlsaXRpZXNcclxuICogLSBzcmMvZWxlY3Ryb24vc2VydmljZXMvQ29udmVyc2lvblJlc3VsdE1hbmFnZXIuanM6IFVzZXMgbWV0YWRhdGEgZm9ybWF0dGluZ1xyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgc3RhbmRhcmRpemVkIG1ldGFkYXRhIG9iamVjdCBmb3IgY29udmVyc2lvbnNcclxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBNZXRhZGF0YSBvcHRpb25zXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnRpdGxlIC0gRG9jdW1lbnQgdGl0bGVcclxuICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMuZmlsZVR5cGUgLSBGaWxlIHR5cGUgKHBkZiwgZG9jeCwgdXJsLCB2aWRlbywgYXVkaW8sIGV0Yy4pXHJcbiAqIEBwYXJhbSB7RGF0ZX0gW29wdGlvbnMuY29udmVydGVkRGF0ZV0gLSBDb252ZXJzaW9uIGRhdGUgKGRlZmF1bHRzIHRvIG5vdylcclxuICogQHJldHVybnMge29iamVjdH0gLSBTdGFuZGFyZGl6ZWQgbWV0YWRhdGEgb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVTdGFuZGFyZE1ldGFkYXRhKG9wdGlvbnMpIHtcclxuICAvLyBFeHRyYWN0IG9ubHkgdGhlIGFsbG93ZWQgZmllbGRzLCBpZ25vcmluZyBhbnkgZXh0cmEgcHJvcGVydGllc1xyXG4gIGNvbnN0IHsgdGl0bGUsIGZpbGVUeXBlLCBjb252ZXJ0ZWREYXRlIH0gPSBvcHRpb25zIHx8IHt9O1xyXG4gIFxyXG4gIGNvbnN0IG1ldGFkYXRhID0ge1xyXG4gICAgdGl0bGU6IHRpdGxlIHx8ICdVbnRpdGxlZCcsXHJcbiAgICBjb252ZXJ0ZWQ6IChjb252ZXJ0ZWREYXRlIHx8IG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCksXHJcbiAgICBmaWxlVHlwZTogZmlsZVR5cGVcclxuICB9O1xyXG5cclxuICByZXR1cm4gbWV0YWRhdGE7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGb3JtYXQgbWV0YWRhdGEgYXMgWUFNTCBmcm9udG1hdHRlclxyXG4gKiBAcGFyYW0ge29iamVjdH0gbWV0YWRhdGEgLSBNZXRhZGF0YSBvYmplY3QgdG8gZm9ybWF0XHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gRm9ybWF0dGVkIFlBTUwgZnJvbnRtYXR0ZXJcclxuICovXHJcbmZ1bmN0aW9uIGZvcm1hdE1ldGFkYXRhKG1ldGFkYXRhKSB7XHJcbiAgY29uc3QgbGluZXMgPSBbJy0tLSddO1xyXG4gIFxyXG4gIE9iamVjdC5lbnRyaWVzKG1ldGFkYXRhIHx8IHt9KS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICBpZiAodmFsdWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGxpbmVzLnB1c2goYCR7a2V5fTpgKTtcclxuICAgICAgICB2YWx1ZS5mb3JFYWNoKGl0ZW0gPT4gbGluZXMucHVzaChgICAtICR7aXRlbX1gKSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gJycpIHtcclxuICAgICAgLy8gRXNjYXBlIHNwZWNpYWwgY2hhcmFjdGVycyBhbmQgd3JhcCBpbiBxdW90ZXMgaWYgbmVlZGVkXHJcbiAgICAgIGNvbnN0IG5lZWRzUXVvdGVzID0gL1s6I1xcW1xcXXt9XCIsXFxuXS9nLnRlc3QoU3RyaW5nKHZhbHVlKSk7XHJcbiAgICAgIGNvbnN0IGVzY2FwZWRWYWx1ZSA9IFN0cmluZyh2YWx1ZSkucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xyXG4gICAgICBsaW5lcy5wdXNoKGAke2tleX06ICR7bmVlZHNRdW90ZXMgPyBgXCIke2VzY2FwZWRWYWx1ZX1cImAgOiB2YWx1ZX1gKTtcclxuICAgIH1cclxuICB9KTtcclxuICBcclxuICBsaW5lcy5wdXNoKCctLS0nLCAnJyk7XHJcbiAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGFuZCBmb3JtYXQgc3RhbmRhcmRpemVkIG1ldGFkYXRhIGFzIFlBTUwgZnJvbnRtYXR0ZXJcclxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBNZXRhZGF0YSBvcHRpb25zIChzYW1lIGFzIGNyZWF0ZVN0YW5kYXJkTWV0YWRhdGEpXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gRm9ybWF0dGVkIFlBTUwgZnJvbnRtYXR0ZXIgd2l0aCBzdGFuZGFyZGl6ZWQgbWV0YWRhdGFcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVN0YW5kYXJkRnJvbnRtYXR0ZXIob3B0aW9ucykge1xyXG4gIGNvbnN0IG1ldGFkYXRhID0gY3JlYXRlU3RhbmRhcmRNZXRhZGF0YShvcHRpb25zKTtcclxuICByZXR1cm4gZm9ybWF0TWV0YWRhdGEobWV0YWRhdGEpO1xyXG59XHJcblxyXG4vKipcclxuICogRXh0cmFjdCBtZXRhZGF0YSBmcm9tIGEgVVJMXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBVUkwgdG8gZXh0cmFjdCBtZXRhZGF0YSBmcm9tXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPG9iamVjdD59IC0gRXh0cmFjdGVkIG1ldGFkYXRhXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBleHRyYWN0TWV0YWRhdGEodXJsKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVybE9iaiA9IG5ldyBVUkwodXJsKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRpdGxlOiB1cmxPYmouaG9zdG5hbWUsXHJcbiAgICAgIHNvdXJjZTogdXJsLFxyXG4gICAgICBjYXB0dXJlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZXh0cmFjdCBtZXRhZGF0YTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzb3VyY2U6IHVybCxcclxuICAgICAgY2FwdHVyZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGVhbiBhbnkgbWV0YWRhdGEgZmllbGRzIHRoYXQgbWlnaHQgY29udGFpbiB0ZW1wb3JhcnkgZmlsZW5hbWVzXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBtZXRhZGF0YSAtIE1ldGFkYXRhIG9iamVjdCB0byBjbGVhblxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSAtIENsZWFuZWQgbWV0YWRhdGEgb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBjbGVhbk1ldGFkYXRhKG1ldGFkYXRhKSB7XHJcbiAgY29uc3QgY2xlYW5lZE1ldGFkYXRhID0geyAuLi5tZXRhZGF0YSB9O1xyXG4gIFxyXG4gIGlmIChjbGVhbmVkTWV0YWRhdGEub3JpZ2luYWxGaWxlICYmIHR5cGVvZiBjbGVhbmVkTWV0YWRhdGEub3JpZ2luYWxGaWxlID09PSAnc3RyaW5nJykge1xyXG4gICAgY2xlYW5lZE1ldGFkYXRhLm9yaWdpbmFsRmlsZSA9IGNsZWFuVGVtcG9yYXJ5RmlsZW5hbWUoY2xlYW5lZE1ldGFkYXRhLm9yaWdpbmFsRmlsZSk7XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiBjbGVhbmVkTWV0YWRhdGE7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY2xlYW4gdGVtcG9yYXJ5IGZpbGVuYW1lc1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZW5hbWUgLSBUaGUgZmlsZW5hbWUgdG8gY2xlYW5cclxuICogQHJldHVybnMge3N0cmluZ30gLSBUaGUgY2xlYW5lZCBmaWxlbmFtZVxyXG4gKi9cclxuZnVuY3Rpb24gY2xlYW5UZW1wb3JhcnlGaWxlbmFtZShmaWxlbmFtZSkge1xyXG4gIGlmICghZmlsZW5hbWUgfHwgdHlwZW9mIGZpbGVuYW1lICE9PSAnc3RyaW5nJykge1xyXG4gICAgY29uc29sZS53YXJuKGDimqDvuI8gSW52YWxpZCBpbnB1dCB0byBjbGVhblRlbXBvcmFyeUZpbGVuYW1lOiAke2ZpbGVuYW1lfWApO1xyXG4gICAgcmV0dXJuIGZpbGVuYW1lIHx8ICcnO1xyXG4gIH1cclxuICBcclxuICB0cnkge1xyXG4gICAgLy8gRXh0cmFjdCB0aGUgYmFzZSBuYW1lIHdpdGhvdXQgZXh0ZW5zaW9uXHJcbiAgICBjb25zdCBleHRlbnNpb24gPSBmaWxlbmFtZS5pbmNsdWRlcygnLicpID8gZmlsZW5hbWUuc3Vic3RyaW5nKGZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJykpIDogJyc7XHJcbiAgICBjb25zdCBiYXNlTmFtZSA9IGZpbGVuYW1lLmluY2x1ZGVzKCcuJykgPyBmaWxlbmFtZS5zdWJzdHJpbmcoMCwgZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKSkgOiBmaWxlbmFtZTtcclxuICAgIFxyXG4gICAgLy8gQ2xlYW4gdGhlIGJhc2UgbmFtZSAtIHJlbW92ZSB0ZW1wXyBwcmVmaXggYW5kIGFueSBudW1lcmljIGlkZW50aWZpZXJzXHJcbiAgICBsZXQgY2xlYW5lZE5hbWUgPSBiYXNlTmFtZTtcclxuICAgIGlmIChiYXNlTmFtZS5zdGFydHNXaXRoKCd0ZW1wXycpKSB7XHJcbiAgICAgIGNsZWFuZWROYW1lID0gYmFzZU5hbWUucmVwbGFjZSgvXnRlbXBfXFxkKl8/LywgJycpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBSZXR1cm4gdGhlIGNsZWFuZWQgbmFtZSB3aXRoIGV4dGVuc2lvbiBpZiBpdCBoYWQgb25lXHJcbiAgICByZXR1cm4gY2xlYW5lZE5hbWUgKyBleHRlbnNpb247XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBFcnJvciBpbiBjbGVhblRlbXBvcmFyeUZpbGVuYW1lOmAsIGVycm9yKTtcclxuICAgIHJldHVybiBmaWxlbmFtZTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIGNyZWF0ZVN0YW5kYXJkTWV0YWRhdGEsXHJcbiAgZm9ybWF0TWV0YWRhdGEsXHJcbiAgY3JlYXRlU3RhbmRhcmRGcm9udG1hdHRlcixcclxuICBleHRyYWN0TWV0YWRhdGEsXHJcbiAgY2xlYW5NZXRhZGF0YSxcclxuICBjbGVhblRlbXBvcmFyeUZpbGVuYW1lXHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBU0Esc0JBQXNCQSxDQUFDQyxPQUFPLEVBQUU7RUFDdkM7RUFDQSxNQUFNO0lBQUVDLEtBQUs7SUFBRUMsUUFBUTtJQUFFQztFQUFjLENBQUMsR0FBR0gsT0FBTyxJQUFJLENBQUMsQ0FBQztFQUV4RCxNQUFNSSxRQUFRLEdBQUc7SUFDZkgsS0FBSyxFQUFFQSxLQUFLLElBQUksVUFBVTtJQUMxQkksU0FBUyxFQUFFLENBQUNGLGFBQWEsSUFBSSxJQUFJRyxJQUFJLENBQUMsQ0FBQyxFQUFFQyxXQUFXLENBQUMsQ0FBQztJQUN0REwsUUFBUSxFQUFFQTtFQUNaLENBQUM7RUFFRCxPQUFPRSxRQUFRO0FBQ2pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTSSxjQUFjQSxDQUFDSixRQUFRLEVBQUU7RUFDaEMsTUFBTUssS0FBSyxHQUFHLENBQUMsS0FBSyxDQUFDO0VBRXJCQyxNQUFNLENBQUNDLE9BQU8sQ0FBQ1AsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNRLE9BQU8sQ0FBQyxDQUFDLENBQUNDLEdBQUcsRUFBRUMsS0FBSyxDQUFDLEtBQUs7SUFDdkQsSUFBSUMsS0FBSyxDQUFDQyxPQUFPLENBQUNGLEtBQUssQ0FBQyxFQUFFO01BQ3hCLElBQUlBLEtBQUssQ0FBQ0csTUFBTSxHQUFHLENBQUMs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