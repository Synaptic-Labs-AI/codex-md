"use strict";

/**
 * FileSystem IPC Handlers
 * Implements handlers for file system operations using the FileSystemService.
 * 
 * Related files:
 * - services/FileSystemService.js: Core file system operations
 * - ipc/types.js: Type definitions for IPC messages
 * - handlers/filesystem/largeFileTransfer.js: Handlers for large file transfers
 */

const {
  ipcMain,
  dialog
} = require('electron');
const {
  IPCChannels
} = require('../../types');
const {
  instance: FileSystemService
} = require('../../../services/FileSystemService'); // Import instance
const {
  registerLargeFileTransferHandlers,
  cleanupLargeFileTransfers
} = require('./largeFileTransfer');

/**
 * Registers all file system IPC handlers
 */
function registerFileSystemHandlers() {
  // Register large file transfer handlers
  registerLargeFileTransferHandlers();

  // Read file contents
  ipcMain.handle(IPCChannels.READ_FILE, async (event, request) => {
    if (!request?.path) {
      return {
        success: false,
        error: 'Invalid request: path is required'
      };
    }
    return await FileSystemService.readFile(request.path);
  });

  // Write file contents
  ipcMain.handle(IPCChannels.WRITE_FILE, async (event, request) => {
    if (!request?.path || !request?.content) {
      return {
        success: false,
        error: 'Invalid request: path and content are required'
      };
    }
    return await FileSystemService.writeFile(request.path, request.content);
  });

  // Create directory
  ipcMain.handle(IPCChannels.CREATE_DIRECTORY, async (event, request) => {
    if (!request?.path) {
      return {
        success: false,
        error: 'Invalid request: path is required'
      };
    }
    return await FileSystemService.createDirectory(request.path);
  });

  // List directory contents
  ipcMain.handle(IPCChannels.LIST_DIRECTORY, async (event, request) => {
    if (!request?.path) {
      return {
        success: false,
        error: 'Invalid request: path is required'
      };
    }
    return await FileSystemService.listDirectory(request.path, {
      recursive: request.recursive,
      extensions: request.extensions
    });
  });

  // Delete file or directory
  ipcMain.handle(IPCChannels.DELETE_ITEM, async (event, request) => {
    if (!request?.path) {
      return {
        success: false,
        error: 'Invalid request: path is required'
      };
    }
    return await FileSystemService.delete(request.path, request.recursive);
  });

  // Get file or directory stats
  ipcMain.handle(IPCChannels.GET_STATS, async (event, request) => {
    if (!request?.path) {
      return {
        success: false,
        error: 'Invalid request: path is required'
      };
    }
    return await FileSystemService.getStats(request.path);
  });

  // Move file or directory
  ipcMain.handle(IPCChannels.MOVE_ITEM, async (event, request) => {
    if (!request?.sourcePath || !request?.destPath) {
      return {
        success: false,
        error: 'Invalid request: sourcePath and destPath are required'
      };
    }
    return await FileSystemService.move(request.sourcePath, request.destPath);
  });

  // Enhanced directory selection with filters
  ipcMain.handle(IPCChannels.SELECT_DIRECTORY, async () => {
    const result = await dialog.showOpenDialog({
      properties: ['openDirectory', 'createDirectory'],
      title: 'Select Target Directory',
      buttonLabel: 'Select Directory'
    });
    if (result.canceled) {
      return {
        success: false,
        reason: 'USER_CANCELLED'
      };
    }
    return {
      success: true,
      path: result.filePaths[0]
    };
  });

  // Select input directory
  ipcMain.handle('codex:fs:select-input-directory', async (event, request) => {
    const options = {
      properties: ['openDirectory', 'createDirectory'],
      title: 'Select Input Directory',
      buttonLabel: 'Select Directory'
    };

    // Add filters if provided
    if (request?.filters) {
      options.filters = request.filters;
    }
    const result = await dialog.showOpenDialog(options);
    if (result.canceled) {
      return {
        success: false,
        reason: 'USER_CANCELLED'
      };
    }
    return {
      success: true,
      path: result.filePaths[0]
    };
  });

  // List directory with detailed information
  ipcMain.handle('codex:fs:list-directory', async (event, request) => {
    if (!request?.path) {
      return {
        success: false,
        error: 'Invalid request: path is required'
      };
    }
    return await FileSystemService.listDirectory(request.path, {
      recursive: request.recursive || false,
      extensions: request.extensions
    });
  });
}

/**
 * Cleans up any file system resources
 */
async function cleanupFileSystemHandlers() {
  await cleanupLargeFileTransfers();
}
module.exports = {
  registerFileSystemHandlers,
  cleanupFileSystemHandlers
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpcGNNYWluIiwiZGlhbG9nIiwicmVxdWlyZSIsIklQQ0NoYW5uZWxzIiwiaW5zdGFuY2UiLCJGaWxlU3lzdGVtU2VydmljZSIsInJlZ2lzdGVyTGFyZ2VGaWxlVHJhbnNmZXJIYW5kbGVycyIsImNsZWFudXBMYXJnZUZpbGVUcmFuc2ZlcnMiLCJyZWdpc3RlckZpbGVTeXN0ZW1IYW5kbGVycyIsImhhbmRsZSIsIlJFQURfRklMRSIsImV2ZW50IiwicmVxdWVzdCIsInBhdGgiLCJzdWNjZXNzIiwiZXJyb3IiLCJyZWFkRmlsZSIsIldSSVRFX0ZJTEUiLCJjb250ZW50Iiwid3JpdGVGaWxlIiwiQ1JFQVRFX0RJUkVDVE9SWSIsImNyZWF0ZURpcmVjdG9yeSIsIkxJU1RfRElSRUNUT1JZIiwibGlzdERpcmVjdG9yeSIsInJlY3Vyc2l2ZSIsImV4dGVuc2lvbnMiLCJERUxFVEVfSVRFTSIsImRlbGV0ZSIsIkdFVF9TVEFUUyIsImdldFN0YXRzIiwiTU9WRV9JVEVNIiwic291cmNlUGF0aCIsImRlc3RQYXRoIiwibW92ZSIsIlNFTEVDVF9ESVJFQ1RPUlkiLCJyZXN1bHQiLCJzaG93T3BlbkRpYWxvZyIsInByb3BlcnRpZXMiLCJ0aXRsZSIsImJ1dHRvbkxhYmVsIiwiY2FuY2VsZWQiLCJyZWFzb24iLCJmaWxlUGF0aHMiLCJvcHRpb25zIiwiZmlsdGVycyIsImNsZWFudXBGaWxlU3lzdGVtSGFuZGxlcnMiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2VsZWN0cm9uL2lwYy9oYW5kbGVycy9maWxlc3lzdGVtL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBGaWxlU3lzdGVtIElQQyBIYW5kbGVyc1xyXG4gKiBJbXBsZW1lbnRzIGhhbmRsZXJzIGZvciBmaWxlIHN5c3RlbSBvcGVyYXRpb25zIHVzaW5nIHRoZSBGaWxlU3lzdGVtU2VydmljZS5cclxuICogXHJcbiAqIFJlbGF0ZWQgZmlsZXM6XHJcbiAqIC0gc2VydmljZXMvRmlsZVN5c3RlbVNlcnZpY2UuanM6IENvcmUgZmlsZSBzeXN0ZW0gb3BlcmF0aW9uc1xyXG4gKiAtIGlwYy90eXBlcy5qczogVHlwZSBkZWZpbml0aW9ucyBmb3IgSVBDIG1lc3NhZ2VzXHJcbiAqIC0gaGFuZGxlcnMvZmlsZXN5c3RlbS9sYXJnZUZpbGVUcmFuc2Zlci5qczogSGFuZGxlcnMgZm9yIGxhcmdlIGZpbGUgdHJhbnNmZXJzXHJcbiAqL1xyXG5cclxuY29uc3QgeyBpcGNNYWluLCBkaWFsb2cgfSA9IHJlcXVpcmUoJ2VsZWN0cm9uJyk7XHJcbmNvbnN0IHsgSVBDQ2hhbm5lbHMgfSA9IHJlcXVpcmUoJy4uLy4uL3R5cGVzJyk7XHJcbmNvbnN0IHsgaW5zdGFuY2U6IEZpbGVTeXN0ZW1TZXJ2aWNlIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zZXJ2aWNlcy9GaWxlU3lzdGVtU2VydmljZScpOyAvLyBJbXBvcnQgaW5zdGFuY2VcclxuY29uc3QgeyByZWdpc3RlckxhcmdlRmlsZVRyYW5zZmVySGFuZGxlcnMsIGNsZWFudXBMYXJnZUZpbGVUcmFuc2ZlcnMgfSA9IHJlcXVpcmUoJy4vbGFyZ2VGaWxlVHJhbnNmZXInKTtcclxuXHJcbi8qKlxyXG4gKiBSZWdpc3RlcnMgYWxsIGZpbGUgc3lzdGVtIElQQyBoYW5kbGVyc1xyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJGaWxlU3lzdGVtSGFuZGxlcnMoKSB7XHJcbiAgLy8gUmVnaXN0ZXIgbGFyZ2UgZmlsZSB0cmFuc2ZlciBoYW5kbGVyc1xyXG4gIHJlZ2lzdGVyTGFyZ2VGaWxlVHJhbnNmZXJIYW5kbGVycygpO1xyXG4gIFxyXG4gIC8vIFJlYWQgZmlsZSBjb250ZW50c1xyXG4gIGlwY01haW4uaGFuZGxlKElQQ0NoYW5uZWxzLlJFQURfRklMRSwgYXN5bmMgKGV2ZW50LCByZXF1ZXN0KSA9PiB7XHJcbiAgICBpZiAoIXJlcXVlc3Q/LnBhdGgpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW52YWxpZCByZXF1ZXN0OiBwYXRoIGlzIHJlcXVpcmVkJyB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGF3YWl0IEZpbGVTeXN0ZW1TZXJ2aWNlLnJlYWRGaWxlKHJlcXVlc3QucGF0aCk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIFdyaXRlIGZpbGUgY29udGVudHNcclxuICBpcGNNYWluLmhhbmRsZShJUENDaGFubmVscy5XUklURV9GSUxFLCBhc3luYyAoZXZlbnQsIHJlcXVlc3QpID0+IHtcclxuICAgIGlmICghcmVxdWVzdD8ucGF0aCB8fCAhcmVxdWVzdD8uY29udGVudCkge1xyXG4gICAgICByZXR1cm4geyBcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIHJlcXVlc3Q6IHBhdGggYW5kIGNvbnRlbnQgYXJlIHJlcXVpcmVkJyBcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBhd2FpdCBGaWxlU3lzdGVtU2VydmljZS53cml0ZUZpbGUocmVxdWVzdC5wYXRoLCByZXF1ZXN0LmNvbnRlbnQpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBDcmVhdGUgZGlyZWN0b3J5XHJcbiAgaXBjTWFpbi5oYW5kbGUoSVBDQ2hhbm5lbHMuQ1JFQVRFX0RJUkVDVE9SWSwgYXN5bmMgKGV2ZW50LCByZXF1ZXN0KSA9PiB7XHJcbiAgICBpZiAoIXJlcXVlc3Q/LnBhdGgpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW52YWxpZCByZXF1ZXN0OiBwYXRoIGlzIHJlcXVpcmVkJyB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGF3YWl0IEZpbGVTeXN0ZW1TZXJ2aWNlLmNyZWF0ZURpcmVjdG9yeShyZXF1ZXN0LnBhdGgpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBMaXN0IGRpcmVjdG9yeSBjb250ZW50c1xyXG4gIGlwY01haW4uaGFuZGxlKElQQ0NoYW5uZWxzLkxJU1RfRElSRUNUT1JZLCBhc3luYyAoZXZlbnQsIHJlcXVlc3QpID0+IHtcclxuICAgIGlmICghcmVxdWVzdD8ucGF0aCkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZhbGlkIHJlcXVlc3Q6IHBhdGggaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXdhaXQgRmlsZVN5c3RlbVNlcnZpY2UubGlzdERpcmVjdG9yeShyZXF1ZXN0LnBhdGgsIHtcclxuICAgICAgcmVjdXJzaXZlOiByZXF1ZXN0LnJlY3Vyc2l2ZSxcclxuICAgICAgZXh0ZW5zaW9uczogcmVxdWVzdC5leHRlbnNpb25zXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8gRGVsZXRlIGZpbGUgb3IgZGlyZWN0b3J5XHJcbiAgaXBjTWFpbi5oYW5kbGUoSVBDQ2hhbm5lbHMuREVMRVRFX0lURU0sIGFzeW5jIChldmVudCwgcmVxdWVzdCkgPT4ge1xyXG4gICAgaWYgKCFyZXF1ZXN0Py5wYXRoKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ludmFsaWQgcmVxdWVzdDogcGF0aCBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBhd2FpdCBGaWxlU3lzdGVtU2VydmljZS5kZWxldGUocmVxdWVzdC5wYXRoLCByZXF1ZXN0LnJlY3Vyc2l2ZSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEdldCBmaWxlIG9yIGRpcmVjdG9yeSBzdGF0c1xyXG4gIGlwY01haW4uaGFuZGxlKElQQ0NoYW5uZWxzLkdFVF9TVEFUUywgYXN5bmMgKGV2ZW50LCByZXF1ZXN0KSA9PiB7XHJcbiAgICBpZiAoIXJlcXVlc3Q/LnBhdGgpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW52YWxpZCByZXF1ZXN0OiBwYXRoIGlzIHJlcXVpcmVkJyB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGF3YWl0IEZpbGVTeXN0ZW1TZXJ2aWNlLmdldFN0YXRzKHJlcXVlc3QucGF0aCk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIE1vdmUgZmlsZSBvciBkaXJlY3RvcnlcclxuICBpcGNNYWluLmhhbmRsZShJUENDaGFubmVscy5NT1ZFX0lURU0sIGFzeW5jIChldmVudCwgcmVxdWVzdCkgPT4ge1xyXG4gICAgaWYgKCFyZXF1ZXN0Py5zb3VyY2VQYXRoIHx8ICFyZXF1ZXN0Py5kZXN0UGF0aCkge1xyXG4gICAgICByZXR1cm4geyBcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIHJlcXVlc3Q6IHNvdXJjZVBhdGggYW5kIGRlc3RQYXRoIGFyZSByZXF1aXJlZCcgXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXdhaXQgRmlsZVN5c3RlbVNlcnZpY2UubW92ZShyZXF1ZXN0LnNvdXJjZVBhdGgsIHJlcXVlc3QuZGVzdFBhdGgpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBFbmhhbmNlZCBkaXJlY3Rvcnkgc2VsZWN0aW9uIHdpdGggZmlsdGVyc1xyXG4gIGlwY01haW4uaGFuZGxlKElQQ0NoYW5uZWxzLlNFTEVDVF9ESVJFQ1RPUlksIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpYWxvZy5zaG93T3BlbkRpYWxvZyh7XHJcbiAgICAgIHByb3BlcnRpZXM6IFsnb3BlbkRpcmVjdG9yeScsICdjcmVhdGVEaXJlY3RvcnknXSxcclxuICAgICAgdGl0bGU6ICdTZWxlY3QgVGFyZ2V0IERpcmVjdG9yeScsXHJcbiAgICAgIGJ1dHRvbkxhYmVsOiAnU2VsZWN0IERpcmVjdG9yeSdcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBpZiAocmVzdWx0LmNhbmNlbGVkKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCByZWFzb246ICdVU0VSX0NBTkNFTExFRCcgfTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHsgXHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsIFxyXG4gICAgICBwYXRoOiByZXN1bHQuZmlsZVBhdGhzWzBdXHJcbiAgICB9O1xyXG4gIH0pO1xyXG4gIFxyXG4gIC8vIFNlbGVjdCBpbnB1dCBkaXJlY3RvcnlcclxuICBpcGNNYWluLmhhbmRsZSgnY29kZXg6ZnM6c2VsZWN0LWlucHV0LWRpcmVjdG9yeScsIGFzeW5jIChldmVudCwgcmVxdWVzdCkgPT4ge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgcHJvcGVydGllczogWydvcGVuRGlyZWN0b3J5JywgJ2NyZWF0ZURpcmVjdG9yeSddLFxyXG4gICAgICB0aXRsZTogJ1NlbGVjdCBJbnB1dCBEaXJlY3RvcnknLFxyXG4gICAgICBidXR0b25MYWJlbDogJ1NlbGVjdCBEaXJlY3RvcnknXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBBZGQgZmlsdGVycyBpZiBwcm92aWRlZFxyXG4gICAgaWYgKHJlcXVlc3Q/LmZpbHRlcnMpIHtcclxuICAgICAgb3B0aW9ucy5maWx0ZXJzID0gcmVxdWVzdC5maWx0ZXJzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaWFsb2cuc2hvd09wZW5EaWFsb2cob3B0aW9ucyk7XHJcbiAgICBcclxuICAgIGlmIChyZXN1bHQuY2FuY2VsZWQpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIHJlYXNvbjogJ1VTRVJfQ0FOQ0VMTEVEJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4geyBcclxuICAgICAgc3VjY2VzczogdHJ1ZSwgXHJcbiAgICAgIHBhdGg6IHJlc3VsdC5maWxlUGF0aHNbMF1cclxuICAgIH07XHJcbiAgfSk7XHJcbiAgXHJcbiAgLy8gTGlzdCBkaXJlY3Rvcnkgd2l0aCBkZXRhaWxlZCBpbmZvcm1hdGlvblxyXG4gIGlwY01haW4uaGFuZGxlKCdjb2RleDpmczpsaXN0LWRpcmVjdG9yeScsIGFzeW5jIChldmVudCwgcmVxdWVzdCkgPT4ge1xyXG4gICAgaWYgKCFyZXF1ZXN0Py5wYXRoKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ludmFsaWQgcmVxdWVzdDogcGF0aCBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGF3YWl0IEZpbGVTeXN0ZW1TZXJ2aWNlLmxpc3REaXJlY3RvcnkocmVxdWVzdC5wYXRoLCB7XHJcbiAgICAgIHJlY3Vyc2l2ZTogcmVxdWVzdC5yZWN1cnNpdmUgfHwgZmFsc2UsXHJcbiAgICAgIGV4dGVuc2lvbnM6IHJlcXVlc3QuZXh0ZW5zaW9uc1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGVhbnMgdXAgYW55IGZpbGUgc3lzdGVtIHJlc291cmNlc1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY2xlYW51cEZpbGVTeXN0ZW1IYW5kbGVycygpIHtcclxuICBhd2FpdCBjbGVhbnVwTGFyZ2VGaWxlVHJhbnNmZXJzKCk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIHJlZ2lzdGVyRmlsZVN5c3RlbUhhbmRsZXJzLFxyXG4gIGNsZWFudXBGaWxlU3lzdGVtSGFuZGxlcnNcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNO0VBQUVBLE9BQU87RUFBRUM7QUFBTyxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDL0MsTUFBTTtFQUFFQztBQUFZLENBQUMsR0FBR0QsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUM5QyxNQUFNO0VBQUVFLFFBQVEsRUFBRUM7QUFBa0IsQ0FBQyxHQUFHSCxPQUFPLENBQUMscUNBQXFDLENBQUMsQ0FBQyxDQUFDO0FBQ3hGLE1BQU07RUFBRUksaUNBQWlDO0VBQUVDO0FBQTBCLENBQUMsR0FBR0wsT0FBTyxDQUFDLHFCQUFxQixDQUFDOztBQUV2RztBQUNBO0FBQ0E7QUFDQSxTQUFT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