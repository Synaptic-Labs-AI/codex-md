"use strict";

/**
 * File type detection and categorization utilities
 * Provides centralized file type handling for the electron process
 * 
 * This file is used by electron services and IPC handlers to determine
 * how files should be processed and what converters to use.
 * 
 * Connected to:
 * - src/electron/converters/UnifiedConverterFactory.js
 * - src/electron/services/ElectronConversionService.js
 * - src/electron/ipc/handlers/conversion/
 */

// File Categories - Group similar file types
const FILE_CATEGORIES = {
  documents: ['pdf', 'docx', 'pptx', 'rtf', 'txt', 'md'],
  audio: ['mp3', 'wav', 'ogg', 'm4a', 'aac', 'wma'],
  video: ['mp4', 'mov', 'avi', 'mkv', 'webm'],
  data: ['csv', 'xlsx', 'xls', 'json', 'yaml'],
  web: ['url', 'parenturl']
};

// File handling types - How the file should be processed
const HANDLING_TYPES = {
  BINARY: 'binary',
  // Read as buffer
  TEXT: 'text',
  // Read as UTF-8
  URL: 'url' // Process as URL
};

// Converter configuration - Maps file types to their handling requirements
const CONVERTER_CONFIG = {
  // Documents
  docx: {
    handling: HANDLING_TYPES.BINARY,
    converter: 'text',
    requiresOcr: false
  },
  pptx: {
    handling: HANDLING_TYPES.BINARY,
    converter: 'text',
    requiresOcr: false
  },
  pdf: {
    handling: HANDLING_TYPES.BINARY,
    converter: 'pdf',
    requiresOcr: true
  },
  // Data files
  xlsx: {
    handling: HANDLING_TYPES.BINARY,
    converter: 'data',
    requiresOcr: false
  },
  csv: {
    handling: HANDLING_TYPES.TEXT,
    converter: 'data',
    requiresOcr: false
  },
  // Media files
  mp3: {
    handling: HANDLING_TYPES.BINARY,
    converter: 'audio',
    requiresOcr: false
  },
  wav: {
    handling: HANDLING_TYPES.BINARY,
    converter: 'audio',
    requiresOcr: false
  },
  mp4: {
    handling: HANDLING_TYPES.BINARY,
    converter: 'video',
    requiresOcr: false
  }
};

// List of types that require an API key
const API_REQUIRED_TYPES = ['mp3', 'wav', 'ogg', 'm4a', 'mpga',
// Audio
'mp4', 'webm', 'avi', 'mov', 'mpeg' // Video
];

/**
 * Get comprehensive file handling information
 * @param {string|Object} file - File to analyze
 * @returns {Object} Complete file handling details including type, category, and handling requirements
 */
function getFileHandlingInfo(file) {
  // Get basic file info
  const fileName = typeof file === 'string' ? file : file.name || file.originalFileName || 'unknown';
  const fileType = fileName.split('.').pop().toLowerCase();

  // Handle web content types
  if (typeof file === 'object' && file.type && ['url', 'parenturl'].includes(file.type)) {
    return {
      fileName,
      fileType: file.type,
      category: 'web',
      handling: HANDLING_TYPES.URL,
      converter: file.type,
      // Preserve original type (url/parenturl)
      requiresOcr: false,
      isWeb: true,
      isBinary: false
    };
  }

  // Get category
  let category = 'unknown';
  for (const [cat, extensions] of Object.entries(FILE_CATEGORIES)) {
    if (extensions.includes(fileType)) {
      category = cat;
      break;
    }
  }

  // Get converter config
  const config = CONVERTER_CONFIG[fileType] || {
    handling: HANDLING_TYPES.TEXT,
    converter: 'text',
    requiresOcr: false
  };
  return {
    fileName,
    fileType,
    category,
    ...config,
    isWeb: category === 'web',
    isBinary: config.handling === HANDLING_TYPES.BINARY,
    requiresApiKey: API_REQUIRED_TYPES.includes(fileType)
  };
}

/**
 * Convert a File object to buffer or text based on handling type
 * @param {Object} file - File to process
 * @returns {Promise<Buffer|string>} Processed content
 */
function getFileContent(file) {
  const info = getFileHandlingInfo(file);
  if (info.isBinary) {
    return file.buffer || Buffer.from(file.arrayBuffer || []);
  }
  return file.text || '';
}

/**
 * Get the category of a file
 * @param {string|Object} file - File to analyze
 * @returns {string} File category
 */
function getFileType(file) {
  const info = getFileHandlingInfo(file);
  return info.category;
}

/**
 * Check if a file requires an API key
 * @param {string|Object} file - File to analyze
 * @returns {boolean} Whether the file requires an API key
 */
function requiresApiKey(file) {
  const info = getFileHandlingInfo(file);
  return info.requiresApiKey;
}

// CommonJS exports
module.exports = {
  FILE_CATEGORIES,
  HANDLING_TYPES,
  CONVERTER_CONFIG,
  API_REQUIRED_TYPES,
  getFileHandlingInfo,
  getFileContent,
  getFileType,
  requiresApiKey
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJGSUxFX0NBVEVHT1JJRVMiLCJkb2N1bWVudHMiLCJhdWRpbyIsInZpZGVvIiwiZGF0YSIsIndlYiIsIkhBTkRMSU5HX1RZUEVTIiwiQklOQVJZIiwiVEVYVCIsIlVSTCIsIkNPTlZFUlRFUl9DT05GSUciLCJkb2N4IiwiaGFuZGxpbmciLCJjb252ZXJ0ZXIiLCJyZXF1aXJlc09jciIsInBwdHgiLCJwZGYiLCJ4bHN4IiwiY3N2IiwibXAzIiwid2F2IiwibXA0IiwiQVBJX1JFUVVJUkVEX1RZUEVTIiwiZ2V0RmlsZUhhbmRsaW5nSW5mbyIsImZpbGUiLCJmaWxlTmFtZSIsIm5hbWUiLCJvcmlnaW5hbEZpbGVOYW1lIiwiZmlsZVR5cGUiLCJzcGxpdCIsInBvcCIsInRvTG93ZXJDYXNlIiwidHlwZSIsImluY2x1ZGVzIiwiY2F0ZWdvcnkiLCJpc1dlYiIsImlzQmluYXJ5IiwiY2F0IiwiZXh0ZW5zaW9ucyIsIk9iamVjdCIsImVudHJpZXMiLCJjb25maWciLCJyZXF1aXJlc0FwaUtleSIsImdldEZpbGVDb250ZW50IiwiaW5mbyIsImJ1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJhcnJheUJ1ZmZlciIsInRleHQiLCJnZXRGaWxlVHlwZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvZWxlY3Ryb24vdXRpbHMvZmlsZXMvdHlwZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEZpbGUgdHlwZSBkZXRlY3Rpb24gYW5kIGNhdGVnb3JpemF0aW9uIHV0aWxpdGllc1xyXG4gKiBQcm92aWRlcyBjZW50cmFsaXplZCBmaWxlIHR5cGUgaGFuZGxpbmcgZm9yIHRoZSBlbGVjdHJvbiBwcm9jZXNzXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgdXNlZCBieSBlbGVjdHJvbiBzZXJ2aWNlcyBhbmQgSVBDIGhhbmRsZXJzIHRvIGRldGVybWluZVxyXG4gKiBob3cgZmlsZXMgc2hvdWxkIGJlIHByb2Nlc3NlZCBhbmQgd2hhdCBjb252ZXJ0ZXJzIHRvIHVzZS5cclxuICogXHJcbiAqIENvbm5lY3RlZCB0bzpcclxuICogLSBzcmMvZWxlY3Ryb24vY29udmVydGVycy9VbmlmaWVkQ29udmVydGVyRmFjdG9yeS5qc1xyXG4gKiAtIHNyYy9lbGVjdHJvbi9zZXJ2aWNlcy9FbGVjdHJvbkNvbnZlcnNpb25TZXJ2aWNlLmpzXHJcbiAqIC0gc3JjL2VsZWN0cm9uL2lwYy9oYW5kbGVycy9jb252ZXJzaW9uL1xyXG4gKi9cclxuXHJcbi8vIEZpbGUgQ2F0ZWdvcmllcyAtIEdyb3VwIHNpbWlsYXIgZmlsZSB0eXBlc1xyXG5jb25zdCBGSUxFX0NBVEVHT1JJRVMgPSB7XHJcbiAgZG9jdW1lbnRzOiBbJ3BkZicsICdkb2N4JywgJ3BwdHgnLCAncnRmJywgJ3R4dCcsICdtZCddLFxyXG4gIGF1ZGlvOiBbJ21wMycsICd3YXYnLCAnb2dnJywgJ200YScsICdhYWMnLCAnd21hJ10sXHJcbiAgdmlkZW86IFsnbXA0JywgJ21vdicsICdhdmknLCAnbWt2JywgJ3dlYm0nXSxcclxuICBkYXRhOiBbJ2NzdicsICd4bHN4JywgJ3hscycsICdqc29uJywgJ3lhbWwnXSxcclxuICB3ZWI6IFsndXJsJywgJ3BhcmVudHVybCddXHJcbn07XHJcblxyXG4vLyBGaWxlIGhhbmRsaW5nIHR5cGVzIC0gSG93IHRoZSBmaWxlIHNob3VsZCBiZSBwcm9jZXNzZWRcclxuY29uc3QgSEFORExJTkdfVFlQRVMgPSB7XHJcbiAgQklOQVJZOiAnYmluYXJ5JywgICAgLy8gUmVhZCBhcyBidWZmZXJcclxuICBURVhUOiAndGV4dCcsICAgICAgIC8vIFJlYWQgYXMgVVRGLThcclxuICBVUkw6ICd1cmwnICAgICAgICAgLy8gUHJvY2VzcyBhcyBVUkxcclxufTtcclxuXHJcbi8vIENvbnZlcnRlciBjb25maWd1cmF0aW9uIC0gTWFwcyBmaWxlIHR5cGVzIHRvIHRoZWlyIGhhbmRsaW5nIHJlcXVpcmVtZW50c1xyXG5jb25zdCBDT05WRVJURVJfQ09ORklHID0ge1xyXG4gIC8vIERvY3VtZW50c1xyXG4gIGRvY3g6IHtcclxuICAgIGhhbmRsaW5nOiBIQU5ETElOR19UWVBFUy5CSU5BUlksXHJcbiAgICBjb252ZXJ0ZXI6ICd0ZXh0JyxcclxuICAgIHJlcXVpcmVzT2NyOiBmYWxzZVxyXG4gIH0sXHJcbiAgcHB0eDoge1xyXG4gICAgaGFuZGxpbmc6IEhBTkRMSU5HX1RZUEVTLkJJTkFSWSxcclxuICAgIGNvbnZlcnRlcjogJ3RleHQnLFxyXG4gICAgcmVxdWlyZXNPY3I6IGZhbHNlXHJcbiAgfSxcclxuICBwZGY6IHtcclxuICAgIGhhbmRsaW5nOiBIQU5ETElOR19UWVBFUy5CSU5BUlksXHJcbiAgICBjb252ZXJ0ZXI6ICdwZGYnLFxyXG4gICAgcmVxdWlyZXNPY3I6IHRydWVcclxuICB9LFxyXG4gIFxyXG4gIC8vIERhdGEgZmlsZXNcclxuICB4bHN4OiB7XHJcbiAgICBoYW5kbGluZzogSEFORExJTkdfVFlQRVMuQklOQVJZLFxyXG4gICAgY29udmVydGVyOiAnZGF0YScsXHJcbiAgICByZXF1aXJlc09jcjogZmFsc2VcclxuICB9LFxyXG4gIGNzdjoge1xyXG4gICAgaGFuZGxpbmc6IEhBTkRMSU5HX1RZUEVTLlRFWFQsXHJcbiAgICBjb252ZXJ0ZXI6ICdkYXRhJyxcclxuICAgIHJlcXVpcmVzT2NyOiBmYWxzZVxyXG4gIH0sXHJcbiAgXHJcbiAgLy8gTWVkaWEgZmlsZXNcclxuICBtcDM6IHtcclxuICAgIGhhbmRsaW5nOiBIQU5ETElOR19UWVBFUy5CSU5BUlksXHJcbiAgICBjb252ZXJ0ZXI6ICdhdWRpbycsXHJcbiAgICByZXF1aXJlc09jcjogZmFsc2VcclxuICB9LFxyXG4gIHdhdjoge1xyXG4gICAgaGFuZGxpbmc6IEhBTkRMSU5HX1RZUEVTLkJJTkFSWSxcclxuICAgIGNvbnZlcnRlcjogJ2F1ZGlvJyxcclxuICAgIHJlcXVpcmVzT2NyOiBmYWxzZVxyXG4gIH0sXHJcbiAgbXA0OiB7XHJcbiAgICBoYW5kbGluZzogSEFORExJTkdfVFlQRVMuQklOQVJZLFxyXG4gICAgY29udmVydGVyOiAndmlkZW8nLFxyXG4gICAgcmVxdWlyZXNPY3I6IGZhbHNlXHJcbiAgfVxyXG59O1xyXG5cclxuLy8gTGlzdCBvZiB0eXBlcyB0aGF0IHJlcXVpcmUgYW4gQVBJIGtleVxyXG5jb25zdCBBUElfUkVRVUlSRURfVFlQRVMgPSBbXHJcbiAgJ21wMycsICd3YXYnLCAnb2dnJywgJ200YScsICdtcGdhJywgIC8vIEF1ZGlvXHJcbiAgJ21wNCcsICd3ZWJtJywgJ2F2aScsICdtb3YnLCAnbXBlZycgICAvLyBWaWRlb1xyXG5dO1xyXG5cclxuLyoqXHJcbiAqIEdldCBjb21wcmVoZW5zaXZlIGZpbGUgaGFuZGxpbmcgaW5mb3JtYXRpb25cclxuICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBmaWxlIC0gRmlsZSB0byBhbmFseXplXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IENvbXBsZXRlIGZpbGUgaGFuZGxpbmcgZGV0YWlscyBpbmNsdWRpbmcgdHlwZSwgY2F0ZWdvcnksIGFuZCBoYW5kbGluZyByZXF1aXJlbWVudHNcclxuICovXHJcbmZ1bmN0aW9uIGdldEZpbGVIYW5kbGluZ0luZm8oZmlsZSkge1xyXG4gIC8vIEdldCBiYXNpYyBmaWxlIGluZm9cclxuICBjb25zdCBmaWxlTmFtZSA9IHR5cGVvZiBmaWxlID09PSAnc3RyaW5nJyA/IGZpbGUgOiBcclxuICAgICAgICAgICAgICAgICBmaWxlLm5hbWUgfHwgZmlsZS5vcmlnaW5hbEZpbGVOYW1lIHx8ICd1bmtub3duJztcclxuICBjb25zdCBmaWxlVHlwZSA9IGZpbGVOYW1lLnNwbGl0KCcuJykucG9wKCkudG9Mb3dlckNhc2UoKTtcclxuICBcclxuICAvLyBIYW5kbGUgd2ViIGNvbnRlbnQgdHlwZXNcclxuICBpZiAodHlwZW9mIGZpbGUgPT09ICdvYmplY3QnICYmIGZpbGUudHlwZSAmJiBbJ3VybCcsICdwYXJlbnR1cmwnXS5pbmNsdWRlcyhmaWxlLnR5cGUpKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBmaWxlTmFtZSxcclxuICAgICAgZmlsZVR5cGU6IGZpbGUudHlwZSxcclxuICAgICAgY2F0ZWdvcnk6ICd3ZWInLFxyXG4gICAgICBoYW5kbGluZzogSEFORExJTkdfVFlQRVMuVVJMLFxyXG4gICAgICBjb252ZXJ0ZXI6IGZpbGUudHlwZSwgLy8gUHJlc2VydmUgb3JpZ2luYWwgdHlwZSAodXJsL3BhcmVudHVybClcclxuICAgICAgcmVxdWlyZXNPY3I6IGZhbHNlLFxyXG4gICAgICBpc1dlYjogdHJ1ZSxcclxuICAgICAgaXNCaW5hcnk6IGZhbHNlXHJcbiAgICB9O1xyXG4gIH1cclxuICBcclxuICAvLyBHZXQgY2F0ZWdvcnlcclxuICBsZXQgY2F0ZWdvcnkgPSAndW5rbm93bic7XHJcbiAgZm9yIChjb25zdCBbY2F0LCBleHRlbnNpb25zXSBvZiBPYmplY3QuZW50cmllcyhGSUxFX0NBVEVHT1JJRVMpKSB7XHJcbiAgICBpZiAoZXh0ZW5zaW9ucy5pbmNsdWRlcyhmaWxlVHlwZSkpIHtcclxuICAgICAgY2F0ZWdvcnkgPSBjYXQ7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvLyBHZXQgY29udmVydGVyIGNvbmZpZ1xyXG4gIGNvbnN0IGNvbmZpZyA9IENPTlZFUlRFUl9DT05GSUdbZmlsZVR5cGVdIHx8IHtcclxuICAgIGhhbmRsaW5nOiBIQU5ETElOR19UWVBFUy5URVhULFxyXG4gICAgY29udmVydGVyOiAndGV4dCcsXHJcbiAgICByZXF1aXJlc09jcjogZmFsc2VcclxuICB9O1xyXG4gIFxyXG4gIHJldHVybiB7XHJcbiAgICBmaWxlTmFtZSxcclxuICAgIGZpbGVUeXBlLFxyXG4gICAgY2F0ZWdvcnksXHJcbiAgICAuLi5jb25maWcsXHJcbiAgICBpc1dlYjogY2F0ZWdvcnkgPT09ICd3ZWInLFxyXG4gICAgaXNCaW5hcnk6IGNvbmZpZy5oYW5kbGluZyA9PT0gSEFORExJTkdfVFlQRVMuQklOQVJZLFxyXG4gICAgcmVxdWlyZXNBcGlLZXk6IEFQSV9SRVFVSVJFRF9UWVBFUy5pbmNsdWRlcyhmaWxlVHlwZSlcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQ29udmVydCBhIEZpbGUgb2JqZWN0IHRvIGJ1ZmZlciBvciB0ZXh0IGJhc2VkIG9uIGhhbmRsaW5nIHR5cGVcclxuICogQHBhcmFtIHtPYmplY3R9IGZpbGUgLSBGaWxlIHRvIHByb2Nlc3NcclxuICogQHJldHVybnMge1Byb21pc2U8QnVmZmVyfHN0cmluZz59IFByb2Nlc3NlZCBjb250ZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRGaWxlQ29udGVudChmaWxlKSB7XHJcbiAgY29uc3QgaW5mbyA9IGdldEZpbGVIYW5kbGluZ0luZm8oZmlsZSk7XHJcbiAgXHJcbiAgaWYgKGluZm8uaXNCaW5hcnkpIHtcclxuICAgIHJldHVybiBmaWxlLmJ1ZmZlciB8fCBCdWZmZXIuZnJvbShmaWxlLmFycmF5QnVmZmVyIHx8IFtdKTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGZpbGUudGV4dCB8fCAnJztcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgY2F0ZWdvcnkgb2YgYSBmaWxlXHJcbiAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gZmlsZSAtIEZpbGUgdG8gYW5hbHl6ZVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBGaWxlIGNhdGVnb3J5XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRGaWxlVHlwZShmaWxlKSB7XHJcbiAgY29uc3QgaW5mbyA9IGdldEZpbGVIYW5kbGluZ0luZm8oZmlsZSk7XHJcbiAgcmV0dXJuIGluZm8uY2F0ZWdvcnk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgcmVxdWlyZXMgYW4gQVBJIGtleVxyXG4gKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R9IGZpbGUgLSBGaWxlIHRvIGFuYWx5emVcclxuICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGZpbGUgcmVxdWlyZXMgYW4gQVBJIGtleVxyXG4gKi9cclxuZnVuY3Rpb24gcmVxdWlyZXNBcGlLZXkoZmlsZSkge1xyXG4gIGNvbnN0IGluZm8gPSBnZXRGaWxlSGFuZGxpbmdJbmZvKGZpbGUpO1xyXG4gIHJldHVybiBpbmZvLnJlcXVpcmVzQXBpS2V5O1xyXG59XHJcblxyXG4vLyBDb21tb25KUyBleHBvcnRzXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIEZJTEVfQ0FURUdPUklFUyxcclxuICBIQU5ETElOR19UWVBFUyxcclxuICBDT05WRVJURVJfQ09ORklHLFxyXG4gIEFQSV9SRVFVSVJFRF9UWVBFUyxcclxuICBnZXRGaWxlSGFuZGxpbmdJbmZvLFxyXG4gIGdldEZpbGVDb250ZW50LFxyXG4gIGdldEZpbGVUeXBlLFxyXG4gIHJlcXVpcmVzQXBpS2V5XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNQSxlQUFlLEdBQUc7RUFDdEJDLFNBQVMsRUFBRSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDO0VBQ3REQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQztFQUNqREMsS0FBSyxFQUFFLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQztFQUMzQ0MsSUFBSSxFQUFFLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQztFQUM1Q0MsR0FBRyxFQUFFLENBQUMsS0FBSyxFQUFFLFdBQVc7QUFDMUIsQ0FBQzs7QUFFRDtBQUNBLE1BQU1DLGNBQWMsR0FBRztFQUNyQkMsTUFBTSxFQUFFLFFBQVE7RUFBSztFQUNyQkMsSUFBSSxFQUFFLE1BQU07RUFBUTtFQUNwQkMsR0FBRyxFQUFFLEtBQUss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QUFFO01BQ2pDTSxRQUFRLEdBQUdHLEdBQUc7TUFDZDtJQUNGO0VBQ0Y7O0VBRUE7RUFDQSxNQUFNSSxNQUFNLEdBQUcvQixnQkFBZ0IsQ0FBQ2tCLFFBQVEsQ0FBQyxJQUFJO0lBQzNDaEIsUUFBUSxFQUFFTixjQUFjLENBQUNFLElBQUk7SUFDN0JLLFNBQVMsRUFBRSxNQUFNO0lBQ2pCQyxXQUFXLEVBQUU7RUFDZixDQUFDO0VBRUQsT0FBTztJQUNMVyxRQUFRO0lBQ1JHLFFBQVE7SUFDUk0sUUFBUTtJQUNSLEdBQUdPLE1BQU07SUFDVE4sS0FBSyxFQUFFRCxRQUFRLEtBQUssS0FBSztJQUN6QkUsUUFBUSxFQUFFSyxNQUFNLENBQUM3QixRQUFRLEtBQUtOLGNBQWMsQ0FBQ0MsTUFBTTtJQUNuRG1DLGNBQWMsRUFBRXBCLGtCQUFrQixDQUFDVyxRQUFRLENBQUNMLFFBQVE7RUFDdEQsQ0FBQztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTZSxjQUFjQSxDQUFDbkIsSUFBSSxFQUFFO0VBQzVCLE1BQU1vQixJQUFJLEdBQUdyQixtQkFBbUIsQ0FBQ0MsSUFBSSxDQUFDO0VBRXRDLElBQUlvQixJQUFJLENBQUNSLFFBQVEsRUFBRTtJQUNqQixPQUFPWixJQUFJLENBQUNxQixNQUFNLElBQUlDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDdkIsSUFBSSxDQUFDd0IsV0FBVyxJQUFJLEVBQUUsQ0FBQztFQUMzRDtFQUVBLE9BQU94QixJQUFJLENBQUN5QixJQUFJLElBQUksRUFBRTtBQUN4Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBU0MsV0FBV0EsQ0FBQzFCLElBQUksRUFBRTtFQUN6QixNQUFNb0IsSUFBSSxHQUFHckIsbUJBQW1CLENBQUNDLElBQUksQ0FBQztFQUN0QyxPQUFPb0IsSUFBSSxDQUFDVixRQUFRO0FBQ3RCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTUSxjQUFjQSxDQUFDbEIsSUFBSSxFQUFFO0VBQzVCLE1BQU1vQixJQUFJLEdBQUdyQixtQkFBbUIsQ0FBQ0MsSUFBSSxDQUFDO0VBQ3RDLE9BQU9vQixJQUFJLENBQUNGLGNBQWM7QUFDNUI7O0FBRUE7QUFDQVMsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFDZnBELGVBQWU7RUFDZk0sY0FBYztFQUNkSSxnQkFBZ0I7RUFDaEJZLGtCQUFrQjtFQUNsQkMsbUJBQW1CO0VBQ25Cb0IsY0FBYztFQUNkTyxXQUFXO0VBQ1hSO0FBQ0YsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==