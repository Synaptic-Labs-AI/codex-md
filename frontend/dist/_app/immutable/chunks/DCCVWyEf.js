import{s as ie,u as oe,I as B,d as p,v as ue,w as fe,x as ce,J as Y,y as T,i as z,K as M,c as j,e as E,h as P,L as G,M as de,N as he,O as _e,a as O,o as h,b as v,g as D,f as C,j as L,t as V,E as pe,P as ye,n as le,p as W,C as J,r as se,Q as q}from"./DpYOX2d4.js";import{S as re,i as ne,t as H,a as N,g as Q,e as X,d as me,m as ve,c as ke,b as be,f as Z}from"./C-VBhwFd.js";import{f as x}from"./DucWAqQn.js";import{d as ae,w as ge}from"./BvZV69c9.js";function we(i,e){const t={},s={},r={$$scope:1};let l=i.length;for(;l--;){const a=i[l],o=e[l];if(o){for(const u in a)u in o||(s[u]=1);for(const u in o)r[u]||(t[u]=o[u],r[u]=1);i[l]=o}else for(const u in a)r[u]=1}for(const a in s)a in t||(t[a]=void 0);return t}function Ie(i){let e,t,s,r,l;const a=i[8].default,o=oe(a,i,i[7],null);let u=[{type:i[1]},{disabled:i[2]},{class:t="button "+i[0]+" "+i[4]+" "+(i[5].class||"")},i[5]],c={};for(let n=0;n<u.length;n+=1)c=B(c,u[n]);return{c(){e=P("button"),o&&o.c(),this.h()},l(n){e=j(n,"BUTTON",{type:!0,class:!0});var y=E(e);o&&o.l(y),y.forEach(p),this.h()},h(){Y(e,c),T(e,"full-width",i[3]),T(e,"svelte-5vqws4",!0)},m(n,y){z(n,e,y),o&&o.m(e,null),e.autofocus&&e.focus(),s=!0,r||(l=M(e,"click",i[9]),r=!0)},p(n,[y]){o&&o.p&&(!s||y&128)&&ue(o,a,n,n[7],s?ce(a,n[7],y,null):fe(n[7]),null),Y(e,c=we(u,[(!s||y&2)&&{type:n[1]},(!s||y&4)&&{disabled:n[2]},(!s||y&49&&t!==(t="button "+n[0]+" "+n[4]+" "+(n[5].class||"")))&&{class:t},y&32&&n[5]])),T(e,"full-width",n[3]),T(e,"svelte-5vqws4",!0)},i(n){s||(N(o,n),s=!0)},o(n){H(o,n),s=!1},d(n){n&&p(e),o&&o.d(n),r=!1,l()}}}function Ae(i,e,t){const s=["variant","type","disabled","fullWidth","size","$$restProps"];let r=G(e,s),{$$slots:l={},$$scope:a}=e,{variant:o="primary"}=e,{type:u="button"}=e,{disabled:c=!1}=e,{fullWidth:n=!1}=e,{size:y="medium"}=e,{$$restProps:A={}}=e;function K(f){he.call(this,i,f)}return i.$$set=f=>{e=B(B({},e),de(f)),t(5,r=G(e,s)),"variant"in f&&t(0,o=f.variant),"type"in f&&t(1,u=f.type),"disabled"in f&&t(2,c=f.disabled),"fullWidth"in f&&t(3,n=f.fullWidth),"size"in f&&t(4,y=f.size),"$$restProps"in f&&t(6,A=f.$$restProps),"$$scope"in f&&t(7,a=f.$$scope)},[o,u,c,n,y,r,A,a,l,K]}class je extends re{constructor(e){super(),ne(this,e,Ae,Ie,ie,{variant:0,type:1,disabled:2,fullWidth:3,size:4,$$restProps:6})}}const Pe={keys:{openai:"",mistral:""},isInitialized:!1,error:null},S=ge(Pe);async function Ke(){try{if(!(window!=null&&window.electron)){S.update(i=>({...i,isInitialized:!0,error:"Electron API not available"}));return}window.electron.onReady(async()=>{try{const[i,e]=await Promise.all([window.electron.checkApiKeyExists("openai"),window.electron.checkApiKeyExists("mistral")]),t={openai:i.exists&&(await window.electron.getApiKey("openai")).key||"",mistral:e.exists&&(await window.electron.getApiKey("mistral")).key||""};S.update(s=>({...s,keys:t,isInitialized:!0,error:null}))}catch(i){console.error("Failed to load API keys:",i),S.update(e=>({...e,isInitialized:!0,error:i.message}))}})}catch(i){console.error("Failed to initialize API key store:",i),S.update(e=>({...e,isInitialized:!0,error:i.message}))}}Ke();async function Ee(i="openai"){return _e(S).keys[i]||""}async function U(i,e="openai"){if(window!=null&&window.electron)try{await window.electron.saveApiKey(i,e),S.update(t=>({...t,keys:{...t.keys,[e]:i},error:null}))}catch(t){console.error("Failed to save API key:",t),S.update(s=>({...s,error:t.message}))}}ae(S,i=>i.isInitialized);ae(S,i=>i.error);const qe={subscribe:i=>S.subscribe(e=>i(e.keys.openai||"")),set:i=>U(i,"openai")};function ze(i){let e,t,s,r,l=i[10].exists&&$(i);return{c(){e=P("div"),t=P("h3"),s=V(i[1]),r=L(),l&&l.c(),this.h()},l(a){e=j(a,"DIV",{class:!0});var o=E(e);t=j(o,"H3",{class:!0});var u=E(t);s=C(u,i[1]),u.forEach(p),r=D(o),l&&l.l(o),o.forEach(p),this.h()},h(){h(t,"class","svelte-1jo17cj"),h(e,"class","api-key-header svelte-1jo17cj")},m(a,o){z(a,e,o),v(e,t),v(t,s),v(e,r),l&&l.m(e,null)},p(a,o){o&2&&O(s,a[1]),a[10].exists?l?l.p(a,o):(l=$(a),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(a){a&&p(e),l&&l.d()}}}function Te(i){let e,t,s,r,l,a;return{c(){e=P("div"),t=P("h3"),s=V(i[1]),r=L(),l=P("div"),a=V(i[9]),this.h()},l(o){e=j(o,"DIV",{class:!0});var u=E(e);t=j(u,"H3",{class:!0});var c=E(t);s=C(c,i[1]),c.forEach(p),r=D(u),l=j(u,"DIV",{class:!0});var n=E(l);a=C(n,i[9]),n.forEach(p),u.forEach(p),this.h()},h(){h(t,"class","svelte-1jo17cj"),h(l,"class","error-message svelte-1jo17cj"),h(e,"class","api-key-header error svelte-1jo17cj")},m(o,u){z(o,e,u),v(e,t),v(t,s),v(e,r),v(e,l),v(l,a)},p(o,u){u&2&&O(s,o[1]),u&512&&O(a,o[9])},d(o){o&&p(e)}}}function Se(i){let e,t='<h3 class="svelte-1jo17cj">Loading...</h3>';return{c(){e=P("div"),e.innerHTML=t,this.h()},l(s){e=j(s,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-10p6g2m"&&(e.innerHTML=t),this.h()},h(){h(e,"class","api-key-header svelte-1jo17cj")},m(s,r){z(s,e,r)},p:le,d(s){s&&p(e)}}}function $(i){let e,t,s="âœ“ API key is configured",r,l,a="Remove",o,u;return{c(){e=P("div"),t=P("span"),t.textContent=s,r=L(),l=P("button"),l.textContent=a,this.h()},l(c){e=j(c,"DIV",{class:!0});var n=E(e);t=j(n,"SPAN",{"data-svelte-h":!0}),W(t)!=="svelte-1fu3400"&&(t.textContent=s),r=D(n),l=j(n,"BUTTON",{class:!0,"data-svelte-h":!0}),W(l)!=="svelte-13h1ovl"&&(l.textContent=a),n.forEach(p),this.h()},h(){h(l,"class","delete-btn svelte-1jo17cj"),h(e,"class","key-status success svelte-1jo17cj")},m(c,n){z(c,e,n),v(e,t),v(e,r),v(e,l),o||(u=M(l,"click",i[16]),o=!0)},p:le,d(c){c&&p(e),o=!1,u()}}}function ee(i){let e,t,s,r=i[7]?"ðŸ‘ï¸":"ðŸ™ˆ",l,a,o,u,c,n,y;function A(m,b){return m[7]?Ve:Ce}let K=A(i),f=K(i);return u=new je({props:{disabled:i[8]||!i[6],variant:"primary",size:"small",$$slots:{default:[Ne]},$$scope:{ctx:i}}}),u.$on("click",i[15]),{c(){e=P("div"),f.c(),t=L(),s=P("button"),l=V(r),o=L(),be(u.$$.fragment),this.h()},l(m){e=j(m,"DIV",{class:!0});var b=E(e);f.l(b),t=D(b),s=j(b,"BUTTON",{type:!0,class:!0,"aria-label":!0});var I=E(s);l=C(I,r),I.forEach(p),o=D(b),ke(u.$$.fragment,b),b.forEach(p),this.h()},h(){h(s,"type","button"),h(s,"class","toggle-button svelte-1jo17cj"),h(s,"aria-label",a=i[7]?"Hide API Key":"Show API Key"),h(e,"class","input-container svelte-1jo17cj")},m(m,b){z(m,e,b),f.m(e,null),v(e,t),v(e,s),v(s,l),v(e,o),ve(u,e,null),c=!0,n||(y=M(s,"click",i[14]),n=!0)},p(m,b){K===(K=A(m))&&f?f.p(m,b):(f.d(1),f=K(m),f&&(f.c(),f.m(e,t))),(!c||b&128)&&r!==(r=m[7]?"ðŸ‘ï¸":"ðŸ™ˆ")&&O(l,r),(!c||b&128&&a!==(a=m[7]?"Hide API Key":"Show API Key"))&&h(s,"aria-label",a);const I={};b&320&&(I.disabled=m[8]||!m[6]),b&1048832&&(I.$$scope={dirty:b,ctx:m}),u.$set(I)},i(m){c||(N(u.$$.fragment,m),c=!0)},o(m){H(u.$$.fragment,m),c=!1},d(m){m&&p(e),f.d(),me(u),n=!1,y()}}}function Ce(i){let e,t,s;return{c(){e=P("input"),this.h()},l(r){e=j(r,"INPUT",{type:!0,class:!0,placeholder:!0}),this.h()},h(){h(e,"type","password"),h(e,"class","api-key-input svelte-1jo17cj"),h(e,"placeholder",i[2]),T(e,"error",!!i[9])},m(r,l){z(r,e,l),q(e,i[6]),t||(s=[M(e,"input",i[18]),M(e,"input",i[13])],t=!0)},p(r,l){l&4&&h(e,"placeholder",r[2]),l&64&&e.value!==r[6]&&q(e,r[6]),l&512&&T(e,"error",!!r[9])},d(r){r&&p(e),t=!1,se(s)}}}function Ve(i){let e,t,s;return{c(){e=P("input"),this.h()},l(r){e=j(r,"INPUT",{type:!0,class:!0,placeholder:!0}),this.h()},h(){h(e,"type","text"),h(e,"class","api-key-input svelte-1jo17cj"),h(e,"placeholder",i[2]),T(e,"error",!!i[9])},m(r,l){z(r,e,l),q(e,i[6]),t||(s=[M(e,"input",i[17]),M(e,"input",i[13])],t=!0)},p(r,l){l&4&&h(e,"placeholder",r[2]),l&64&&e.value!==r[6]&&q(e,r[6]),l&512&&T(e,"error",!!r[9])},d(r){r&&p(e),t=!1,se(s)}}}function De(i){let e;return{c(){e=V("Save")},l(t){e=C(t,"Save")},m(t,s){z(t,e,s)},d(t){t&&p(e)}}}function Le(i){let e;return{c(){e=V("Saving...")},l(t){e=C(t,"Saving...")},m(t,s){z(t,e,s)},d(t){t&&p(e)}}}function Ne(i){let e;function t(l,a){return l[8]?Le:De}let s=t(i),r=s(i);return{c(){r.c(),e=J()},l(l){r.l(l),e=J()},m(l,a){r.m(l,a),z(l,e,a)},p(l,a){s!==(s=t(l))&&(r.d(1),r=s(l),r&&(r.c(),r.m(e.parentNode,e)))},d(l){l&&p(e),r.d(l)}}}function te(i){let e,t,s,r;return{c(){e=P("div"),t=V(i[9]),this.h()},l(l){e=j(l,"DIV",{class:!0});var a=E(e);t=C(a,i[9]),a.forEach(p),this.h()},h(){h(e,"class","error-message svelte-1jo17cj")},m(l,a){z(l,e,a),v(e,t),r=!0},p(l,a){(!r||a&512)&&O(t,l[9])},i(l){r||(l&&ye(()=>{r&&(s||(s=Z(e,x,{duration:200},!0)),s.run(1))}),r=!0)},o(l){l&&(s||(s=Z(e,x,{duration:200},!1)),s.run(0)),r=!1},d(l){l&&p(e),l&&s&&s.end()}}}function Fe(i){let e,t,s,r,l,a,o,u,c,n,y,A,K,f;function m(_,k){return _[12]?_[9]?Te:ze:Se}let b=m(i),I=b(i),g=!i[10].exists&&ee(i),w=i[9]&&te(i);return{c(){e=P("div"),I.c(),t=L(),g&&g.c(),s=L(),w&&w.c(),r=L(),l=P("div"),a=P("p"),o=V(i[3]),u=V(" Your key is stored securely on your device."),c=L(),n=P("a"),y=V(i[5]),this.h()},l(_){e=j(_,"DIV",{class:!0});var k=E(e);I.l(k),t=D(k),g&&g.l(k),s=D(k),w&&w.l(k),r=D(k),l=j(k,"DIV",{class:!0});var R=E(l);a=j(R,"P",{class:!0});var d=E(a);o=C(d,i[3]),u=C(d," Your key is stored securely on your device."),d.forEach(p),c=D(R),n=j(R,"A",{href:!0,target:!0,rel:!0,class:!0});var F=E(n);y=C(F,i[5]),F.forEach(p),R.forEach(p),k.forEach(p),this.h()},h(){h(a,"class","svelte-1jo17cj"),h(n,"href",i[4]),h(n,"target",A=i[0]!=="openai"?"_blank":void 0),h(n,"rel",K=i[0]!=="openai"?"noopener noreferrer":void 0),h(n,"class","help-link svelte-1jo17cj"),h(l,"class","api-key-info svelte-1jo17cj"),h(e,"class","api-key-wrapper api-key-input-section svelte-1jo17cj"),T(e,"loading",!i[11])},m(_,k){z(_,e,k),I.m(e,null),v(e,t),g&&g.m(e,null),v(e,s),w&&w.m(e,null),v(e,r),v(e,l),v(l,a),v(a,o),v(a,u),v(l,c),v(l,n),v(n,y),f=!0},p(_,[k]){b===(b=m(_))&&I?I.p(_,k):(I.d(1),I=b(_),I&&(I.c(),I.m(e,t))),_[10].exists?g&&(Q(),H(g,1,1,()=>{g=null}),X()):g?(g.p(_,k),k&1024&&N(g,1)):(g=ee(_),g.c(),N(g,1),g.m(e,s)),_[9]?w?(w.p(_,k),k&512&&N(w,1)):(w=te(_),w.c(),N(w,1),w.m(e,r)):w&&(Q(),H(w,1,1,()=>{w=null}),X()),(!f||k&8)&&O(o,_[3]),(!f||k&32)&&O(y,_[5]),(!f||k&16)&&h(n,"href",_[4]),(!f||k&1&&A!==(A=_[0]!=="openai"?"_blank":void 0))&&h(n,"target",A),(!f||k&1&&K!==(K=_[0]!=="openai"?"noopener noreferrer":void 0))&&h(n,"rel",K),(!f||k&2048)&&T(e,"loading",!_[11])},i(_){f||(N(g),N(w),f=!0)},o(_){H(g),H(w),f=!1},d(_){_&&p(e),I.d(),g&&g.d(),w&&w.d()}}}function Me(i,e,t){let{provider:s="openai"}=e,{title:r=s==="openai"?"OpenAI API Key":"Mistral API Key"}=e,{placeholder:l=s==="openai"?"Enter your OpenAI API Key":"Enter your Mistral API Key"}=e,{infoText:a=s==="openai"?"Required for audio/video transcription.":"Required for advanced OCR processing."}=e,{helpLink:o=s==="openai"?"/help#api-keys":"https://console.mistral.ai/"}=e,{helpText:u=s==="openai"?"Learn more about API keys":"Get a Mistral API key"}=e,c="",n=!1,y=!1,A="",K={exists:!1,valid:!1},f=!1,m=!1;pe(()=>{window!=null&&window.electron?window.electron.onReady(async()=>{try{t(12,m=!0),await b()}catch(d){console.error("Failed to initialize API key component:",d),t(9,A="Failed to initialize: "+(d.message||"Unknown error"))}}):t(9,A="Electron API not available")});async function b(){try{t(6,c=await Ee(s)||"");const d=await window.electron.checkApiKeyExists(s);if(t(10,K={exists:d.exists,valid:!0}),d.exists){const F=await window.electron.getApiKey(s);F.success&&F.key&&(t(6,c=F.key),await U(F.key,s))}t(11,f=!0)}catch(d){console.error(`Error initializing ${s} API key:`,d),t(9,A=d.message||`Failed to initialize ${s} API key`)}}function I(d){t(6,c=d.target.value),U(c,s),t(9,A="")}function g(){t(7,n=!n)}async function w(){if(c){t(8,y=!0),t(9,A="");try{const d=await window.electron.saveApiKey(c,s);if(!d.success)throw new Error(d.error||"Failed to save API key");t(10,K={exists:!0,valid:!0})}catch(d){t(9,A=d.message)}finally{t(8,y=!1)}}}async function _(){try{await window.electron.deleteApiKey(s),t(10,K={exists:!1,valid:!1}),t(6,c=""),U("",s)}catch(d){t(9,A=d.message)}}function k(){c=this.value,t(6,c)}function R(){c=this.value,t(6,c)}return i.$$set=d=>{"provider"in d&&t(0,s=d.provider),"title"in d&&t(1,r=d.title),"placeholder"in d&&t(2,l=d.placeholder),"infoText"in d&&t(3,a=d.infoText),"helpLink"in d&&t(4,o=d.helpLink),"helpText"in d&&t(5,u=d.helpText)},[s,r,l,a,o,u,c,n,y,A,K,f,m,I,g,w,_,k,R]}class Be extends re{constructor(e){super(),ne(this,e,Me,Fe,ie,{provider:0,title:1,placeholder:2,infoText:3,helpLink:4,helpText:5})}}export{Be as A,je as B,qe as a,S as b};
