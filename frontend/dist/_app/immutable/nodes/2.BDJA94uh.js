import{s as ue,n as U,d as p,P as X,y as ie,a as be,i as I,b as w,o as h,c as y,e as A,g as N,f as z,h as T,j as L,t as G,p as re,a8 as rn,a9 as sn,a6 as ke,aa as Ht,E as et,r as tt,z as ut,K as ne,ab as on,C as ge,a3 as ln,k as ae,Q as ft,ac as an,N as cn,H as qt,u as un,v as fn,w as dn,x as pn,m as mn,O as Re}from"../chunks/DpYOX2d4.js";import{S as fe,i as de,a as _,j as J,t as $,g as x,e as ee,f as Te,d as B,m as W,c as j,b as H,k as hn}from"../chunks/C-VBhwFd.js";import{a as Se,f as se,s as nt,e as Ne,b as dt,u as Yt,c as gn,o as Kt,d as Zt}from"../chunks/DucWAqQn.js";import{g as pt}from"../chunks/B_fgtamC.js";import{a as rt,B as Ce,A as vn,b as _n}from"../chunks/DCCVWyEf.js";import{w as Le,d as Ie}from"../chunks/BvZV69c9.js";import{F as bn,t as wn,e as Pe}from"../chunks/Ci3ETF41.js";import{C as Xt}from"../chunks/DnxWNRvU.js";const yn=!0,Tn=yn;function En(){return{form:{}}}const Zs=Object.freeze(Object.defineProperty({__proto__:null,load:En},Symbol.toStringTag,{value:"Module"}));function mt(s){let e,t,n;return{c(){e=T("div"),t=G(s[1]),this.h()},l(r){e=y(r,"DIV",{class:!0});var o=A(e);t=z(o,s[1]),o.forEach(p),this.h()},h(){h(e,"class","name svelte-1bgtg35")},m(r,o){I(r,e,o),w(e,t)},p(r,o){s=r,o&2&&be(t,s[1])},i(r){r&&(n||X(()=>{n=J(e,nt,{delay:s[3]+100,duration:200}),n.start()}))},o:U,d(r){r&&p(e)}}}function ht(s){let e,t='<span class="dot svelte-1bgtg35"></span> <span class="dot svelte-1bgtg35"></span> <span class="dot svelte-1bgtg35"></span>',n;return{c(){e=T("div"),e.innerHTML=t,this.h()},l(r){e=y(r,"DIV",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-1wpnf4w"&&(e.innerHTML=t),this.h()},h(){h(e,"class","typing-indicator svelte-1bgtg35")},m(r,o){I(r,e,o)},i(r){r&&(n||X(()=>{n=J(e,se,{duration:200}),n.start()}))},o:U,d(r){r&&p(e)}}}function gt(s){let e,t,n;return{c(){e=T("div"),t=new sn(!1),this.h()},l(r){e=y(r,"DIV",{class:!0});var o=A(e);t=rn(o,!1),o.forEach(p),this.h()},h(){t.a=null,h(e,"class","message svelte-1bgtg35")},m(r,o){I(r,e,o),t.m(s[2],e)},p(r,o){o&4&&t.p(r[2])},i(r){r&&(n||X(()=>{n=J(e,nt,{delay:100,duration:200,axis:"y"}),n.start()}))},o:U,d(r){r&&p(e)}}}function Sn(s){let e,t,n,r,o,l,i,a,c,f,u,d,v,S,b=s[5]&&mt(s),g=s[6]&&ht(),m=s[7]&&gt(s);return{c(){e=T("div"),t=T("div"),n=T("div"),b&&b.c(),r=L(),g&&g.c(),o=L(),m&&m.c(),i=L(),a=T("div"),c=T("span"),f=G(s[0]),u=L(),d=T("div"),this.h()},l(C){e=y(C,"DIV",{class:!0});var E=A(e);t=y(E,"DIV",{class:!0});var D=A(t);n=y(D,"DIV",{class:!0});var F=A(n);b&&b.l(F),r=N(F),g&&g.l(F),o=N(F),m&&m.l(F),F.forEach(p),D.forEach(p),i=N(E),a=y(E,"DIV",{class:!0});var R=A(a);c=y(R,"SPAN",{class:!0});var P=A(c);f=z(P,s[0]),P.forEach(p),u=N(R),d=y(R,"DIV",{class:!0}),A(d).forEach(p),R.forEach(p),E.forEach(p),this.h()},h(){h(n,"class","message-content svelte-1bgtg35"),h(t,"class","chat-bubble svelte-1bgtg35"),ie(t,"bubble-left",s[4]==="left"),ie(t,"bubble-right",s[4]==="right"),h(c,"class","avatar svelte-1bgtg35"),h(d,"class","avatar-glow svelte-1bgtg35"),h(a,"class","avatar-bubble svelte-1bgtg35"),ie(a,"avatar-left",s[4]==="left"),ie(a,"avatar-right",s[4]==="right"),h(e,"class","chat-bubble-container svelte-1bgtg35"),ie(e,"container-right",s[4]==="right")},m(C,E){I(C,e,E),w(e,t),w(t,n),b&&b.m(n,null),w(n,r),g&&g.m(n,null),w(n,o),m&&m.m(n,null),w(e,i),w(e,a),w(a,c),w(c,f),w(a,u),w(a,d)},p(C,[E]){s=C,s[5]?b?(b.p(s,E),E&32&&_(b,1)):(b=mt(s),b.c(),_(b,1),b.m(n,r)):b&&(b.d(1),b=null),s[6]?g?E&64&&_(g,1):(g=ht(),g.c(),_(g,1),g.m(n,o)):g&&(g.d(1),g=null),s[7]?m?(m.p(s,E),E&128&&_(m,1)):(m=gt(s),m.c(),_(m,1),m.m(n,null)):m&&(m.d(1),m=null),E&16&&ie(t,"bubble-left",s[4]==="left"),E&16&&ie(t,"bubble-right",s[4]==="right"),E&1&&be(f,s[0]),E&16&&ie(a,"avatar-left",s[4]==="left"),E&16&&ie(a,"avatar-right",s[4]==="right"),E&16&&ie(e,"container-right",s[4]==="right")},i(C){_(b),_(g),_(m),C&&(l||X(()=>{l=J(t,Se,{delay:s[3],duration:400,y:20}),l.start()})),C&&(v||X(()=>{v=J(a,Se,{delay:s[3],duration:400,x:s[4]==="left"?-20:20}),v.start()})),C&&(S||X(()=>{S=J(e,se,{delay:s[3],duration:300}),S.start()}))},o:U,d(C){C&&p(e),b&&b.d(),g&&g.d(),m&&m.d()}}}function Cn(s,e,t){let{avatar:n=""}=e,{name:r=""}=e,{message:o=""}=e,{delay:l=0}=e,{avatarPosition:i="left"}=e,{showName:a=!0}=e,{isTyping:c=!1}=e,{showMessage:f=!0}=e;return s.$$set=u=>{"avatar"in u&&t(0,n=u.avatar),"name"in u&&t(1,r=u.name),"message"in u&&t(2,o=u.message),"delay"in u&&t(3,l=u.delay),"avatarPosition"in u&&t(4,i=u.avatarPosition),"showName"in u&&t(5,a=u.showName),"isTyping"in u&&t(6,c=u.isTyping),"showMessage"in u&&t(7,f=u.showMessage)},[n,r,o,l,i,a,c,f]}class Ge extends fe{constructor(e){super(),de(this,e,Cn,Sn,ue,{avatar:0,name:1,message:2,delay:3,avatarPosition:4,showName:5,isTyping:6,showMessage:7})}}const Ke="1.0.0",he={WELCOME:"welcome",UPDATE:"update",ANNOUNCEMENT:"announcement"},kn={hasSeenWelcome:!1,lastSeenVersion:null,seenMessageTypes:{},isInitialized:!1,error:null},_e=Le(kn);async function In(){if(!(window!=null&&window.electron)){console.warn("Electron API not available, using default welcome state"),_e.update(s=>({...s,isInitialized:!0,error:"Electron API not available"}));return}try{window.electron.onReady(async()=>{try{const s=await window.electron.getSetting("welcomeState");_e.update(e=>({...s||e,isInitialized:!0,error:null}))}catch(s){console.error("Error reading welcome state from settings:",s),_e.update(e=>({...e,isInitialized:!0,error:s.message}))}})}catch(s){console.error("Error reading welcome state from settings:",s),_e.update(e=>({...e,isInitialized:!0,error:s.message}))}}const Oe=Le(!1);async function Ze(s){if(window!=null&&window.electron)try{const{isInitialized:e,error:t,...n}=s;await window.electron.setSetting("welcomeState",n)}catch(e){console.error("Error saving welcome state to settings:",e),_e.update(t=>({...t,error:e.message}))}}In();const ze={subscribe:_e.subscribe,shouldShowWelcome:()=>{let s=!1;return _e.update(e=>(s=!e.hasSeenWelcome||e.lastSeenVersion!==Ke,e)),s&&!Oe},shouldShowMessageType:s=>{let e=!1;return _e.update(t=>(e=!t.seenMessageTypes[s],t)),e&&!Oe},markAsSeen:()=>{Oe.set(!0),_e.update(s=>{const e={...s,hasSeenWelcome:!0,lastSeenVersion:Ke};return Ze(e),e})},markMessageTypeSeen:s=>{_e.update(e=>{const t={...e,seenMessageTypes:{...e.seenMessageTypes,[s]:!0}};return Ze(t),t})},reset:()=>{Oe.set(!1),_e.update(()=>{const s={hasSeenWelcome:!1,lastSeenVersion:null,seenMessageTypes:{}};return Ze(s),s})},resetSession:()=>{Oe.set(!1)},getCurrentVersion:()=>Ke};function vt(s,e,t){const n=s.slice();return n[15]=e[t],n[17]=t,n}function _t(s){let e,t,n,r,o,l,i="×",a,c,f,u=[],d=new Map,v,S,b,g,m,C,E,D,F,R;function P(M,Y){return M[0]===he.WELCOME?Dn:M[0]===he.UPDATE?Fn:M[0]===he.ANNOUNCEMENT?$n:An}let te=P(s),V=te(s),pe=Ne(s[2]);const Ue=M=>M[17];for(let M=0;M<pe.length;M+=1){let Y=vt(s,pe,M),me=Ue(Y);d.set(me,u[M]=bt(me,Y))}let Q=s[2].length===s[5].length&&wt(s);return{c(){e=T("div"),t=T("div"),n=T("div"),r=T("h3"),V.c(),o=L(),l=T("button"),l.textContent=i,a=L(),c=T("div"),f=T("div");for(let M=0;M<u.length;M+=1)u[M].c();v=L(),S=T("div"),b=T("div"),g=T("div"),m=L(),Q&&Q.c(),this.h()},l(M){e=y(M,"DIV",{class:!0});var Y=A(e);t=y(Y,"DIV",{class:!0});var me=A(t);n=y(me,"DIV",{class:!0});var Be=A(n);r=y(Be,"H3",{class:!0});var it=A(r);V.l(it),it.forEach(p),o=N(Be),l=y(Be,"BUTTON",{class:!0,"data-svelte-h":!0}),re(l)!=="svelte-vxgb51"&&(l.textContent=i),Be.forEach(p),a=N(me),c=y(me,"DIV",{class:!0});var Ae=A(c);f=y(Ae,"DIV",{class:!0});var lt=A(f);for(let Ye=0;Ye<u.length;Ye+=1)u[Ye].l(lt);lt.forEach(p),v=N(Ae),S=y(Ae,"DIV",{class:!0});var at=A(S);b=y(at,"DIV",{class:!0});var ct=A(b);g=y(ct,"DIV",{class:!0,style:!0}),A(g).forEach(p),ct.forEach(p),at.forEach(p),m=N(Ae),Q&&Q.l(Ae),Ae.forEach(p),me.forEach(p),Y.forEach(p),this.h()},h(){h(r,"class","svelte-1kh0cpt"),h(l,"class","close-button svelte-1kh0cpt"),h(n,"class","modal-header svelte-1kh0cpt"),h(f,"class","chat-messages svelte-1kh0cpt"),h(g,"class","progress-fill svelte-1kh0cpt"),ut(g,"width",Math.min(100,s[2].length/s[5].length*100)+"%"),h(b,"class","progress-track svelte-1kh0cpt"),h(S,"class","progress-indicator svelte-1kh0cpt"),h(c,"class","modal-content svelte-1kh0cpt"),h(t,"class","chat-modal svelte-1kh0cpt"),h(e,"class","modal-overlay svelte-1kh0cpt")},m(M,Y){I(M,e,Y),w(e,t),w(t,n),w(n,r),V.m(r,null),w(n,o),w(n,l),w(t,a),w(t,c),w(c,f);for(let me=0;me<u.length;me+=1)u[me]&&u[me].m(f,null);w(c,v),w(c,S),w(S,b),w(b,g),w(c,m),Q&&Q.m(c,null),D=!0,F||(R=[ne(l,"click",s[6]),ne(e,"click",on(s[6]))],F=!0)},p(M,Y){te!==(te=P(M))&&(V.d(1),V=te(M),V&&(V.c(),V.m(r,null))),Y&4&&(pe=Ne(M[2]),x(),u=Yt(u,Y,Ue,1,M,pe,d,f,Kt,bt,null,vt),ee()),(!D||Y&36)&&ut(g,"width",Math.min(100,M[2].length/M[5].length*100)+"%"),M[2].length===M[5].length?Q?(Q.p(M,Y),Y&36&&_(Q,1)):(Q=wt(M),Q.c(),_(Q,1),Q.m(c,null)):Q&&(x(),$(Q,1,1,()=>{Q=null}),ee())},i(M){if(!D){for(let Y=0;Y<pe.length;Y+=1)_(u[Y]);_(Q),M&&X(()=>{D&&(C||(C=Te(t,Se,{y:50,duration:400,easing:dt},!0)),C.run(1))}),M&&X(()=>{D&&(E||(E=Te(e,se,{duration:300},!0)),E.run(1))}),D=!0}},o(M){for(let Y=0;Y<u.length;Y+=1)$(u[Y]);$(Q),M&&(C||(C=Te(t,Se,{y:50,duration:400,easing:dt},!1)),C.run(0)),M&&(E||(E=Te(e,se,{duration:300},!1)),E.run(0)),D=!1},d(M){M&&p(e),V.d();for(let Y=0;Y<u.length;Y+=1)u[Y].d();Q&&Q.d(),M&&C&&C.end(),M&&E&&E.end(),F=!1,tt(R)}}}function An(s){let e;return{c(){e=G("codex.md")},l(t){e=z(t,"codex.md")},m(t,n){I(t,e,n)},d(t){t&&p(e)}}}function $n(s){let e;return{c(){e=G("Announcement")},l(t){e=z(t,"Announcement")},m(t,n){I(t,e,n)},d(t){t&&p(e)}}}function Fn(s){let e;return{c(){e=G("codex.md Update")},l(t){e=z(t,"codex.md Update")},m(t,n){I(t,e,n)},d(t){t&&p(e)}}}function Dn(s){let e;return{c(){e=G("Welcome to codex.md!")},l(t){e=z(t,"Welcome to codex.md!")},m(t,n){I(t,e,n)},d(t){t&&p(e)}}}function bt(s,e){let t,n,r,o,l;return n=new Ge({props:{avatar:e[15].avatar,name:e[15].name,message:e[15].text,delay:0,avatarPosition:e[15].name.includes("codex.md")?"right":"left",showName:!1}}),{key:s,first:null,c(){t=T("div"),H(n.$$.fragment),r=L(),this.h()},l(i){t=y(i,"DIV",{class:!0});var a=A(t);j(n.$$.fragment,a),r=N(a),a.forEach(p),this.h()},h(){h(t,"class","message-wrapper svelte-1kh0cpt"),this.first=t},m(i,a){I(i,t,a),W(n,t,null),w(t,r),l=!0},p(i,a){e=i;const c={};a&4&&(c.avatar=e[15].avatar),a&4&&(c.name=e[15].name),a&4&&(c.message=e[15].text),a&4&&(c.avatarPosition=e[15].name.includes("codex.md")?"right":"left"),n.$set(c)},i(i){l||(_(n.$$.fragment,i),i&&(o||X(()=>{o=J(t,Se,{y:30,duration:500,delay:100,easing:gn}),o.start()})),l=!0)},o(i){$(n.$$.fragment,i),l=!1},d(i){i&&p(t),B(n)}}}function wt(s){let e,t,n,r,o;const l=[Nn,Rn],i=[];function a(c,f){return c[0]===he.WELCOME?0:1}return t=a(s),n=i[t]=l[t](s),{c(){e=T("div"),n.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var f=A(e);n.l(f),f.forEach(p),this.h()},h(){h(e,"class","action-buttons svelte-1kh0cpt")},m(c,f){I(c,e,f),i[t].m(e,null),o=!0},p(c,f){let u=t;t=a(c),t===u?i[t].p(c,f):(x(),$(i[u],1,1,()=>{i[u]=null}),ee(),n=i[t],n?n.p(c,f):(n=i[t]=l[t](c),n.c()),_(n,1),n.m(e,null))},i(c){o||(_(n),c&&(r||X(()=>{r=J(e,Se,{y:20,duration:400,delay:300}),r.start()})),o=!0)},o(c){$(n),o=!1},d(c){c&&p(e),i[t].d()}}}function Rn(s){let e,t;return e=new Ce({props:{variant:"primary",size:"medium",$$slots:{default:[Ln]},$$scope:{ctx:s}}}),e.$on("click",s[9]),{c(){H(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p(n,r){const o={};r&262144&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Nn(s){let e,t,n,r,o,l;e=new Ce({props:{variant:"secondary",size:"medium",$$slots:{default:[Mn]},$$scope:{ctx:s}}}),e.$on("click",s[7]),n=new Ce({props:{variant:"primary",size:"medium",$$slots:{default:[Un]},$$scope:{ctx:s}}}),n.$on("click",s[9]);let i=!s[3]&&yt(s);return{c(){H(e.$$.fragment),t=L(),H(n.$$.fragment),r=L(),i&&i.c(),o=ge()},l(a){j(e.$$.fragment,a),t=N(a),j(n.$$.fragment,a),r=N(a),i&&i.l(a),o=ge()},m(a,c){W(e,a,c),I(a,t,c),W(n,a,c),I(a,r,c),i&&i.m(a,c),I(a,o,c),l=!0},p(a,c){const f={};c&262144&&(f.$$scope={dirty:c,ctx:a}),e.$set(f);const u={};c&262144&&(u.$$scope={dirty:c,ctx:a}),n.$set(u),a[3]?i&&(i.d(1),i=null):i?(i.p(a,c),c&8&&_(i,1)):(i=yt(a),i.c(),_(i,1),i.m(o.parentNode,o))},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),_(i),l=!0)},o(a){$(e.$$.fragment,a),$(n.$$.fragment,a),l=!1},d(a){a&&(p(t),p(r),p(o)),B(e,a),B(n,a),i&&i.d(a)}}}function Ln(s){let e;return{c(){e=G("Continue")},l(t){e=z(t,"Continue")},m(t,n){I(t,e,n)},d(t){t&&p(e)}}}function Mn(s){let e;return{c(){e=G("Help Guide")},l(t){e=z(t,"Help Guide")},m(t,n){I(t,e,n)},d(t){t&&p(e)}}}function Un(s){let e;return{c(){e=G("I'm Ready")},l(t){e=z(t,"I'm Ready")},m(t,n){I(t,e,n)},d(t){t&&p(e)}}}function yt(s){let e,t,n,r="set up your API key",o,l,i,a;return{c(){e=T("div"),t=G("Don't forget to "),n=T("button"),n.textContent=r,o=G(" for advanced features!"),this.h()},l(c){e=y(c,"DIV",{class:!0});var f=A(e);t=z(f,"Don't forget to "),n=y(f,"BUTTON",{class:!0,"data-svelte-h":!0}),re(n)!=="svelte-1ajmgan"&&(n.textContent=r),o=z(f," for advanced features!"),f.forEach(p),this.h()},h(){h(n,"class","link-button svelte-1kh0cpt"),h(e,"class","api-key-notice svelte-1kh0cpt")},m(c,f){I(c,e,f),w(e,t),w(e,n),w(e,o),i||(a=ne(n,"click",s[8]),i=!0)},p:U,i(c){c&&(l||X(()=>{l=J(e,se,{duration:300,delay:500}),l.start()}))},o:U,d(c){c&&p(e),i=!1,a()}}}function Pn(s){let e,t,n=s[1]&&s[4]&&_t(s);return{c(){e=T("div"),n&&n.c(),this.h()},l(r){e=y(r,"DIV",{class:!0});var o=A(e);n&&n.l(o),o.forEach(p),this.h()},h(){h(e,"class","welcome-chat svelte-1kh0cpt")},m(r,o){I(r,e,o),n&&n.m(e,null),t=!0},p(r,[o]){r[1]&&r[4]?n?(n.p(r,o),o&18&&_(n,1)):(n=_t(r),n.c(),_(n,1),n.m(e,null)):n&&(x(),$(n,1,1,()=>{n=null}),ee())},i(r){t||(_(n),t=!0)},o(r){$(n),t=!1},d(r){r&&p(e),n&&n.d()}}}function On(s,e,t){let n;const r=ke();let{messageType:o=he.WELCOME}=e,{showOnMount:l=!0}=e,i=!0,a=[],c,f=!1;const u=rt.subscribe(C=>{t(3,c=C)});Ht(()=>{u()}),et(()=>{o===he.WELCOME?t(4,f=ze.shouldShowWelcome()):t(4,f=ze.shouldShowMessageType(o)),f&&l&&m()});const d={[he.WELCOME]:[{type:"received",name:"Professor Synapse",avatar:"🧙🏾‍♂️",text:`Let me introduce you to <span class="codex-md-brand">codex.md</span>, a powerful tool that transforms your digital content into Markdown format. It's perfect for building your personal knowledge base!`},{type:"received",name:'<span class="codex-md-brand">codex.md</span>',avatar:"📖",text:`
          <p>Hi there! I can help you convert your content in several ways:</p>
          <ul class="feature-list">
            <li><strong>Drag and drop</strong> your files below or <strong>click</strong> to browse</li>
            <li><strong>Convert web content</strong> by adding a URL (single page or entire website)</li>
          </ul>
          <p>Let's get started with your conversion!</p>
        `}],[he.UPDATE]:[{type:"received",name:'<span class="codex-md-brand">codex.md</span>',avatar:"📖",text:`
          <p>We've updated codex.md with new features!</p>
          <ul class="feature-list">
            <li><strong>Enhanced PDF conversion</strong> with better image extraction</li>
            <li><strong>Improved web scraping</strong> for more accurate content extraction</li>
            <li><strong>Better performance</strong> for large file conversions</li>
          </ul>
          <p>Enjoy the improvements!</p>
        `}],[he.ANNOUNCEMENT]:[{type:"received",name:'<span class="codex-md-brand">codex.md</span>',avatar:"📖",text:`
          <p>Important announcement from the codex.md team:</p>
          <p>We're constantly working to improve your experience. If you have feedback or suggestions, please let us know!</p>
        `}]};function v(){t(1,i=!1),o===he.WELCOME?ze.markAsSeen():ze.markMessageTypeSeen(o),r("closed")}function S(){v(),pt("/help")}function b(){v(),pt("/settings")}function g(){v(),r("continue")}async function m(){t(2,a=[]);for(const C of n)await new Promise(E=>setTimeout(E,800)),t(2,a=[...a,C])}return s.$$set=C=>{"messageType"in C&&t(0,o=C.messageType),"showOnMount"in C&&t(10,l=C.showOnMount)},s.$$.update=()=>{s.$$.dirty&1&&t(5,n=d[o]||d[he.WELCOME])},[o,i,a,c,f,n,v,S,b,g,l]}class Vn extends fe{constructor(e){super(),de(this,e,On,Pn,ue,{messageType:0,showOnMount:10})}}const oe=[];for(let s=0;s<256;++s)oe.push((s+256).toString(16).slice(1));function zn(s,e=0){return(oe[s[e+0]]+oe[s[e+1]]+oe[s[e+2]]+oe[s[e+3]]+"-"+oe[s[e+4]]+oe[s[e+5]]+"-"+oe[s[e+6]]+oe[s[e+7]]+"-"+oe[s[e+8]]+oe[s[e+9]]+"-"+oe[s[e+10]]+oe[s[e+11]]+oe[s[e+12]]+oe[s[e+13]]+oe[s[e+14]]+oe[s[e+15]]).toLowerCase()}let Xe;const Gn=new Uint8Array(16);function Bn(){if(!Xe){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Xe=crypto.getRandomValues.bind(crypto)}return Xe(Gn)}const Wn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Tt={randomUUID:Wn};function jn(s,e,t){var r;if(Tt.randomUUID&&!s)return Tt.randomUUID();s=s||{};const n=s.random??((r=s.rng)==null?void 0:r.call(s))??Bn();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,zn(n)}const De={default:Number.MAX_SAFE_INTEGER,video:Number.MAX_SAFE_INTEGER,audio:Number.MAX_SAFE_INTEGER};function st(s){if(!s)return!1;const e=(typeof s=="string"?s:s.name||"").toLowerCase().split(".").pop();return Object.values(bn).flat().includes(e)}function qe(s){if(!s)return"0 B";const e=["B","KB","MB","GB"];let t=s,n=0;for(;t>=1024&&n<e.length-1;)t/=1024,n++;return`${Math.round(t*100)/100} ${e[n]}`}function ot(s,e="default"){if(!s||!s.size)return{valid:!1,message:"Invalid file",maxSize:De[e]||De.default};const t=De[e]||De.default,n=s.size<=t;return{valid:n,maxSize:t,message:n?"":`File exceeds size limit of ${qe(t)}`}}function Jt(s,e={}){if(!s)return{valid:!1,errors:["No file provided"]};const t=[];st(s)||t.push("Unsupported file type");const n=ot(s,e.category);return n.valid||t.push(n.message),{valid:t.length===0,errors:t,fileSize:s.size,formattedSize:qe(s.size),...n}}const Hn={FILE_SIZE_LIMITS:De,isValidFileType:st,formatFileSize:qe,validateFileSize:ot,validateFile:Jt},qn=Object.freeze(Object.defineProperty({__proto__:null,FILE_SIZE_LIMITS:De,default:Hn,formatFileSize:qe,isValidFileType:st,validateFile:Jt,validateFileSize:ot},Symbol.toStringTag,{value:"Module"})),{requiresApiKey:Je,getFileHandlingInfo:Yn}=wn,{isValidFileType:Kn}=qn,le=Xn();localStorage.removeItem("codex_md_files"),sessionStorage.removeItem("codex_md_files");Ie(le,s=>{const e=s[0];return e?e.name.split(".").pop().toLowerCase():null});const Zn={READY:"ready"},ve={createResult(s,e,t=null){return{success:s,message:e,file:t}},createFileObject(s){var r;const e=typeof s=="string",t=e?s.split(/[/\\]/).pop():s.name,n=(r=t==null?void 0:t.split(".").pop())==null?void 0:r.toLowerCase();return{id:jn(),name:t,type:s.type||n||"unknown",size:e?0:s.size||0,url:s.url||null,file:e?null:s.file||s,path:e?s:s.path||null,status:Zn.READY,progress:0,error:null,selected:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),requiresApiKey:Je(e?{type:n}:s),isNative:e,...s}},isDuplicate(s,e){return s.some(t=>t.url&&e.url?t.url===e.url&&t.type===e.type:t.path&&e.path?t.path===e.path:t.name&&e.name&&t.name===e.name&&t.type===e.type)},withTimestamp(s){return{...s,updatedAt:new Date().toISOString()}}};function We(s,e){return(...t)=>{try{return e(...t)}catch(n){return console.error(`📁 Error in ${s}:`,n),ve.createResult(!1,n.message)}}}function Xn(){const{subscribe:s,update:e,set:t}=Le([],r=>()=>{r([]),localStorage.removeItem("codex_md_files"),sessionStorage.removeItem("codex_md_files")});function n(r,o){let l;return e(i=>{const a=r(i);return l=a.result,console.log("Files updated:",a.files),a.files}),l}return{subscribe:s,addFile:We("addFile",r=>{const o=ve.createFileObject(r);return console.log("[filesStore] Attempting to add file:",o),n(l=>{if(l.length>0&&console.log("[filesStore] Clearing existing files before adding new one"),o.type==="parent"){const i=l.find(a=>a.url===o.url&&a.type==="url");if(i)return console.log("[filesStore] Converting single URL to parent:",i.name),{files:[{...i,type:"parent",name:`${i.name} (Parent)`}],result:ve.createResult(!0,"URL converted to parent successfully")}}return ve.isDuplicate(l,o)?(console.log("[filesStore] Duplicate URL detected - ignoring:",o.name),{files:l,result:ve.createResult(!0,"URL processed successfully")}):(console.log("[filesStore] Adding file:",o),{files:[o],result:ve.createResult(!0,`Added "${o.name}" successfully`,o)})})}),updateFile:We("updateFile",(r,o)=>(console.log("[filesStore] Updating file with ID:",r,"Data:",o),n(l=>{const i=l.findIndex(f=>f.id===r);if(i===-1)return console.log("[filesStore] File not found for update:",r),{files:l,result:ve.createResult(!1,"File not found")};const a=ve.withTimestamp({...l[i],...o}),c=[...l];return c[i]=a,console.log("[filesStore] Updated file:",a),{files:c,result:ve.createResult(!0,"File updated successfully",a)}}))),removeFile:We("removeFile",r=>(console.log("[filesStore] Removing file with ID:",r),n(o=>{const l=o.find(i=>i.id===r);return l?(console.log("[filesStore] Removing file:",l),{files:o.filter(i=>i.id!==r),result:ve.createResult(!0,`Removed "${l.name}" successfully`,l)}):(console.log("[filesStore] File not found for removal:",r),{files:o,result:ve.createResult(!1,`File with ID "${r}" not found`)})}))),clearFiles:We("clearFiles",()=>{console.log("[filesStore] Clearing all files");let r=0;return Tn&&(localStorage.removeItem("codex_md_files"),sessionStorage.removeItem("codex_md_files")),n(o=>(r=o.length,console.log("[filesStore] Clearing",r,"files"),{files:[],result:{success:!0,message:`Cleared ${r} files`,count:r}}))})}}function Jn(){console.log("🧹 Clearing upload store on page load");const{subscribe:s,update:e,set:t}=Le({activeTab:"single",dragOver:!1,urlInput:"",errorMessage:"",message:"",messageType:"",feedbackTimeout:null});return{subscribe:s,setActiveTab:n=>e(r=>({...r,activeTab:n})),setDragOver:n=>e(r=>({...r,dragOver:n})),setUrlInput:n=>e(r=>({...r,urlInput:n})),setError:n=>e(r=>({...r,errorMessage:n})),clearError:()=>e(n=>({...n,errorMessage:""})),setMessage:(n,r="info")=>e(o=>({...o,message:n,messageType:r})),clearMessage:()=>e(n=>({...n,message:"",messageType:""})),reset:()=>t({activeTab:"single",dragOver:!1,urlInput:"",errorMessage:"",message:"",messageType:"",feedbackTimeout:null})}}const ce=Jn(),k={STATUS:{IDLE:"idle",INITIALIZING:"initializing",PREPARING:"preparing",CONVERTING:"converting",COMPLETED:"completed",ERROR:"error",CANCELLED:"cancelled",CLEANING_UP:"cleaning_up"},TYPE:{FILE:"file",BATCH:"batch",WEBSITE:"website"}},Qn={initializing:k.STATUS.INITIALIZING,preparing:k.STATUS.PREPARING,finding_sitemap:k.STATUS.PREPARING,parsing_sitemap:k.STATUS.PREPARING,crawling_pages:k.STATUS.PREPARING,processing:k.STATUS.CONVERTING,section:k.STATUS.CONVERTING,converting:k.STATUS.CONVERTING,generating_index:k.STATUS.CONVERTING,completed:k.STATUS.COMPLETED,complete:k.STATUS.COMPLETED,error:k.STATUS.ERROR,failed:k.STATUS.ERROR},Ve={status:k.STATUS.IDLE,progress:0,error:null,startTime:null,completionTime:null,elapsedSeconds:0,currentFile:null,totalCount:0,type:null};function xn(){const{subscribe:s,set:e,update:t}=Le(Ve);let n=[],r=null;return{subscribe:s,setStatus:o=>t(l=>({...l,status:o})),setProgress:o=>t(l=>({...l,progress:Math.min(o,100)})),setError:o=>t(l=>({...l,error:o,status:o?k.STATUS.ERROR:l.status})),reset:()=>e(Ve),startTimer:()=>{r&&clearInterval(r);const o=Date.now();t(l=>({...l,startTime:o,elapsedSeconds:0})),r=setInterval(()=>{t(l=>{const i=Date.now()-l.startTime,a=Math.floor(i/1e3);return{...l,elapsedSeconds:a}})},1e3)},stopTimer:()=>{r&&(clearInterval(r),r=null)},formatElapsedTime:o=>{const l=Math.floor(o/3600),i=Math.floor(o%3600/60),a=o%60;return[l,i,a].map(c=>c.toString().padStart(2,"0")).join(":")},startFileConversion:async o=>{e({...Ve,status:k.STATUS.CONVERTING,type:k.TYPE.FILE,currentFile:o,startTime:Date.now()}),O.startTimer()},startBatchConversion:async o=>{e({...Ve,status:k.STATUS.CONVERTING,type:k.TYPE.BATCH,totalCount:o.length,startTime:Date.now()}),O.startTimer()},startWebsiteConversion:async o=>{e({...Ve,status:k.STATUS.CONVERTING,type:k.TYPE.WEBSITE,currentFile:o,startTime:Date.now()}),O.startTimer()},setCurrentFile:o=>t(l=>({...l,currentFile:o})),completeConversion:()=>{O.stopTimer(),t(o=>({...o,status:k.STATUS.COMPLETED,progress:100,completionTime:Date.now()})),n.forEach(o=>o())},onComplete:o=>{n.push(o)},batchUpdate:o=>{t(l=>{const i={...l,...o};if(o.status){const a=Qn[o.status]||o.status;i.status=a}return i})}}}const O=xn();Ie(O,s=>s.progress);Ie(O,s=>s.currentFile);Ie(O,s=>s.error);Ie(O,s=>s.type);Ie(O,s=>s.status);Ie(O,s=>s.status===k.STATUS.COMPLETED);class K extends Error{constructor(e,t={}){super(e),this.name="ConversionError",this.options=t,this.details=t.details||null,this.type=t.type||"generic",this.retryable=t.retryable!==!1}}class er{async selectFiles(e={}){try{return await window.electron.selectFiles(e)}catch(t){throw t instanceof K?t:new K(t.message||"File selection failed")}}async selectInputDirectory(e={}){try{return await window.electron.selectInputDirectory(e)}catch(t){throw t instanceof K?t:new K(t.message||"Directory selection failed")}}async selectOutputDirectory(e={}){try{return await window.electron.selectOutput(e)}catch(t){throw t instanceof K?t:new K(t.message||"Directory selection failed")}}async listDirectory(e,t={}){try{return await window.electron.listDirectoryDetailed(e,t)}catch(n){throw n instanceof K?n:new K(n.message||"Directory listing failed")}}async showItemInFolder(e){try{await window.electron.showItemInFolder(e)}catch(t){throw t instanceof K?t:new K(t.message||"Failed to show item in folder")}}async getStats(e){try{return await window.electron.getStats(e)}catch(t){throw t instanceof K?t:new K(t.message||"Failed to get file stats")}}async readFile(e){try{return await window.electron.readFile(e)}catch(t){throw t instanceof K?t:new K(t.message||"Failed to read file")}}async writeFile(e,t){try{return await window.electron.writeFile(e,t)}catch(n){throw n instanceof K?n:new K(n.message||"Failed to write file")}}async createDirectory(e){try{return await window.electron.createDirectory(e)}catch(t){throw t instanceof K?t:new K(t.message||"Failed to create directory")}}async moveItem(e,t){try{return await window.electron.moveItem(e,t)}catch(n){throw n instanceof K?n:new K(n.message||"Failed to move item")}}async deleteItem(e,t=!1){try{return await window.electron.deleteItem(e,t)}catch(n){throw n instanceof K?n:new K(n.message||"Failed to delete item")}}async openFile(e){try{await window.electron.openExternal(`file://${e}`)}catch(t){throw t instanceof K?t:new K(t.message||"Failed to open file")}}async openFolder(e){try{await window.electron.openExternal(`file://${e}`)}catch(t){throw t instanceof K?t:new K(t.message||"Failed to open folder")}}}const $e=new er;function Qt(s=""){try{const e=crypto.randomUUID();return s?`${s}-${e}`:e}catch{const t=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;return s?`${s}-${t}`:t}}function Qe(s){try{const e=new URL(s),t=e.pathname.replace(/\/+$/,"").toLowerCase();return e.pathname=t,e.href.toLowerCase()}catch(e){return console.error("URL normalization error:",e),s.toLowerCase()}}const Me={documents:["pdf","docx","pptx","html","htm"],audio:["mp3","wav","m4a","flac","ogg"],video:["mp4","webm","avi","mov","mkv"],data:["csv","xlsx"]};function xt(s){if(!s)return!1;const e=s.toLowerCase();return Object.values(Me).some(t=>t.includes(e))}function tr(s){return s&&Me.audio.includes(s.toLowerCase())}function nr(s){return s&&Me.video.includes(s.toLowerCase())}function rr(s){if(!s)return null;const e=s.toLowerCase();for(const[t,n]of Object.entries(Me))if(n.includes(e))return t;return null}function sr(s,e=["url","parent","youtube","document","audio","video","data"]){var l,i,a;if(!(s!=null&&s.type))throw new Error("Invalid item: missing type");const t=s.type.toLowerCase(),n=Object.values(Me).flat();if(!e.includes(t)&&!n.includes(t))throw new Error(`Unsupported type: ${t}`);if(t==="parent"&&!s.url)throw new Error("Parent URL is required");const r=s.url?Qe(s.url):null,o=s.content&&typeof s.content=="string"?Qe(s.content):s.content;if(s.file instanceof File){const c=s.file.name.split(".").pop().toLowerCase();if(!xt(c))throw new Error(`Unsupported file type: ${c}`)}return{id:s.id||Qt(),type:t,name:((l=s.name)==null?void 0:l.trim())||"Untitled",url:r,content:o,file:s.file,options:{includeImages:!0,includeMeta:!0,convertLinks:!0,...t==="parent"&&{depth:((i=s.options)==null?void 0:i.depth)||1,maxPages:((a=s.options)==null?void 0:a.maxPages)||10},...s.options}}}const en=Object.freeze(Object.defineProperty({__proto__:null,fileCategories:Me,generateId:Qt,getFileCategory:rr,isAudioType:tr,isSupportedFileType:xt,isVideoType:nr,normalizeUrl:Qe,validateAndNormalizeItem:sr},Symbol.toStringTag,{value:"Module"})),{generateId:or}=en,{fileCategories:ir}=en;function Et(s,e,t){const n=s.slice();return n[3]=e[t],n}function St(s){let e,t,n,r=s[3].icon+"",o,l,i,a=s[3].label+"",c,f,u,d,v,S;function b(){return s[2](s[3])}return{c(){e=T("button"),t=T("div"),n=T("span"),o=G(r),l=L(),i=T("span"),c=G(a),u=L(),this.h()},l(g){e=y(g,"BUTTON",{class:!0,"aria-selected":!0,role:!0,"aria-controls":!0,title:!0});var m=A(e);t=y(m,"DIV",{class:!0});var C=A(t);n=y(C,"SPAN",{class:!0,"aria-hidden":!0});var E=A(n);o=z(E,r),E.forEach(p),l=N(C),i=y(C,"SPAN",{class:!0});var D=A(i);c=z(D,a),D.forEach(p),C.forEach(p),u=N(m),m.forEach(p),this.h()},h(){h(n,"class","tab-icon svelte-9pd084"),h(n,"aria-hidden","true"),h(i,"class","tab-label svelte-9pd084"),h(t,"class","tab-content svelte-9pd084"),h(e,"class","tab-button svelte-9pd084"),h(e,"aria-selected",d=s[0].activeTab===s[3].id),h(e,"role","tab"),h(e,"aria-controls","tab-content-"+s[3].id),h(e,"title",s[3].description),ie(e,"active",s[0].activeTab===s[3].id)},m(g,m){I(g,e,m),w(e,t),w(t,n),w(n,o),w(t,l),w(t,i),w(i,c),w(e,u),v||(S=ne(e,"click",b),v=!0)},p(g,m){s=g,m&1&&d!==(d=s[0].activeTab===s[3].id)&&h(e,"aria-selected",d),m&3&&ie(e,"active",s[0].activeTab===s[3].id)},i(g){g&&(f||X(()=>{f=J(t,se,{duration:200}),f.start()}))},o:U,d(g){g&&p(e),v=!1,S()}}}function lr(s){let e,t,n=Ne(s[1]),r=[];for(let o=0;o<n.length;o+=1)r[o]=St(Et(s,n,o));return{c(){e=T("div"),t=T("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=y(o,"DIV",{class:!0,role:!0});var l=A(e);t=y(l,"DIV",{class:!0});var i=A(t);for(let a=0;a<r.length;a+=1)r[a].l(i);i.forEach(p),l.forEach(p),this.h()},h(){h(t,"class","tabs-container svelte-9pd084"),h(e,"class","tabs-nav svelte-9pd084"),h(e,"role","tablist")},m(o,l){I(o,e,l),w(e,t);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,null)},p(o,[l]){if(l&3){n=Ne(o[1]);let i;for(i=0;i<n.length;i+=1){const a=Et(o,n,i);r[i]?(r[i].p(a,l),_(r[i],1)):(r[i]=St(a),r[i].c(),_(r[i],1),r[i].m(t,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},i(o){for(let l=0;l<n.length;l+=1)_(r[l])},o:U,d(o){o&&p(e),ln(r,o)}}}function ar(s,e,t){let n;return ae(s,ce,l=>t(0,n=l)),[n,[{id:"single",icon:"🔗",label:"Single Page",description:"Convert a single webpage"},{id:"parent",icon:"🗺️",label:"Full Website",description:"Convert parent and children URLs"}],l=>ce.setActiveTab(l.id)]}class cr extends fe{constructor(e){super(),de(this,e,ar,lr,ue,{})}}function Ct(s){let e,t="Add to queue",n,r;return{c(){e=T("div"),e.textContent=t,this.h()},l(o){e=y(o,"DIV",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-1i9q5c3"&&(e.textContent=t),this.h()},h(){h(e,"class","tooltip svelte-pb31e4")},m(o,l){I(o,e,l),r=!0},i(o){r||(o&&X(()=>{r&&(n||(n=Te(e,se,{duration:150},!0)),n.run(1))}),r=!0)},o(o){o&&(n||(n=Te(e,se,{duration:150},!1)),n.run(0)),r=!1},d(o){o&&p(e),o&&n&&n.end()}}}function kt(s){let e,t,n;return{c(){e=T("div"),t=G(s[2]),this.h()},l(r){e=y(r,"DIV",{id:!0,class:!0,role:!0});var o=A(e);t=z(o,s[2]),o.forEach(p),this.h()},h(){h(e,"id","url-error"),h(e,"class","error-message svelte-pb31e4"),h(e,"role","alert")},m(r,o){I(r,e,o),w(e,t)},p(r,o){o&4&&be(t,r[2])},i(r){r&&(n||X(()=>{n=J(e,se,{duration:200}),n.start()}))},o:U,d(r){r&&p(e)}}}function It(s){let e,t="The URL format looks incorrect.",n;return{c(){e=T("div"),e.textContent=t,this.h()},l(r){e=y(r,"DIV",{id:!0,class:!0,role:!0,"data-svelte-h":!0}),re(e)!=="svelte-1zgive"&&(e.textContent=t),this.h()},h(){h(e,"id","url-format-warning"),h(e,"class","error-message svelte-pb31e4"),h(e,"role","alert")},m(r,o){I(r,e,o)},i(r){r&&(n||X(()=>{n=J(e,se,{duration:200}),n.start()}))},o:U,d(r){r&&p(e)}}}function At(s){let e,t="Remove the file first to add a URL instead.",n;return{c(){e=T("div"),e.textContent=t,this.h()},l(r){e=y(r,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),re(e)!=="svelte-50jxth"&&(e.textContent=t),this.h()},h(){h(e,"class","info-message svelte-pb31e4"),h(e,"role","status")},m(r,o){I(r,e,o)},i(r){r&&(n||X(()=>{n=J(e,se,{duration:200}),n.start()}))},o:U,d(r){r&&p(e)}}}function ur(s){let e,t,n,r,o,l,i,a,c="➕",f,u,d,v,S,b,g,m,C=s[3]&&Ct(),E=s[2]&&kt(s),D=s[0]&&!s[4]&&!s[2]&&It(),F=s[1]&&At();return{c(){e=T("div"),t=T("div"),n=T("input"),l=L(),i=T("button"),a=T("span"),a.textContent=c,f=L(),C&&C.c(),d=L(),E&&E.c(),v=L(),D&&D.c(),S=L(),F&&F.c(),this.h()},l(R){e=y(R,"DIV",{class:!0});var P=A(e);t=y(P,"DIV",{class:!0});var te=A(t);n=y(te,"INPUT",{type:!0,class:!0,placeholder:!0,"aria-label":!0,"aria-describedby":!0}),l=N(te),i=y(te,"BUTTON",{class:!0,"aria-label":!0});var V=A(i);a=y(V,"SPAN",{class:!0,"data-svelte-h":!0}),re(a)!=="svelte-fjyec9"&&(a.textContent=c),f=N(V),C&&C.l(V),V.forEach(p),te.forEach(p),d=N(P),E&&E.l(P),v=N(P),D&&D.l(P),S=N(P),F&&F.l(P),P.forEach(p),this.h()},h(){h(n,"type","text"),h(n,"class","url-input svelte-pb31e4"),h(n,"placeholder",r=s[1]?"Please remove file to add URL":s[5].placeholder),n.disabled=s[6],h(n,"aria-label",o=s[1]?"URL input disabled while file is present":s[5].placeholder),h(n,"aria-describedby","url-error"),h(a,"class","icon svelte-pb31e4"),h(i,"class","submit-button svelte-pb31e4"),i.disabled=u=!s[4]||s[6],h(i,"aria-label","Add URL to queue"),h(t,"class","input-container svelte-pb31e4"),h(e,"class","url-input-section svelte-pb31e4")},m(R,P){I(R,e,P),w(e,t),w(t,n),ft(n,s[0]),w(t,l),w(t,i),w(i,a),w(i,f),C&&C.m(i,null),w(e,d),E&&E.m(e,null),w(e,v),D&&D.m(e,null),w(e,S),F&&F.m(e,null),g||(m=[ne(n,"input",s[13]),ne(n,"input",s[7]),ne(n,"keypress",s[9]),ne(n,"paste",mr),ne(i,"click",s[8]),ne(i,"mouseenter",s[14]),ne(i,"mouseleave",s[15])],g=!0)},p(R,[P]){P&34&&r!==(r=R[1]?"Please remove file to add URL":R[5].placeholder)&&h(n,"placeholder",r),P&64&&(n.disabled=R[6]),P&34&&o!==(o=R[1]?"URL input disabled while file is present":R[5].placeholder)&&h(n,"aria-label",o),P&1&&n.value!==R[0]&&ft(n,R[0]),R[3]?C?P&8&&_(C,1):(C=Ct(),C.c(),_(C,1),C.m(i,null)):C&&(x(),$(C,1,1,()=>{C=null}),ee()),P&80&&u!==(u=!R[4]||R[6])&&(i.disabled=u),R[2]?E?(E.p(R,P),P&4&&_(E,1)):(E=kt(R),E.c(),_(E,1),E.m(e,v)):E&&(E.d(1),E=null),R[0]&&!R[4]&&!R[2]?D?P&21&&_(D,1):(D=It(),D.c(),_(D,1),D.m(e,S)):D&&(D.d(1),D=null),R[1]?F?P&2&&_(F,1):(F=At(),F.c(),_(F,1),F.m(e,null)):F&&(F.d(1),F=null)},i(R){_(C),_(E),_(D),_(F),R&&(b||X(()=>{b=J(e,se,{duration:200}),b.start()}))},o(R){$(C)},d(R){R&&p(e),C&&C.d(),E&&E.d(),D&&D.d(),F&&F.d(),g=!1,tt(m)}}}let fr=!1;function dr(s){try{const e=s.trim();return/^(https?:\/\/)?([\w-]+(\.[\w-]+)+|localhost)(:\d+)?(\/\S*)?$/.test(e)}catch{return!1}}function pr(s){if(!s)throw new Error("URL is required");let e=s.trim().replace(/\s+/g,"");/^https?:\/\//i.test(e)||(e=`https://${e}`);try{return new URL(e),e}catch{throw new Error("Invalid URL format")}}function mr(){const s=document.querySelector(".url-input");s.classList.add("pasted"),setTimeout(()=>s.classList.remove("pasted"),300)}function hr(s,e,t){let n,r,o,l,i,a,c;ae(s,le,F=>t(11,a=F)),ae(s,ce,F=>t(12,c=F));const f=ke();let u="",d="",v=!1;const S={parent:{icon:"🗺️",placeholder:"Enter parent URL to convert all linked pages",type:"parenturl"},single:{icon:"🔗",placeholder:"Enter URL to convert to Markdown",type:"url"}};function b(F){const R=F.target.value;t(0,u=R),ce.setUrlInput(R),t(2,d="")}async function g(){try{if(!u.trim())throw new Error("Please enter a URL");const F=pr(u),R=new URL(F),P={url:F,name:`${R.hostname}${R.pathname}`,type:r.type,options:{...r.type==="parenturl"&&{maxDepth:3,maxPages:100,includeImages:!0,includeMeta:!0}}},te=le.addFile(P);te.success?(t(0,u=""),ce.setUrlInput(""),f("submitUrl",{url:F,type:r.type})):!te.success&&te.message&&t(2,d=te.message)}catch(F){console.error("URL submission error:",F),t(2,d=F.message)}}function m(F){F.key==="Enter"&&o&&g()}function C(){u=this.value,t(0,u)}const E=()=>t(3,v=!0),D=()=>t(3,v=!1);return s.$$.update=()=>{s.$$.dirty&4096&&t(10,n=c.activeTab),s.$$.dirty&1024&&t(5,r=S[n]||S.single),s.$$.dirty&1&&t(4,o=u&&dr(u)),s.$$.dirty&2048&&t(1,l=a.length>0&&!a[0].url),s.$$.dirty&2&&t(6,i=l||fr)},[u,l,d,v,o,r,i,b,g,m,n,a,c,C,E,D]}class gr extends fe{constructor(e){super(),de(this,e,hr,ur,ue,{})}}function vr(s){let e,t='<span class="icon svelte-lqzsw4">📥</span>',n,r,o,l="Drop file to convert!";return{c(){e=T("div"),e.innerHTML=t,r=L(),o=T("p"),o.textContent=l,this.h()},l(i){e=y(i,"DIV",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-1n6bf41"&&(e.innerHTML=t),r=N(i),o=y(i,"P",{class:!0,"data-svelte-h":!0}),re(o)!=="svelte-s7ivln"&&(o.textContent=l),this.h()},h(){h(e,"class","icon-container svelte-lqzsw4"),h(o,"class","primary-text svelte-lqzsw4")},m(i,a){I(i,e,a),I(i,r,a),I(i,o,a)},p:U,i(i){i&&(n||X(()=>{n=J(e,Zt,{duration:200}),n.start()}))},o:U,d(i){i&&(p(e),p(r),p(o))}}}function _r(s){let e,t='<span class="icon svelte-lqzsw4">📂</span>',n,r,o,l="Drag and drop a file here",i,a,c="or click to browse your computer",f,u,d,v="Supported formats:",S,b;return{c(){e=T("div"),e.innerHTML=t,n=L(),r=T("div"),o=T("p"),o.textContent=l,i=L(),a=T("p"),a.textContent=c,f=L(),u=T("p"),d=T("b"),d.textContent=v,S=L(),b=G(s[2]),this.h()},l(g){e=y(g,"DIV",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-mmfh4u"&&(e.innerHTML=t),n=N(g),r=y(g,"DIV",{class:!0});var m=A(r);o=y(m,"P",{class:!0,"data-svelte-h":!0}),re(o)!=="svelte-qcog7m"&&(o.textContent=l),i=N(m),a=y(m,"P",{class:!0,"data-svelte-h":!0}),re(a)!=="svelte-ga481f"&&(a.textContent=c),f=N(m),u=y(m,"P",{class:!0});var C=A(u);d=y(C,"B",{"data-svelte-h":!0}),re(d)!=="svelte-tid4jo"&&(d.textContent=v),S=N(C),b=z(C,s[2]),C.forEach(p),m.forEach(p),this.h()},h(){h(e,"class","icon-container svelte-lqzsw4"),h(o,"class","primary-text svelte-lqzsw4"),h(a,"class","secondary-text svelte-lqzsw4"),h(u,"class","file-types svelte-lqzsw4"),h(r,"class","text-content svelte-lqzsw4")},m(g,m){I(g,e,m),I(g,n,m),I(g,r,m),w(r,o),w(r,i),w(r,a),w(r,f),w(r,u),w(u,d),w(u,S),w(u,b)},p(g,m){m&4&&be(b,g[2])},i:U,o:U,d(g){g&&(p(e),p(n),p(r))}}}function br(s){let e,t,n,r,o,l,i,a;function c(d,v){return d[3].dragOver?vr:_r}let f=c(s),u=f(s);return{c(){e=T("div"),t=T("input"),r=L(),o=T("div"),u.c(),this.h()},l(d){e=y(d,"DIV",{class:!0,role:!0,tabindex:!0});var v=A(e);t=y(v,"INPUT",{type:!0,accept:!0,class:!0}),r=N(v),o=y(v,"DIV",{class:!0});var S=A(o);u.l(S),S.forEach(p),v.forEach(p),this.h()},h(){h(t,"type","file"),h(t,"accept",n=s[0].map($t).join(",")),h(t,"class","file-input svelte-lqzsw4"),h(o,"class","drop-zone-content svelte-lqzsw4"),h(e,"class","drop-zone svelte-lqzsw4"),h(e,"role","button"),h(e,"tabindex","0"),ie(e,"drag-over",s[3].dragOver)},m(d,v){I(d,e,v),w(e,t),s[9](t),w(e,r),w(e,o),u.m(o,null),i||(a=[ne(t,"change",s[7]),ne(e,"dragenter",s[5]),ne(e,"dragleave",s[6]),ne(e,"dragover",an(s[8])),ne(e,"drop",s[4]),ne(e,"click",s[10]),ne(e,"keydown",s[11])],i=!0)},p(d,[v]){v&1&&n!==(n=d[0].map($t).join(","))&&h(t,"accept",n),f===(f=c(d))&&u?u.p(d,v):(u.d(1),u=f(d),u&&(u.c(),_(u,1),u.m(o,null))),v&8&&ie(e,"drag-over",d[3].dragOver)},i(d){_(u),d&&(l||X(()=>{l=J(o,Zt,{duration:200}),l.start()}))},o:U,d(d){d&&p(e),s[9](null),u.d(),i=!1,tt(a)}}}const $t=s=>`.${s}`;function wr(s,e,t){let n,r;ae(s,ce,m=>t(3,r=m));let{acceptedTypes:o=[]}=e,l,i=0;const a=ke();function c(m){m.preventDefault(),ce.setDragOver(!1),i=0;const C=Array.from(m.dataTransfer.files),E=C.length>0?[C[0]]:[];a("filesDropped",{files:E})}function f(m){m.preventDefault(),i++,ce.setDragOver(!0)}function u(m){m.preventDefault(),i--,i===0&&ce.setDragOver(!1)}function d(m){const C=Array.from(m.target.files),E=C.length>0?[C[0]]:[];a("filesSelected",{files:E}),m.target.value=""}function v(m){cn.call(this,s,m)}function S(m){qt[m?"unshift":"push"](()=>{l=m,t(1,l)})}const b=()=>l.click(),g=m=>{(m.key==="Enter"||m.key===" ")&&l.click()};return s.$$set=m=>{"acceptedTypes"in m&&t(0,o=m.acceptedTypes)},s.$$.update=()=>{s.$$.dirty&1&&t(2,n=o.map(m=>m.toUpperCase()).join(", "))},[o,l,n,r,c,f,u,d,v,S,b,g]}class yr extends fe{constructor(e){super(),de(this,e,wr,br,ue,{acceptedTypes:0})}}function Ft(s){let e,t,n,r,o=s[0].message+"",l,i,a;function c(d,v){return d[0].messageType==="error"?Sr:d[0].messageType==="success"?Er:Tr}let f=c(s),u=f(s);return{c(){e=T("div"),t=T("span"),u.c(),n=L(),r=T("span"),l=G(o),this.h()},l(d){e=y(d,"DIV",{class:!0,role:!0});var v=A(e);t=y(v,"SPAN",{class:!0});var S=A(t);u.l(S),S.forEach(p),n=N(v),r=y(v,"SPAN",{class:!0});var b=A(r);l=z(b,o),b.forEach(p),v.forEach(p),this.h()},h(){h(t,"class","icon svelte-7zf6ka"),h(r,"class","text svelte-7zf6ka"),h(e,"class",i="message "+s[0].messageType+" svelte-7zf6ka"),h(e,"role","alert")},m(d,v){I(d,e,v),w(e,t),u.m(t,null),w(e,n),w(e,r),w(r,l)},p(d,v){f!==(f=c(d))&&(u.d(1),u=f(d),u&&(u.c(),u.m(t,null))),v&1&&o!==(o=d[0].message+"")&&be(l,o),v&1&&i!==(i="message "+d[0].messageType+" svelte-7zf6ka")&&h(e,"class",i)},i(d){d&&(a||X(()=>{a=J(e,Se,{y:10,duration:200}),a.start()}))},o:U,d(d){d&&p(e),u.d()}}}function Tr(s){let e;return{c(){e=G("ℹ️")},l(t){e=z(t,"ℹ️")},m(t,n){I(t,e,n)},d(t){t&&p(e)}}}function Er(s){let e;return{c(){e=G("✅")},l(t){e=z(t,"✅")},m(t,n){I(t,e,n)},d(t){t&&p(e)}}}function Sr(s){let e;return{c(){e=G("⚠️")},l(t){e=z(t,"⚠️")},m(t,n){I(t,e,n)},d(t){t&&p(e)}}}function Cr(s){let e,t=s[0].message&&Ft(s);return{c(){t&&t.c(),e=ge()},l(n){t&&t.l(n),e=ge()},m(n,r){t&&t.m(n,r),I(n,e,r)},p(n,[r]){n[0].message?t?(t.p(n,r),r&1&&_(t,1)):(t=Ft(n),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i(n){_(t)},o:U,d(n){n&&p(e),t&&t.d(n)}}}function kr(s,e,t){let n;return ae(s,ce,r=>t(0,n=r)),[n]}class tn extends fe{constructor(e){super(),de(this,e,kr,Cr,ue,{})}}const ye={txt:{icon:"📄",color:"#4A90E2",label:"Text Document"},pdf:{icon:"📕",color:"#E24A4A",label:"PDF Document"},doc:{icon:"📘",color:"#4A90E2",label:"Word Document"},docx:{icon:"📘",color:"#4A90E2",label:"Word Document"},csv:{icon:"📊",color:"#4AE266",label:"CSV File"},xlsx:{icon:"📈",color:"#4AE266",label:"Excel Spreadsheet"},pptx:{icon:"📊",color:"#E24A4A",label:"PowerPoint Presentation"},audio:{icon:"🎵",color:"#9E4AE2",label:"Audio File"},mp3:{icon:"🎵",color:"#9E4AE2",label:"Audio File"},wav:{icon:"🎵",color:"#9E4AE2",label:"Audio File"},ogg:{icon:"🎵",color:"#9E4AE2",label:"Audio File"},m4a:{icon:"🎵",color:"#9E4AE2",label:"Audio File"},aac:{icon:"🎵",color:"#9E4AE2",label:"Audio File"},wma:{icon:"🎵",color:"#9E4AE2",label:"Audio File"},mpga:{icon:"🎵",color:"#9E4AE2",label:"Audio File"},video:{icon:"🎥",color:"#E24A4A",label:"Video File"},mp4:{icon:"🎥",color:"#E24A4A",label:"Video File"},webm:{icon:"🎥",color:"#E24A4A",label:"Video File"},avi:{icon:"🎥",color:"#E24A4A",label:"Video File"},mov:{icon:"🎥",color:"#E24A4A",label:"Video File"},mpeg:{icon:"🎥",color:"#E24A4A",label:"Video File"},mkv:{icon:"🎥",color:"#E24A4A",label:"Video File"},url:{icon:"🔗",color:"#4AE2B5",label:"URL Link"},parenturl:{icon:"🗺️",color:"#9E4AE2",label:"Parent URL"},default:{icon:"🗎",color:"#B8B8B8",label:"File"}},Dt={"audio/mpeg":"mp3","audio/mp3":"mp3","audio/wav":"wav","audio/ogg":"ogg","audio/x-m4a":"m4a","audio/aac":"aac","audio/x-ms-wma":"wma","audio/mpa":"mpga","video/mp4":"mp4","video/webm":"webm","video/x-msvideo":"avi","video/quicktime":"mov","video/mpeg":"mpeg","video/x-matroska":"mkv","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/pdf":"pdf","application/vnd.ms-excel":"xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","text/csv":"csv","application/csv":"csv"};function Ir(s){if(console.log("Getting icon config for type:",s),!s)return console.log("No type provided, using default"),ye.default;let e=s.toLowerCase();if(console.log("Normalized type:",e),Dt[e]&&(e=Dt[e],console.log("Mapped MIME type to:",e)),e=e.replace(/^\.*/,""),ye[e])return console.log("Found direct icon match:",ye[e].icon),ye[e];const t=Ar(e);return t&&ye[t]?(console.log("Found base type match:",ye[t].icon),ye[t]):(console.log("No match found, using default"),ye.default)}function Ar(s){const e={audio:["mp3","wav","ogg","m4a","aac","wma","mpga"],video:["mp4","webm","avi","mov","mpeg","mkv"],data:["csv","xlsx","xls","json","yaml","yml"]};s=s.toLowerCase();for(const[t,n]of Object.entries(e))if(n.includes(s))return t;return null}function $r(s){return Ir(s).icon}function Fr(s){let e,t,n,r,o,l,i=s[0].name+"",a,c,f,u,d,v,S,b;return{c(){e=T("div"),t=T("div"),n=T("span"),r=G(s[1]),o=L(),l=T("span"),a=G(i),f=L(),u=T("button"),d=G("🗑️"),this.h()},l(g){e=y(g,"DIV",{class:!0});var m=A(e);t=y(m,"DIV",{class:!0});var C=A(t);n=y(C,"SPAN",{class:!0,"aria-hidden":!0});var E=A(n);r=z(E,s[1]),E.forEach(p),o=N(C),l=y(C,"SPAN",{class:!0,title:!0});var D=A(l);a=z(D,i),D.forEach(p),C.forEach(p),f=N(m),u=y(m,"BUTTON",{class:!0,"aria-label":!0,title:!0});var F=A(u);d=z(F,"🗑️"),F.forEach(p),m.forEach(p),this.h()},h(){h(n,"class","icon svelte-1jd8k4n"),h(n,"aria-hidden","true"),h(l,"class","file-name svelte-1jd8k4n"),h(l,"title",c=s[0].name),h(t,"class","file-info svelte-1jd8k4n"),h(u,"class","delete-button svelte-1jd8k4n"),h(u,"aria-label",v=`Remove ${s[0].name}`),h(u,"title","Remove file"),h(e,"class","file-card svelte-1jd8k4n")},m(g,m){I(g,e,m),w(e,t),w(t,n),w(n,r),w(t,o),w(t,l),w(l,a),w(e,f),w(e,u),w(u,d),S||(b=ne(u,"click",s[2]),S=!0)},p(g,[m]){m&2&&be(r,g[1]),m&1&&i!==(i=g[0].name+"")&&be(a,i),m&1&&c!==(c=g[0].name)&&h(l,"title",c),m&1&&v!==(v=`Remove ${g[0].name}`)&&h(u,"aria-label",v)},i:U,o:U,d(g){g&&p(e),S=!1,b()}}}function Dr(s,e,t){let n,{file:r}=e;const o=ke();function l(){o("remove",{id:r.id})}return s.$$set=i=>{"file"in i&&t(0,r=i.file)},s.$$.update=()=>{s.$$.dirty&1&&t(1,n=$r(r.type))},[r,n,l]}class Rr extends fe{constructor(e){super(),de(this,e,Dr,Fr,ue,{file:0})}}const Nr=s=>({}),Rt=s=>({});function Nt(s,e,t){const n=s.slice();return n[7]=e[t],n}function Lr(s){let e,t="<p>No files added yet.</p>",n;return{c(){e=T("div"),e.innerHTML=t,this.h()},l(r){e=y(r,"DIV",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-h9ab78"&&(e.innerHTML=t),this.h()},h(){h(e,"class","empty-state svelte-1ja9u35")},m(r,o){I(r,e,o)},p:U,i(r){r&&(n||X(()=>{n=J(e,se,{}),n.start()}))},o:U,d(r){r&&p(e)}}}function Mr(s){let e,t,n=[],r=new Map,o,l,i,a=Ne(s[1]);const c=u=>u[7].id;for(let u=0;u<a.length;u+=1){let d=Nt(s,a,u),v=c(d);r.set(v,n[u]=Lt(v,d))}let f=s[0]&&Mt(s);return{c(){e=T("div"),t=T("div");for(let u=0;u<n.length;u+=1)n[u].c();o=L(),f&&f.c(),this.h()},l(u){e=y(u,"DIV",{class:!0});var d=A(e);t=y(d,"DIV",{class:!0});var v=A(t);for(let S=0;S<n.length;S+=1)n[S].l(v);v.forEach(p),o=N(d),f&&f.l(d),d.forEach(p),this.h()},h(){h(t,"class","file-list svelte-1ja9u35"),h(e,"class","file-list-container svelte-1ja9u35")},m(u,d){I(u,e,d),w(e,t);for(let v=0;v<n.length;v+=1)n[v]&&n[v].m(t,null);w(e,o),f&&f.m(e,null),i=!0},p(u,d){d&10&&(a=Ne(u[1]),x(),n=Yt(n,d,c,1,u,a,r,t,Kt,Lt,null,Nt),ee()),u[0]?f?(f.p(u,d),d&1&&_(f,1)):(f=Mt(u),f.c(),_(f,1),f.m(e,null)):f&&(x(),$(f,1,1,()=>{f=null}),ee())},i(u){if(!i){for(let d=0;d<a.length;d+=1)_(n[d]);_(f),u&&(l||X(()=>{l=J(e,nt,{}),l.start()})),i=!0}},o(u){for(let d=0;d<n.length;d+=1)$(n[d]);$(f),i=!1},d(u){u&&p(e);for(let d=0;d<n.length;d+=1)n[d].d();f&&f.d()}}}function Lt(s,e){let t,n,r,o,l,i;return n=new Rr({props:{file:e[7]}}),n.$on("remove",e[3]),{key:s,first:null,c(){t=T("div"),H(n.$$.fragment),r=L(),this.h()},l(a){t=y(a,"DIV",{class:!0});var c=A(t);j(n.$$.fragment,c),r=N(c),c.forEach(p),this.h()},h(){h(t,"class","file-item svelte-1ja9u35"),this.first=t},m(a,c){I(a,t,c),W(n,t,null),w(t,r),i=!0},p(a,c){e=a;const f={};c&2&&(f.file=e[7]),n.$set(f)},i(a){i||(_(n.$$.fragment,a),a&&X(()=>{i&&(l&&l.end(1),o=J(t,se,{duration:200}),o.start())}),i=!0)},o(a){$(n.$$.fragment,a),o&&o.invalidate(),a&&(l=hn(t,se,{duration:150})),i=!1},d(a){a&&p(t),B(n),a&&l&&l.end()}}}function Mt(s){let e,t;const n=s[5]["conversion-button"],r=un(n,s,s[4],Rt);return{c(){e=T("div"),r&&r.c(),this.h()},l(o){e=y(o,"DIV",{class:!0});var l=A(e);r&&r.l(l),l.forEach(p),this.h()},h(){h(e,"class","conversion-button-container svelte-1ja9u35")},m(o,l){I(o,e,l),r&&r.m(e,null),t=!0},p(o,l){r&&r.p&&(!t||l&16)&&fn(r,n,o,o[4],t?pn(n,o[4],l,Nr):dn(o[4]),Rt)},i(o){t||(_(r,o),t=!0)},o(o){$(r,o),t=!1},d(o){o&&p(e),r&&r.d(o)}}}function Ur(s){let e,t,n,r;const o=[Mr,Lr],l=[];function i(a,c){return a[2]?0:1}return e=i(s),t=l[e]=o[e](s),{c(){t.c(),n=ge()},l(a){t.l(a),n=ge()},m(a,c){l[e].m(a,c),I(a,n,c),r=!0},p(a,[c]){let f=e;e=i(a),e===f?l[e].p(a,c):(x(),$(l[f],1,1,()=>{l[f]=null}),ee(),t=l[e],t?t.p(a,c):(t=l[e]=o[e](a),t.c()),_(t,1),t.m(n.parentNode,n))},i(a){r||(_(t),r=!0)},o(a){$(t),r=!1},d(a){a&&p(n),l[e].d(a)}}}function Pr(s,e,t){let n,r;ae(s,le,f=>t(1,r=f));let{$$slots:o={},$$scope:l}=e;const i=ke();let{showConversionButton:a=!1}=e;function c(f){const{id:u}=f.detail;if(!u)return;const d=le.removeFile(u);d.success?(i("fileRemoved",{id:u,file:d.file}),r.length===0&&le.clearFiles()):console.error("Error removing file:",d.message)}return s.$$set=f=>{"showConversionButton"in f&&t(0,a=f.showConversionButton),"$$scope"in f&&t(4,l=f.$$scope)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=r&&r.length>0)},[a,r,n,c,l,o]}class Or extends fe{constructor(e){super(),de(this,e,Pr,Ur,ue,{showConversionButton:0})}}function Ut(s){let e,t,n,r,o,l,i,a,c,f,u,d,v;t=new cr({}),r=new gr({}),f=new yr({props:{acceptedTypes:s[6]}}),f.$on("filesDropped",s[10]),f.$on("filesSelected",s[11]);let S=s[5].message&&Pt();return{c(){e=T("div"),H(t.$$.fragment),n=L(),H(r.$$.fragment),o=L(),l=T("div"),i=L(),a=T("div"),c=T("div"),H(f.$$.fragment),u=L(),S&&S.c(),d=ge(),this.h()},l(b){e=y(b,"DIV",{class:!0});var g=A(e);j(t.$$.fragment,g),n=N(g),j(r.$$.fragment,g),g.forEach(p),o=N(b),l=y(b,"DIV",{class:!0}),A(l).forEach(p),i=N(b),a=y(b,"DIV",{class:!0});var m=A(a);c=y(m,"DIV",{});var C=A(c);j(f.$$.fragment,C),C.forEach(p),m.forEach(p),u=N(b),S&&S.l(b),d=ge(),this.h()},h(){h(e,"class","section svelte-1pnnf18"),h(l,"class","section-divider svelte-1pnnf18"),h(a,"class","section svelte-1pnnf18")},m(b,g){I(b,e,g),W(t,e,null),w(e,n),W(r,e,null),I(b,o,g),I(b,l,g),I(b,i,g),I(b,a,g),w(a,c),W(f,c,null),I(b,u,g),S&&S.m(b,g),I(b,d,g),v=!0},p(b,g){b[5].message?S?g&32&&_(S,1):(S=Pt(),S.c(),_(S,1),S.m(d.parentNode,d)):S&&(x(),$(S,1,1,()=>{S=null}),ee())},i(b){v||(_(t.$$.fragment,b),_(r.$$.fragment,b),_(f.$$.fragment,b),_(S),v=!0)},o(b){$(t.$$.fragment,b),$(r.$$.fragment,b),$(f.$$.fragment,b),$(S),v=!1},d(b){b&&(p(e),p(o),p(l),p(i),p(a),p(u),p(d)),B(t),B(r),B(f),S&&S.d(b)}}}function Pt(s){let e,t,n;return t=new tn({}),{c(){e=T("div"),H(t.$$.fragment),this.h()},l(r){e=y(r,"DIV",{class:!0});var o=A(e);j(t.$$.fragment,o),o.forEach(p),this.h()},h(){h(e,"class","section svelte-1pnnf18")},m(r,o){I(r,e,o),W(t,e,null),n=!0},i(r){n||(_(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){r&&p(e),B(t)}}}function Ot(s){let e,t,n;return t=new tn({}),{c(){e=T("div"),H(t.$$.fragment),this.h()},l(r){e=y(r,"DIV",{class:!0});var o=A(e);j(t.$$.fragment,o),o.forEach(p),this.h()},h(){h(e,"class","section svelte-1pnnf18")},m(r,o){I(r,e,o),W(t,e,null),n=!0},i(r){n||(_(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){r&&p(e),B(t)}}}function Vt(s){let e,t,n;return t=new Or({props:{showConversionButton:s[0],$$slots:{"conversion-button":[zr]},$$scope:{ctx:s}}}),t.$on("fileRemoved",Wr),{c(){e=T("div"),H(t.$$.fragment),this.h()},l(r){e=y(r,"DIV",{class:!0});var o=A(e);j(t.$$.fragment,o),o.forEach(p),this.h()},h(){h(e,"class","section svelte-1pnnf18")},m(r,o){I(r,e,o),W(t,e,null),n=!0},p(r,o){const l={};o&1&&(l.showConversionButton=r[0]),o&8388610&&(l.$$scope={dirty:o,ctx:r}),t.$set(l)},i(r){n||(_(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){r&&p(e),B(t)}}}function Vr(s){let e;return{c(){e=G("Start Conversion")},l(t){e=z(t,"Start Conversion")},m(t,n){I(t,e,n)},d(t){t&&p(e)}}}function zr(s){let e,t,n;return t=new Ce({props:{variant:"primary",size:"large",fullWidth:!0,$$slots:{default:[Vr]},$$scope:{ctx:s}}}),t.$on("click",function(){mn(s[1])&&s[1].apply(this,arguments)}),{c(){e=T("div"),H(t.$$.fragment),this.h()},l(r){e=y(r,"DIV",{slot:!0});var o=A(e);j(t.$$.fragment,o),o.forEach(p),this.h()},h(){h(e,"slot","conversion-button")},m(r,o){I(r,e,o),W(t,e,null),n=!0},p(r,o){s=r;const l={};o&8388608&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(r){n||(_(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){r&&p(e),B(t)}}}function zt(s){let e,t,n;return t=new vn({}),{c(){e=T("div"),H(t.$$.fragment),this.h()},l(r){e=y(r,"DIV",{class:!0});var o=A(e);j(t.$$.fragment,o),o.forEach(p),this.h()},h(){h(e,"class","section svelte-1pnnf18")},m(r,o){I(r,e,o),W(t,e,null),n=!0},i(r){n||(_(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){r&&p(e),B(t)}}}function Gr(s){let e,t,n,r,o,l=!s[4]&&Ut(s),i=s[5].message&&Ot(),a=s[4]&&Vt(s),c=s[3]&&zt();return{c(){e=T("div"),l&&l.c(),t=L(),i&&i.c(),n=L(),a&&a.c(),r=L(),c&&c.c(),this.h()},l(f){e=y(f,"DIV",{class:!0});var u=A(e);l&&l.l(u),t=N(u),i&&i.l(u),n=N(u),a&&a.l(u),r=N(u),c&&c.l(u),u.forEach(p),this.h()},h(){h(e,"class","uploader-content svelte-1pnnf18")},m(f,u){I(f,e,u),l&&l.m(e,null),w(e,t),i&&i.m(e,null),w(e,n),a&&a.m(e,null),w(e,r),c&&c.m(e,null),o=!0},p(f,u){f[4]?l&&(x(),$(l,1,1,()=>{l=null}),ee()):l?(l.p(f,u),u&16&&_(l,1)):(l=Ut(f),l.c(),_(l,1),l.m(e,t)),f[5].message?i?u&32&&_(i,1):(i=Ot(),i.c(),_(i,1),i.m(e,n)):i&&(x(),$(i,1,1,()=>{i=null}),ee()),f[4]?a?(a.p(f,u),u&16&&_(a,1)):(a=Vt(f),a.c(),_(a,1),a.m(e,r)):a&&(x(),$(a,1,1,()=>{a=null}),ee()),f[3]?c?u&8&&_(c,1):(c=zt(),c.c(),_(c,1),c.m(e,null)):c&&(x(),$(c,1,1,()=>{c=null}),ee())},i(f){o||(_(l),_(i),_(a),_(c),o=!0)},o(f){$(l),$(i),$(a),$(c),o=!1},d(f){f&&p(e),l&&l.d(),i&&i.d(),a&&a.d(),c&&c.d()}}}function Br(s){let e,t,n,r;return t=new Xt({props:{$$slots:{default:[Gr]},$$scope:{ctx:s}}}),{c(){e=T("div"),H(t.$$.fragment),this.h()},l(o){e=y(o,"DIV",{class:!0});var l=A(e);j(t.$$.fragment,l),l.forEach(p),this.h()},h(){h(e,"class","file-uploader svelte-1pnnf18")},m(o,l){I(o,e,l),W(t,e,null),r=!0},p(o,[l]){const i={};l&8388671&&(i.$$scope={dirty:l,ctx:o}),t.$set(i)},i(o){r||(_(t.$$.fragment,o),o&&(n||X(()=>{n=J(e,se,{duration:200}),n.start()})),r=!0)},o(o){$(t.$$.fragment,o),r=!1},d(o){o&&p(e),B(t)}}}const Wr=()=>{};function jr(s,e,t){let n,r,o,l,i,a;ae(s,rt,E=>t(12,E)),ae(s,le,E=>t(9,i=E)),ae(s,ce,E=>t(5,a=E));let{showConversionButton:c=!1}=e,{onStartConversion:f=()=>{}}=e;const u=ke(),v=Object.values(ir).flat();function S(E,D="info"){if(D!=="success")return ce.setMessage(E,D),setTimeout(()=>ce.clearMessage(),5e3)}function b(E){const F=typeof E=="string"?E.split(/[/\\]/).pop():E.name,R=F.split(".").pop().toLowerCase();return Kn(R)?{valid:!0}:{valid:!1,message:`Unsupported file type: ${F}`}}function g(E){if(ce.clearMessage(),E.length===0)return;const D=E[0],F=b(D);if(!F.valid){S(F.message,"error");return}const R=typeof D=="string",P=R?D.split(/[/\\]/).pop():D.name,te=P.split(".").pop().toLowerCase(),V=Je(R?{type:te}:D),pe={id:or(),name:P,file:D,path:R?D:null,type:te,status:"Ready",progress:0,selected:!1,requiresApiKey:V,isNative:R},Ue=le.addFile(pe);Ue.success?u("filesAdded",{files:[pe]}):S(Ue.message,"error")}const m=E=>!l&&g(E.detail.files),C=E=>!l&&g(E.detail.files);return s.$$set=E=>{"showConversionButton"in E&&t(0,c=E.showConversionButton),"onStartConversion"in E&&t(1,f=E.onStartConversion)},s.$$.update=()=>{s.$$.dirty&512&&t(4,n=i.length>0),s.$$.dirty&512&&t(3,r=i.some(E=>Je(E))),s.$$.dirty&512&&t(8,o=i.length>0&&i[0].url),s.$$.dirty&256&&t(2,l=o)},[c,f,l,r,n,a,v,g,o,i,m,C]}class Hr extends fe{constructor(e){super(),de(this,e,jr,Br,ue,{showConversionButton:0,onStartConversion:1})}}function qr(){const s={success:!1,outputPath:null,items:[],isNative:!0,message:null,error:null},{subscribe:e,set:t,update:n}=Le(null);return{subscribe:e,setResult:r=>{r.outputPath?t({success:!0,outputPath:r.outputPath,items:r.items||[],isNative:!0,message:r.message||"Conversion completed successfully",error:null}):r.error?t({success:!1,error:r.error,message:r.message||"Conversion failed",isNative:!0}):t({...s,...r,success:r.success!==!1,isNative:!0})},setNativeResult:(r,o=[],l={})=>{const{message:i=null,isBatch:a=!1,totalCount:c=o.length}=l;t({success:!0,outputPath:r,items:o,isNative:!0,isBatch:a,totalCount:c,message:i||"Conversion completed successfully",error:null})},setError:(r,o=null)=>{t({success:!1,error:r,message:o||r,isNative:!0})},clearResult:()=>t(null),hasResult:()=>{let r=null;return e(o=>{r=o})(),r!==null&&r.success===!0},hasError:()=>{let r=null;return e(o=>{r=o})(),r!==null&&r.success===!1}}}const Ee=qr(),q={IDLE:"idle",INITIALIZING:"initializing",PREPARING:"preparing",SELECTING_OUTPUT:"selecting_output",CONVERTING:"converting",PROCESSING:"processing",COMPLETED:"completed",ERROR:"error",CANCELLED:"cancelled"},Yr={PARENT:"parent"},Fe={RETRY_COUNT:3,RETRY_DELAY:500,CLEANUP_DELAY:1e3,SIZE_THRESHOLD:100*1024*1024,MAX_AGE:30*60*1e3},Kr=["pdf","pptx","docx","xlsx","jpg","jpeg","png","gif","mp3","mp4","wav","webm","avi"],Zr={[q.IDLE]:k.STATUS.IDLE,[q.INITIALIZING]:k.STATUS.INITIALIZING,[q.PREPARING]:k.STATUS.PREPARING,[q.SELECTING_OUTPUT]:k.STATUS.PREPARING,[q.CONVERTING]:k.STATUS.CONVERTING,[q.PROCESSING]:k.STATUS.CONVERTING,[q.COMPLETED]:k.STATUS.COMPLETED,[q.ERROR]:k.STATUS.ERROR,[q.CANCELLED]:k.STATUS.CANCELLED},Xr={prepare:k.STATUS.PREPARING,converting:k.STATUS.CONVERTING,complete:k.STATUS.COMPLETED};class Jr{updateConversionStatus(e,t){if(!Object.values(q).includes(e)){console.warn(`Invalid conversion status: ${e}`);return}const n=Zr[e]||e;O.setStatus(n),typeof t=="number"&&O.setProgress(t)}updateCurrentFile(e){if(!e){console.warn("No filename provided for current file update");return}O.setCurrentFile(e)}setError(e){O.stopTimer();const t=(e==null?void 0:e.message)||e||"An unknown error occurred";O.setError(t),console.error("[StoreManager] Error:",t)}updateWebsiteProgress(e,t){const n=Xr[e]||e;if(!n){console.warn(`Invalid website conversion phase: ${e}`);return}O.setStatus(n),t&&O.batchUpdate({message:t})}updateFileStatus(e,t,n=null){if(!e){console.warn("No fileId provided for status update");return}if(!Re(le).some(l=>l.id===e)){console.warn(`File with id ${e} not found`);return}le.updateFile(e,{status:t,...n?{outputPath:n}:{}})}setConversionResult(e,t,n={}){if(!e){console.warn("No result provided to setConversionResult");return}e.outputPath?Ee.setNativeResult(e.outputPath,t,n):e.blob?Ee.setWebResult(e.blob,t,n):console.warn("Invalid result format - missing outputPath or blob")}updateBatchProgress(e,t){if(typeof e!="number"||typeof t!="number"){console.warn("Invalid batch progress values");return}const n=Math.min(Math.round(e/t*100),100);this.updateConversionStatus(q.CONVERTING,n)}completeConversion(){O.stopTimer(),O.completeConversion()}cancelConversion(){O.stopTimer(),O.setStatus(k.STATUS.CANCELLED),O.setProgress(0);const e=Re(le);e.forEach(n=>{n.status===q.CONVERTING&&this.updateFileStatus(n.id,q.CANCELLED)});const t=e[0];(t==null?void 0:t.type)===Yr.PARENT&&(O.setStatus(k.STATUS.CANCELLED),O.batchUpdate({message:"Website conversion cancelled"}))}resetStores(){O.stopTimer(),O.reset(),Ee.clearResult(),le.clearFiles()}hasProcessingFiles(){return Re(le).some(t=>t.status===q.CONVERTING||t.status===q.PROCESSING)}}const Z=new Jr;class Qr{async startConversion(){const e=Re(le),t=Re(rt);if(e.length===0){const n=new Error("No files available for conversion.");Z.setError(n.message),console.error(n);return}O.reset(),O.startTimer(),Z.updateConversionStatus(q.INITIALIZING,0),await new Promise(n=>setTimeout(n,1e3));try{Z.updateConversionStatus(q.INITIALIZING,0),await this.handleElectronConversion(e[0],t),Z.updateConversionStatus(q.PROCESSING,50),this.showFeedback("✨ Processing started! You will be notified when the conversion is complete.","success")}catch(n){console.error("Conversion error:",n);const r=n.message||"";if(r.includes("Unauthorized")||r.includes("401")||r.includes("API key")){const o="OCR conversion failed: Invalid or missing Mistral API key. Please check your API key in Settings.";Z.setError(o),this.showFeedback(o,"error")}else Z.setError(r||"An unexpected error occurred during conversion"),this.showFeedback(r,"error")}}async handleElectronConversion(e,t){try{Z.updateConversionStatus(q.SELECTING_OUTPUT,0);const n=await Pe.selectOutputDirectory();if(!n.success){Z.updateConversionStatus(q.CANCELLED,0),this.showFeedback("Conversion cancelled: No output directory selected","info");return}const r=await window.electron.getSetting("ocr.enabled"),l=Re(_n).keys.mistral||"";console.log(`Using API keys - OpenAI: ${t?"✓ (set)":"✗ (not set)"}, Mistral: ${l?"✓ (set)":"✗ (not set)"}`);const i={outputDir:n.path,createSubdirectory:!1,...t?{apiKey:t}:{},useOcr:r,mistralApiKey:l};await this.handleSingleItemConversion(e,i)}catch(n){throw console.error("Electron conversion error:",n),Z.setError(n.message),n}}async handleSingleItemConversion(e,t){var n,r,o,l;Z.updateCurrentFile(e.name||e.url||"File"),Z.updateConversionStatus(q.CONVERTING,0);try{let i;const a=Yn(e.file||e),c={...t,isTemporary:a.isBinary,originalFileName:a.fileName},f=a.isWeb?{...c,type:e.type,...e.options,...e.type==="parenturl"&&{maxDepth:((n=e.options)==null?void 0:n.maxDepth)||3,maxPages:((r=e.options)==null?void 0:r.maxPages)||100,includeImages:((o=e.options)==null?void 0:o.includeImages)??!0,includeMeta:((l=e.options)==null?void 0:l.includeMeta)??!0}}:{...c,type:a.converter};if(a.isWeb&&console.log("🌐 Web conversion details:",{originalType:e.type,originalOptions:e.options,finalType:f.type,isParentUrl:e.type==="parenturl",finalOptions:f}),e.isNative&&e.path)i=await Pe.convertFile(e.path,f,u=>{Z.updateConversionStatus(q.CONVERTING,u)});else if(e.file instanceof File){let u;a.isBinary?u=await e.file.arrayBuffer():a.converter==="data"&&a.fileType==="csv"?(u=await e.file.text(),f.isContent=!0,f.content=u):u=await e.file.text(),i=await Pe.convertFile(u,f,d=>{Z.updateConversionStatus(q.CONVERTING,d)})}else if(a.isWeb&&e.url)i=await Pe.convertFile(e.url,f,u=>{Z.updateConversionStatus(q.CONVERTING,u)}),console.log("🔄 URL conversion options:",{type:f.type,isParentUrl:f.type==="parenturl",options:f});else throw new Error(`Unsupported item type: ${e.type||"unknown"}`);if(!i)throw console.error("❌ [conversionHandler] No result returned from conversion"),new Error("Conversion failed: No result returned");if(console.log("🔍 [conversionHandler] Conversion result structure:",{success:i.success,hasOutputPath:!!i.outputPath,hasContent:!!i.content,hasError:!!i.error,type:i.type,fileType:a.fileType,category:a.category,handlingType:a.handling}),i.success===!1)throw console.error("❌ [conversionHandler] Conversion failed with error:",i.error),new Error(`Conversion failed: ${i.error||"Unknown error"}`);if(!i.outputPath)throw console.error("❌ [conversionHandler] Result missing outputPath:",i),new Error("Conversion failed: No output path returned");return Z.updateConversionStatus(q.COMPLETED,100),Z.setConversionResult(i,[e]),Z.updateFileStatus(e.id,q.COMPLETED,i.outputPath),i}catch(i){console.error(`Error converting ${e.name||e.url}:`,i);const a=i.message||"";if(a.includes("Unauthorized")||a.includes("401")||a.includes("API key")){const c="OCR conversion failed: Invalid or missing Mistral API key. Please check your API key in Settings.";throw Z.setError(c),Z.updateFileStatus(e.id,q.ERROR),new Error(c)}else throw Z.setError(a),Z.updateFileStatus(e.id,q.ERROR),i}}cancelConversion(){Pe.cancelRequests(),Z.cancelConversion(),this.showFeedback("Conversion cancelled by user","info")}showFeedback(e,t="info"){console.log(`${t.toUpperCase()}: ${e}`)}}const Gt=new Qr;class xr{clearFiles(){Z.clearFiles()}openFile(e){if(!e){console.error("No file path provided to open");return}window.electron.openFile(e).then(t=>{t.success||console.error(`Failed to open file: ${t.error}`)}).catch(t=>{console.error("Error opening file:",t)})}showInFolder(e){if(!e){console.error("No file path provided to show in folder");return}window.electron.showItemInFolder(e).then(t=>{t.success||console.error(`Failed to show item in folder: ${t.error}`)}).catch(t=>{console.error("Error showing item in folder:",t)})}}const He=new xr,we=new Map;class es{async saveTempFile(e,t){if(!e)throw new Error("No file provided to save");console.log(`📊 [TempFileManager] Starting file transfer for: ${e.name}`),console.log(`📊 [TempFileManager] File size: ${e.size} bytes, Type: ${e.type}`);const n=e.name.split(".").pop().toLowerCase(),r=`temp_${Date.now()}_${e.name}`,o="temp";await $e.createDirectory(o);const l=`${o}/${r}`,i=Kr.includes(n.toLowerCase()),a=e.size>Fe.SIZE_THRESHOLD,c=["mp4","webm","avi"].includes(n.toLowerCase());try{return c&&a?await this.handleLargeVideoFile(e,l,t):i?await this.handleBinaryFile(e,l):await this.handleTextFile(e,l),this.registerFile(l,{originalName:e.name,originalSize:e.size,originalType:e.type,isBinaryFile:i,isVideoFile:c,isLargeFile:a}),l}catch(f){throw console.error("❌ [TempFileManager] Error saving temp file:",f),new Error(`Failed to save temporary file: ${f.message}`)}}async handleLargeVideoFile(e,t,n){console.log(`📊 [TempFileManager] Handling large video file (${Math.round(e.size/(1024*1024))}MB)`);const r={originalName:e.name,originalSize:e.size,originalType:e.type,timestamp:Date.now(),needsStreamProcessing:!0},o=`LARGE_FILE:${JSON.stringify(r)}`,l=await $e.writeFile(t,o);if(!l.success)throw new Error(`Failed to write temporary file metadata: ${l.error}`);try{const i=await window.electron.initLargeFileTransfer({tempFilePath:t,fileName:e.name,fileSize:e.size,fileType:e.type,chunkSize:8388608});if(!i.success)throw new Error(`Failed to initialize large file transfer: ${i.error}`);const a=i.transferId,c=8*1024*1024,f=Math.ceil(e.size/c);console.log(`📊 [TempFileManager] Transfer initialized with ID: ${a}, total chunks: ${f}`);for(let d=0;d<f;d++){const v=d*c,S=Math.min(v+c,e.size),b=e.slice(v,S),g=await this.readFileAsBase64(b),m=await window.electron.transferFileChunk({transferId:a,chunkIndex:d,data:g,size:b.size});if(!m.success)throw new Error(`Failed to transfer chunk ${d+1}/${f}: ${m.error}`);const C=(d+1)/f*100;console.log(`📊 [TempFileManager] Transfer progress: ${Math.round(C)}%`),n==null||n(C)}const u=await window.electron.finalizeLargeFileTransfer({transferId:a});if(!u.success)throw new Error(`Failed to finalize large file transfer: ${u.error}`);return console.log(`✅ [TempFileManager] Transfer completed in ${u.transferTime.toFixed(2)}s (${u.transferSpeed}MB/s)`),u.finalPath}catch(i){throw console.error("❌ [TempFileManager] Large file transfer failed:",i),i}}async handleBinaryFile(e,t){console.log("📊 [TempFileManager] Handling binary file");const n=await this.readFileAsBase64(e);if(!n)throw new Error(`Failed to convert file to base64: ${e.name}`);const r=`BASE64:${n}`,o=await $e.writeFile(t,r);if(!o.success)throw new Error(`Failed to write temporary binary file: ${o.error}`);await this.verifyFileWrite(t,e.size)}async handleTextFile(e,t){console.log("📊 [TempFileManager] Handling text file");const n=await e.text(),r=await $e.writeFile(t,n);if(!r.success)throw new Error(`Failed to write temporary text file: ${r.error}`)}readFileAsBase64(e){return new Promise((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(r.result.split(",")[1]),r.onerror=o=>n(o)})}async verifyFileWrite(e,t){const n=await $e.getStats(e);n.success&&n.stats.size<t*.9&&console.warn(`⚠️ [TempFileManager] File size mismatch! Expected: ${t}, Written: ${n.stats.size}`)}registerFile(e,t={}){e&&(we.set(e,{path:e,created:Date.now(),inUse:!0,metadata:t}),console.log(`📝 [TempFileManager] Registered temporary file: ${e}`))}markForCleanup(e){if(!e||!we.has(e))return;const t=we.get(e);t.inUse=!1,t.readyForCleanup=Date.now(),console.log(`🏁 [TempFileManager] Marked file as ready for cleanup: ${e}`)}async cleanup(e,t={}){const{force:n=!1,retryCount:r=Fe.RETRY_COUNT,retryDelay:o=Fe.RETRY_DELAY}=t;if(!e){console.warn("⚠️ [TempFileManager] Invalid file path for cleanup");return}if(we.has(e)&&we.get(e).inUse&&!n){console.warn(`⚠️ [TempFileManager] File still in use, scheduling cleanup for later: ${e}`),setTimeout(()=>{this.cleanup(e,{...t,force:!0})},Fe.CLEANUP_DELAY*2);return}let l=0;for(;l<=r;){try{if((await $e.deleteItem(e,!1)).success){we.delete(e),console.log(`✅ [TempFileManager] Cleaned up temporary file: ${e}`);return}l<r&&await new Promise(a=>setTimeout(a,o*(l+1)))}catch(i){console.warn(`❌ [TempFileManager] Cleanup attempt ${l+1} failed:`,i),l<r&&await new Promise(a=>setTimeout(a,o*(l+1)))}l++}console.warn(`⚠️ [TempFileManager] Could not clean up file after ${r} attempts: ${e}`),this.scheduleForceCleanup(e)}scheduleForceCleanup(e){e&&(console.log(`📅 [TempFileManager] Scheduling forced cleanup for: ${e}`),setTimeout(()=>{this.cleanup(e,{force:!0,retryCount:5})},Fe.CLEANUP_DELAY*5))}async cleanupAllUnusedFiles(){console.log("🧹 [TempFileManager] Running cleanup for all unused temporary files");const e=[],t=Date.now();for(const[n,r]of we.entries())(!r.inUse||t-r.created>Fe.MAX_AGE)&&e.push(n);if(e.length===0){console.log("✅ [TempFileManager] No unused temporary files to clean up");return}console.log(`🧹 [TempFileManager] Cleaning up ${e.length} unused temporary files`);for(const n of e)await this.cleanup(n,{force:!0})}getFileInfo(e){return we.get(e)}isFileInUse(e){const t=we.get(e);return(t==null?void 0:t.inUse)||!1}}const ts=new es,ns=5*60*1e3;setInterval(()=>{ts.cleanupAllUnusedFiles()},ns);class rs{async startConversion(){try{await Gt.startConversion()}catch(e){console.error("Error in conversion process:",e),Z.setError(e.message||"An unexpected error occurred")}}cancelConversion(){try{Gt.cancelConversion()}catch(e){console.error("Error cancelling conversion:",e)}}clearFiles(){try{He.clearFiles()}catch(e){console.error("Error clearing files:",e)}}openFile(e){try{He.openFile(e)}catch(t){console.error("Error opening file:",t)}}showInFolder(e){try{He.showInFolder(e)}catch(t){console.error("Error showing file in folder:",t)}}cleanupTempFiles(){}}const ss=new rs,{startConversion:os,cancelConversion:Xs,clearFiles:Js,openFile:Qs,showInFolder:xs}=ss;function is(s){let e,t,n,r,o,l=":",i,a,c,f,u,d=":",v,S,b;return{c(){e=T("div"),t=T("span"),n=G(s[1]),r=L(),o=T("span"),o.textContent=l,i=L(),a=T("span"),c=G(s[2]),f=L(),u=T("span"),u.textContent=d,v=L(),S=T("span"),b=G(s[3]),this.h()},l(g){e=y(g,"DIV",{class:!0,role:!0,"aria-label":!0});var m=A(e);t=y(m,"SPAN",{class:!0});var C=A(t);n=z(C,s[1]),C.forEach(p),r=N(m),o=y(m,"SPAN",{class:!0,"data-svelte-h":!0}),re(o)!=="svelte-1o1dh8"&&(o.textContent=l),i=N(m),a=y(m,"SPAN",{class:!0});var E=A(a);c=z(E,s[2]),E.forEach(p),f=N(m),u=y(m,"SPAN",{class:!0,"data-svelte-h":!0}),re(u)!=="svelte-1o1dh8"&&(u.textContent=d),v=N(m),S=y(m,"SPAN",{class:!0});var D=A(S);b=z(D,s[3]),D.forEach(p),m.forEach(p),this.h()},h(){h(t,"class","time-segment svelte-1mux47w"),h(o,"class","separator svelte-1mux47w"),h(a,"class","time-segment svelte-1mux47w"),h(u,"class","separator svelte-1mux47w"),h(S,"class","time-segment svelte-1mux47w"),h(e,"class","timer-display svelte-1mux47w"),h(e,"role","timer"),h(e,"aria-label",s[0])},m(g,m){I(g,e,m),w(e,t),w(t,n),w(e,r),w(e,o),w(e,i),w(e,a),w(a,c),w(e,f),w(e,u),w(e,v),w(e,S),w(S,b)},p(g,[m]){m&2&&be(n,g[1]),m&4&&be(c,g[2]),m&8&&be(b,g[3]),m&1&&h(e,"aria-label",g[0])},i:U,o:U,d(g){g&&p(e)}}}function ls(s,e,t){let n,r;ae(s,O,f=>t(6,r=f));let{time:o="00:00:00"}=e,{label:l="Time elapsed"}=e,i="00",a="00",c="00";return s.$$set=f=>{"time"in f&&t(4,o=f.time),"label"in f&&t(0,l=f.label)},s.$$.update=()=>{s.$$.dirty&64&&t(5,n=O.formatElapsedTime(r.elapsedSeconds)),s.$$.dirty&32&&t(1,[i,a,c]=n.split(":"),i,(t(2,a),t(5,n),t(6,r)),(t(3,c),t(5,n),t(6,r)))},[l,i,a,c,o,n,r]}class as extends fe{constructor(e){super(),de(this,e,ls,is,ue,{time:4,label:0})}}function cs(s){return s.replace(/^# (.+)$/gm,"<h3>$1</h3>").replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^*]+)\*/g,"<em>$1</em>").replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="help-link" target="_blank" rel="noopener noreferrer">$1</a>').split(`
`).map(e=>e.trim()?`<p>${e}</p>`:"").join("")}let xe;const us=["Converting digital knowledge to *markdown*... 🚀","Transforming content into **readable** format... ✨","Extracting the *essence* of your files... 💡","Translating digital content to *markdown*... 🔄","Processing your content with **care**... 🧠","Organizing information for better **readability**... 📊","Converting bytes to *beautiful* markdown... 💫","Distilling **knowledge** from your files... 🔍","Teaching robots to read your content... 🤖","Turning complex data into **simple** markdown... 🧩","Weaving words into *markdown magic*... ✨","Crafting the **perfect** markdown output... 🛠️","Polishing pixels into *perfect prose*... 🌟","Decoding digital documents... 🔑","Translating tech to text... 🌐","Converting content at the *speed of light*... ⚡","Turning information into **insight**... 💭","Making your content more *accessible*... 🌈","Preparing your **perfect** markdown files... 📝","Transforming files with *markdown magic*... ✅",`# Quick Markdown Facts
Markdown is a *lightweight* markup language for creating **formatted text**! 📄`,`# History Time
Markdown was created by **John Gruber** and **Aaron Swartz** in 2004! 📜`,`# File Facts
Markdown files use the *.md* extension and are **plain text** files! 📋`,`# Design Philosophy
Markdown is designed to be **readable** even in its *raw text* form! 👀`,`# Wide Adoption
Markdown is widely used for **documentation**, *notes*, and web content! 🌐`,`# Markdown Tips
Create headings with # symbols - more # means *smaller* headings! 📝`,`# Styling Text
Make text *italic* using single asterisks! 🖋️`,`# Text Formatting
Make text **bold** using double asterisks! 🖊️`,`# List Making
Create lists using - or * symbols at the start of lines! 📋`,`# Adding Links
Create links using [text](URL) syntax! 🔗`,`# Image Support
Add images using ![alt text](image-url) syntax! 🖼️`,`# Quote Blocks
Create blockquotes using the > symbol! 💬`,`# Code Formatting
Create code blocks using triple backticks! 💻`,`# Obsidian Links
Obsidian uses **[[double brackets]]** for *internal links* between notes! 🔄`,`# Note Embedding
Embed notes within notes using **![[note name]]** syntax! 📑`,`# Knowledge Graph
Obsidian can display your notes as a *visual knowledge graph*! 🕸️`,`# Using Tags
Obsidian supports tags using the **#tag** syntax! 🏷️`,`# Plugin Support
Obsidian has a **thriving** community of *open-source* plugins! 🔌`,`# Future-Proof Notes
Markdown files are **future-proof** because they're just *plain text*! 🔮`,`# Perfect for Notes
Markdown is **perfect** for note-taking because it's *quick to write* and *easy to read*! 📒`,`# Universal Support
Markdown is supported by **thousands** of applications across all platforms! 🌍`,`# Focus on Content
Markdown helps you focus on **content** instead of *formatting*! 🧠`,`# Space Efficient
Markdown files are typically *much smaller* than formatted document files! 📦`,`# PARA Method
Using the **PARA** method (*Projects, Areas, Resources, Archives*) helps organize notes! 📁`,`# Map of Content
Creating **MOCs** (*Maps of Content*) helps navigate complex knowledge structures! 🗺️`,`# Progressive Learning
**Progressive summarization** helps distill knowledge into *actionable insights*! 📝`,`# Atomic Notes
**Atomic notes** (one idea per note) make knowledge more *reusable*! ⚛️`,`# Connected Thinking
**Bidirectional linking** creates a *network of connected thoughts*! 🕸️`,`# Metadata Magic
**Consistent metadata** helps track and organize your knowledge over time! 🏷️`,`# Regular Reviews
**Regular knowledge reviews** help *strengthen* your understanding! 🔄`,`# Natural Growth
Topic hierarchies can evolve *naturally* through **linked notes**! 📚`,`# Power of Dataview
**Obsidian Dataview** lets you create *dynamic content views*! 📊`,`# Visual Thinking
**Obsidian Canvas** helps *visualize* complex relationships! 🎨`,`# Custom Styling
Use **CSS snippets** to *customize* your Obsidian workspace! 💅`,`# Template Power
**Obsidian templates** can *automate* note creation! 🤖`,`# Structured Data
**Properties** help add *structured metadata* to your notes! 📋`,`# Stay in Sync
**Obsidian sync** keeps your knowledge base *consistent* across devices! 🔄`,`# Share Knowledge
Publish your notes as a **beautiful website** with [Obsidian Publish](https://obsidian.md/publish)! 🌐`,`# AI Analysis
**AI** can help *analyze patterns* in your knowledge base! 🤖`,`# Smart Summaries
**LLMs** can generate *structured summaries* from your notes! 📊`,`# Semantic Search
**Knowledge graphs** enable *semantic search* of your notes! 🔍`,`# Smart Connections
**Machine learning** can suggest *relevant note connections*! 🧠`,`# AI Assistance
**AI assistants** can help *maintain* your knowledge base! 🤝`,`# Vector Search
**Vector embeddings** enable *semantic similarity search*! 🎯`,`# Gap Analysis
**AI** can help identify *knowledge gaps* in your notes! 🔍`,`# Enhanced Learning
**Modern PKM tools** integrate with *AI* for enhanced learning! 🚀`,`# Flow Products
Synaptic Labs offers [Flow products](https://www.synapticlabs.ai/flows) for **guided knowledge workflows**! 🔄`,`# Optimize Your Workflow
Streamline your process with our [Flow system](https://www.synapticlabs.ai/flows) for *enhanced productivity*! 🔄`,`# Join Our Community
Join our [Discord community](https://discord.gg/z5DgD5ZHNJ) for **PKM tips** and *discussions*! 💬`,`# Connect with Peers
Share ideas in our [Discord space](https://discord.gg/z5DgD5ZHNJ) with fellow **knowledge enthusiasts**! 💬`,`# AI Agents
Learn about our [AI agents](https://www.synapticlabs.ai/agents) and **automations**! 🤖`,`# Smart Automation
Discover how our [AI assistants](https://www.synapticlabs.ai/agents) can *transform* your workflow! 🤖`,`# Level Up
Level up your skills with our [bootcamps](https://www.synapticlabs.ai/bootcamps)! 🎓`,`# Skill Building
Accelerate your learning through our intensive [training programs](https://www.synapticlabs.ai/bootcamps)! 🎓`,`# Latest Insights
Read our latest insights at [our blog](https://blog.synapticlabs.ai)! 📖`,`# Knowledge Hub
Stay updated with fresh perspectives on our [blog](https://blog.synapticlabs.ai)! 📖`,`# Tutorials & Tips
Get tutorials and tips at our [YouTube channel](https://www.youtube.com/@SynapticLabs)! 🎥`,`# Video Resources
Learn visually through our [YouTube content](https://www.youtube.com/@SynapticLabs)! 🎥`,`# About Us
Learn more at [Synaptic Labs](https://www.synapticlabs.ai/about)! 🏢`,`# Our Story
Discover what drives us at [Synaptic Labs](https://www.synapticlabs.ai/about)! 🏢`,`# Contact Us
Have questions? [Reach out](https://www.synapticlabs.ai/contact-us) to us! 📧`,`# Get In Touch
Need assistance? [Contact our team](https://www.synapticlabs.ai/contact-us) for support! 📧`];function fs(){xe=us.map(s=>cs(s))}function ds(){const s=Math.floor(Math.random()*xe.length);return xe[s]}fs();function Bt(s){let e,t,n,r,o,l;const i=[gs,hs,ms,ps],a=[];function c(u,d){return u[4]===k.STATUS.COMPLETED||u[2]?0:u[4]===k.STATUS.ERROR?1:u[4]==="stopped"||u[4]===k.STATUS.CANCELLED?2:3}n=c(s),r=a[n]=i[n](s);let f=!s[2]&&s[4]!==k.STATUS.COMPLETED&&s[4]!==k.STATUS.ERROR&&s[4]!==k.STATUS.CANCELLED&&Wt();return{c(){e=T("div"),t=T("div"),r.c(),o=L(),f&&f.c(),this.h()},l(u){e=y(u,"DIV",{class:!0});var d=A(e);t=y(d,"DIV",{class:!0});var v=A(t);r.l(v),v.forEach(p),o=N(d),f&&f.l(d),d.forEach(p),this.h()},h(){h(t,"class","chat-container svelte-19ohx1h"),h(e,"class","conversion-progress svelte-19ohx1h"),ie(e,"fade-in",s[4]!==k.STATUS.IDLE)},m(u,d){I(u,e,d),w(e,t),a[n].m(t,null),w(e,o),f&&f.m(e,null),l=!0},p(u,d){let v=n;n=c(u),n===v?a[n].p(u,d):(x(),$(a[v],1,1,()=>{a[v]=null}),ee(),r=a[n],r?r.p(u,d):(r=a[n]=i[n](u),r.c()),_(r,1),r.m(t,null)),!u[2]&&u[4]!==k.STATUS.COMPLETED&&u[4]!==k.STATUS.ERROR&&u[4]!==k.STATUS.CANCELLED?f?d&20&&_(f,1):(f=Wt(),f.c(),_(f,1),f.m(e,null)):f&&(x(),$(f,1,1,()=>{f=null}),ee()),(!l||d&16)&&ie(e,"fade-in",u[4]!==k.STATUS.IDLE)},i(u){l||(_(r),_(f),l=!0)},o(u){$(r),$(f),l=!1},d(u){u&&p(e),a[n].d(),f&&f.d()}}}function ps(s){let e,t;return e=new Ge({props:{name:"Codex",avatar:"📖",message:s[0],avatarPosition:s[7](),isTyping:s[1]}}),{c(){H(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p(n,r){const o={};r&1&&(o.message=n[0]),r&2&&(o.isTyping=n[1]),e.$set(o)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function ms(s){let e,t;return e=new Ge({props:{name:"Codex",avatar:"📖",message:`Conversion ${s[4]===k.STATUS.CANCELLED?"cancelled":"stopped"}. ${s[5]>0?`Processed some of ${s[5]} files.`:""}`,avatarPosition:s[7]()}}),{c(){H(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p(n,r){const o={};r&48&&(o.message=`Conversion ${n[4]===k.STATUS.CANCELLED?"cancelled":"stopped"}. ${n[5]>0?`Processed some of ${n[5]} files.`:""}`),e.$set(o)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function hs(s){let e,t;return e=new Ge({props:{name:"Codex",avatar:"📖",message:`Encountered an error during conversion: ${s[6]||"Unknown error"}. Please try again.`,avatarPosition:s[7]()}}),{c(){H(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p(n,r){const o={};r&64&&(o.message=`Encountered an error during conversion: ${n[6]||"Unknown error"}. Please try again.`),e.$set(o)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function gs(s){let e,t;return e=new Ge({props:{name:"Codex",avatar:"📖",message:s[3],avatarPosition:s[7]()}}),{c(){H(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p(n,r){const o={};r&8&&(o.message=n[3]),e.$set(o)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Wt(s){let e,t;return e=new as({}),{c(){H(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function vs(s){let e,t,n=s[4]!==k.STATUS.IDLE&&s[4]!==k.STATUS.CANCELLED&&Bt(s);return{c(){n&&n.c(),e=ge()},l(r){n&&n.l(r),e=ge()},m(r,o){n&&n.m(r,o),I(r,e,o),t=!0},p(r,[o]){r[4]!==k.STATUS.IDLE&&r[4]!==k.STATUS.CANCELLED?n?(n.p(r,o),o&16&&_(n,1)):(n=Bt(r),n.c(),_(n,1),n.m(e.parentNode,e)):n&&(x(),$(n,1,1,()=>{n=null}),ee())},i(r){t||(_(n),t=!0)},o(r){$(n),t=!1},d(r){r&&p(e),n&&n.d(r)}}}const _s=40,bs=4e3,ws=800;function ys(s,e,t){let n;ae(s,O,V=>t(18,n=V));let r="left";function o(){return r=r==="left"?"right":"left",r}let l,i,a,c="",f="",u=!0,d=!1,v=!1,S="",b=0,g="",m=k.STATUS.IDLE,C=0,E=null;function D(){t(2,v=!0),b=C;const V=n.elapsedSeconds;g=O.formatElapsedTime(V),(g==="00:00:00"||V===0)&&(console.warn("Timer captured zero time, using fallback"),g="00:00:01"),t(3,S=`Successfully converted ${b>0?`all ${b} files`:"your content"}! 🎉<br>Time taken: ${g}`),P()}function F(){t(2,v=!1),t(3,S=""),b=0,g="",P(),m!==k.STATUS.IDLE&&m!==k.STATUS.COMPLETED&&m!==k.STATUS.ERROR&&m!==k.STATUS.CANCELLED&&R()}function R(){d||(d=!0,c=ds(),t(0,f=""),t(1,u=!0),i=setTimeout(()=>{t(1,u=!1);let V=0,pe=c;a=setInterval(()=>{V<pe.length?(t(0,f=pe.substring(0,V+1)),V++):(clearInterval(a),a=null,i=setTimeout(()=>{l=setTimeout(()=>{d=!1,R()},100)},bs))},_s)},ws))}function P(){d=!1,l&&(clearTimeout(l),l=null),i&&(clearTimeout(i),i=null),a&&(clearInterval(a),a=null)}const te=O.subscribe(V=>{const pe=m;t(4,m=V.status),t(5,C=V.totalCount||0),t(6,E=V.error),m!==k.STATUS.IDLE&&m!==k.STATUS.COMPLETED&&m!==k.STATUS.ERROR&&m!==k.STATUS.CANCELLED&&(d||R()),m===k.STATUS.COMPLETED&&(v||D()),(m===k.STATUS.ERROR||m===k.STATUS.CANCELLED)&&pe!==m&&P()});return et(()=>{m!==k.STATUS.IDLE&&m!==k.STATUS.COMPLETED&&m!==k.STATUS.ERROR&&m!==k.STATUS.CANCELLED&&!v&&(d||R())}),Ht(()=>{te(),P()}),[f,u,v,S,m,C,E,o,F]}class Ts extends fe{constructor(e){super(),de(this,e,ys,vs,ue,{resetState:8})}get resetState(){return this.$$.ctx[8]}}function Es(s){return{c:U,l:U,m:U,p:U,i:U,o:U,d:U}}function Ss(s){let e,t,n,r,o,l,i,a={};t=new Ts({props:a}),s[10](t);const c=[ks,Cs],f=[];function u(d,v){return d[3]?0:d[2]?1:-1}return~(r=u(s))&&(o=f[r]=c[r](s)),{c(){e=T("div"),H(t.$$.fragment),n=L(),o&&o.c(),l=ge(),this.h()},l(d){e=y(d,"DIV",{class:!0});var v=A(e);j(t.$$.fragment,v),v.forEach(p),n=N(d),o&&o.l(d),l=ge(),this.h()},h(){h(e,"class","progress-section svelte-s4mf9a")},m(d,v){I(d,e,v),W(t,e,null),I(d,n,v),~r&&f[r].m(d,v),I(d,l,v),i=!0},p(d,v){const S={};t.$set(S);let b=r;r=u(d),r===b?~r&&f[r].p(d,v):(o&&(x(),$(f[b],1,1,()=>{f[b]=null}),ee()),~r?(o=f[r],o?o.p(d,v):(o=f[r]=c[r](d),o.c()),_(o,1),o.m(l.parentNode,l)):o=null)},i(d){i||(_(t.$$.fragment,d),_(o),i=!0)},o(d){$(t.$$.fragment,d),$(o),i=!1},d(d){d&&(p(e),p(n),p(l)),s[10](null),B(t),~r&&f[r].d(d)}}}function Cs(s){let e,t,n,r;return n=new Ce({props:{variant:"primary",size:"large",$$slots:{default:[Is]},$$scope:{ctx:s}}}),n.$on("click",s[6]),{c(){e=T("div"),t=T("div"),H(n.$$.fragment),this.h()},l(o){e=y(o,"DIV",{class:!0});var l=A(e);t=y(l,"DIV",{class:!0});var i=A(t);j(n.$$.fragment,i),i.forEach(p),l.forEach(p),this.h()},h(){h(t,"class","button-container svelte-s4mf9a"),h(e,"class","action-section svelte-s4mf9a")},m(o,l){I(o,e,l),w(e,t),W(n,t,null),r=!0},p(o,l){const i={};l&8192&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){r||(_(n.$$.fragment,o),r=!0)},o(o){$(n.$$.fragment,o),r=!1},d(o){o&&p(e),B(n)}}}function ks(s){let e,t,n,r,o,l=s[1]&&jt(s);return r=new Ce({props:{variant:"secondary",size:"large",$$slots:{default:[$s]},$$scope:{ctx:s}}}),r.$on("click",s[6]),{c(){e=T("div"),t=T("div"),l&&l.c(),n=L(),H(r.$$.fragment),this.h()},l(i){e=y(i,"DIV",{class:!0});var a=A(e);t=y(a,"DIV",{class:!0});var c=A(t);l&&l.l(c),n=N(c),j(r.$$.fragment,c),c.forEach(p),a.forEach(p),this.h()},h(){h(t,"class","button-container svelte-s4mf9a"),h(e,"class","action-section svelte-s4mf9a")},m(i,a){I(i,e,a),w(e,t),l&&l.m(t,null),w(t,n),W(r,t,null),o=!0},p(i,a){i[1]?l?(l.p(i,a),a&2&&_(l,1)):(l=jt(i),l.c(),_(l,1),l.m(t,n)):l&&(x(),$(l,1,1,()=>{l=null}),ee());const c={};a&8192&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(_(l),_(r.$$.fragment,i),o=!0)},o(i){$(l),$(r.$$.fragment,i),o=!1},d(i){i&&p(e),l&&l.d(),B(r)}}}function Is(s){let e,t="🔄",n;return{c(){e=T("span"),e.textContent=t,n=G(" Try Again"),this.h()},l(r){e=y(r,"SPAN",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-xxqd4m"&&(e.textContent=t),n=z(r," Try Again"),this.h()},h(){h(e,"class","button-icon svelte-s4mf9a")},m(r,o){I(r,e,o),I(r,n,o)},p:U,d(r){r&&(p(e),p(n))}}}function jt(s){let e,t;return e=new Ce({props:{variant:"secondary",size:"large",$$slots:{default:[As]},$$scope:{ctx:s}}}),e.$on("click",s[5]),{c(){H(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p(n,r){const o={};r&8192&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function As(s){let e,t="📂",n;return{c(){e=T("span"),e.textContent=t,n=G(" Open Folder"),this.h()},l(r){e=y(r,"SPAN",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-4oacc8"&&(e.textContent=t),n=z(r," Open Folder"),this.h()},h(){h(e,"class","button-icon svelte-s4mf9a")},m(r,o){I(r,e,o),I(r,n,o)},p:U,d(r){r&&(p(e),p(n))}}}function $s(s){let e,t="🔄",n;return{c(){e=T("span"),e.textContent=t,n=G(" Convert More"),this.h()},l(r){e=y(r,"SPAN",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-xxqd4m"&&(e.textContent=t),n=z(r," Convert More"),this.h()},h(){h(e,"class","button-icon svelte-s4mf9a")},m(r,o){I(r,e,o),I(r,n,o)},p:U,d(r){r&&(p(e),p(n))}}}function Fs(s){let e,t,n,r,o;const l=[Ss,Es],i=[];function a(c,f){return c[4]||c[3]||c[2]?0:1}return t=a(s),n=i[t]=l[t](s),{c(){e=T("div"),n.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var f=A(e);n.l(f),f.forEach(p),this.h()},h(){h(e,"class","conversion-status svelte-s4mf9a")},m(c,f){I(c,e,f),i[t].m(e,null),o=!0},p(c,f){let u=t;t=a(c),t===u?i[t].p(c,f):(x(),$(i[u],1,1,()=>{i[u]=null}),ee(),n=i[t],n?n.p(c,f):(n=i[t]=l[t](c),n.c()),_(n,1),n.m(e,null))},i(c){o||(_(n),c&&X(()=>{o&&(r||(r=Te(e,se,{},!0)),r.run(1))}),o=!0)},o(c){$(n),c&&(r||(r=Te(e,se,{},!1)),r.run(0)),o=!1},d(c){c&&p(e),i[t].d(),c&&r&&r.end()}}}function Ds(s){let e,t;return e=new Xt({props:{$$slots:{default:[Fs]},$$scope:{ctx:s}}}),{c(){H(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p(n,[r]){const o={};r&8223&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Rs(s,e,t){let n,r,o,l,i,a;ae(s,Ee,g=>t(8,i=g)),ae(s,O,g=>t(9,a=g));const c=ke();let f,u=!1,d=!1;function v(){i!=null&&i.outputPath&&He.showInFolder(i.outputPath)}function S(){try{f&&f.resetState(),t(7,u=!1),d=!1,Z.resetStores(),c("convertMore")}catch(g){console.error("Error resetting state:",g),c("convertMore")}}function b(g){qt[g?"unshift":"push"](()=>{f=g,t(0,f)})}return s.$$.update=()=>{if(s.$$.dirty&768){const g=a.status===k.STATUS.COMPLETED||a.completionTime!==null,m=i&&i.success,C=(i==null?void 0:i.outputPath)!=null;(g||m||C)&&(t(7,u=!0),d=!0)}s.$$.dirty&640&&t(4,n=!u&&[k.STATUS.PREPARING,k.STATUS.CONVERTING,"selecting_output",k.STATUS.INITIALIZING,"initializing_workers",k.STATUS.CLEANING_UP,"finding_sitemap","parsing_sitemap","crawling_pages","processing_pages","generating_index"].includes(a.status)),s.$$.dirty&128&&t(3,r=u),s.$$.dirty&512&&t(2,o=a.error!==null),s.$$.dirty&256&&t(1,l=i&&i.isNative&&i.outputPath)},[f,l,o,r,n,v,S,u,i,a,b]}class nn extends fe{constructor(e){super(),de(this,e,Rs,Ds,ue,{})}}function Ns(s){let e,t;return e=new nn({}),e.$on("startConversion",s[2]),e.$on("convertMore",s[3]),{c(){H(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Ls(s){let e,t;return e=new nn({}),e.$on("startConversion",s[2]),e.$on("convertMore",s[3]),{c(){H(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Ms(s){let e,t,n;return t=new Hr({props:{showConversionButton:s[1].length>0,onStartConversion:s[2]}}),{c(){e=T("div"),H(t.$$.fragment),this.h()},l(r){e=y(r,"DIV",{class:!0});var o=A(e);j(t.$$.fragment,o),o.forEach(p),this.h()},h(){h(e,"class","main-content svelte-1alb7fk")},m(r,o){I(r,e,o),W(t,e,null),n=!0},p(r,o){const l={};o&2&&(l.showConversionButton=r[1].length>0),t.$set(l)},i(r){n||(_(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){r&&p(e),B(t)}}}function Us(s){let e,t;return e=new Vn({props:{messageType:he.WELCOME}}),e.$on("closed",s[4]),e.$on("continue",s[5]),{c(){H(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Ps(s){let e,t,n,r,o;const l=[Us,Ms,Ls,Ns],i=[];function a(c,f){return c[0]==="welcome"?0:c[0]==="upload"?1:c[0]==="converting"?2:c[0]==="converted"?3:-1}return~(n=a(s))&&(r=i[n]=l[n](s)),{c(){e=T("div"),t=T("div"),r&&r.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var f=A(e);t=y(f,"DIV",{class:!0});var u=A(t);r&&r.l(u),u.forEach(p),f.forEach(p),this.h()},h(){h(t,"class","converter-app svelte-1alb7fk"),h(e,"class","app-container svelte-1alb7fk")},m(c,f){I(c,e,f),w(e,t),~n&&i[n].m(t,null),o=!0},p(c,[f]){let u=n;n=a(c),n===u?~n&&i[n].p(c,f):(r&&(x(),$(i[u],1,1,()=>{i[u]=null}),ee()),~n?(r=i[n],r?r.p(c,f):(r=i[n]=l[n](c),r.c()),_(r,1),r.m(t,null)):r=null)},i(c){o||(_(r),o=!0)},o(c){$(r),o=!1},d(c){c&&p(e),~n&&i[n].d()}}}function je(){window.scrollTo({top:0,behavior:"smooth"})}function Os(s,e,t){let n,r,o,l;ae(s,Ee,S=>t(8,r=S)),ae(s,O,S=>t(9,o=S)),ae(s,le,S=>t(1,l=S));let i="welcome",a=!1,c=!1;function f(){t(0,i="converting"),je(),Ee.clearResult(),os()}function u(){je(),le.clearFiles(),O.reset(),Ee.clearResult(),t(6,c=!1),t(0,i="upload")}function d(){t(0,i="upload")}function v(){t(0,i="upload")}return et(()=>{a=ze.shouldShowWelcome(),a||t(0,i="upload")}),s.$$.update=()=>{s.$$.dirty&512&&t(7,n=o.type===k.TYPE.WEBSITE),s.$$.dirty&640&&(o.status===k.STATUS.COMPLETED||o.completionTime?(t(0,i="converted"),t(6,c=!0),je()):n&&t(0,i="converting")),s.$$.dirty&320&&r&&r.success&&(c||(t(0,i="converted"),t(6,c=!0),je()))},[i,l,f,u,d,v,c,n,r,o]}class Vs extends fe{constructor(e){super(),de(this,e,Os,Ps,ue,{})}}function zs(s){let e,t;return e=new Vs({}),{c(){H(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}class eo extends fe{constructor(e){super(),de(this,e,null,zs,ue,{})}}export{eo as component,Zs as universal};
