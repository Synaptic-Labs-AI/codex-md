{"version":3,"file":"index-Dm3GV1oG.js","sources":["../../../node_modules/svelte/src/runtime/internal/utils.js","../../../node_modules/svelte/src/runtime/internal/environment.js","../../../node_modules/svelte/src/runtime/internal/loop.js","../../../node_modules/svelte/src/runtime/internal/dom.js","../../../node_modules/svelte/src/runtime/internal/style_manager.js","../../../node_modules/svelte/src/runtime/internal/lifecycle.js","../../../node_modules/svelte/src/runtime/internal/scheduler.js","../../../node_modules/svelte/src/runtime/internal/transitions.js","../../../node_modules/svelte/src/runtime/internal/each.js","../../../node_modules/svelte/src/runtime/internal/spread.js","../../../node_modules/svelte/src/runtime/internal/Component.js","../../../node_modules/svelte/src/shared/version.js","../../../node_modules/svelte/src/runtime/internal/disclose-version/index.js","../../../node_modules/svelte/src/runtime/store/index.js","../../../node_modules/regexparam/dist/index.mjs","../../../node_modules/svelte-spa-router/Router.svelte","../../../node_modules/svelte/src/runtime/easing/index.js","../../../node_modules/svelte/src/runtime/transition/index.js","../../src/lib/components/common/ChatBubble.svelte","../../src/lib/components/common/Button.svelte","../../src/lib/stores/welcomeState.js","../../src/lib/stores/apiKey.js","../../src/lib/components/common/WelcomeChat.svelte","../../../node_modules/uuid/dist/esm-browser/stringify.js","../../../node_modules/uuid/dist/esm-browser/rng.js","../../../node_modules/uuid/dist/esm-browser/native.js","../../../node_modules/uuid/dist/esm-browser/v4.js","../../src/lib/utils/files/types.js","../../src/lib/utils/files/index.js","../../src/lib/utils/fileUtils.js","../../src/lib/stores/files.js","../../src/lib/stores/uploadStore.js","../../src/lib/utils/conversion/errors.js","../../src/lib/api/electron/client.js","../../src/lib/stores/unifiedConversion.js","../../src/lib/api/errors.js","../../src/lib/api/electron/fileSystem.js","../../src/lib/api/electron/utils.js","../../src/lib/api/electron/index.js","../../src/lib/components/common/Container.svelte","../../src/lib/components/common/TabNavigation.svelte","../../src/lib/components/common/UrlInput.svelte","../../src/lib/components/common/DropZone.svelte","../../src/lib/components/common/ErrorMessage.svelte","../../src/lib/utils/iconUtils.js","../../src/lib/components/file/FileCard.svelte","../../src/lib/components/file/FileList.svelte","../../src/lib/components/ApiKeyInput.svelte","../../src/lib/components/FileUploader.svelte","../../src/lib/stores/conversionResult.js","../../src/lib/utils/conversion/constants/index.js","../../src/lib/utils/conversion/manager/storeManager.js","../../src/lib/utils/conversion/handlers/conversionHandler.js","../../src/lib/utils/conversion/handlers/downloadHandler.js","../../src/lib/utils/conversion/handlers/tempFileManager.js","../../src/lib/utils/conversion/manager/conversionManager.js","../../src/lib/components/common/Timer.svelte","../../src/lib/utils/conversionMessages.js","../../src/lib/components/ConversionProgress.svelte","../../src/lib/components/ResultDisplay.svelte","../../src/lib/components/CodexMdConverter.svelte","../../src/pages/Home.svelte","../../src/pages/About.svelte","../../src/pages/Help.svelte","../../src/lib/stores/settings.js","../../src/lib/components/common/Toggle.svelte","../../src/lib/components/common/Accordion.svelte","../../src/lib/components/settings/TranscriptionSettings.svelte","../../src/pages/Settings.svelte","../../src/routes.js","../../src/lib/stores/offlineStore.js","../../src/lib/components/OfflineStatusBar.svelte","../../src/lib/components/common/Logo.svelte","../../src/lib/components/common/Navigation.svelte","../../src/App.svelte","../../src/main.js"],"sourcesContent":["/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n","import { noop } from './utils.js';\n\nexport const is_client = typeof window !== 'undefined';\n\n/** @type {() => number} */\nexport let now = is_client ? () => window.performance.now() : () => Date.now();\n\nexport let raf = is_client ? (cb) => requestAnimationFrame(cb) : noop;\n\n// used internally for testing\n/** @returns {void} */\nexport function set_now(fn) {\n\tnow = fn;\n}\n\n/** @returns {void} */\nexport function set_raf(fn) {\n\traf = fn;\n}\n","import { raf } from './environment.js';\n\nconst tasks = new Set();\n\n/**\n * @param {number} now\n * @returns {void}\n */\nfunction run_tasks(now) {\n\ttasks.forEach((task) => {\n\t\tif (!task.c(now)) {\n\t\t\ttasks.delete(task);\n\t\t\ttask.f();\n\t\t}\n\t});\n\tif (tasks.size !== 0) raf(run_tasks);\n}\n\n/**\n * For testing purposes only!\n * @returns {void}\n */\nexport function clear_loops() {\n\ttasks.clear();\n}\n\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n * @param {import('./private.js').TaskCallback} callback\n * @returns {import('./private.js').Task}\n */\nexport function loop(callback) {\n\t/** @type {import('./private.js').TaskEntry} */\n\tlet task;\n\tif (tasks.size === 0) raf(run_tasks);\n\treturn {\n\t\tpromise: new Promise((fulfill) => {\n\t\t\ttasks.add((task = { c: callback, f: fulfill }));\n\t\t}),\n\t\tabort() {\n\t\t\ttasks.delete(task);\n\t\t}\n\t};\n}\n","import { contenteditable_truthy_values, has_prop } from './utils.js';\n\nimport { ResizeObserverSingleton } from './ResizeObserverSingleton.js';\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\n\n/**\n * @returns {void}\n */\nexport function start_hydrating() {\n\tis_hydrating = true;\n}\n\n/**\n * @returns {void}\n */\nexport function end_hydrating() {\n\tis_hydrating = false;\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {(index: number) => number} key\n * @param {number} value\n * @returns {number}\n */\nfunction upper_bound(low, high, key, value) {\n\t// Return first index of value larger than input value in the range [low, high)\n\twhile (low < high) {\n\t\tconst mid = low + ((high - low) >> 1);\n\t\tif (key(mid) <= value) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\treturn low;\n}\n\n/**\n * @param {NodeEx} target\n * @returns {void}\n */\nfunction init_hydrate(target) {\n\tif (target.hydrate_init) return;\n\ttarget.hydrate_init = true;\n\t// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n\n\tlet children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);\n\t// If target is <head>, there may be children without claim_order\n\tif (target.nodeName === 'HEAD') {\n\t\tconst my_children = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst node = children[i];\n\t\t\tif (node.claim_order !== undefined) {\n\t\t\t\tmy_children.push(node);\n\t\t\t}\n\t\t}\n\t\tchildren = my_children;\n\t}\n\t/*\n\t * Reorder claimed children optimally.\n\t * We can reorder claimed children optimally by finding the longest subsequence of\n\t * nodes that are already claimed in order and only moving the rest. The longest\n\t * subsequence of nodes that are claimed in order can be found by\n\t * computing the longest increasing subsequence of .claim_order values.\n\t *\n\t * This algorithm is optimal in generating the least amount of reorder operations\n\t * possible.\n\t *\n\t * Proof:\n\t * We know that, given a set of reordering operations, the nodes that do not move\n\t * always form an increasing subsequence, since they do not move among each other\n\t * meaning that they must be already ordered among each other. Thus, the maximal\n\t * set of nodes that do not move form a longest increasing subsequence.\n\t */\n\t// Compute longest increasing subsequence\n\t// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n\tconst m = new Int32Array(children.length + 1);\n\t// Predecessor indices + 1\n\tconst p = new Int32Array(children.length);\n\tm[0] = -1;\n\tlet longest = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst current = children[i].claim_order;\n\t\t// Find the largest subsequence length such that it ends in a value less than our current value\n\t\t// upper_bound returns first greater value, so we subtract one\n\t\t// with fast path for when we are on the current longest subsequence\n\t\tconst seq_len =\n\t\t\t(longest > 0 && children[m[longest]].claim_order <= current\n\t\t\t\t? longest + 1\n\t\t\t\t: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;\n\t\tp[i] = m[seq_len] + 1;\n\t\tconst new_len = seq_len + 1;\n\t\t// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n\t\tm[new_len] = i;\n\t\tlongest = Math.max(new_len, longest);\n\t}\n\t// The longest increasing subsequence of nodes (initially reversed)\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst lis = [];\n\t// The rest of the nodes, nodes that will be moved\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst to_move = [];\n\tlet last = children.length - 1;\n\tfor (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n\t\tlis.push(children[cur - 1]);\n\t\tfor (; last >= cur; last--) {\n\t\t\tto_move.push(children[last]);\n\t\t}\n\t\tlast--;\n\t}\n\tfor (; last >= 0; last--) {\n\t\tto_move.push(children[last]);\n\t}\n\tlis.reverse();\n\t// We sort the nodes being moved to guarantee that their insertion order matches the claim order\n\tto_move.sort((a, b) => a.claim_order - b.claim_order);\n\t// Finally, we move the nodes\n\tfor (let i = 0, j = 0; i < to_move.length; i++) {\n\t\twhile (j < lis.length && to_move[i].claim_order >= lis[j].claim_order) {\n\t\t\tj++;\n\t\t}\n\t\tconst anchor = j < lis.length ? lis[j] : null;\n\t\ttarget.insertBefore(to_move[i], anchor);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @returns {void}\n */\nexport function append(target, node) {\n\ttarget.appendChild(node);\n}\n\n/**\n * @param {Node} target\n * @param {string} style_sheet_id\n * @param {string} styles\n * @returns {void}\n */\nexport function append_styles(target, style_sheet_id, styles) {\n\tconst append_styles_to = get_root_for_style(target);\n\tif (!append_styles_to.getElementById(style_sheet_id)) {\n\t\tconst style = element('style');\n\t\tstyle.id = style_sheet_id;\n\t\tstyle.textContent = styles;\n\t\tappend_stylesheet(append_styles_to, style);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {ShadowRoot | Document}\n */\nexport function get_root_for_style(node) {\n\tif (!node) return document;\n\tconst root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n\tif (root && /** @type {ShadowRoot} */ (root).host) {\n\t\treturn /** @type {ShadowRoot} */ (root);\n\t}\n\treturn node.ownerDocument;\n}\n\n/**\n * @param {Node} node\n * @returns {CSSStyleSheet}\n */\nexport function append_empty_stylesheet(node) {\n\tconst style_element = element('style');\n\t// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,\n\t// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.\n\t// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.\n\t// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.\n\t// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.\n\tstyle_element.textContent = '/* empty */';\n\tappend_stylesheet(get_root_for_style(node), style_element);\n\treturn style_element.sheet;\n}\n\n/**\n * @param {ShadowRoot | Document} node\n * @param {HTMLStyleElement} style\n * @returns {CSSStyleSheet}\n */\nfunction append_stylesheet(node, style) {\n\tappend(/** @type {Document} */ (node).head || node, style);\n\treturn style.sheet;\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @returns {void}\n */\nexport function append_hydration(target, node) {\n\tif (is_hydrating) {\n\t\tinit_hydrate(target);\n\t\tif (\n\t\t\ttarget.actual_end_child === undefined ||\n\t\t\t(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)\n\t\t) {\n\t\t\ttarget.actual_end_child = target.firstChild;\n\t\t}\n\t\t// Skip nodes of undefined ordering\n\t\twhile (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {\n\t\t\ttarget.actual_end_child = target.actual_end_child.nextSibling;\n\t\t}\n\t\tif (node !== target.actual_end_child) {\n\t\t\t// We only insert if the ordering of this node should be modified or the parent node is not target\n\t\t\tif (node.claim_order !== undefined || node.parentNode !== target) {\n\t\t\t\ttarget.insertBefore(node, target.actual_end_child);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.actual_end_child = node.nextSibling;\n\t\t}\n\t} else if (node.parentNode !== target || node.nextSibling !== null) {\n\t\ttarget.appendChild(node);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @param {Node} [anchor]\n * @returns {void}\n */\nexport function insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @param {NodeEx} [anchor]\n * @returns {void}\n */\nexport function insert_hydration(target, node, anchor) {\n\tif (is_hydrating && !anchor) {\n\t\tappend_hydration(target, node);\n\t} else if (node.parentNode !== target || node.nextSibling != anchor) {\n\t\ttarget.insertBefore(node, anchor || null);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {void}\n */\nexport function detach(node) {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element(name) {\n\treturn document.createElement(name);\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @param {string} is\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element_is(name, is) {\n\treturn document.createElement(name, { is });\n}\n\n/**\n * @template T\n * @template {keyof T} K\n * @param {T} obj\n * @param {K[]} exclude\n * @returns {Pick<T, Exclude<keyof T, K>>}\n */\nexport function object_without_properties(obj, exclude) {\n\tconst target = /** @type {Pick<T, Exclude<keyof T, K>>} */ ({});\n\tfor (const k in obj) {\n\t\tif (\n\t\t\thas_prop(obj, k) &&\n\t\t\t// @ts-ignore\n\t\t\texclude.indexOf(k) === -1\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * @template {keyof SVGElementTagNameMap} K\n * @param {K} name\n * @returns {SVGElement}\n */\nexport function svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n/**\n * @param {string} data\n * @returns {Text}\n */\nexport function text(data) {\n\treturn document.createTextNode(data);\n}\n\n/**\n * @returns {Text} */\nexport function space() {\n\treturn text(' ');\n}\n\n/**\n * @returns {Text} */\nexport function empty() {\n\treturn text('');\n}\n\n/**\n * @param {string} content\n * @returns {Comment}\n */\nexport function comment(content) {\n\treturn document.createComment(content);\n}\n\n/**\n * @param {EventTarget} node\n * @param {string} event\n * @param {EventListenerOrEventListenerObject} handler\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\n * @returns {() => void}\n */\nexport function listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function prevent_default(fn) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_immediate_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function self(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.target === this) fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function trusted(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.isTrusted) fn.call(this, event);\n\t};\n}\n\n/**\n * @param {Element} node\n * @param {string} attribute\n * @param {string} [value]\n * @returns {void}\n */\nexport function attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_attributes(node, attributes) {\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n\tfor (const key in attributes) {\n\t\tif (attributes[key] == null) {\n\t\t\tnode.removeAttribute(key);\n\t\t} else if (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key === '__value') {\n\t\t\t/** @type {any} */ (node).value = node[key] = attributes[key];\n\t\t} else if (\n\t\t\tdescriptors[key] &&\n\t\t\tdescriptors[key].set &&\n\t\t\talways_set_through_set_attribute.indexOf(key) === -1\n\t\t) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_svg_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tattr(node, key, attributes[key]);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} data_map\n * @returns {void}\n */\nexport function set_custom_element_data_map(node, data_map) {\n\tObject.keys(data_map).forEach((key) => {\n\t\tset_custom_element_data(node, key, data_map[key]);\n\t});\n}\n\n/**\n * @returns {void} */\nexport function set_custom_element_data(node, prop, value) {\n\tconst lower = prop.toLowerCase(); // for backwards compatibility with existing behavior we do lowercase first\n\tif (lower in node) {\n\t\tnode[lower] = typeof node[lower] === 'boolean' && value === '' ? true : value;\n\t} else if (prop in node) {\n\t\tnode[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\n/**\n * @param {string} tag\n */\nexport function set_dynamic_element_data(tag) {\n\treturn /-/.test(tag) ? set_custom_element_data_map : set_attributes;\n}\n\n/**\n * @returns {void}\n */\nexport function xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @returns {string}\n */\nexport function get_svelte_dataset(node) {\n\treturn node.dataset.svelteH;\n}\n\n/**\n * @returns {unknown[]} */\nexport function get_binding_group_value(group, __value, checked) {\n\tconst value = new Set();\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.add(group[i].__value);\n\t}\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement[]} group\n * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}\n */\nexport function init_binding_group(group) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\treturn {\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\t_inputs.forEach((input) => group.push(input));\n\t\t},\n\t\t/* remove */ r() {\n\t\t\t_inputs.forEach((input) => group.splice(group.indexOf(input), 1));\n\t\t}\n\t};\n}\n\n/**\n * @param {number[]} indexes\n * @returns {{ u(new_indexes: number[]): void; p(...inputs: HTMLInputElement[]): void; r: () => void; }}\n */\nexport function init_binding_group_dynamic(group, indexes) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _group = get_binding_group(group);\n\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\n\tfunction get_binding_group(group) {\n\t\tfor (let i = 0; i < indexes.length; i++) {\n\t\t\tgroup = group[indexes[i]] = group[indexes[i]] || [];\n\t\t}\n\t\treturn group;\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction push() {\n\t\t_inputs.forEach((input) => _group.push(input));\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction remove() {\n\t\t_inputs.forEach((input) => _group.splice(_group.indexOf(input), 1));\n\t}\n\treturn {\n\t\t/* update */ u(new_indexes) {\n\t\t\tindexes = new_indexes;\n\t\t\tconst new_group = get_binding_group(group);\n\t\t\tif (new_group !== _group) {\n\t\t\t\tremove();\n\t\t\t\t_group = new_group;\n\t\t\t\tpush();\n\t\t\t}\n\t\t},\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\tpush();\n\t\t},\n\t\t/* remove */ r: remove\n\t};\n}\n\n/** @returns {number} */\nexport function to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/** @returns {any[]} */\nexport function time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\n/**\n * @param {Element} element\n * @returns {ChildNode[]}\n */\nexport function children(element) {\n\treturn Array.from(element.childNodes);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {void}\n */\nfunction init_claim_info(nodes) {\n\tif (nodes.claim_info === undefined) {\n\t\tnodes.claim_info = { last_index: 0, total_claimed: 0 };\n\t}\n}\n\n/**\n * @template {ChildNodeEx} R\n * @param {ChildNodeArray} nodes\n * @param {(node: ChildNodeEx) => node is R} predicate\n * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} process_node\n * @param {() => R} create_node\n * @param {boolean} dont_update_last_index\n * @returns {R}\n */\nfunction claim_node(nodes, predicate, process_node, create_node, dont_update_last_index = false) {\n\t// Try to find nodes in an order such that we lengthen the longest increasing subsequence\n\tinit_claim_info(nodes);\n\tconst result_node = (() => {\n\t\t// We first try to find an element after the previous one\n\t\tfor (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// Otherwise, we try to find one before\n\t\t// We iterate in reverse so that we don't go too far back\n\t\tfor (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t} else if (replacement === undefined) {\n\t\t\t\t\t// Since we spliced before the last_index, we decrease it\n\t\t\t\t\tnodes.claim_info.last_index--;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// If we can't find any matching node, we create a new one\n\t\treturn create_node();\n\t})();\n\tresult_node.claim_order = nodes.claim_info.total_claimed;\n\tnodes.claim_info.total_claimed += 1;\n\treturn result_node;\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @param {(name: string) => Element | SVGElement} create_element\n * @returns {Element | SVGElement}\n */\nfunction claim_element_base(nodes, name, attributes, create_element) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Element | SVGElement} */\n\t\t(node) => node.nodeName === name,\n\t\t/** @param {Element} node */\n\t\t(node) => {\n\t\t\tconst remove = [];\n\t\t\tfor (let j = 0; j < node.attributes.length; j++) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) {\n\t\t\t\t\tremove.push(attribute.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremove.forEach((v) => node.removeAttribute(v));\n\t\t\treturn undefined;\n\t\t},\n\t\t() => create_element(name)\n\t);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_svg_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, svg_element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Text}\n */\nexport function claim_text(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Text} */\n\t\t(node) => node.nodeType === 3,\n\t\t/** @param {Text} node */\n\t\t(node) => {\n\t\t\tconst data_str = '' + data;\n\t\t\tif (node.data.startsWith(data_str)) {\n\t\t\t\tif (node.data.length !== data_str.length) {\n\t\t\t\t\treturn node.splitText(data_str.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode.data = data_str;\n\t\t\t}\n\t\t},\n\t\t() => text(data),\n\t\ttrue // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n\t);\n}\n\n/**\n * @returns {Text} */\nexport function claim_space(nodes) {\n\treturn claim_text(nodes, ' ');\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Comment}\n */\nexport function claim_comment(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Comment} */\n\t\t(node) => node.nodeType === 8,\n\t\t/** @param {Comment} node */\n\t\t(node) => {\n\t\t\tnode.data = '' + data;\n\t\t\treturn undefined;\n\t\t},\n\t\t() => comment(data),\n\t\ttrue\n\t);\n}\n\nfunction get_comment_idx(nodes, text, start) {\n\tfor (let i = start; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * @param {boolean} is_svg\n * @returns {HtmlTagHydration}\n */\nexport function claim_html_tag(nodes, is_svg) {\n\t// find html opening tag\n\tconst start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);\n\tconst end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);\n\tif (start_index === -1 || end_index === -1) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\n\tinit_claim_info(nodes);\n\tconst html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n\tdetach(html_tag_nodes[0]);\n\tdetach(html_tag_nodes[html_tag_nodes.length - 1]);\n\tconst claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n\tif (claimed_nodes.length === 0) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\tfor (const n of claimed_nodes) {\n\t\tn.claim_order = nodes.claim_info.total_claimed;\n\t\tnodes.claim_info.total_claimed += 1;\n\t}\n\treturn new HtmlTagHydration(is_svg, claimed_nodes);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data_contenteditable(text, data) {\n\tdata = '' + data;\n\tif (text.wholeText === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @param {string} attr_value\n * @returns {void}\n */\nexport function set_data_maybe_contenteditable(text, data, attr_value) {\n\tif (~contenteditable_truthy_values.indexOf(attr_value)) {\n\t\tset_data_contenteditable(text, data);\n\t} else {\n\t\tset_data(text, data);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_input_value(input, value) {\n\tinput.value = value == null ? '' : value;\n}\n\n/**\n * @returns {void} */\nexport function set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_style(node, key, value, important) {\n\tif (value == null) {\n\t\tnode.style.removeProperty(key);\n\t} else {\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_option(select, value, mounting) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nexport function select_value(select) {\n\tconst selected_option = select.querySelector(':checked');\n\treturn selected_option && selected_option.__value;\n}\n\nexport function select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), (option) => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\n\n/**\n * @type {boolean} */\nlet crossorigin;\n\n/**\n * @returns {boolean} */\nexport function is_crossorigin() {\n\tif (crossorigin === undefined) {\n\t\tcrossorigin = false;\n\t\ttry {\n\t\t\tif (typeof window !== 'undefined' && window.parent) {\n\t\t\t\tvoid window.parent.document;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcrossorigin = true;\n\t\t}\n\t}\n\treturn crossorigin;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {() => void} fn\n * @returns {() => void}\n */\nexport function add_iframe_resize_listener(node, fn) {\n\tconst computed_style = getComputedStyle(node);\n\tif (computed_style.position === 'static') {\n\t\tnode.style.position = 'relative';\n\t}\n\tconst iframe = element('iframe');\n\tiframe.setAttribute(\n\t\t'style',\n\t\t'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n\t\t\t'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;'\n\t);\n\tiframe.setAttribute('aria-hidden', 'true');\n\tiframe.tabIndex = -1;\n\tconst crossorigin = is_crossorigin();\n\n\t/**\n\t * @type {() => void}\n\t */\n\tlet unsubscribe;\n\tif (crossorigin) {\n\t\tiframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n\t\tunsubscribe = listen(\n\t\t\twindow,\n\t\t\t'message',\n\t\t\t/** @param {MessageEvent} event */ (event) => {\n\t\t\t\tif (event.source === iframe.contentWindow) fn();\n\t\t\t}\n\t\t);\n\t} else {\n\t\tiframe.src = 'about:blank';\n\t\tiframe.onload = () => {\n\t\t\tunsubscribe = listen(iframe.contentWindow, 'resize', fn);\n\t\t\t// make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n\t\t\t// see https://github.com/sveltejs/svelte/issues/4233\n\t\t\tfn();\n\t\t};\n\t}\n\tappend(node, iframe);\n\treturn () => {\n\t\tif (crossorigin) {\n\t\t\tunsubscribe();\n\t\t} else if (unsubscribe && iframe.contentWindow) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tdetach(iframe);\n\t};\n}\nexport const resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\nexport const resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\nexport const resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton(\n\t{ box: 'device-pixel-content-box' }\n);\nexport { ResizeObserverSingleton };\n\n/**\n * @returns {void} */\nexport function toggle_class(element, name, toggle) {\n\t// The `!!` is required because an `undefined` flag means flipping the current state.\n\telement.classList.toggle(name, !!toggle);\n}\n\n/**\n * @template T\n * @param {string} type\n * @param {T} [detail]\n * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]\n * @returns {CustomEvent<T>}\n */\nexport function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {ChildNodeArray}\n */\nexport function query_selector_all(selector, parent = document.body) {\n\treturn Array.from(parent.querySelectorAll(selector));\n}\n\n/**\n * @param {string} nodeId\n * @param {HTMLElement} head\n * @returns {any[]}\n */\nexport function head_selector(nodeId, head) {\n\tconst result = [];\n\tlet started = 0;\n\tfor (const node of head.childNodes) {\n\t\tif (node.nodeType === 8 /* comment node */) {\n\t\t\tconst comment = node.textContent.trim();\n\t\t\tif (comment === `HEAD_${nodeId}_END`) {\n\t\t\t\tstarted -= 1;\n\t\t\t\tresult.push(node);\n\t\t\t} else if (comment === `HEAD_${nodeId}_START`) {\n\t\t\t\tstarted += 1;\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t} else if (started > 0) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n/** */\nexport class HtmlTag {\n\t/**\n\t * @private\n\t * @default false\n\t */\n\tis_svg = false;\n\t/** parent for creating node */\n\te = undefined;\n\t/** html tag nodes */\n\tn = undefined;\n\t/** target */\n\tt = undefined;\n\t/** anchor */\n\ta = undefined;\n\tconstructor(is_svg = false) {\n\t\tthis.is_svg = is_svg;\n\t\tthis.e = this.n = null;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tthis.h(html);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @param {HTMLElement | SVGElement} target\n\t * @param {HTMLElement | SVGElement} anchor\n\t * @returns {void}\n\t */\n\tm(html, target, anchor = null) {\n\t\tif (!this.e) {\n\t\t\tif (this.is_svg)\n\t\t\t\tthis.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));\n\t\t\t/** #7364  target for <template> may be provided as #document-fragment(11) */ else\n\t\t\t\tthis.e = element(\n\t\t\t\t\t/** @type {keyof HTMLElementTagNameMap} */ (\n\t\t\t\t\t\ttarget.nodeType === 11 ? 'TEMPLATE' : target.nodeName\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tthis.t =\n\t\t\t\ttarget.tagName !== 'TEMPLATE'\n\t\t\t\t\t? target\n\t\t\t\t\t: /** @type {HTMLTemplateElement} */ (target).content;\n\t\t\tthis.c(html);\n\t\t}\n\t\tthis.i(anchor);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\th(html) {\n\t\tthis.e.innerHTML = html;\n\t\tthis.n = Array.from(\n\t\t\tthis.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes\n\t\t);\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert(this.t, this.n[i], anchor);\n\t\t}\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tp(html) {\n\t\tthis.d();\n\t\tthis.h(html);\n\t\tthis.i(this.a);\n\t}\n\n\t/**\n\t * @returns {void} */\n\td() {\n\t\tthis.n.forEach(detach);\n\t}\n}\n\nexport class HtmlTagHydration extends HtmlTag {\n\t/** @type {Element[]} hydration claimed nodes */\n\tl = undefined;\n\n\tconstructor(is_svg = false, claimed_nodes) {\n\t\tsuper(is_svg);\n\t\tthis.e = this.n = null;\n\t\tthis.l = claimed_nodes;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tif (this.l) {\n\t\t\tthis.n = this.l;\n\t\t} else {\n\t\t\tsuper.c(html);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert_hydration(this.t, this.n[i], anchor);\n\t\t}\n\t}\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @returns {{}}\n */\nexport function attribute_to_object(attributes) {\n\tconst result = {};\n\tfor (const attribute of attributes) {\n\t\tresult[attribute.name] = attribute.value;\n\t}\n\treturn result;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t'&': '&amp;',\n\t'<': '&lt;'\n};\n\nconst regex_attribute_characters_to_escape = /[\"&<]/g;\n\n/**\n * Note that the attribute itself should be surrounded in double quotes\n * @param {any} attribute\n */\nfunction escape_attribute(attribute) {\n\treturn String(attribute).replace(regex_attribute_characters_to_escape, (match) => escaped[match]);\n}\n\n/**\n * @param {Record<string, string>} attributes\n */\nexport function stringify_spread(attributes) {\n\tlet str = ' ';\n\tfor (const key in attributes) {\n\t\tif (attributes[key] != null) {\n\t\t\tstr += `${key}=\"${escape_attribute(attributes[key])}\" `;\n\t\t}\n\t}\n\n\treturn str;\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {{}}\n */\nexport function get_custom_elements_slots(element) {\n\tconst result = {};\n\telement.childNodes.forEach(\n\t\t/** @param {Element} node */ (node) => {\n\t\t\tresult[node.slot || 'default'] = true;\n\t\t}\n\t);\n\treturn result;\n}\n\nexport function construct_svelte_component(component, props) {\n\treturn new component(props);\n}\n\n/**\n * @typedef {Node & {\n * \tclaim_order?: number;\n * \thydrate_init?: true;\n * \tactual_end_child?: NodeEx;\n * \tchildNodes: NodeListOf<NodeEx>;\n * }} NodeEx\n */\n\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\n\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\n\n/**\n * @typedef {ChildNodeEx[] & {\n * \tclaim_info?: {\n * \t\tlast_index: number;\n * \t\ttotal_claimed: number;\n * \t};\n * }} ChildNodeArray\n */\n","import { append_empty_stylesheet, detach, get_root_for_style } from './dom.js';\nimport { raf } from './environment.js';\n\n// we need to store the information for multiple documents because a Svelte application could also contain iframes\n// https://github.com/sveltejs/svelte/issues/3624\n/** @type {Map<Document | ShadowRoot, import('./private.d.ts').StyleInformation>} */\nconst managed_styles = new Map();\n\nlet active = 0;\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\n/**\n * @param {string} str\n * @returns {number}\n */\nfunction hash(str) {\n\tlet hash = 5381;\n\tlet i = str.length;\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\n/**\n * @param {Document | ShadowRoot} doc\n * @param {Element & ElementCSSInlineStyle} node\n * @returns {{ stylesheet: any; rules: {}; }}\n */\nfunction create_style_information(doc, node) {\n\tconst info = { stylesheet: append_empty_stylesheet(node), rules: {} };\n\tmanaged_styles.set(doc, info);\n\treturn info;\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {number} a\n * @param {number} b\n * @param {number} duration\n * @param {number} delay\n * @param {(t: number) => number} ease\n * @param {(t: number, u: number) => string} fn\n * @param {number} uid\n * @returns {string}\n */\nexport function create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n\tconst step = 16.666 / duration;\n\tlet keyframes = '{\\n';\n\tfor (let p = 0; p <= 1; p += step) {\n\t\tconst t = a + (b - a) * ease(p);\n\t\tkeyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n\t}\n\tconst rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n\tconst name = `__svelte_${hash(rule)}_${uid}`;\n\tconst doc = get_root_for_style(node);\n\tconst { stylesheet, rules } = managed_styles.get(doc) || create_style_information(doc, node);\n\tif (!rules[name]) {\n\t\trules[name] = true;\n\t\tstylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n\t}\n\tconst animation = node.style.animation || '';\n\tnode.style.animation = `${\n\t\tanimation ? `${animation}, ` : ''\n\t}${name} ${duration}ms linear ${delay}ms 1 both`;\n\tactive += 1;\n\treturn name;\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {string} [name]\n * @returns {void}\n */\nexport function delete_rule(node, name) {\n\tconst previous = (node.style.animation || '').split(', ');\n\tconst next = previous.filter(\n\t\tname\n\t\t\t? (anim) => anim.indexOf(name) < 0 // remove specific animation\n\t\t\t: (anim) => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n\t);\n\tconst deleted = previous.length - next.length;\n\tif (deleted) {\n\t\tnode.style.animation = next.join(', ');\n\t\tactive -= deleted;\n\t\tif (!active) clear_rules();\n\t}\n}\n\n/** @returns {void} */\nexport function clear_rules() {\n\traf(() => {\n\t\tif (active) return;\n\t\tmanaged_styles.forEach((info) => {\n\t\t\tconst { ownerNode } = info.stylesheet;\n\t\t\t// there is no ownerNode if it runs on jsdom.\n\t\t\tif (ownerNode) detach(ownerNode);\n\t\t});\n\t\tmanaged_styles.clear();\n\t});\n}\n","import { custom_event } from './dom.js';\n\nexport let current_component;\n\n/** @returns {void} */\nexport function set_current_component(component) {\n\tcurrent_component = component;\n}\n\nexport function get_current_component() {\n\tif (!current_component) throw new Error('Function called outside component initialization');\n\treturn current_component;\n}\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#beforeupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tget_current_component().$$.before_update.push(fn);\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside a [server-side component](https://svelte.dev/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs/svelte#onmount\n * @template T\n * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#afterupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tget_current_component().$$.after_update.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs/svelte#ondestroy\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * https://svelte.dev/docs/svelte#createeventdispatcher\n * @template {Record<string, any>} [EventMap=any]\n * @returns {import('./public.js').EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst component = get_current_component();\n\treturn (type, detail, { cancelable = false } = {}) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(/** @type {string} */ (type), detail, { cancelable });\n\t\t\tcallbacks.slice().forEach((fn) => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#setcontext\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n\treturn context;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#getcontext\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs/svelte#getallcontexts\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\treturn get_current_component().$$.context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#hascontext\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_current_component().$$.context.has(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\n/**\n * @param component\n * @param event\n * @returns {void}\n */\nexport function bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\tif (callbacks) {\n\t\t// @ts-ignore\n\t\tcallbacks.slice().forEach((fn) => fn.call(this, event));\n\t}\n}\n","import { run_all } from './utils.js';\nimport { current_component, set_current_component } from './lifecycle.js';\n\nexport const dirty_components = [];\nexport const intros = { enabled: false };\nexport const binding_callbacks = [];\n\nlet render_callbacks = [];\n\nconst flush_callbacks = [];\n\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\n\nlet update_scheduled = false;\n\n/** @returns {void} */\nexport function schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\n/** @returns {Promise<void>} */\nexport function tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\n/** @returns {void} */\nexport function add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\n/** @returns {void} */\nexport function add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\n\nlet flushidx = 0; // Do *not* move this inside the flush() function\n\n/** @returns {void} */\nexport function flush() {\n\t// Do not reenter flush while dirty components are updated, as this can\n\t// result in an infinite loop. Instead, let the inner flush handle it.\n\t// Reentrancy is ok afterwards for bindings etc.\n\tif (flushidx !== 0) {\n\t\treturn;\n\t}\n\tconst saved_component = current_component;\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\ttry {\n\t\t\twhile (flushidx < dirty_components.length) {\n\t\t\t\tconst component = dirty_components[flushidx];\n\t\t\t\tflushidx++;\n\t\t\t\tset_current_component(component);\n\t\t\t\tupdate(component.$$);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\n\t\t\tdirty_components.length = 0;\n\t\t\tflushidx = 0;\n\t\t\tthrow e;\n\t\t}\n\t\tset_current_component(null);\n\t\tdirty_components.length = 0;\n\t\tflushidx = 0;\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\n\t\t\tconst callback = render_callbacks[i];\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\trender_callbacks.length = 0;\n\t} while (dirty_components.length);\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\tupdate_scheduled = false;\n\tseen_callbacks.clear();\n\tset_current_component(saved_component);\n}\n\n/** @returns {void} */\nfunction update($$) {\n\tif ($$.fragment !== null) {\n\t\t$$.update();\n\t\trun_all($$.before_update);\n\t\tconst dirty = $$.dirty;\n\t\t$$.dirty = [-1];\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\n\t\t$$.after_update.forEach(add_render_callback);\n\t}\n}\n\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function flush_render_callbacks(fns) {\n\tconst filtered = [];\n\tconst targets = [];\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\n\ttargets.forEach((c) => c());\n\trender_callbacks = filtered;\n}\n","import { identity as linear, is_function, noop, run_all } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\nimport { custom_event } from './dom.js';\nimport { add_render_callback } from './scheduler.js';\n\n/**\n * @type {Promise<void> | null}\n */\nlet promise;\n\n/**\n * @returns {Promise<void>}\n */\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\treturn promise;\n}\n\n/**\n * @param {Element} node\n * @param {INTRO | OUTRO | boolean} direction\n * @param {'start' | 'end'} kind\n * @returns {void}\n */\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nconst outroing = new Set();\n\n/**\n * @type {Outro}\n */\nlet outros;\n\n/**\n * @returns {void} */\nexport function group_outros() {\n\toutros = {\n\t\tr: 0,\n\t\tc: [],\n\t\tp: outros // parent group\n\t};\n}\n\n/**\n * @returns {void} */\nexport function check_outros() {\n\tif (!outros.r) {\n\t\trun_all(outros.c);\n\t}\n\toutros = outros.p;\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} [local]\n * @returns {void}\n */\nexport function transition_in(block, local) {\n\tif (block && block.i) {\n\t\toutroing.delete(block);\n\t\tblock.i(local);\n\t}\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} local\n * @param {0 | 1} [detach]\n * @param {() => void} [callback]\n * @returns {void}\n */\nexport function transition_out(block, local, detach, callback) {\n\tif (block && block.o) {\n\t\tif (outroing.has(block)) return;\n\t\toutroing.add(block);\n\t\toutros.c.push(() => {\n\t\t\toutroing.delete(block);\n\t\t\tif (callback) {\n\t\t\t\tif (detach) block.d(1);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t\tblock.o(local);\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @type {import('../transition/public.js').TransitionConfig}\n */\nconst null_transition = { duration: 0 };\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ start(): void; invalidate(): void; end(): void; }}\n */\nexport function create_in_transition(node, fn, params) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'in' };\n\tlet config = fn(node, params, options);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\t/**\n\t * @returns {void} */\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick(0, 1);\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tif (task) task.abort();\n\t\trunning = true;\n\t\tadd_render_callback(() => dispatch(node, true, 'start'));\n\t\ttask = loop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(1, 0);\n\t\t\t\t\tdispatch(node, true, 'end');\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn (running = false);\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\tlet started = false;\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\t\t\tstarted = true;\n\t\t\tdelete_rule(node);\n\t\t\tif (is_function(config)) {\n\t\t\t\tconfig = config(options);\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ end(reset: any): void; }}\n */\nexport function create_out_transition(node, fn, params) {\n\t/** @type {TransitionOptions} */\n\tconst options = { direction: 'out' };\n\tlet config = fn(node, params, options);\n\tlet running = true;\n\tlet animation_name;\n\tconst group = outros;\n\tgroup.r += 1;\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tadd_render_callback(() => dispatch(node, false, 'start'));\n\n\t\tif ('inert' in node) {\n\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\tnode.inert = true;\n\t\t}\n\n\t\tloop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(0, 1);\n\t\t\t\t\tdispatch(node, false, 'end');\n\t\t\t\t\tif (!--group.r) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.c);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (is_function(config)) {\n\t\twait().then(() => {\n\t\t\t// @ts-ignore\n\t\t\tconfig = config(options);\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && 'inert' in node) {\n\t\t\t\tnode.inert = original_inert_value;\n\t\t\t}\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @param {boolean} intro\n * @returns {{ run(b: 0 | 1): void; end(): void; }}\n */\nexport function create_bidirectional_transition(node, fn, params, intro) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'both' };\n\tlet config = fn(node, params, options);\n\tlet t = intro ? 0 : 1;\n\n\t/**\n\t * @type {Program | null} */\n\tlet running_program = null;\n\n\t/**\n\t * @type {PendingProgram | null} */\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @param {PendingProgram} program\n\t * @param {number} duration\n\t * @returns {Program}\n\t */\n\tfunction init(program, duration) {\n\t\tconst d = /** @type {Program['d']} */ (program.b - t);\n\t\tduration *= Math.abs(d);\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\t/**\n\t * @param {INTRO | OUTRO} b\n\t * @returns {void}\n\t */\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\t/**\n\t\t * @type {PendingProgram} */\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\t// @ts-ignore todo: improve typings\n\t\t\tprogram.group = outros;\n\t\t\toutros.r += 1;\n\t\t}\n\n\t\tif ('inert' in node) {\n\t\t\tif (b) {\n\t\t\t\tif (original_inert_value !== undefined) {\n\t\t\t\t\t// aborted/reversed outro  restore previous inert value\n\t\t\t\t\tnode.inert = original_inert_value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\t\tnode.inert = true;\n\t\t\t}\n\t\t}\n\n\t\tif (running_program || pending_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\t\t\tif (b) tick(0, 1);\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\t\t\tloop((now) => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\trunning_program.b,\n\t\t\t\t\t\t\trunning_program.duration,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\teasing,\n\t\t\t\t\t\t\tconfig.css\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick((t = running_program.b), 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro  we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro  needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.r) run_all(running_program.group.c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t} else if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trun(b) {\n\t\t\tif (is_function(config)) {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconst opts = { direction: b ? 'in' : 'out' };\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconfig = config(opts);\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\n/** @typedef {1} INTRO */\n/** @typedef {0} OUTRO */\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\n\n/**\n * @typedef {Object} Outro\n * @property {number} r\n * @property {Function[]} c\n * @property {Object} p\n */\n\n/**\n * @typedef {Object} PendingProgram\n * @property {number} start\n * @property {INTRO|OUTRO} b\n * @property {Outro} [group]\n */\n\n/**\n * @typedef {Object} Program\n * @property {number} a\n * @property {INTRO|OUTRO} b\n * @property {1|-1} d\n * @property {number} duration\n * @property {number} start\n * @property {number} end\n * @property {Outro} [group]\n */\n","import { transition_in, transition_out } from './transitions.js';\nimport { run_all } from './utils.js';\n\n// general each functions:\n\nexport function ensure_array_like(array_like_or_iterator) {\n\treturn array_like_or_iterator?.length !== undefined\n\t\t? array_like_or_iterator\n\t\t: Array.from(array_like_or_iterator);\n}\n\n// keyed each functions:\n\n/** @returns {void} */\nexport function destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\n/** @returns {void} */\nexport function outro_and_destroy_block(block, lookup) {\n\ttransition_out(block, 1, 1, () => {\n\t\tlookup.delete(block.key);\n\t});\n}\n\n/** @returns {void} */\nexport function fix_and_destroy_block(block, lookup) {\n\tblock.f();\n\tdestroy_block(block, lookup);\n}\n\n/** @returns {void} */\nexport function fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\n/** @returns {any[]} */\nexport function update_keyed_each(\n\told_blocks,\n\tdirty,\n\tget_key,\n\tdynamic,\n\tctx,\n\tlist,\n\tlookup,\n\tnode,\n\tdestroy,\n\tcreate_each_block,\n\tnext,\n\tget_context\n) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\tconst updates = [];\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\t// defer updates until all the DOM shuffling is done\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\n\t\t}\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\t/** @returns {void} */\n\tfunction insert(block) {\n\t\ttransition_in(block, 1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t} else if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t} else if (did_move.has(old_key)) {\n\t\t\to--;\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\twhile (n) insert(new_blocks[n - 1]);\n\trun_all(updates);\n\treturn new_blocks;\n}\n\n/** @returns {void} */\nexport function validate_each_keys(ctx, list, get_context, get_key) {\n\tconst keys = new Map();\n\tfor (let i = 0; i < list.length; i++) {\n\t\tconst key = get_key(get_context(ctx, list, i));\n\t\tif (keys.has(key)) {\n\t\t\tlet value = '';\n\t\t\ttry {\n\t\t\t\tvalue = `with value '${String(key)}' `;\n\t\t\t} catch (e) {\n\t\t\t\t// can't stringify\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot have duplicate keys in a keyed each: Keys at index ${keys.get(\n\t\t\t\t\tkey\n\t\t\t\t)} and ${i} ${value}are duplicates`\n\t\t\t);\n\t\t}\n\t\tkeys.set(key, i);\n\t}\n}\n","/** @returns {{}} */\nexport function get_spread_update(levels, updates) {\n\tconst update = {};\n\tconst to_null_out = {};\n\tconst accounted_for = { $$scope: 1 };\n\tlet i = levels.length;\n\twhile (i--) {\n\t\tconst o = levels[i];\n\t\tconst n = updates[i];\n\t\tif (n) {\n\t\t\tfor (const key in o) {\n\t\t\t\tif (!(key in n)) to_null_out[key] = 1;\n\t\t\t}\n\t\t\tfor (const key in n) {\n\t\t\t\tif (!accounted_for[key]) {\n\t\t\t\t\tupdate[key] = n[key];\n\t\t\t\t\taccounted_for[key] = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlevels[i] = n;\n\t\t} else {\n\t\t\tfor (const key in o) {\n\t\t\t\taccounted_for[key] = 1;\n\t\t\t}\n\t\t}\n\t}\n\tfor (const key in to_null_out) {\n\t\tif (!(key in update)) update[key] = undefined;\n\t}\n\treturn update;\n}\n\nexport function get_spread_object(spread_props) {\n\treturn typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n","import {\n\tadd_render_callback,\n\tflush,\n\tflush_render_callbacks,\n\tschedule_update,\n\tdirty_components\n} from './scheduler.js';\nimport { current_component, set_current_component } from './lifecycle.js';\nimport { blank_object, is_empty, is_function, run, run_all, noop } from './utils.js';\nimport {\n\tchildren,\n\tdetach,\n\tstart_hydrating,\n\tend_hydrating,\n\tget_custom_elements_slots,\n\tinsert,\n\telement,\n\tattr\n} from './dom.js';\nimport { transition_in } from './transitions.js';\n\n/** @returns {void} */\nexport function bind(component, name, callback) {\n\tconst index = component.$$.props[name];\n\tif (index !== undefined) {\n\t\tcomponent.$$.bound[index] = callback;\n\t\tcallback(component.$$.ctx[index]);\n\t}\n}\n\n/** @returns {void} */\nexport function create_component(block) {\n\tblock && block.c();\n}\n\n/** @returns {void} */\nexport function claim_component(block, parent_nodes) {\n\tblock && block.l(parent_nodes);\n}\n\n/** @returns {void} */\nexport function mount_component(component, target, anchor) {\n\tconst { fragment, after_update } = component.$$;\n\tfragment && fragment.m(target, anchor);\n\t// onMount happens before the initial afterUpdate\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n\t\t// if the component was destroyed immediately\n\t\t// it will update the `$$.on_destroy` reference to `null`.\n\t\t// the destructured on_destroy may still reference to the old array\n\t\tif (component.$$.on_destroy) {\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\tafter_update.forEach(add_render_callback);\n}\n\n/** @returns {void} */\nexport function destroy_component(component, detaching) {\n\tconst $$ = component.$$;\n\tif ($$.fragment !== null) {\n\t\tflush_render_callbacks($$.after_update);\n\t\trun_all($$.on_destroy);\n\t\t$$.fragment && $$.fragment.d(detaching);\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\t$$.on_destroy = $$.fragment = null;\n\t\t$$.ctx = [];\n\t}\n}\n\n/** @returns {void} */\nfunction make_dirty(component, i) {\n\tif (component.$$.dirty[0] === -1) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty.fill(0);\n\t}\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n}\n\n// TODO: Document the other params\n/**\n * @param {SvelteComponent} component\n * @param {import('./public.js').ComponentConstructorOptions} options\n *\n * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.\n * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.\n * This will be the `add_css` function from the compiled component.\n *\n * @returns {void}\n */\nexport function init(\n\tcomponent,\n\toptions,\n\tinstance,\n\tcreate_fragment,\n\tnot_equal,\n\tprops,\n\tappend_styles = null,\n\tdirty = [-1]\n) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\t/** @type {import('./private.js').T$$} */\n\tconst $$ = (component.$$ = {\n\t\tfragment: null,\n\t\tctx: [],\n\t\t// state\n\t\tprops,\n\t\tupdate: noop,\n\t\tnot_equal,\n\t\tbound: blank_object(),\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\ton_disconnect: [],\n\t\tbefore_update: [],\n\t\tafter_update: [],\n\t\tcontext: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty,\n\t\tskip_bound: false,\n\t\troot: options.target || parent_component.$$.root\n\t});\n\tappend_styles && append_styles($$.root);\n\tlet ready = false;\n\t$$.ctx = instance\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n\t\t\t\t\tif (ready) make_dirty(component, i);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t  })\n\t\t: [];\n\t$$.update();\n\tready = true;\n\trun_all($$.before_update);\n\t// `false` as a special case of no DOM component\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\tstart_hydrating();\n\t\t\t// TODO: what is the correct type here?\n\t\t\t// @ts-expect-error\n\t\t\tconst nodes = children(options.target);\n\t\t\t$$.fragment && $$.fragment.l(nodes);\n\t\t\tnodes.forEach(detach);\n\t\t} else {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.c();\n\t\t}\n\t\tif (options.intro) transition_in(component.$$.fragment);\n\t\tmount_component(component, options.target, options.anchor);\n\t\tend_hydrating();\n\t\tflush();\n\t}\n\tset_current_component(parent_component);\n}\n\nexport let SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, Function[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<Function, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn || this.$$c) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tlet node;\n\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\tc: function create() {\n\t\t\t\t\t\t\t\tnode = element('slot');\n\t\t\t\t\t\t\t\tif (name !== 'default') {\n\t\t\t\t\t\t\t\t\tattr(node, 'name', name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @param {HTMLElement} target\n\t\t\t\t\t\t\t * @param {HTMLElement} [anchor]\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tm: function mount(target, anchor) {\n\t\t\t\t\t\t\t\tinsert(target, node, anchor);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\td: function destroy(detaching) {\n\t\t\t\t\t\t\t\tif (detaching) {\n\t\t\t\t\t\t\t\t\tdetach(node);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\t$$slots[name] = [create_slot(name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Port over props that were set programmatically before ce was initialized\n\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\tif (!(key in this.$$d) && this[key] !== undefined) {\n\t\t\t\t\t\tthis.$$d[key] = this[key]; // don't transform, these were set through JavaScript\n\t\t\t\t\t\tdelete this[key]; // remove the property that shadows the getter/setter\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = new this.$$ctor({\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$scope: {\n\t\t\t\t\t\t\tctx: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tconst reflect_attributes = () => {\n\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t\tthis.$$d[key] = this.$$c.$$.ctx[this.$$c.$$.props[key]];\n\t\t\t\t\t\tif (this.$$p_d[key].reflect) {\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(this.$$p_d[key].attribute || key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.$$r = false;\n\t\t\t\t};\n\t\t\t\tthis.$$c.$$.after_update.push(reflect_attributes);\n\t\t\t\treflect_attributes(); // once initially because after_update is added too late for first render\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn && this.$$c) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tObject.keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {import('./public.js').ComponentType} Component  A Svelte component constructor\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} accessors  Other accessors besides the ones for props the component has\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n * @param {(ce: new () => HTMLElement) => new () => HTMLElement} [extend]\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\taccessors,\n\tuse_shadow_dom,\n\textend\n) {\n\tlet Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn Object.keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tObject.keys(props_definition).forEach((prop) => {\n\t\tObject.defineProperty(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tthis.$$c?.$set({ [prop]: value });\n\t\t\t}\n\t\t});\n\t});\n\taccessors.forEach((accessor) => {\n\t\tObject.defineProperty(Class.prototype, accessor, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[accessor];\n\t\t\t}\n\t\t});\n\t});\n\tif (extend) {\n\t\t// @ts-expect-error - assigning here is fine\n\t\tClass = extend(Class);\n\t}\n\tComponent.element = /** @type {any} */ (Class);\n\treturn Class;\n}\n\n/**\n * Base class for Svelte components. Used when dev=false.\n *\n * @template {Record<string, any>} [Props=any]\n * @template {Record<string, any>} [Events=any]\n */\nexport class SvelteComponent {\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$ = undefined;\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$set = undefined;\n\n\t/** @returns {void} */\n\t$destroy() {\n\t\tdestroy_component(this, 1);\n\t\tthis.$destroy = noop;\n\t}\n\n\t/**\n\t * @template {Extract<keyof Events, string>} K\n\t * @param {K} type\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\n\t * @returns {() => void}\n\t */\n\t$on(type, callback) {\n\t\tif (!is_function(callback)) {\n\t\t\treturn noop;\n\t\t}\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n\t\tcallbacks.push(callback);\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t/**\n\t * @param {Partial<Props>} props\n\t * @returns {void}\n\t */\n\t$set(props) {\n\t\tif (this.$$set && !is_empty(props)) {\n\t\t\tthis.$$.skip_bound = true;\n\t\t\tthis.$$set(props);\n\t\t\tthis.$$.skip_bound = false;\n\t\t}\n\t}\n}\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n *\n * https://svelte.dev/docs/svelte-compiler#svelte-version\n * @type {string}\n */\nexport const VERSION = '4.2.19';\nexport const PUBLIC_VERSION = '4';\n","import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n","import {\n\trun_all,\n\tsubscribe,\n\tnoop,\n\tsafe_not_equal,\n\tis_function,\n\tget_store_value\n} from '../internal/index.js';\n\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#readable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#writable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {import('./public.js').Unsubscriber} */\n\tlet stop;\n\t/** @type {Set<import('./private.js').SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\t/** @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {import('./public.js').Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(value));\n\t}\n\n\t/**\n\t * @param {import('./public.js').Subscriber<T>} run\n\t * @param {import('./private.js').Invalidator<T>} [invalidate]\n\t * @returns {import('./public.js').Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {import('./private.js').SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(value);\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>, set: (value: T) => void, update: (fn: import('./public.js').Updater<T>) => void) => import('./public.js').Unsubscriber | void} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>) => T} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * @template {import('./private.js').Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<import('./public.js').Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = is_function(result) ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * https://svelte.dev/docs/svelte-store#readonly\n * @template T\n * @param {import('./public.js').Readable<T>} store  - store to make readonly\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\nexport { get_store_value as get };\n","export function parse(str, loose) {\n\tif (str instanceof RegExp) return { keys:false, pattern:str };\n\tvar c, o, tmp, ext, keys=[], pattern='', arr = str.split('/');\n\tarr[0] || arr.shift();\n\n\twhile (tmp = arr.shift()) {\n\t\tc = tmp[0];\n\t\tif (c === '*') {\n\t\t\tkeys.push('wild');\n\t\t\tpattern += '/(.*)';\n\t\t} else if (c === ':') {\n\t\t\to = tmp.indexOf('?', 1);\n\t\t\text = tmp.indexOf('.', 1);\n\t\t\tkeys.push( tmp.substring(1, !!~o ? o : !!~ext ? ext : tmp.length) );\n\t\t\tpattern += !!~o && !~ext ? '(?:/([^/]+?))?' : '/([^/]+?)';\n\t\t\tif (!!~ext) pattern += (!!~o ? '?' : '') + '\\\\' + tmp.substring(ext);\n\t\t} else {\n\t\t\tpattern += '/' + tmp;\n\t\t}\n\t}\n\n\treturn {\n\t\tkeys: keys,\n\t\tpattern: new RegExp('^' + pattern + (loose ? '(?=$|\\/)' : '\\/?$'), 'i')\n\t};\n}\n\nvar RGX = /(\\/|^)([:*][^/]*?)(\\?)?(?=[/.]|$)/g;\n\n// error if key missing?\nexport function inject(route, values) {\n\treturn route.replace(RGX, (x, lead, key, optional) => {\n\t\tx = values[key=='*' ? 'wild' : key.substring(1)];\n\t\treturn x ? '/'+x : (optional || key=='*') ? '' : '/' + key;\n\t});\n}\n","<script context=\"module\">\nimport {readable, writable, derived} from 'svelte/store'\nimport {tick} from 'svelte'\n\n/**\n * @typedef {Object} Location\n * @property {string} location - Location (page/view), for example `/book`\n * @property {string} [querystring] - Querystring from the hash, as a string not parsed\n */\n/**\n * Returns the current location from the hash.\n *\n * @returns {Location} Location object\n * @private\n */\nfunction getLocation() {\n    const hashPosition = window.location.href.indexOf('#/')\n    let location = (hashPosition > -1) ? window.location.href.substr(hashPosition + 1) : '/'\n\n    // Check if there's a querystring\n    const qsPosition = location.indexOf('?')\n    let querystring = ''\n    if (qsPosition > -1) {\n        querystring = location.substr(qsPosition + 1)\n        location = location.substr(0, qsPosition)\n    }\n\n    return {location, querystring}\n}\n\n/**\n * Readable store that returns the current full location (incl. querystring)\n */\nexport const loc = readable(\n    null,\n    // eslint-disable-next-line prefer-arrow-callback\n    function start(set) {\n        set(getLocation())\n\n        const update = () => {\n            set(getLocation())\n        }\n        window.addEventListener('hashchange', update, false)\n\n        return function stop() {\n            window.removeEventListener('hashchange', update, false)\n        }\n    }\n)\n\n/**\n * Readable store that returns the current location\n */\nexport const location = derived(\n    loc,\n    (_loc) => _loc.location\n)\n\n/**\n * Readable store that returns the current querystring\n */\nexport const querystring = derived(\n    loc,\n    (_loc) => _loc.querystring\n)\n\n/**\n * Store that returns the currently-matched params.\n * Despite this being writable, consumers should not change the value of the store.\n * It is exported as a readable store only (in the typings file)\n */\nexport const params = writable(undefined)\n\n/**\n * Navigates to a new page programmatically.\n *\n * @param {string} location - Path to navigate to (must start with `/` or '#/')\n * @return {Promise<void>} Promise that resolves after the page navigation has completed\n */\nexport async function push(location) {\n    if (!location || location.length < 1 || (location.charAt(0) != '/' && location.indexOf('#/') !== 0)) {\n        throw Error('Invalid parameter location')\n    }\n\n    // Execute this code when the current call stack is complete\n    await tick()\n\n    // Note: this will include scroll state in history even when restoreScrollState is false\n    history.replaceState({...history.state, __svelte_spa_router_scrollX: window.scrollX, __svelte_spa_router_scrollY: window.scrollY}, undefined)      \n    window.location.hash = (location.charAt(0) == '#' ? '' : '#') + location\n}\n\n/**\n * Navigates back in history (equivalent to pressing the browser's back button).\n * \n * @return {Promise<void>} Promise that resolves after the page navigation has completed\n */\nexport async function pop() {\n    // Execute this code when the current call stack is complete\n    await tick()\n\n    window.history.back()\n}\n\n/**\n * Replaces the current page but without modifying the history stack.\n *\n * @param {string} location - Path to navigate to (must start with `/` or '#/')\n * @return {Promise<void>} Promise that resolves after the page navigation has completed\n */\nexport async function replace(location) {\n    if (!location || location.length < 1 || (location.charAt(0) != '/' && location.indexOf('#/') !== 0)) {\n        throw Error('Invalid parameter location')\n    }\n\n    // Execute this code when the current call stack is complete\n    await tick()\n\n    const dest = (location.charAt(0) == '#' ? '' : '#') + location\n    try {\n        const newState = {\n            ...history.state\n        }\n        delete newState['__svelte_spa_router_scrollX']\n        delete newState['__svelte_spa_router_scrollY']\n        window.history.replaceState(newState, undefined, dest)\n    }\n    catch (e) {\n        // eslint-disable-next-line no-console\n        console.warn('Caught exception while replacing the current page. If you\\'re running this in the Svelte REPL, please note that the `replace` method might not work in this environment.')\n    }\n\n    // The method above doesn't trigger the hashchange event, so let's do that manually\n    window.dispatchEvent(new Event('hashchange'))\n}\n\n/**\n * Dictionary with options for the link action.\n * @typedef {Object} LinkActionOpts\n * @property {string} href - A string to use in place of the link's href attribute. Using this allows for updating link's targets reactively.\n * @property {boolean} disabled - If true, link is disabled\n */\n\n/**\n * Svelte Action that enables a link element (`<a>`) to use our history management.\n *\n * For example:\n *\n * ````html\n * <a href=\"/books\" use:link>View books</a>\n * ````\n *\n * @param {HTMLElement} node - The target node (automatically set by Svelte). Must be an anchor tag (`<a>`) with a href attribute starting in `/`\n * @param {string|LinkActionOpts} opts - Options object. For legacy reasons, we support a string too which will be the value for opts.href\n */\nexport function link(node, opts) {\n    opts = linkOpts(opts)\n\n    // Only apply to <a> tags\n    if (!node || !node.tagName || node.tagName.toLowerCase() != 'a') {\n        throw Error('Action \"link\" can only be used with <a> tags')\n    }\n\n    updateLink(node, opts)\n\n    return {\n        update(updated) {\n            updated = linkOpts(updated)\n            updateLink(node, updated)\n        }\n    }\n}\n\n/**\n * Tries to restore the scroll state from the given history state.\n *\n * @param {{__svelte_spa_router_scrollX: number, __svelte_spa_router_scrollY: number}} [state] - The history state to restore from.\n */\nexport function restoreScroll(state) {\n    // If this exists, then this is a back navigation: restore the scroll position\n    if (state) {\n        window.scrollTo(state.__svelte_spa_router_scrollX, state.__svelte_spa_router_scrollY)\n    }\n    else {\n        // Otherwise this is a forward navigation: scroll to top\n        window.scrollTo(0, 0)\n    }\n}\n\n// Internal function used by the link function\nfunction updateLink(node, opts) {\n    let href = opts.href || node.getAttribute('href')\n\n    // Destination must start with '/' or '#/'\n    if (href && href.charAt(0) == '/') {\n        // Add # to the href attribute\n        href = '#' + href\n    }\n    else if (!href || href.length < 2 || href.slice(0, 2) != '#/') {\n        throw Error('Invalid value for \"href\" attribute: ' + href)\n    }\n\n    node.setAttribute('href', href)\n    node.addEventListener('click', (event) => {\n        // Prevent default anchor onclick behaviour\n        event.preventDefault()\n        if (!opts.disabled) {\n            scrollstateHistoryHandler(event.currentTarget.getAttribute('href'))\n        }\n    })\n}\n\n// Internal function that ensures the argument of the link action is always an object\nfunction linkOpts(val) {\n    if (val && typeof val == 'string') {\n        return {\n            href: val\n        }\n    }\n    else {\n        return val || {}\n    }\n}\n\n/**\n * The handler attached to an anchor tag responsible for updating the\n * current history state with the current scroll state\n *\n * @param {string} href - Destination\n */\nfunction scrollstateHistoryHandler(href) {\n    // Setting the url (3rd arg) to href will break clicking for reasons, so don't try to do that\n    history.replaceState({...history.state, __svelte_spa_router_scrollX: window.scrollX, __svelte_spa_router_scrollY: window.scrollY}, undefined)\n    // This will force an update as desired, but this time our scroll state will be attached\n    window.location.hash = href\n}\n</script>\n\n{#if componentParams}\n    <svelte:component\n    this={component}\n    params={componentParams}\n    on:routeEvent\n    {...props}\n    />\n{:else}\n    <svelte:component\n    this={component}\n    on:routeEvent\n    {...props}\n    />\n{/if}\n\n<script>\nimport {onDestroy, createEventDispatcher, afterUpdate} from 'svelte'\nimport {parse} from 'regexparam'\n\n/**\n * Dictionary of all routes, in the format `'/path': component`.\n *\n * For example:\n * ````js\n * import HomeRoute from './routes/HomeRoute.svelte'\n * import BooksRoute from './routes/BooksRoute.svelte'\n * import NotFoundRoute from './routes/NotFoundRoute.svelte'\n * routes = {\n *     '/': HomeRoute,\n *     '/books': BooksRoute,\n *     '*': NotFoundRoute\n * }\n * ````\n */\nexport let routes = {}\n\n/**\n * Optional prefix for the routes in this router. This is useful for example in the case of nested routers.\n */\nexport let prefix = ''\n\n/**\n * If set to true, the router will restore scroll positions on back navigation\n * and scroll to top on forward navigation.\n */\nexport let restoreScrollState = false\n\n/**\n * Container for a route: path, component\n */\nclass RouteItem {\n    /**\n     * Initializes the object and creates a regular expression from the path, using regexparam.\n     *\n     * @param {string} path - Path to the route (must start with '/' or '*')\n     * @param {SvelteComponent|WrappedComponent} component - Svelte component for the route, optionally wrapped\n     */\n    constructor(path, component) {\n        if (!component || (typeof component != 'function' && (typeof component != 'object' || component._sveltesparouter !== true))) {\n            throw Error('Invalid component object')\n        }\n\n        // Path must be a regular or expression, or a string starting with '/' or '*'\n        if (!path || \n            (typeof path == 'string' && (path.length < 1 || (path.charAt(0) != '/' && path.charAt(0) != '*'))) ||\n            (typeof path == 'object' && !(path instanceof RegExp))\n        ) {\n            throw Error('Invalid value for \"path\" argument - strings must start with / or *')\n        }\n\n        const {pattern, keys} = parse(path)\n\n        this.path = path\n\n        // Check if the component is wrapped and we have conditions\n        if (typeof component == 'object' && component._sveltesparouter === true) {\n            this.component = component.component\n            this.conditions = component.conditions || []\n            this.userData = component.userData\n            this.props = component.props || {}\n        }\n        else {\n            // Convert the component to a function that returns a Promise, to normalize it\n            this.component = () => Promise.resolve(component)\n            this.conditions = []\n            this.props = {}\n        }\n\n        this._pattern = pattern\n        this._keys = keys\n    }\n\n    /**\n     * Checks if `path` matches the current route.\n     * If there's a match, will return the list of parameters from the URL (if any).\n     * In case of no match, the method will return `null`.\n     *\n     * @param {string} path - Path to test\n     * @returns {null|Object.<string, string>} List of paramters from the URL if there's a match, or `null` otherwise.\n     */\n    match(path) {\n        // If there's a prefix, check if it matches the start of the path.\n        // If not, bail early, else remove it before we run the matching.\n        if (prefix) {\n            if (typeof prefix == 'string') {\n                if (path.startsWith(prefix)) {\n                    path = path.substr(prefix.length) || '/'\n                }\n                else {\n                    return null\n                }\n            }\n            else if (prefix instanceof RegExp) {\n                const match = path.match(prefix)\n                if (match && match[0]) {\n                    path = path.substr(match[0].length) || '/'\n                }\n                else {\n                    return null\n                }\n            }\n        }\n\n        // Check if the pattern matches\n        const matches = this._pattern.exec(path)\n        if (matches === null) {\n            return null\n        }\n\n        // If the input was a regular expression, this._keys would be false, so return matches as is\n        if (this._keys === false) {\n            return matches\n        }\n\n        const out = {}\n        let i = 0\n        while (i < this._keys.length) {\n            // In the match parameters, URL-decode all values\n            try {\n                out[this._keys[i]] = decodeURIComponent(matches[i + 1] || '') || null\n            }\n            catch (e) {\n                out[this._keys[i]] = null\n            }\n            i++\n        }\n        return out\n    }\n\n    /**\n     * Dictionary with route details passed to the pre-conditions functions, as well as the `routeLoading`, `routeLoaded` and `conditionsFailed` events\n     * @typedef {Object} RouteDetail\n     * @property {string|RegExp} route - Route matched as defined in the route definition (could be a string or a reguar expression object)\n     * @property {string} location - Location path\n     * @property {string} querystring - Querystring from the hash\n     * @property {object} [userData] - Custom data passed by the user\n     * @property {SvelteComponent} [component] - Svelte component (only in `routeLoaded` events)\n     * @property {string} [name] - Name of the Svelte component (only in `routeLoaded` events)\n     */\n\n    /**\n     * Executes all conditions (if any) to control whether the route can be shown. Conditions are executed in the order they are defined, and if a condition fails, the following ones aren't executed.\n     * \n     * @param {RouteDetail} detail - Route detail\n     * @returns {boolean} Returns true if all the conditions succeeded\n     */\n    async checkConditions(detail) {\n        for (let i = 0; i < this.conditions.length; i++) {\n            if (!(await this.conditions[i](detail))) {\n                return false\n            }\n        }\n\n        return true\n    }\n}\n\n// Set up all routes\nconst routesList = []\nif (routes instanceof Map) {\n    // If it's a map, iterate on it right away\n    routes.forEach((route, path) => {\n        routesList.push(new RouteItem(path, route))\n    })\n}\nelse {\n    // We have an object, so iterate on its own properties\n    Object.keys(routes).forEach((path) => {\n        routesList.push(new RouteItem(path, routes[path]))\n    })\n}\n\n// Props for the component to render\nlet component = null\nlet componentParams = null\nlet props = {}\n\n// Event dispatcher from Svelte\nconst dispatch = createEventDispatcher()\n\n// Just like dispatch, but executes on the next iteration of the event loop\nasync function dispatchNextTick(name, detail) {\n    // Execute this code when the current call stack is complete\n    await tick()\n    dispatch(name, detail)\n}\n\n// If this is set, then that means we have popped into this var the state of our last scroll position\nlet previousScrollState = null\n\n// Update history.scrollRestoration depending on restoreScrollState\n$: history.scrollRestoration = restoreScrollState ? 'manual' : 'auto'\nlet popStateChanged = null\nif (restoreScrollState) {\n    popStateChanged = (event) => {\n        // If this event was from our history.replaceState, event.state will contain\n        // our scroll history. Otherwise, event.state will be null (like on forward\n        // navigation)\n        if (event.state && (event.state.__svelte_spa_router_scrollY || event.state.__svelte_spa_router_scrollX)) {\n            previousScrollState = event.state\n        }\n        else {\n            previousScrollState = null\n        }\n    }\n    // This is removed in the destroy() invocation below\n    window.addEventListener('popstate', popStateChanged)\n\n    afterUpdate(() => {\n        restoreScroll(previousScrollState)\n    })\n}\n\n// Always have the latest value of loc\nlet lastLoc = null\n\n// Current object of the component loaded\nlet componentObj = null\n\n// Handle hash change events\n// Listen to changes in the $loc store and update the page\n// Do not use the $: syntax because it gets triggered by too many things\nconst unsubscribeLoc = loc.subscribe(async (newLoc) => {\n    lastLoc = newLoc\n\n    // Find a route matching the location\n    let i = 0\n    while (i < routesList.length) {\n        const match = routesList[i].match(newLoc.location)\n        if (!match) {\n            i++\n            continue\n        }\n\n        const detail = {\n            route: routesList[i].path,\n            location: newLoc.location,\n            querystring: newLoc.querystring,\n            userData: routesList[i].userData,\n            params: (match && typeof match == 'object' && Object.keys(match).length) ? match : null\n        }\n\n        // Check if the route can be loaded - if all conditions succeed\n        if (!(await routesList[i].checkConditions(detail))) {\n            // Don't display anything\n            component = null\n            componentObj = null\n            // Trigger an event to notify the user, then exit\n            dispatchNextTick('conditionsFailed', detail)\n            return\n        }\n\n        // Trigger an event to alert that we're loading the route\n        // We need to clone the object on every event invocation so we don't risk the object to be modified in the next tick\n        dispatchNextTick('routeLoading', Object.assign({}, detail))\n\n        // If there's a component to show while we're loading the route, display it\n        const obj = routesList[i].component\n        // Do not replace the component if we're loading the same one as before, to avoid the route being unmounted and re-mounted\n        if (componentObj != obj) {\n            if (obj.loading) {\n                component = obj.loading\n                componentObj = obj\n                componentParams = obj.loadingParams\n                props = {}\n\n                // Trigger the routeLoaded event for the loading component\n                // Create a copy of detail so we don't modify the object for the dynamic route (and the dynamic route doesn't modify our object too)\n                dispatchNextTick('routeLoaded', Object.assign({}, detail, {\n                    component: component,\n                    name: component.name,\n                    params: componentParams\n                }))\n            }\n            else {\n                component = null\n                componentObj = null\n            }\n\n            // Invoke the Promise\n            const loaded = await obj()\n\n            // Now that we're here, after the promise resolved, check if we still want this component, as the user might have navigated to another page in the meanwhile\n            if (newLoc != lastLoc) {\n                // Don't update the component, just exit\n                return\n            }\n\n            // If there is a \"default\" property, which is used by async routes, then pick that\n            component = (loaded && loaded.default) || loaded\n            componentObj = obj\n        }\n\n        // Set componentParams only if we have a match, to avoid a warning similar to `<Component> was created with unknown prop 'params'`\n        // Of course, this assumes that developers always add a \"params\" prop when they are expecting parameters\n        if (match && typeof match == 'object' && Object.keys(match).length) {\n            componentParams = match\n        }\n        else {\n            componentParams = null\n        }\n\n        // Set static props, if any\n        props = routesList[i].props\n\n        // Dispatch the routeLoaded event then exit\n        // We need to clone the object on every event invocation so we don't risk the object to be modified in the next tick\n        dispatchNextTick('routeLoaded', Object.assign({}, detail, {\n            component: component,\n            name: component.name,\n            params: componentParams\n        })).then(() => {\n            params.set(componentParams)\n        })\n        return\n    }\n\n    // If we're still here, there was no match, so show the empty component\n    component = null\n    componentObj = null\n    params.set(undefined)\n})\n\nonDestroy(() => {\n    unsubscribeLoc()\n    popStateChanged && window.removeEventListener('popstate', popStateChanged)\n})\n</script>\n","/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nexport { identity as linear } from '../internal/index.js';\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function backInOut(t) {\n\tconst s = 1.70158 * 1.525;\n\tif ((t *= 2) < 1) return 0.5 * (t * t * ((s + 1) * t - s));\n\treturn 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function backIn(t) {\n\tconst s = 1.70158;\n\treturn t * t * ((s + 1) * t - s);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function backOut(t) {\n\tconst s = 1.70158;\n\treturn --t * t * ((s + 1) * t + s) + 1;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function bounceOut(t) {\n\tconst a = 4.0 / 11.0;\n\tconst b = 8.0 / 11.0;\n\tconst c = 9.0 / 10.0;\n\tconst ca = 4356.0 / 361.0;\n\tconst cb = 35442.0 / 1805.0;\n\tconst cc = 16061.0 / 1805.0;\n\tconst t2 = t * t;\n\treturn t < a\n\t\t? 7.5625 * t2\n\t\t: t < b\n\t\t? 9.075 * t2 - 9.9 * t + 3.4\n\t\t: t < c\n\t\t? ca * t2 - cb * t + cc\n\t\t: 10.8 * t * t - 20.52 * t + 10.72;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function bounceInOut(t) {\n\treturn t < 0.5 ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0)) : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function bounceIn(t) {\n\treturn 1.0 - bounceOut(1.0 - t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function circInOut(t) {\n\tif ((t *= 2) < 1) return -0.5 * (Math.sqrt(1 - t * t) - 1);\n\treturn 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function circIn(t) {\n\treturn 1.0 - Math.sqrt(1.0 - t * t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function circOut(t) {\n\treturn Math.sqrt(1 - --t * t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function cubicInOut(t) {\n\treturn t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function cubicIn(t) {\n\treturn t * t * t;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function cubicOut(t) {\n\tconst f = t - 1.0;\n\treturn f * f * f + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function elasticInOut(t) {\n\treturn t < 0.5\n\t\t? 0.5 * Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) * Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n\t\t: 0.5 *\n\t\t\t\tMath.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n\t\t\t\tMath.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n\t\t\t\t1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function elasticIn(t) {\n\treturn Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function elasticOut(t) {\n\treturn Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function expoInOut(t) {\n\treturn t === 0.0 || t === 1.0\n\t\t? t\n\t\t: t < 0.5\n\t\t? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n\t\t: -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function expoIn(t) {\n\treturn t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function expoOut(t) {\n\treturn t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quadInOut(t) {\n\tt /= 0.5;\n\tif (t < 1) return 0.5 * t * t;\n\tt--;\n\treturn -0.5 * (t * (t - 2) - 1);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quadIn(t) {\n\treturn t * t;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quadOut(t) {\n\treturn -t * (t - 2.0);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quartInOut(t) {\n\treturn t < 0.5 ? +8.0 * Math.pow(t, 4.0) : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quartIn(t) {\n\treturn Math.pow(t, 4.0);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quartOut(t) {\n\treturn Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quintInOut(t) {\n\tif ((t *= 2) < 1) return 0.5 * t * t * t * t * t;\n\treturn 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quintIn(t) {\n\treturn t * t * t * t * t;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quintOut(t) {\n\treturn --t * t * t * t * t + 1;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function sineInOut(t) {\n\treturn -0.5 * (Math.cos(Math.PI * t) - 1);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function sineIn(t) {\n\tconst v = Math.cos(t * Math.PI * 0.5);\n\tif (Math.abs(v) < 1e-14) return 1;\n\telse return 1 - v;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function sineOut(t) {\n\treturn Math.sin((t * Math.PI) / 2);\n}\n","import { cubicOut, cubicInOut, linear } from '../easing/index.js';\nimport { assign, split_css_unit, is_function } from '../internal/index.js';\n\n/**\n * Animates a `blur` filter alongside an element's opacity.\n *\n * https://svelte.dev/docs/svelte-transition#blur\n * @param {Element} node\n * @param {import('./public').BlurParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function blur(\n\tnode,\n\t{ delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 } = {}\n) {\n\tconst style = getComputedStyle(node);\n\tconst target_opacity = +style.opacity;\n\tconst f = style.filter === 'none' ? '' : style.filter;\n\tconst od = target_opacity * (1 - opacity);\n\tconst [value, unit] = split_css_unit(amount);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (_t, u) => `opacity: ${target_opacity - od * u}; filter: ${f} blur(${u * value}${unit});`\n\t};\n}\n\n/**\n * Animates the opacity of an element from 0 to the current opacity for `in` transitions and from the current opacity to 0 for `out` transitions.\n *\n * https://svelte.dev/docs/svelte-transition#fade\n * @param {Element} node\n * @param {import('./public').FadeParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function fade(node, { delay = 0, duration = 400, easing = linear } = {}) {\n\tconst o = +getComputedStyle(node).opacity;\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (t) => `opacity: ${t * o}`\n\t};\n}\n\n/**\n * Animates the x and y positions and the opacity of an element. `in` transitions animate from the provided values, passed as parameters to the element's default values. `out` transitions animate from the element's default values to the provided values.\n *\n * https://svelte.dev/docs/svelte-transition#fly\n * @param {Element} node\n * @param {import('./public').FlyParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function fly(\n\tnode,\n\t{ delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 } = {}\n) {\n\tconst style = getComputedStyle(node);\n\tconst target_opacity = +style.opacity;\n\tconst transform = style.transform === 'none' ? '' : style.transform;\n\tconst od = target_opacity * (1 - opacity);\n\tconst [xValue, xUnit] = split_css_unit(x);\n\tconst [yValue, yUnit] = split_css_unit(y);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * xValue}${xUnit}, ${(1 - t) * yValue}${yUnit});\n\t\t\topacity: ${target_opacity - od * u}`\n\t};\n}\n\n/**\n * Slides an element in and out.\n *\n * https://svelte.dev/docs/svelte-transition#slide\n * @param {Element} node\n * @param {import('./public').SlideParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function slide(node, { delay = 0, duration = 400, easing = cubicOut, axis = 'y' } = {}) {\n\tconst style = getComputedStyle(node);\n\tconst opacity = +style.opacity;\n\tconst primary_property = axis === 'y' ? 'height' : 'width';\n\tconst primary_property_value = parseFloat(style[primary_property]);\n\tconst secondary_properties = axis === 'y' ? ['top', 'bottom'] : ['left', 'right'];\n\tconst capitalized_secondary_properties = secondary_properties.map(\n\t\t(e) => `${e[0].toUpperCase()}${e.slice(1)}`\n\t);\n\tconst padding_start_value = parseFloat(style[`padding${capitalized_secondary_properties[0]}`]);\n\tconst padding_end_value = parseFloat(style[`padding${capitalized_secondary_properties[1]}`]);\n\tconst margin_start_value = parseFloat(style[`margin${capitalized_secondary_properties[0]}`]);\n\tconst margin_end_value = parseFloat(style[`margin${capitalized_secondary_properties[1]}`]);\n\tconst border_width_start_value = parseFloat(\n\t\tstyle[`border${capitalized_secondary_properties[0]}Width`]\n\t);\n\tconst border_width_end_value = parseFloat(\n\t\tstyle[`border${capitalized_secondary_properties[1]}Width`]\n\t);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (t) =>\n\t\t\t'overflow: hidden;' +\n\t\t\t`opacity: ${Math.min(t * 20, 1) * opacity};` +\n\t\t\t`${primary_property}: ${t * primary_property_value}px;` +\n\t\t\t`padding-${secondary_properties[0]}: ${t * padding_start_value}px;` +\n\t\t\t`padding-${secondary_properties[1]}: ${t * padding_end_value}px;` +\n\t\t\t`margin-${secondary_properties[0]}: ${t * margin_start_value}px;` +\n\t\t\t`margin-${secondary_properties[1]}: ${t * margin_end_value}px;` +\n\t\t\t`border-${secondary_properties[0]}-width: ${t * border_width_start_value}px;` +\n\t\t\t`border-${secondary_properties[1]}-width: ${t * border_width_end_value}px;`\n\t};\n}\n\n/**\n * Animates the opacity and scale of an element. `in` transitions animate from an element's current (default) values to the provided values, passed as parameters. `out` transitions animate from the provided values to an element's default values.\n *\n * https://svelte.dev/docs/svelte-transition#scale\n * @param {Element} node\n * @param {import('./public').ScaleParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function scale(\n\tnode,\n\t{ delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 } = {}\n) {\n\tconst style = getComputedStyle(node);\n\tconst target_opacity = +style.opacity;\n\tconst transform = style.transform === 'none' ? '' : style.transform;\n\tconst sd = 1 - start;\n\tconst od = target_opacity * (1 - opacity);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - sd * u});\n\t\t\topacity: ${target_opacity - od * u}\n\t\t`\n\t};\n}\n\n/**\n * Animates the stroke of an SVG element, like a snake in a tube. `in` transitions begin with the path invisible and draw the path to the screen over time. `out` transitions start in a visible state and gradually erase the path. `draw` only works with elements that have a `getTotalLength` method, like `<path>` and `<polyline>`.\n *\n * https://svelte.dev/docs/svelte-transition#draw\n * @param {SVGElement & { getTotalLength(): number }} node\n * @param {import('./public').DrawParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function draw(node, { delay = 0, speed, duration, easing = cubicInOut } = {}) {\n\tlet len = node.getTotalLength();\n\tconst style = getComputedStyle(node);\n\tif (style.strokeLinecap !== 'butt') {\n\t\tlen += parseInt(style.strokeWidth);\n\t}\n\tif (duration === undefined) {\n\t\tif (speed === undefined) {\n\t\t\tduration = 800;\n\t\t} else {\n\t\t\tduration = len / speed;\n\t\t}\n\t} else if (typeof duration === 'function') {\n\t\tduration = duration(len);\n\t}\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (_, u) => `\n\t\t\tstroke-dasharray: ${len};\n\t\t\tstroke-dashoffset: ${u * len};\n\t\t`\n\t};\n}\n\n/**\n * The `crossfade` function creates a pair of [transitions](https://svelte.dev/docs#template-syntax-element-directives-transition-fn) called `send` and `receive`. When an element is 'sent', it looks for a corresponding element being 'received', and generates a transition that transforms the element to its counterpart's position and fades it out. When an element is 'received', the reverse happens. If there is no counterpart, the `fallback` transition is used.\n *\n * https://svelte.dev/docs/svelte-transition#crossfade\n * @param {import('./public').CrossfadeParams & {\n * \tfallback?: (node: Element, params: import('./public').CrossfadeParams, intro: boolean) => import('./public').TransitionConfig;\n * }} params\n * @returns {[(node: any, params: import('./public').CrossfadeParams & { key: any; }) => () => import('./public').TransitionConfig, (node: any, params: import('./public').CrossfadeParams & { key: any; }) => () => import('./public').TransitionConfig]}\n */\nexport function crossfade({ fallback, ...defaults }) {\n\t/** @type {Map<any, Element>} */\n\tconst to_receive = new Map();\n\t/** @type {Map<any, Element>} */\n\tconst to_send = new Map();\n\t/**\n\t * @param {Element} from_node\n\t * @param {Element} node\n\t * @param {import('./public').CrossfadeParams} params\n\t * @returns {import('./public').TransitionConfig}\n\t */\n\tfunction crossfade(from_node, node, params) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = (d) => Math.sqrt(d) * 30,\n\t\t\teasing = cubicOut\n\t\t} = assign(assign({}, defaults), params);\n\t\tconst from = from_node.getBoundingClientRect();\n\t\tconst to = node.getBoundingClientRect();\n\t\tconst dx = from.left - to.left;\n\t\tconst dy = from.top - to.top;\n\t\tconst dw = from.width / to.width;\n\t\tconst dh = from.height / to.height;\n\t\tconst d = Math.sqrt(dx * dx + dy * dy);\n\t\tconst style = getComputedStyle(node);\n\t\tconst transform = style.transform === 'none' ? '' : style.transform;\n\t\tconst opacity = +style.opacity;\n\t\treturn {\n\t\t\tdelay,\n\t\t\tduration: is_function(duration) ? duration(d) : duration,\n\t\t\teasing,\n\t\t\tcss: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${\n\t\t\t\tt + (1 - t) * dh\n\t\t\t});\n\t\t\t`\n\t\t};\n\t}\n\n\t/**\n\t * @param {Map<any, Element>} items\n\t * @param {Map<any, Element>} counterparts\n\t * @param {boolean} intro\n\t * @returns {(node: any, params: import('./public').CrossfadeParams & { key: any; }) => () => import('./public').TransitionConfig}\n\t */\n\tfunction transition(items, counterparts, intro) {\n\t\treturn (node, params) => {\n\t\t\titems.set(params.key, node);\n\t\t\treturn () => {\n\t\t\t\tif (counterparts.has(params.key)) {\n\t\t\t\t\tconst other_node = counterparts.get(params.key);\n\t\t\t\t\tcounterparts.delete(params.key);\n\t\t\t\t\treturn crossfade(other_node, node, params);\n\t\t\t\t}\n\t\t\t\t// if the node is disappearing altogether\n\t\t\t\t// (i.e. wasn't claimed by the other list)\n\t\t\t\t// then we need to supply an outro\n\t\t\t\titems.delete(params.key);\n\t\t\t\treturn fallback && fallback(node, params, intro);\n\t\t\t};\n\t\t};\n\t}\n\treturn [transition(to_send, to_receive, false), transition(to_receive, to_send, true)];\n}\n","<script>\r\n  import { fade, fly, slide } from 'svelte/transition';\r\n  import { onMount } from 'svelte';\r\n  \r\n  export let avatar = '';\r\n  export let name = '';\r\n  export let message = '';\r\n  export let delay = 0;\r\n  export let avatarPosition = 'left';\r\n  export let showName = true;\r\n\r\n  export let isTyping = false;\r\n  export let showMessage = true;\r\n</script>\r\n\r\n<div \r\n  class=\"chat-bubble-container\"\r\n  class:container-right={avatarPosition === 'right'}\r\n  in:fade|local={{delay, duration: 300}}\r\n>\r\n  <div \r\n    class=\"chat-bubble\"\r\n    class:bubble-left={avatarPosition === 'left'}\r\n    class:bubble-right={avatarPosition === 'right'}\r\n    in:fly|local={{delay, duration: 400, y: 20}}\r\n  >\r\n    <div class=\"message-content\">\r\n      {#if showName}\r\n        <div class=\"name\" in:slide|local={{delay: delay + 100, duration: 200}}>\r\n          {name}\r\n        </div>\r\n      {/if}\r\n      \r\n      {#if isTyping}\r\n        <div class=\"typing-indicator\" in:fade|local={{duration: 200}}>\r\n          <span class=\"dot\"></span>\r\n          <span class=\"dot\"></span>\r\n          <span class=\"dot\"></span>\r\n        </div>\r\n      {/if}\r\n\r\n      {#if showMessage}\r\n        <div \r\n          class=\"message\"\r\n          in:slide|local={{delay: 100, duration: 200, axis: 'y'}}\r\n        >\r\n          {@html message}\r\n        </div>\r\n      {/if}\r\n    </div>\r\n  </div>\r\n  \r\n  <!-- Avatar -->\r\n  <div \r\n    class=\"avatar-bubble\"\r\n    class:avatar-left={avatarPosition === 'left'}\r\n    class:avatar-right={avatarPosition === 'right'}\r\n    in:fly|local={{\r\n      delay,\r\n      duration: 400,\r\n      x: avatarPosition === 'left' ? -20 : 20\r\n    }}\r\n  >\r\n    <span class=\"avatar\">{avatar}</span>\r\n    <div class=\"avatar-glow\"></div>\r\n  </div>\r\n</div>\r\n\r\n<style>\r\n  .chat-bubble-container {\r\n    position: relative;\r\n    margin-bottom: 40px;\r\n    padding: 0;\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .chat-bubble {\r\n    position: relative;\r\n    background-color: var(--color-surface);\r\n    border-radius: var(--rounded-lg);\r\n    padding: var(--spacing-md) var(--spacing-lg);\r\n    box-shadow: \r\n      0 4px 6px rgba(0, 0, 0, 0.05),\r\n      0 6px 12px rgba(0, 0, 0, 0.05);\r\n    width: calc(100% - 80px);\r\n    box-sizing: border-box;\r\n    z-index: 1;\r\n  }\r\n  \r\n  .bubble-left {\r\n    margin-left: 40px;\r\n    margin-right: 20px;\r\n    padding-left: var(--spacing-lg);\r\n  }\r\n  \r\n  .bubble-right {\r\n    margin-right: 40px;\r\n    margin-left: 20px;\r\n    padding-right: var(--spacing-lg);\r\n  }\r\n\r\n\r\n  .chat-bubble::before {\r\n    content: '';\r\n    position: absolute;\r\n    inset: -1px;\r\n    border-radius: inherit;\r\n    padding: 1px;\r\n    background: linear-gradient(135deg,\r\n      var(--color-prime) 0%,\r\n      var(--color-fourth) 50%,\r\n      var(--color-prime) 100%\r\n    );\r\n    background-size: 400% 400%;\r\n    animation: gradientFlow 8s ease infinite;\r\n    -webkit-mask: \r\n      linear-gradient(#fff 0 0) content-box,\r\n      linear-gradient(#fff 0 0);\r\n    -webkit-mask-composite: xor;\r\n    mask-composite: exclude;\r\n    opacity: 0.5;\r\n  }\r\n\r\n  @keyframes gradientFlow {\r\n    0% {\r\n      background-position: 0% 0%;\r\n    }\r\n    50% {\r\n      background-position: 100% 100%;\r\n    }\r\n    100% {\r\n      background-position: 0% 0%;\r\n    }\r\n  }\r\n\r\n  .avatar-bubble {\r\n    position: absolute;\r\n    width: 50px;\r\n    height: 50px;\r\n    border-radius: 50%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    position: relative;\r\n    background: linear-gradient(135deg,\r\n      var(--color-prime) 0%,\r\n      var(--color-fourth) 50%,\r\n      var(--color-prime) 100%\r\n    );\r\n    background-size: 400% 400%;\r\n    animation: gradientFlow 8s ease infinite;\r\n    box-shadow: \r\n      0 4px 8px rgba(0, 0, 0, 0.15),\r\n      0 8px 16px rgba(0, 0, 0, 0.1),\r\n      inset 0 2px 3px rgba(255, 255, 255, 0.3);\r\n    z-index: 10;\r\n    border: 2px solid var(--color-surface);\r\n    transform-origin: center;\r\n    transition: transform 0.3s ease;\r\n  }\r\n\r\n  .avatar-left {\r\n    top: 0;\r\n    left: 0;\r\n  }\r\n\r\n  .avatar-right {\r\n    top: 0;\r\n    right: 0;\r\n  }\r\n\r\n  .avatar-bubble:hover {\r\n    transform: scale(1.1);\r\n  }\r\n\r\n  .avatar-glow {\r\n    position: absolute;\r\n    inset: -4px;\r\n    border-radius: inherit;\r\n    background: inherit;\r\n    filter: blur(8px);\r\n    opacity: 0;\r\n    z-index: -1;\r\n    transition: opacity 0.3s ease;\r\n  }\r\n\r\n  .avatar-bubble:hover .avatar-glow {\r\n    opacity: 0.4;\r\n  }\r\n\r\n  .typing-indicator {\r\n    display: flex;\r\n    gap: 4px;\r\n    padding: var(--spacing-xs) var(--spacing-sm);\r\n    align-items: center;\r\n  }\r\n\r\n  .dot {\r\n    width: 6px;\r\n    height: 6px;\r\n    border-radius: 50%;\r\n    background-color: var(--color-text-light);\r\n    opacity: 0.6;\r\n  }\r\n\r\n  .dot:nth-child(1) { animation: bounce 1s infinite 0.1s; }\r\n  .dot:nth-child(2) { animation: bounce 1s infinite 0.2s; }\r\n  .dot:nth-child(3) { animation: bounce 1s infinite 0.3s; }\r\n\r\n  @keyframes bounce {\r\n    0%, 100% { transform: translateY(0); }\r\n    50% { transform: translateY(-6px); }\r\n  }\r\n\r\n  .avatar {\r\n    font-size: 38px;\r\n    line-height: 1;\r\n  }\r\n\r\n  .name {\r\n    font-size: var(--font-size-sm);\r\n    font-weight: var(--font-weight-bold);\r\n    margin-bottom: 4px;\r\n    background: linear-gradient(90deg,\r\n      var(--color-prime) 0%,\r\n      var(--color-fourth) 100%\r\n    );\r\n    -webkit-background-clip: text;\r\n    background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n    opacity: 0.9;\r\n  }\r\n\r\n  .message-content {\r\n    width: 100%;\r\n    overflow-wrap: break-word;\r\n    word-wrap: break-word;\r\n    word-break: break-word;\r\n  }\r\n\r\n  .message {\r\n    color: var(--color-text);\r\n    font-size: var(--font-size-base);\r\n    line-height: 1.5;\r\n    max-width: 100%;\r\n  }\r\n\r\n  .message :global(.codex-md-brand) {\r\n    font-weight: 700;\r\n    background: linear-gradient(135deg, \r\n      #00A99D 0%,\r\n      #00A99D 40%,\r\n      #F7931E 100%\r\n    );\r\n    background-size: 400% 400%;\r\n    animation: gradientFlow 8s ease infinite;\r\n    -webkit-background-clip: text;\r\n    background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n    display: inline-block;\r\n    position: relative;\r\n    z-index: 1;\r\n  }\r\n\r\n  .message :global(strong) {\r\n    color: var(--color-prime);\r\n    font-weight: var(--font-weight-bold);\r\n  }\r\n\r\n  .message :global(.feature-list) {\r\n    margin: var(--spacing-xs) 0;\r\n    padding-left: var(--spacing-lg);\r\n    list-style-position: outside;\r\n  }\r\n\r\n  .message :global(.feature-list li) {\r\n    margin-bottom: var(--spacing-xs);\r\n  }\r\n\r\n  .message :global(.help-link) {\r\n    color: var(--color-prime);\r\n    text-decoration: none;\r\n    font-weight: var(--font-weight-medium);\r\n    border-bottom: 1px solid var(--color-prime);\r\n    transition: all 0.2s ease;\r\n    padding: 0 2px;\r\n  }\r\n\r\n  .message :global(.help-link:hover) {\r\n    color: var(--color-fourth);\r\n    border-color: var(--color-fourth);\r\n    background: rgba(var(--color-fourth-rgb), 0.05);\r\n    border-radius: 3px;\r\n  }\r\n\r\n  .message :global(em) {\r\n    color: var(--color-text);\r\n    font-style: italic;\r\n    opacity: 0.9;\r\n  }\r\n\r\n  .message :global(h3) {\r\n    color: var(--color-prime);\r\n    font-size: var(--font-size-lg);\r\n    font-weight: var(--font-weight-bold);\r\n    margin: var(--spacing-xs) 0;\r\n    line-height: 1.3;\r\n    background: linear-gradient(90deg,\r\n      var(--color-prime) 0%,\r\n      var(--color-fourth) 100%\r\n    );\r\n    -webkit-background-clip: text;\r\n    background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n  }\r\n\r\n  .message :global(p) {\r\n    margin: var(--spacing-xs) 0;\r\n  }\r\n\r\n  @media (max-width: 640px) {\r\n    .chat-bubble-container {\r\n      margin-bottom: 30px;\r\n    }\r\n\r\n    .chat-bubble {\r\n      width: calc(100% - 50px);\r\n      padding: var(--spacing-sm) var(--spacing-md);\r\n    }\r\n    \r\n    .bubble-left {\r\n      margin-left: 25px;\r\n      margin-right: 10px;\r\n    }\r\n    \r\n    .bubble-right {\r\n      margin-right: 25px;\r\n      margin-left: 10px;\r\n    }\r\n\r\n    .avatar-bubble {\r\n      width: 40px;\r\n      height: 40px;\r\n    }\r\n\r\n    .avatar {\r\n      font-size: 20px;\r\n    }\r\n\r\n    .dot {\r\n      width: 4px;\r\n      height: 4px;\r\n    }\r\n  }\r\n</style>\r\n","<script>\r\n  export let variant = 'primary'; // primary, secondary, danger\r\n  export let type = 'button';\r\n  export let disabled = false;\r\n  export let fullWidth = false;\r\n  export let size = 'medium'; // small, medium, large\r\n  \r\n  // Rest props to handle any additional attributes like data-testid\r\n  let restProps = {};\r\n  export { restProps as $$restProps };\r\n</script>\r\n\r\n<button\r\n  {type}\r\n  {disabled}\r\n  class=\"button {variant} {size} {$$restProps.class || ''}\"\r\n  class:full-width={fullWidth}\r\n  on:click\r\n  {...$$restProps}\r\n>\r\n  <slot />\r\n</button>\r\n\r\n<style>\r\n  .button {\r\n    display: inline-flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: var(--spacing-sm) var(--spacing-xl);\r\n    border: none;\r\n    border-radius: var(--rounded-lg);\r\n    font-weight: var(--font-weight-semibold);\r\n    cursor: pointer;\r\n    transition: all 0.2s ease;\r\n    font-size: var(--font-size-base);\r\n    gap: var(--spacing-xs);\r\n    position: relative;\r\n  }\r\n\r\n  .button:disabled {\r\n    background: var(--color-disabled);\r\n    cursor: not-allowed;\r\n    opacity: 0.7;\r\n  }\r\n\r\n  .button.primary {\r\n    background: linear-gradient(90deg, var(--color-prime), var(--color-fourth));\r\n    color: white;\r\n    background-size: 200% 200%;\r\n    animation: breathe 3s ease-in-out infinite;\r\n  }\r\n\r\n  .button.secondary {\r\n    background: transparent;\r\n    color: var(--color-text);\r\n    position: relative;\r\n  }\r\n\r\n  .button.secondary::before {\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    border-radius: var(--rounded-lg);\r\n    padding: 2px;\r\n    background: linear-gradient(135deg, var(--color-prime), var(--color-fourth));\r\n    -webkit-mask: \r\n        linear-gradient(#fff 0 0) content-box, \r\n        linear-gradient(#fff 0 0);\r\n    -webkit-mask-composite: xor;\r\n    mask-composite: exclude;\r\n    pointer-events: none;\r\n  }\r\n\r\n  .button.danger {\r\n    background: linear-gradient(90deg, var(--color-error), var(--color-error-light));\r\n    color: white;\r\n    background-size: 200% 200%;\r\n    animation: breathe 3s ease-in-out infinite;\r\n  }\r\n\r\n  .button:not(:disabled):hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: var(--shadow-md);\r\n  }\r\n\r\n  .button.primary:not(:disabled):hover,\r\n  .button.danger:not(:disabled):hover {\r\n    background-size: 150% 150%;\r\n  }\r\n\r\n  .button.secondary:not(:disabled):hover::before {\r\n    background: linear-gradient(135deg, var(--color-fourth), var(--color-prime));\r\n  }\r\n\r\n  .full-width {\r\n    width: 100%;\r\n  }\r\n\r\n  /* Size variants */\r\n  .small {\r\n    padding: var(--spacing-xs) var(--spacing-lg);\r\n    font-size: var(--font-size-sm);\r\n  }\r\n\r\n  .large {\r\n    padding: var(--spacing-md) var(--spacing-2xl);\r\n    font-size: var(--font-size-lg);\r\n  }\r\n\r\n  @keyframes breathe {\r\n    0% { background-position: 0% 50%; }\r\n    50% { background-position: 100% 50%; }\r\n    100% { background-position: 0% 50%; }\r\n  }\r\n\r\n  /* High Contrast Mode */\r\n  @media (prefers-contrast: high) {\r\n    .button.secondary::before {\r\n      padding: 3px;\r\n    }\r\n  }\r\n\r\n  /* Reduced Motion */\r\n  @media (prefers-reduced-motion: reduce) {\r\n    .button {\r\n      animation: none;\r\n    }\r\n    \r\n    .button:hover {\r\n      transform: none;\r\n    }\r\n\r\n    .button.primary:hover,\r\n    .button.danger:hover {\r\n      background-size: 200% 200%;\r\n      background-position: 0% 50%;\r\n    }\r\n  }\r\n</style>\r\n","/**\r\n * Welcome State Store\r\n * Manages welcome message display state and tracks initialization state\r\n * \r\n * This store handles both persistent welcome message state and ensures proper\r\n * initialization with the electron IPC system. It supports version-specific\r\n * welcome messages and tracks initialization errors.\r\n * \r\n * Related files:\r\n * - CodexMdConverter.svelte: Uses this store to determine whether to show welcome messages\r\n * - WelcomeChat.svelte: Displays welcome messages and marks them as seen\r\n */\r\n\r\nimport { writable } from 'svelte/store';\r\n\r\n// Platform checks\r\nconst isBrowser = typeof window !== 'undefined';\r\n\r\n// Current app version - update this when you want to show update messages\r\nconst CURRENT_VERSION = '1.0.0';\r\n\r\n// Message types\r\nexport const MESSAGE_TYPES = {\r\n  WELCOME: 'welcome',\r\n  UPDATE: 'update',\r\n  ANNOUNCEMENT: 'announcement'\r\n};\r\n\r\n// Default state with initialization tracking\r\nconst defaultState = {\r\n  hasSeenWelcome: false,\r\n  lastSeenVersion: null,\r\n  seenMessageTypes: {},\r\n  isInitialized: false,\r\n  error: null\r\n};\r\n\r\n// Create the writable store with initial value\r\nconst welcomeStateStore = writable(defaultState);\r\n\r\n// Initialize store from electron settings\r\nasync function initializeStore() {\r\n// Skip initialization if not in browser environment\r\n  if (!isBrowser) return;\r\n  \r\n  // Only try to access electron API in browser environment\r\n  if (!window?.electron) {\r\n    console.warn('Electron API not available, using default welcome state');\r\n    welcomeStateStore.update(state => ({\r\n      ...state,\r\n      isInitialized: true,\r\n      error: 'Electron API not available'\r\n    }));\r\n    return;\r\n  }\r\n\r\n  try {\r\n    window.electron.onReady(async () => {\r\n      try {\r\n        // Get stored state\r\n        const storedState = await window.electron.getSetting('welcomeState');\r\n        welcomeStateStore.update(state => ({\r\n          ...(storedState || state),\r\n          isInitialized: true,\r\n          error: null\r\n        }));\r\n      } catch (e) {\r\n        console.error('Error reading welcome state from settings:', e);\r\n        welcomeStateStore.update(state => ({\r\n          ...state,\r\n          isInitialized: true,\r\n          error: e.message\r\n        }));\r\n      }\r\n    });\r\n  } catch (e) {\r\n    // This catch block handles errors with the onReady setup itself\r\n    console.error('Error reading welcome state from settings:', e);\r\n    welcomeStateStore.update(state => ({\r\n      ...state,\r\n      isInitialized: true,\r\n      error: e.message\r\n    }));\r\n  }\r\n}\r\n\r\n// Derived store for current session tracking\r\nconst hasSeenWelcomeThisSession = writable(false);\r\n\r\n// Helper to update electron settings when store changes\r\nasync function updateSettings(state) {\r\n// Skip if not in browser environment or not initialized\r\n  if (!isBrowser || !window?.electron) return;\r\n  \r\n  try {\r\n    // Omit internal tracking state when saving\r\n    const { isInitialized, error, ...stateToSave } = state;\r\n    await window.electron.setSetting('welcomeState', stateToSave);\r\n  } catch (e) {\r\n    console.error('Error saving welcome state to settings:', e);\r\n    welcomeStateStore.update(currentState => ({\r\n      ...currentState,\r\n      error: e.message\r\n    }));\r\n  }\r\n}\r\n\r\n// Initialize the store only in browser environment\r\nif (isBrowser) {\r\n  initializeStore();\r\n}\r\n\r\n// Public API\r\nconst welcomeState = {\r\n  // Subscribe to the store\r\n  subscribe: welcomeStateStore.subscribe,\r\n  \r\n  // Check if welcome messages should be shown (first time or new version)\r\n  shouldShowWelcome: () => {\r\n    let result = false;\r\n    welcomeStateStore.update(state => {\r\n      // Show welcome if user has never seen it or if there's a new version\r\n      result = !state.hasSeenWelcome || state.lastSeenVersion !== CURRENT_VERSION;\r\n      return state;\r\n    });\r\n    return result && !hasSeenWelcomeThisSession;\r\n  },\r\n  \r\n  // Check if a specific message type should be shown\r\n  shouldShowMessageType: (type) => {\r\n    let result = false;\r\n    welcomeStateStore.update(state => {\r\n      result = !state.seenMessageTypes[type];\r\n      return state;\r\n    });\r\n    return result && !hasSeenWelcomeThisSession;\r\n  },\r\n  \r\n  // Mark welcome messages as seen\r\n  markAsSeen: () => {\r\n    hasSeenWelcomeThisSession.set(true);\r\n    welcomeStateStore.update(state => {\r\n      const newState = {\r\n        ...state,\r\n        hasSeenWelcome: true,\r\n        lastSeenVersion: CURRENT_VERSION\r\n      };\r\n      updateSettings(newState);\r\n      return newState;\r\n    });\r\n  },\r\n  \r\n  // Mark a specific message type as seen\r\n  markMessageTypeSeen: (type) => {\r\n    welcomeStateStore.update(state => {\r\n      const newState = {\r\n        ...state,\r\n        seenMessageTypes: {\r\n          ...state.seenMessageTypes,\r\n          [type]: true\r\n        }\r\n      };\r\n      updateSettings(newState);\r\n      return newState;\r\n    });\r\n  },\r\n  \r\n  // Reset the store (for testing or when forced updates are needed)\r\n  reset: () => {\r\n    hasSeenWelcomeThisSession.set(false);\r\n    welcomeStateStore.update(() => {\r\n      const newState = {\r\n        hasSeenWelcome: false,\r\n        lastSeenVersion: null,\r\n        seenMessageTypes: {}\r\n      };\r\n      updateSettings(newState);\r\n      return newState;\r\n    });\r\n  },\r\n  \r\n  // Reset only for the current session (for testing)\r\n  resetSession: () => {\r\n    hasSeenWelcomeThisSession.set(false);\r\n  },\r\n  \r\n  // Get the current version\r\n  getCurrentVersion: () => CURRENT_VERSION\r\n};\r\n\r\nexport default welcomeState;\r\n","/**\r\n * API Key Store\r\n * Manages API keys and initialization state\r\n * \r\n * This store handles:\r\n * - API key management for multiple providers\r\n * - Electron IPC integration\r\n * - Initialization state tracking\r\n * - Error handling\r\n * - Backward compatibility\r\n * \r\n * Related files:\r\n * - components/ApiKeyInput.svelte: UI for API key management\r\n * - services/api.js: API client that uses the stored keys\r\n */\r\n\r\nimport { writable, get, derived } from 'svelte/store';\r\n\r\n// Platform check\r\nconst isBrowser = typeof window !== 'undefined';\r\n\r\n// Initial state\r\nconst initialState = {\r\n  keys: {\r\n    openai: '',\r\n    mistral: ''\r\n  },\r\n  isInitialized: false,\r\n  error: null\r\n};\r\n\r\n// Create store with initialization tracking\r\nconst apiKeyStore = writable(initialState);\r\n\r\n// Initialize store from electron\r\nasync function initializeStore() {\r\n  if (!isBrowser) return;\r\n\r\n  try {\r\n    if (!window?.electron) {\r\n      apiKeyStore.update(state => ({\r\n        ...state,\r\n        isInitialized: true,\r\n        error: 'Electron API not available'\r\n      }));\r\n      return;\r\n    }\r\n\r\n    window.electron.onReady(async () => {\r\n      try {\r\n        // Check existing keys\r\n        const [openaiExists, mistralExists] = await Promise.all([\r\n          window.electron.checkApiKeyExists('openai'),\r\n          window.electron.checkApiKeyExists('mistral')\r\n        ]);\r\n\r\n        // Get keys if they exist\r\n        const keys = {\r\n          openai: openaiExists.exists ? (await window.electron.getApiKey('openai')).key || '' : '',\r\n          mistral: mistralExists.exists ? (await window.electron.getApiKey('mistral')).key || '' : ''\r\n        };\r\n\r\n        apiKeyStore.update(state => ({\r\n          ...state,\r\n          keys,\r\n          isInitialized: true,\r\n          error: null\r\n        }));\r\n      } catch (error) {\r\n        console.error('Failed to load API keys:', error);\r\n        apiKeyStore.update(state => ({\r\n          ...state,\r\n          isInitialized: true,\r\n          error: error.message\r\n        }));\r\n      }\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to initialize API key store:', error);\r\n    apiKeyStore.update(state => ({\r\n      ...state,\r\n      isInitialized: true,\r\n      error: error.message\r\n    }));\r\n  }\r\n}\r\n\r\n// Initialize the store in browser environment\r\nif (isBrowser) {\r\n  initializeStore();\r\n}\r\n\r\n// Helper functions with electron integration\r\nexport async function getApiKey(provider = 'openai') {\r\n  const state = get(apiKeyStore);\r\n  return state.keys[provider] || '';\r\n}\r\n\r\nexport async function setApiKey(key, provider = 'openai') {\r\n  if (!isBrowser || !window?.electron) return;\r\n\r\n  try {\r\n    await window.electron.saveApiKey(key, provider);\r\n    \r\n    apiKeyStore.update(state => ({\r\n      ...state,\r\n      keys: {\r\n        ...state.keys,\r\n        [provider]: key\r\n      },\r\n      error: null\r\n    }));\r\n  } catch (error) {\r\n    console.error('Failed to save API key:', error);\r\n    apiKeyStore.update(state => ({\r\n      ...state,\r\n      error: error.message\r\n    }));\r\n  }\r\n}\r\n\r\n// Derived store for initialization status\r\nexport const isInitialized = derived(\r\n  apiKeyStore,\r\n  $store => $store.isInitialized\r\n);\r\n\r\n// Derived store for error state\r\nexport const apiKeyError = derived(\r\n  apiKeyStore,\r\n  $store => $store.error\r\n);\r\n\r\n// For backward compatibility\r\nexport const apiKey = {\r\n  subscribe: callback => {\r\n    return apiKeyStore.subscribe(state => callback(state.keys.openai || ''));\r\n  },\r\n  set: value => setApiKey(value, 'openai')\r\n};\r\n\r\n// Export store for direct subscription\r\nexport default apiKeyStore;\r\n","<!-- \r\n  WelcomeChat.svelte - Welcome and announcement modal component\r\n  Provides interactive welcome messages and announcements to users.\r\n  \r\n  Features:\r\n  - Animated message display\r\n  - Multiple message types (welcome, update, announcement)\r\n  - Progress tracking\r\n  - API key integration\r\n  - Client-side navigation\r\n  \r\n  Dependencies:\r\n  - svelte-spa-router for navigation\r\n  - ChatBubble component for message display\r\n  - Button component for actions\r\n  - welcomeState store for state management\r\n  - apiKey store for API key status\r\n-->\r\n<script>\r\n  import { fade, fly } from 'svelte/transition';\r\n  import { elasticOut, backOut } from 'svelte/easing';\r\n  import { onMount, onDestroy, createEventDispatcher } from 'svelte';\r\n  import { push } from 'svelte-spa-router';\r\n  import ChatBubble from './ChatBubble.svelte';\r\n  import Button from './Button.svelte';\r\n  import welcomeState, { MESSAGE_TYPES } from '../../../lib/stores/welcomeState';\r\n  import { apiKey } from '../../../lib/stores/apiKey';\r\n  \r\n  const dispatch = createEventDispatcher();\r\n  \r\n  // Props\r\n  export let messageType = MESSAGE_TYPES.WELCOME;\r\n  export let showOnMount = true;\r\n  \r\n  let isOpen = true; // Always start open\r\n  let visibleMessages = [];\r\n  let apiKeyValue;\r\n  let shouldShow = false;\r\n  \r\n  // Subscribe to API key store\r\n  const unsubApiKey = apiKey.subscribe(value => {\r\n    apiKeyValue = value;\r\n  });\r\n  \r\n  // Clean up subscriptions\r\n  onDestroy(() => {\r\n    unsubApiKey();\r\n  });\r\n  \r\n  // Initialize on mount\r\n  onMount(() => {\r\n    // Check if we should show this message type\r\n    if (messageType === MESSAGE_TYPES.WELCOME) {\r\n      shouldShow = welcomeState.shouldShowWelcome();\r\n    } else {\r\n      shouldShow = welcomeState.shouldShowMessageType(messageType);\r\n    }\r\n    \r\n    // If we should show and showOnMount is true, animate messages\r\n    if (shouldShow && showOnMount) {\r\n      animateMessages();\r\n    }\r\n  });\r\n\r\n  // Message templates for different message types\r\n  const messageTemplates = {\r\n    [MESSAGE_TYPES.WELCOME]: [\r\n      {\r\n        type: 'received',\r\n        name: 'Professor Synapse',\r\n        avatar: '',\r\n        text: 'Let me introduce you to <span class=\"codex-md-brand\">codex.md</span>, a powerful tool that transforms your digital content into Markdown format. It\\'s perfect for building your personal knowledge base!'\r\n      },\r\n      {\r\n        type: 'received',\r\n        name: '<span class=\"codex-md-brand\">codex.md</span>',\r\n        avatar: '',\r\n        text: `\r\n          <p>Hi there! I can help you convert your content in several ways:</p>\r\n          <ul class=\"feature-list\">\r\n            <li><strong>Drag and drop</strong> your files below or <strong>click</strong> to browse</li>\r\n            <li><strong>Convert web content</strong> by adding a URL (single page or entire website)</li>\r\n          </ul>\r\n          <p>Let's get started with your conversion!</p>\r\n        `\r\n      }\r\n    ],\r\n    [MESSAGE_TYPES.UPDATE]: [\r\n      {\r\n        type: 'received',\r\n        name: '<span class=\"codex-md-brand\">codex.md</span>',\r\n        avatar: '',\r\n        text: `\r\n          <p>We've updated codex.md with new features!</p>\r\n          <ul class=\"feature-list\">\r\n            <li><strong>Enhanced PDF conversion</strong> with better image extraction</li>\r\n            <li><strong>Improved web scraping</strong> for more accurate content extraction</li>\r\n            <li><strong>Better performance</strong> for large file conversions</li>\r\n          </ul>\r\n          <p>Enjoy the improvements!</p>\r\n        `\r\n      }\r\n    ],\r\n    [MESSAGE_TYPES.ANNOUNCEMENT]: [\r\n      {\r\n        type: 'received',\r\n        name: '<span class=\"codex-md-brand\">codex.md</span>',\r\n        avatar: '',\r\n        text: `\r\n          <p>Important announcement from the codex.md team:</p>\r\n          <p>We're constantly working to improve your experience. If you have feedback or suggestions, please let us know!</p>\r\n        `\r\n      }\r\n    ]\r\n  };\r\n\r\n  // Get the appropriate messages for the current message type\r\n  $: allMessages = messageTemplates[messageType] || messageTemplates[MESSAGE_TYPES.WELCOME];\r\n\r\n  function handleMinimize() {\r\n    isOpen = false;\r\n    \r\n    // Mark the appropriate message type as seen\r\n    if (messageType === MESSAGE_TYPES.WELCOME) {\r\n      welcomeState.markAsSeen();\r\n    } else {\r\n      welcomeState.markMessageTypeSeen(messageType);\r\n    }\r\n    \r\n    // Dispatch event to parent component\r\n    dispatch('closed');\r\n  }\r\n\r\n  function goToHelp() {\r\n    handleMinimize(); // Close modal first\r\n    push('/help');\r\n  }\r\n\r\n  function goToSettings() {\r\n    handleMinimize(); // Close modal first\r\n    push('/settings');\r\n  }\r\n\r\n  function handleContinue() {\r\n    handleMinimize();\r\n    dispatch('continue');\r\n  }\r\n\r\n  // Animate messages appearing one by one\r\n  async function animateMessages() {\r\n    visibleMessages = [];\r\n    \r\n    // Add messages one by one with delay\r\n    for (const message of allMessages) {\r\n      await new Promise(resolve => setTimeout(resolve, 800));\r\n      visibleMessages = [...visibleMessages, message];\r\n    }\r\n  }\r\n</script>\r\n\r\n<div class=\"welcome-chat\">\r\n  {#if isOpen && shouldShow}\r\n    <div class=\"modal-overlay\" transition:fade={{ duration: 300 }} on:click|self={handleMinimize}>\r\n      <div class=\"chat-modal\" transition:fly={{ y: 50, duration: 400, easing: elasticOut }}>\r\n        <div class=\"modal-header\">\r\n          <h3>\r\n            {#if messageType === MESSAGE_TYPES.WELCOME}\r\n              Welcome to codex.md!\r\n            {:else if messageType === MESSAGE_TYPES.UPDATE}\r\n              codex.md Update\r\n            {:else if messageType === MESSAGE_TYPES.ANNOUNCEMENT}\r\n              Announcement\r\n            {:else}\r\n              codex.md\r\n            {/if}\r\n          </h3>\r\n          <button class=\"close-button\" on:click={handleMinimize}></button>\r\n        </div>\r\n        <div class=\"modal-content\">\r\n          <div class=\"chat-messages\">\r\n            {#each visibleMessages as message, index (index)}\r\n              <div class=\"message-wrapper\" in:fly={{ y: 30, duration: 500, delay: 100, easing: backOut }}>\r\n                <ChatBubble\r\n                  avatar={message.avatar}\r\n                  name={message.name}\r\n                  message={message.text}\r\n                  delay={0}\r\n                  avatarPosition={message.name.includes('codex.md') ? 'right' : 'left'}\r\n                  showName={false}\r\n                />\r\n              </div>\r\n            {/each}\r\n          </div>\r\n          \r\n          <!-- Progress indicator -->\r\n          <div class=\"progress-indicator\">\r\n            <div class=\"progress-track\">\r\n              <div \r\n                class=\"progress-fill\" \r\n                style=\"width: {Math.min(100, (visibleMessages.length / allMessages.length) * 100)}%\"\r\n              ></div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- Direct buttons at the bottom of the modal -->\r\n          {#if visibleMessages.length === allMessages.length}\r\n            <div class=\"action-buttons\" in:fly={{ y: 20, duration: 400, delay: 300 }}>\r\n              {#if messageType === MESSAGE_TYPES.WELCOME}\r\n                <Button \r\n                  variant=\"secondary\" \r\n                  size=\"medium\"\r\n                  on:click={goToHelp}\r\n                >\r\n                  Help Guide\r\n                </Button>\r\n                <Button \r\n                  variant=\"primary\" \r\n                  size=\"medium\"\r\n                  on:click={handleContinue}\r\n                >\r\n                  I'm Ready\r\n                </Button>\r\n                \r\n                {#if !apiKeyValue}\r\n                  <div class=\"api-key-notice\" in:fade={{ duration: 300, delay: 500 }}>\r\n                    Don't forget to <button class=\"link-button\" on:click={goToSettings}>set up your API key</button> for advanced features!\r\n                  </div>\r\n                {/if}\r\n              {:else}\r\n                <Button \r\n                  variant=\"primary\" \r\n                  size=\"medium\"\r\n                  on:click={handleContinue}\r\n                >\r\n                  Continue\r\n                </Button>\r\n              {/if}\r\n            </div>\r\n          {/if}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  {/if}\r\n</div>\r\n\r\n<style>\r\n  .welcome-chat {\r\n    position: fixed;\r\n    inset: 0;\r\n    z-index: 1000;\r\n    pointer-events: none;\r\n  }\r\n\r\n  .modal-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    backdrop-filter: blur(3px);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 1000;\r\n    pointer-events: auto;\r\n  }\r\n\r\n  .chat-modal {\r\n    width: 90%;\r\n    max-width: 900px;\r\n    max-height: 80vh;\r\n    background: var(--color-surface);\r\n    border-radius: var(--rounded-md);\r\n    border: 1px solid var(--color-border);\r\n    box-shadow: \r\n      0 10px 15px -3px rgba(0, 0, 0, 0.1),\r\n      0 4px 6px -2px rgba(0, 0, 0, 0.05),\r\n      0 20px 25px -5px rgba(0, 0, 0, 0.1);\r\n    display: flex;\r\n    flex-direction: column;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .modal-header {\r\n    padding: var(--spacing-sm) var(--spacing-md);\r\n    border-bottom: 1px solid var(--color-border);\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    background: linear-gradient(to right, var(--color-surface), var(--color-surface-light));\r\n  }\r\n\r\n  .modal-header h3 {\r\n    margin: 0;\r\n    font-size: var(--font-size-lg);\r\n    background: linear-gradient(135deg, var(--color-prime), var(--color-fourth));\r\n    -webkit-background-clip: text;\r\n    background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n  }\r\n\r\n  .close-button {\r\n    background: none;\r\n    border: none;\r\n    font-size: 1.5em;\r\n    line-height: 1;\r\n    padding: 0;\r\n    cursor: pointer;\r\n    color: var(--color-text);\r\n    opacity: 0.6;\r\n    transition: opacity 0.2s ease;\r\n  }\r\n\r\n  .close-button:hover {\r\n    opacity: 1;\r\n  }\r\n\r\n  .modal-content {\r\n    padding: var(--spacing-md);\r\n    overflow-y: auto;\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n\r\n  .chat-messages {\r\n    flex: 1;\r\n    margin-bottom: var(--spacing-md);\r\n    overflow: visible;\r\n  }\r\n\r\n  .message-wrapper {\r\n    margin-bottom: var(--spacing-sm);\r\n    overflow: visible;\r\n  }\r\n\r\n  .message-wrapper:last-child {\r\n    margin-bottom: var(--spacing-md);\r\n  }\r\n\r\n  .action-buttons {\r\n    margin-top: auto;\r\n    display: flex;\r\n    justify-content: center;\r\n    gap: var(--spacing-md);\r\n    flex-wrap: wrap;\r\n    padding-top: var(--spacing-md);\r\n    border-top: 1px solid var(--color-border-light);\r\n  }\r\n\r\n  .action-buttons :global(button) {\r\n    min-width: 140px;\r\n    flex: 0 1 auto;\r\n  }\r\n\r\n  .progress-indicator {\r\n    margin: var(--spacing-sm) 0;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .progress-track {\r\n    width: 100%;\r\n    height: 4px;\r\n    background-color: var(--color-border-light);\r\n    border-radius: 2px;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .progress-fill {\r\n    height: 100%;\r\n    background: linear-gradient(90deg, var(--color-prime), var(--color-fourth));\r\n    border-radius: 2px;\r\n    transition: width 0.3s ease;\r\n  }\r\n\r\n  .api-key-notice {\r\n    width: 100%;\r\n    margin-top: var(--spacing-md);\r\n    text-align: center;\r\n    font-size: var(--font-size-sm);\r\n    color: var(--color-text-light);\r\n    background: rgba(var(--color-prime-rgb), 0.05);\r\n    padding: var(--spacing-xs) var(--spacing-sm);\r\n    border-radius: var(--rounded-sm);\r\n    border-left: 3px solid var(--color-prime);\r\n  }\r\n\r\n  .api-key-notice .link-button {\r\n    color: var(--color-prime);\r\n    text-decoration: none;\r\n    font-weight: var(--font-weight-medium);\r\n    border: none;\r\n    background: none;\r\n    padding: 0;\r\n    margin: 0;\r\n    cursor: pointer;\r\n    border-bottom: 1px dotted var(--color-prime);\r\n  }\r\n\r\n  .api-key-notice .link-button:hover {\r\n    color: var(--color-fourth);\r\n    border-color: var(--color-fourth);\r\n  }\r\n\r\n  /* High Contrast Mode */\r\n  @media (prefers-contrast: high) {\r\n    .modal-overlay {\r\n      background-color: rgba(0, 0, 0, 0.8);\r\n      backdrop-filter: none;\r\n    }\r\n\r\n    .chat-modal {\r\n      border-width: 2px;\r\n    }\r\n\r\n    .close-button {\r\n      border: 1px solid currentColor;\r\n      border-radius: var(--rounded-sm);\r\n      opacity: 1;\r\n    }\r\n\r\n    .api-key-notice .link-button {\r\n      text-decoration: underline;\r\n      border-bottom: none;\r\n    }\r\n  }\r\n\r\n  /* Reduced Motion */\r\n  @media (prefers-reduced-motion: reduce) {\r\n    .progress-fill {\r\n      transition: none;\r\n    }\r\n  }\r\n</style>\r\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","/**\r\n * File type detection and categorization utilities\r\n * Provides centralized file type handling for the frontend\r\n * \r\n * This file is used by components like FileUploader.svelte and stores/files.js\r\n * to determine how files should be processed and what converters to use.\r\n */\r\n\r\n// File Categories - Group similar file types\r\nexport const FILE_CATEGORIES = {\r\n  documents: ['pdf', 'docx', 'pptx', 'rtf', 'txt', 'md'],\r\n  audio: ['mp3', 'wav', 'ogg', 'm4a', 'aac', 'wma'],\r\n  video: ['mp4', 'mov', 'avi', 'mkv', 'webm'],\r\n  data: ['csv', 'xlsx', 'xls', 'json', 'yaml'],\r\n  web: ['url', 'parenturl']\r\n};\r\n\r\n// File handling types - How the file should be processed\r\nexport const HANDLING_TYPES = {\r\n  BINARY: 'binary',    // Read as buffer\r\n  TEXT: 'text',       // Read as UTF-8\r\n  URL: 'url'         // Process as URL\r\n};\r\n\r\n// Converter configuration - Maps file types to their handling requirements\r\nexport const CONVERTER_CONFIG = {\r\n  // Documents\r\n  docx: {\r\n    handling: HANDLING_TYPES.BINARY,\r\n    converter: 'text',\r\n    requiresOcr: false\r\n  },\r\n  pptx: {\r\n    handling: HANDLING_TYPES.BINARY,\r\n    converter: 'text',\r\n    requiresOcr: false\r\n  },\r\n  pdf: {\r\n    handling: HANDLING_TYPES.BINARY,\r\n    converter: 'pdf',\r\n    requiresOcr: true\r\n  },\r\n  \r\n  // Data files\r\n  xlsx: {\r\n    handling: HANDLING_TYPES.BINARY,\r\n    converter: 'data',\r\n    requiresOcr: false\r\n  },\r\n  csv: {\r\n    handling: HANDLING_TYPES.TEXT,\r\n    converter: 'data',\r\n    requiresOcr: false\r\n  },\r\n  \r\n  // Media files\r\n  mp3: {\r\n    handling: HANDLING_TYPES.BINARY,\r\n    converter: 'audio',\r\n    requiresOcr: false\r\n  },\r\n  wav: {\r\n    handling: HANDLING_TYPES.BINARY,\r\n    converter: 'audio',\r\n    requiresOcr: false\r\n  },\r\n  mp4: {\r\n    handling: HANDLING_TYPES.BINARY,\r\n    converter: 'video',\r\n    requiresOcr: false\r\n  }\r\n};\r\n\r\n// List of types that require an API key\r\nexport const API_REQUIRED_TYPES = [\r\n  'mp3', 'wav', 'ogg', 'm4a', 'mpga',  // Audio\r\n  'mp4', 'webm', 'avi', 'mov', 'mpeg'   // Video\r\n];\r\n\r\n/**\r\n * Get comprehensive file handling information\r\n * @param {string|File|Object} file - File to analyze\r\n * @returns {Object} Complete file handling details including type, category, and handling requirements\r\n */\r\nexport function getFileHandlingInfo(file) {\r\n  // Get basic file info\r\n  const fileName = typeof file === 'string' ? file : \r\n                 file.name || file.originalFileName || 'unknown';\r\n  const fileType = fileName.split('.').pop().toLowerCase();\r\n  \r\n  // Handle web content types\r\n  if (typeof file === 'object' && file.type && ['url', 'parenturl'].includes(file.type)) {\r\n    return {\r\n      fileName,\r\n      fileType: file.type,\r\n      category: 'web',\r\n      handling: HANDLING_TYPES.URL,\r\n      converter: file.type, // Preserve original type (url/parenturl)\r\n      requiresOcr: false,\r\n      isWeb: true,\r\n      isBinary: false\r\n    };\r\n  }\r\n  \r\n  // Get category\r\n  let category = 'unknown';\r\n  for (const [cat, extensions] of Object.entries(FILE_CATEGORIES)) {\r\n    if (extensions.includes(fileType)) {\r\n      category = cat;\r\n      break;\r\n    }\r\n  }\r\n  \r\n  // Get converter config\r\n  const config = CONVERTER_CONFIG[fileType] || {\r\n    handling: HANDLING_TYPES.TEXT,\r\n    converter: 'text',\r\n    requiresOcr: false\r\n  };\r\n  \r\n  return {\r\n    fileName,\r\n    fileType,\r\n    category,\r\n    ...config,\r\n    isWeb: category === 'web',\r\n    isBinary: config.handling === HANDLING_TYPES.BINARY,\r\n    requiresApiKey: API_REQUIRED_TYPES.includes(fileType)\r\n  };\r\n}\r\n\r\n/**\r\n * Convert a File object to buffer or text based on handling type\r\n * @param {File} file - File to process\r\n * @returns {Promise<Buffer|string>} Processed content\r\n */\r\nexport async function getFileContent(file) {\r\n  const info = getFileHandlingInfo(file);\r\n  \r\n  if (info.isBinary) {\r\n    return await file.arrayBuffer();\r\n  }\r\n  \r\n  return await file.text();\r\n}\r\n\r\n/**\r\n * Get the category of a file\r\n * @param {string|File|Object} file - File to analyze\r\n * @returns {string} File category\r\n */\r\nexport function getFileType(file) {\r\n  const info = getFileHandlingInfo(file);\r\n  return info.category;\r\n}\r\n\r\n/**\r\n * Check if a file requires an API key\r\n * @param {string|File|Object} file - File to analyze\r\n * @returns {boolean} Whether the file requires an API key\r\n */\r\nexport function requiresApiKey(file) {\r\n  const info = getFileHandlingInfo(file);\r\n  return info.requiresApiKey;\r\n}\r\n\r\n// Default export for compatibility\r\nexport default {\r\n  FILE_CATEGORIES,\r\n  HANDLING_TYPES,\r\n  CONVERTER_CONFIG,\r\n  API_REQUIRED_TYPES,\r\n  getFileHandlingInfo,\r\n  getFileContent,\r\n  getFileType,\r\n  requiresApiKey\r\n};\r\n","/**\r\n * Files utilities barrel file for frontend\r\n * Exports all file-related utilities in an organized way\r\n * \r\n * This file serves as the main entry point for file utilities in the frontend.\r\n * It re-exports utilities from types.js in various groupings to provide flexibility\r\n * in how they are imported by other modules.\r\n */\r\n\r\nimport * as types from './types.js';\r\n\r\n// Re-export all utilities\r\nexport const {\r\n  FILE_CATEGORIES,\r\n  API_REQUIRED_TYPES,\r\n  HANDLING_TYPES,\r\n  CONVERTER_CONFIG,\r\n  getFileHandlingInfo,\r\n  requiresApiKey,\r\n  getFileType,\r\n  getFileContent\r\n} = types;\r\n\r\n// Group functions by category for organizational clarity\r\nexport const fileTypes = {\r\n  getFileHandlingInfo,\r\n  requiresApiKey,\r\n  getFileType,\r\n  getFileContent,\r\n  FILE_CATEGORIES,\r\n  API_REQUIRED_TYPES,\r\n  HANDLING_TYPES,\r\n  CONVERTER_CONFIG\r\n};\r\n\r\n// Default export for compatibility\r\nexport default {\r\n  // Types\r\n  FILE_CATEGORIES,\r\n  API_REQUIRED_TYPES,\r\n  HANDLING_TYPES,\r\n  CONVERTER_CONFIG,\r\n  getFileHandlingInfo,\r\n  requiresApiKey,\r\n  getFileType,\r\n  getFileContent,\r\n  \r\n  // Grouped exports\r\n  fileTypes\r\n};\r\n","/**\r\n * File utilities for the frontend\r\n * Re-exports file utilities from our local utils implementation\r\n * \r\n * This file provides commonly used file-related utilities for frontend components\r\n * like FileUploader.svelte and files.js store.\r\n */\r\n\r\nimport {\r\n    FILE_CATEGORIES,\r\n    API_REQUIRED_TYPES,\r\n    getFileType,\r\n    requiresApiKey\r\n} from '@lib/utils/files';\r\n\r\n/**\r\n * Check if a file type is supported by the application\r\n * @param {string} fileType - The file extension to check\r\n * @returns {boolean} Whether the file type is supported\r\n */\r\nexport function isValidFileType(fileType) {\r\n    return Object.values(FILE_CATEGORIES).flat().includes(fileType.toLowerCase());\r\n}\r\n\r\n/**\r\n * Sanitize a filename to be safe for saving\r\n * @param {string} filename - The filename to sanitize\r\n * @returns {string} The sanitized filename\r\n */\r\nexport function sanitizeFilename(filename) {\r\n    return filename.replace(/[^a-z0-9.-]/gi, '_');\r\n}\r\n\r\n// Re-export core utilities\r\nexport {\r\n    FILE_CATEGORIES,\r\n    API_REQUIRED_TYPES,\r\n    getFileType,\r\n    requiresApiKey\r\n};\r\n","// src/lib/stores/files.js\r\n/**\r\n * Files Store\r\n *\r\n * Manages the state of files in the application.\r\n * Modified to support single file conversion only.\r\n * Multi-selection functionality has been commented out.\r\n */\r\n\r\nimport { writable, derived } from 'svelte/store';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { requiresApiKey } from '@lib/utils/fileUtils';\r\n// Platform check\r\nconst isBrowser = typeof window !== 'undefined';\r\n\r\n// Create and export the stores\r\nexport const files = createFilesStore();\r\n\r\n// Clear any stored files data on page load\r\nif (isBrowser) {\r\n    // Clear any stored files data\r\n    localStorage.removeItem('codex_md_files');\r\n    sessionStorage.removeItem('codex_md_files');\r\n}\r\nexport const currentFileType = derived(files, $files => {\r\n    const activeFile = $files[0];\r\n    if (!activeFile) return null;\r\n    return activeFile.name.split('.').pop().toLowerCase();\r\n});\r\n\r\n/**\r\n * File status enumeration\r\n */\r\nexport const FileStatus = {\r\n    READY: 'ready',\r\n    UPLOADING: 'uploading',\r\n    CONVERTING: 'converting',\r\n    COMPLETED: 'completed',\r\n    ERROR: 'error'\r\n};\r\n\r\n/**\r\n * Utility functions for file operations\r\n */\r\nconst FileUtils = {\r\n    /**\r\n     * Creates a standardized result object\r\n     */\r\n    createResult(success, message, data = null) {\r\n        return { success, message, file: data };\r\n    },\r\n\r\n    /**\r\n     * Creates a standardized file object\r\n     */\r\n    createFileObject(file) {\r\n        // Handle file path (string) from Electron or File object from web\r\n        const isFilePath = typeof file === 'string';\r\n        const fileName = isFilePath ? file.split(/[/\\\\]/).pop() : file.name;\r\n        const extension = fileName?.split('.').pop()?.toLowerCase();\r\n        \r\n        return {\r\n            id: uuidv4(),\r\n            name: fileName,\r\n            type: file.type || extension || 'unknown',  // Ensure type is set from extension if not provided\r\n            size: isFilePath ? 0 : (file.size || 0),  // Size will be determined by Electron for file paths\r\n            url: file.url || null,\r\n            file: isFilePath ? null : (file.file || file),  // Store File object for web files\r\n            path: isFilePath ? file : (file.path || null),  // Store path for native files\r\n            status: FileStatus.READY,\r\n            progress: 0,\r\n            error: null,\r\n            selected: false,\r\n            createdAt: new Date().toISOString(),\r\n            updatedAt: new Date().toISOString(),\r\n            requiresApiKey: requiresApiKey(isFilePath ? { type: extension } : file),\r\n            isNative: isFilePath,  // Flag to indicate if this is a native file path\r\n            ...file  // Allow override but after setting defaults\r\n        };\r\n    },\r\n\r\n    /**\r\n     * Checks for duplicate files considering URL and type\r\n     * For URLs, we only consider them duplicate if they have the same type (parent/single)\r\n     */\r\n    isDuplicate(files, newFile) {\r\n        return files.some(f => {\r\n            // For URL-based files\r\n            if (f.url && newFile.url) {\r\n                return f.url === newFile.url && f.type === newFile.type;\r\n            }\r\n            \r\n            // For native file paths\r\n            if (f.path && newFile.path) {\r\n                return f.path === newFile.path;\r\n            }\r\n            \r\n            // For regular files\r\n            return f.name && newFile.name && f.name === newFile.name && f.type === newFile.type;\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Updates a file's timestamp\r\n     */\r\n    withTimestamp(file) {\r\n        return {\r\n            ...file,\r\n            updatedAt: new Date().toISOString()\r\n        };\r\n    }\r\n};\r\n\r\n/**\r\n * Creates a store action with standard error handling\r\n */\r\nfunction createAction(name, handler) {\r\n    return (...args) => {\r\n        try {\r\n            return handler(...args);\r\n        } catch (error) {\r\n            console.error(` Error in ${name}:`, error);\r\n            return FileUtils.createResult(false, error.message);\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * Creates and returns the files store\r\n */\r\nfunction createFilesStore() {\r\n    const { subscribe, update, set } = writable([], (set) => {\r\n        // Cleanup function that runs when all subscribers unsubscribe\r\n        return () => {\r\n            set([]); // Clear the store\r\n            if (isBrowser) {\r\n                // Clear any stored data\r\n                localStorage.removeItem('codex_md_files');\r\n                sessionStorage.removeItem('codex_md_files');\r\n            }\r\n        };\r\n    });\r\n\r\n    function hasFile(url) {\r\n        let found = false;\r\n        update(files => {\r\n            found = files.some(file => file.url === url);\r\n            console.log('Checking if file exists with URL:', url, 'Found:', found);\r\n            return files;\r\n        });\r\n        return found;\r\n    }\r\n\r\n    /**\r\n     * Updates files and returns a result\r\n     */\r\n    function updateFiles(updater, successMsg) {\r\n        let result;\r\n        update(files => {\r\n            const updated = updater(files);\r\n            result = updated.result;\r\n            console.log('Files updated:', updated.files);\r\n            return updated.files;\r\n        });\r\n        return result;\r\n    }\r\n\r\n    return {\r\n        subscribe,\r\n\r\n        /**\r\n         * Adds a file to the store\r\n         */\r\n        /**\r\n         * Adds a file to the store\r\n         * Modified to only allow one item at a time (either file OR URL)\r\n         */\r\n        addFile: createAction('addFile', (file) => {\r\n            const newFile = FileUtils.createFileObject(file);\r\n            console.log('[filesStore] Attempting to add file:', newFile);\r\n            \r\n            return updateFiles(files => {\r\n                // If there are existing files, clear them before adding the new one\r\n                if (files.length > 0) {\r\n                    console.log('[filesStore] Clearing existing files before adding new one');\r\n                    // We could add additional logic here to check if the existing item is a URL or file\r\n                    // and provide more specific messaging, but for now we'll just replace it\r\n                }\r\n\r\n                // Special handling for parent URLs - this is kept for future use but will rarely be triggered\r\n                // since we're now enforcing single item limit\r\n                if (newFile.type === 'parent') {\r\n                    const existingFile = files.find(f =>\r\n                        f.url === newFile.url && f.type === 'url'\r\n                    );\r\n                    if (existingFile) {\r\n                        console.log('[filesStore] Converting single URL to parent:', existingFile.name);\r\n                        return {\r\n                            files: [{...existingFile, type: 'parent', name: `${existingFile.name} (Parent)`}],\r\n                            result: FileUtils.createResult(true,\r\n                                'URL converted to parent successfully'\r\n                            )\r\n                        };\r\n                    }\r\n                }\r\n\r\n                // Handle duplicates silently\r\n                if (FileUtils.isDuplicate(files, newFile)) {\r\n                    console.log('[filesStore] Duplicate URL detected - ignoring:', newFile.name);\r\n                    return {\r\n                        files,\r\n                        result: FileUtils.createResult(true,\r\n                            'URL processed successfully'\r\n                        )\r\n                    };\r\n                }\r\n\r\n                console.log('[filesStore] Adding file:', newFile);\r\n                return {\r\n                    files: [newFile], // Replace all files with just the new one\r\n                    result: FileUtils.createResult(true,\r\n                        `Added \"${newFile.name}\" successfully`,\r\n                        newFile\r\n                    )\r\n                };\r\n            });\r\n        }),\r\n\r\n        /**\r\n         * Updates a file in the store\r\n         */\r\n        updateFile: createAction('updateFile', (id, data) => {\r\n            console.log('[filesStore] Updating file with ID:', id, 'Data:', data);\r\n            return updateFiles(files => {\r\n                const index = files.findIndex(f => f.id === id);\r\n                if (index === -1) {\r\n                    console.log('[filesStore] File not found for update:', id);\r\n                    return {\r\n                        files,\r\n                        result: FileUtils.createResult(false, 'File not found')\r\n                    };\r\n                }\r\n\r\n                const updatedFile = FileUtils.withTimestamp({\r\n                    ...files[index],\r\n                    ...data\r\n                });\r\n\r\n                const updatedFiles = [...files];\r\n                updatedFiles[index] = updatedFile;\r\n\r\n                console.log('[filesStore] Updated file:', updatedFile);\r\n                return {\r\n                    files: updatedFiles,\r\n                    result: FileUtils.createResult(true, \r\n                        'File updated successfully', \r\n                        updatedFile\r\n                    )\r\n                };\r\n            });\r\n        }),\r\n\r\n        /**\r\n         * Removes a file from the store\r\n         */\r\n        removeFile: createAction('removeFile', (id) => {\r\n            console.log('[filesStore] Removing file with ID:', id);\r\n            return updateFiles(files => {\r\n                const fileToRemove = files.find(f => f.id === id);\r\n                if (!fileToRemove) {\r\n                    console.log('[filesStore] File not found for removal:', id);\r\n                    return {\r\n                        files,\r\n                        result: FileUtils.createResult(false, \r\n                            `File with ID \"${id}\" not found`\r\n                        )\r\n                    };\r\n                }\r\n\r\n                console.log('[filesStore] Removing file:', fileToRemove);\r\n                return {\r\n                    files: files.filter(f => f.id !== id),\r\n                    result: FileUtils.createResult(true, \r\n                        `Removed \"${fileToRemove.name}\" successfully`, \r\n                        fileToRemove\r\n                    )\r\n                };\r\n            });\r\n        }),\r\n\r\n        /**\r\n         * File selection methods have been commented out since we no longer need multi-selection\r\n         * functionality in the single file conversion mode.\r\n         */\r\n        \r\n        /*\r\n        // Commented out: No longer needed for single file conversion\r\n        toggleSelect: createAction('toggleSelect', (id) => {\r\n            console.log('[filesStore] Toggling selection for file ID:', id);\r\n            return updateFiles(files => {\r\n                const index = files.findIndex(f => f.id === id);\r\n                if (index === -1) {\r\n                    console.log('[filesStore] File not found for toggle:', id);\r\n                    return {\r\n                        files,\r\n                        result: FileUtils.createResult(false, 'File not found')\r\n                    };\r\n                }\r\n\r\n                const updatedFiles = [...files];\r\n                updatedFiles[index] = FileUtils.withTimestamp({\r\n                    ...files[index],\r\n                    selected: !files[index].selected\r\n                });\r\n\r\n                console.log('[filesStore] Toggled selection for file:', updatedFiles[index]);\r\n                return {\r\n                    files: updatedFiles,\r\n                    result: FileUtils.createResult(true,\r\n                        'Selection toggled successfully',\r\n                        updatedFiles[index]\r\n                    )\r\n                };\r\n            });\r\n        }),\r\n\r\n        // Commented out: No longer needed for single file conversion\r\n        selectAll: createAction('selectAll', (select = true) => {\r\n            console.log('[filesStore] Selecting all files:', select);\r\n            let count = 0;\r\n            return updateFiles(files => {\r\n                const updatedFiles = files.map(file => {\r\n                    if (file.selected !== select) {\r\n                        count++;\r\n                        return FileUtils.withTimestamp({\r\n                            ...file,\r\n                            selected: select\r\n                        });\r\n                    }\r\n                    return file;\r\n                });\r\n\r\n                console.log('[filesStore] Selected/Deselected', count, 'files');\r\n                return {\r\n                    files: updatedFiles,\r\n                    result: {\r\n                        success: true,\r\n                        message: `${select ? 'Selected' : 'Deselected'} ${count} files`,\r\n                        count\r\n                    }\r\n                };\r\n            });\r\n        }),\r\n\r\n        // Commented out: No longer needed for single file conversion\r\n        getSelectedFiles() {\r\n            console.log('[filesStore] Retrieving selected files');\r\n            let selected = [];\r\n            update(files => {\r\n                selected = files.filter(f => f.selected);\r\n                console.log('[filesStore] Selected files:', selected);\r\n                return files;\r\n            });\r\n            return selected;\r\n        },\r\n        */\r\n\r\n        /**\r\n         * Clears all files from the store\r\n         */\r\n        clearFiles: createAction('clearFiles', () => {\r\n            console.log('[filesStore] Clearing all files');\r\n            let count = 0;\r\n            if (isBrowser) {\r\n                // Clear any stored data\r\n                localStorage.removeItem('codex_md_files');\r\n                sessionStorage.removeItem('codex_md_files');\r\n            }\r\n            return updateFiles(files => {\r\n                count = files.length;\r\n                console.log('[filesStore] Clearing', count, 'files');\r\n                return {\r\n                    files: [],\r\n                    result: {\r\n                        success: true,\r\n                        message: `Cleared ${count} files`,\r\n                        count\r\n                    }\r\n                };\r\n            });\r\n        })\r\n    };\r\n}\r\n","/**\r\n * Upload Store\r\n * Manages the state for file uploads and URL inputs.\r\n * Handles drag-and-drop states, error messages, and feedback.\r\n */\r\n\r\nimport { writable } from 'svelte/store';\r\n\r\n// Platform check\r\nconst isBrowser = typeof window !== 'undefined';\r\n\r\nfunction createUploadStore() {\r\n  // Clear store on page load\r\n  if (isBrowser) {\r\n    console.log(' Clearing upload store on page load');\r\n  }\r\n\r\n  const { subscribe, update, set } = writable({\r\n    activeTab: 'single',\r\n    dragOver: false,\r\n    urlInput: '',\r\n    errorMessage: '',\r\n    message: '',\r\n    messageType: '',\r\n    feedbackTimeout: null\r\n  });\r\n\r\n  return {\r\n    subscribe,\r\n    setActiveTab: (tab) => update(state => ({ ...state, activeTab: tab })),\r\n    setDragOver: (value) => update(state => ({ ...state, dragOver: value })),\r\n    setUrlInput: (value) => update(state => ({ ...state, urlInput: value })),\r\n    setError: (message) => update(state => ({ ...state, errorMessage: message })),\r\n    clearError: () => update(state => ({ ...state, errorMessage: '' })),\r\n    setMessage: (message, type = 'info') => update(state => ({ \r\n      ...state, \r\n      message,\r\n      messageType: type \r\n    })),\r\n    clearMessage: () => update(state => ({ \r\n      ...state, \r\n      message: '',\r\n      messageType: '' \r\n    })),\r\n    reset: () => set({\r\n      activeTab: 'single',\r\n      dragOver: false,\r\n      urlInput: '',\r\n      errorMessage: '',\r\n      message: '',\r\n      messageType: '',\r\n      feedbackTimeout: null\r\n    })\r\n  };\r\n}\r\n\r\nexport const uploadStore = createUploadStore();\r\n","/**\r\n * Conversion Error Types\r\n * Provides standardized error classes for conversion operations\r\n * \r\n * This file centralizes error handling for conversion operations,\r\n * ensuring consistent error reporting across the frontend.\r\n */\r\n\r\nexport class ConversionError extends Error {\r\n    constructor(message, options = {}) {\r\n        super(message);\r\n        this.name = 'ConversionError';\r\n        this.type = options.type || 'CONVERSION_ERROR';\r\n        this.details = options.details || {};\r\n        this.originalError = options.originalError;\r\n    }\r\n}\r\n\r\nexport class ValidationError extends ConversionError {\r\n    constructor(message, options = {}) {\r\n        super(message, { ...options, type: 'VALIDATION_ERROR' });\r\n        this.name = 'ValidationError';\r\n    }\r\n}\r\n\r\nexport class ApiKeyError extends ConversionError {\r\n    constructor(message, options = {}) {\r\n        super(message, { ...options, type: 'API_KEY_ERROR' });\r\n        this.name = 'ApiKeyError';\r\n    }\r\n}\r\n\r\nexport default {\r\n    ConversionError,\r\n    ValidationError,\r\n    ApiKeyError\r\n};\r\n","/**\r\n * Electron Client\r\n * Handles communication with the Electron main process.\r\n * \r\n * This client provides a wrapper around the Electron IPC API exposed through the preload script.\r\n * It ensures consistent error handling and provides a more convenient API for the renderer process.\r\n * \r\n * Related files:\r\n * - src/electron/preload.js: Exposes the Electron API to the renderer\r\n * - src/electron/ipc/handlers/: Implements the IPC handlers in the main process\r\n */\r\nimport { ConversionError } from '@lib/utils/conversion/errors';\r\nimport { getFileHandlingInfo } from '@lib/utils/files';\r\n\r\nexport { ConversionError };\r\n\r\nclass ElectronClient {\r\n    /**\r\n     * Convert a file to markdown format\r\n     * @param {string|ArrayBuffer} input - File path or buffer content\r\n     * @param {Object} options - Conversion options\r\n     * @param {Function} onProgress - Progress callback\r\n     */\r\n    async convertFile(input, options, onProgress) {\r\n        console.log(' [VERBOSE] ElectronClient.convertFile called');\r\n        console.time(' [VERBOSE] Total frontend conversion time');\r\n        \r\n        if (!window.electron) {\r\n            console.error(' [VERBOSE] Electron API not available');\r\n            throw new Error('Electron API not available');\r\n        }\r\n\r\n        // Log input type and options\r\n        console.log(' [VERBOSE] Conversion input:', {\r\n            type: typeof input,\r\n            isFile: input instanceof File,\r\n            isArrayBuffer: input instanceof ArrayBuffer,\r\n            isString: typeof input === 'string',\r\n            length: input instanceof ArrayBuffer ? input.byteLength : \r\n                   typeof input === 'string' ? input.length : \r\n                   input instanceof File ? input.size : 'unknown',\r\n            options: {\r\n                ...options,\r\n                apiKey: options.apiKey ? '' : '',\r\n                mistralApiKey: options.mistralApiKey ? '' : ''\r\n            }\r\n        });\r\n\r\n        // Handle progress updates\r\n        if (onProgress) {\r\n            console.log(' [VERBOSE] Setting up progress tracking');\r\n            window.electron.onConversionProgress((progress) => {\r\n                console.log(' [VERBOSE] Progress update:', progress);\r\n                onProgress(progress);\r\n            });\r\n        }\r\n\r\n        try {\r\n            // Get comprehensive file handling info\r\n            console.log(' [VERBOSE] Getting file handling info');\r\n            const fileInfo = getFileHandlingInfo({\r\n                name: options.originalFileName,\r\n                type: options.type,\r\n                path: typeof input === 'string' ? input : undefined\r\n            });\r\n\r\n            console.log(' [VERBOSE] File handling info:', fileInfo);\r\n\r\n            // Prepare conversion options with file info\r\n            const conversionOptions = {\r\n                ...options,\r\n                isBinary: fileInfo.isBinary\r\n            };\r\n            \r\n            // For non-web files, use the converter type from fileInfo\r\n            // For web files (url/parenturl), preserve the original type\r\n            if (!fileInfo.isWeb) {\r\n                conversionOptions.type = fileInfo.converter;\r\n            }\r\n\r\n            // Special handling for CSV files - set isContent flag to trigger special handling\r\n            if (fileInfo.converter === 'csv' ||\r\n                (options.originalFileName && options.originalFileName.toLowerCase().endsWith('.csv'))) {\r\n                console.log(' Detected CSV file, setting isContent flag to trigger special handling');\r\n                conversionOptions.isContent = true;\r\n                conversionOptions.type = 'csv';\r\n            }\r\n\r\n            // Handle based on input type\r\n            if (input instanceof File) {\r\n                // For all File objects, extract the buffer\r\n                const arrayBuffer = await input.arrayBuffer();\r\n                \r\n                if (fileInfo.converter === 'pdf' && options.useOcr) {\r\n                    // For PDFs with OCR enabled, include additional metadata\r\n                    console.log(`Converting PDF with OCR: ${fileInfo.fileName}`);\r\n                    conversionOptions.buffer = arrayBuffer;\r\n                    conversionOptions.originalFileName = input.name;\r\n                    conversionOptions.mimeType = input.type;\r\n                    conversionOptions.size = input.size;\r\n                    conversionOptions.useOcr = true;\r\n                } else {\r\n                    // For all other files, just pass the buffer\r\n                    conversionOptions.buffer = arrayBuffer;\r\n                }\r\n                \r\n                // Use a string placeholder for the input to avoid cloning issues\r\n                input = 'buffer-in-options';\r\n            } else if (input instanceof ArrayBuffer && options.isTemporary) {\r\n                // Binary buffer handling\r\n                console.log(`Converting binary file as ${fileInfo.converter}: ${fileInfo.fileName}`);\r\n                conversionOptions.buffer = input;\r\n            } else if (typeof input === 'string' && fileInfo.isWeb) {\r\n            // URL handling\r\n            console.log(`Converting URL: ${input} with type: ${options.type} (${fileInfo.isWeb ? 'web' : 'non-web'})`);\r\n            conversionOptions.content = input;\r\n            } else if (typeof input === 'string' && options.originalFileName) {\r\n                // Text content handling\r\n                console.log(`Converting text content from: ${fileInfo.fileName}`);\r\n                conversionOptions.content = input;\r\n            }\r\n\r\n            // Log final conversion options for debugging\r\n            console.log(' Sending conversion request with options:', {\r\n                type: conversionOptions.type,\r\n                isWeb: fileInfo.isWeb,\r\n                originalType: options.type,\r\n                finalType: conversionOptions.type\r\n            });\r\n            \r\n            console.time(' [VERBOSE] Electron IPC conversion call');\r\n            const result = await window.electron.convert(input, conversionOptions);\r\n            console.timeEnd(' [VERBOSE] Electron IPC conversion call');\r\n            \r\n            console.log(' [VERBOSE] Conversion completed successfully:', {\r\n                success: result.success,\r\n                hasContent: !!result.content,\r\n                contentLength: result.content ? result.content.length : 0,\r\n                hasOutputPath: !!result.outputPath,\r\n                hasImages: Array.isArray(result.images) && result.images.length > 0,\r\n                imageCount: Array.isArray(result.images) ? result.images.length : 0\r\n            });\r\n            \r\n            console.timeEnd(' [VERBOSE] Total frontend conversion time');\r\n            return result;\r\n        } catch (error) {\r\n            console.timeEnd(' [VERBOSE] Electron IPC conversion call');\r\n            console.timeEnd(' [VERBOSE] Total frontend conversion time');\r\n            \r\n            console.error(' [VERBOSE] Conversion error caught in ElectronClient.convertFile:', error);\r\n            \r\n            // Log detailed error information\r\n            console.log(' [VERBOSE] Error details:', {\r\n                name: error.name,\r\n                message: error.message,\r\n                stack: error.stack,\r\n                isConversionError: error instanceof ConversionError,\r\n                details: error.details || 'none',\r\n                fileType: options.type || 'unknown',\r\n                fileName: options.originalFileName || 'unknown'\r\n            });\r\n            \r\n            // Rethrow the error for the caller to handle\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Select output directory for conversion results\r\n     */\r\n    async selectOutputDirectory() {\r\n        if (!window.electron) {\r\n            throw new Error('Electron API not available');\r\n        }\r\n\r\n        return await window.electron.selectDirectory();\r\n    }\r\n\r\n    /**\r\n     * Cancel ongoing conversion requests\r\n     */\r\n    async cancelRequests() {\r\n        if (!window.electron) {\r\n            throw new Error('Electron API not available');\r\n        }\r\n\r\n        await window.electron.cancelRequests();\r\n    }\r\n    \r\n    /**\r\n     * Get offline status\r\n     * @returns {Promise<{online: boolean, apiStatus: Object}>}\r\n     */\r\n    async getOfflineStatus() {\r\n        if (!window.electron) {\r\n            throw new Error('Electron API not available');\r\n        }\r\n        \r\n        return await window.electron.getOfflineStatus();\r\n    }\r\n    \r\n    /**\r\n     * Get queued operations\r\n     * @returns {Promise<Array>}\r\n     */\r\n    async getQueuedOperations() {\r\n        if (!window.electron) {\r\n            throw new Error('Electron API not available');\r\n        }\r\n        \r\n        return await window.electron.getQueuedOperations();\r\n    }\r\n    \r\n    /**\r\n     * Clear cache\r\n     * @returns {Promise<{success: boolean}>}\r\n     */\r\n    async clearCache() {\r\n        if (!window.electron) {\r\n            throw new Error('Electron API not available');\r\n        }\r\n        \r\n        return await window.electron.clearCache();\r\n    }\r\n    \r\n    /**\r\n     * Register callback for offline events\r\n     * @param {Function} callback - Callback function\r\n     * @returns {Function} Cleanup function\r\n     */\r\n    onOfflineEvent(callback) {\r\n        if (!window.electron) {\r\n            throw new Error('Electron API not available');\r\n        }\r\n        \r\n        return window.electron.onOfflineEvent(callback);\r\n    }\r\n    \r\n    /**\r\n     * Get a setting value\r\n     * @param {string} key - Setting key\r\n     * @returns {Promise<any>}\r\n     */\r\n    async getSetting(key) {\r\n        if (!window.electron) {\r\n            throw new Error('Electron API not available');\r\n        }\r\n        \r\n        return await window.electron.getSetting(key);\r\n    }\r\n    \r\n    /**\r\n     * Set a setting value\r\n     * @param {string} key - Setting key\r\n     * @param {any} value - Setting value\r\n     * @returns {Promise<{success: boolean}>}\r\n     */\r\n    async setSetting(key, value) {\r\n        if (!window.electron) {\r\n            throw new Error('Electron API not available');\r\n        }\r\n        \r\n        return await window.electron.setSetting(key, value);\r\n    }\r\n    \r\n    /**\r\n     * Register a callback for file drop events\r\n     * @param {Function} callback - Callback function to handle dropped files\r\n     * @returns {Function} Cleanup function\r\n     */\r\n    onFileDropped(callback) {\r\n        if (!window.electron) {\r\n            throw new Error('Electron API not available');\r\n        }\r\n        \r\n        return window.electron.onFileDropped(callback);\r\n    }\r\n}\r\n\r\n// Export singleton instance\r\nexport default new ElectronClient();\r\n","/**\r\n * Unified Conversion Store\r\n * \r\n * A simplified store for managing conversion state.\r\n * Provides basic status tracking and essential methods.\r\n * \r\n * Related files:\r\n * - frontend/src/lib/components/ConversionProgress.svelte\r\n * - frontend/src/lib/utils/conversion/manager/storeManager.js\r\n */\r\n\r\nimport { writable, derived } from 'svelte/store';\r\n\r\n// Unified conversion state constants\r\nexport const ConversionState = {\r\n  // Shared status enum for all conversion types\r\n  STATUS: {\r\n    IDLE: 'idle',\r\n    INITIALIZING: 'initializing',\r\n    PREPARING: 'preparing',\r\n    CONVERTING: 'converting',\r\n    COMPLETED: 'completed',\r\n    ERROR: 'error',\r\n    CANCELLED: 'cancelled',\r\n    CLEANING_UP: 'cleaning_up'\r\n  },\r\n  \r\n  // Conversion types\r\n  TYPE: {\r\n    FILE: 'file',\r\n    BATCH: 'batch',\r\n    WEBSITE: 'website'\r\n  }\r\n};\r\n\r\n\r\n// Initial state with essential properties\r\nconst initialState = {\r\n  // Common properties\r\n  status: ConversionState.STATUS.IDLE,\r\n  progress: 0,\r\n  error: null,\r\n  startTime: null,\r\n  completionTime: null,\r\n  elapsedSeconds: 0, // Track elapsed time directly in seconds\r\n  \r\n  // File-specific properties\r\n  currentFile: null,\r\n  totalCount: 0,\r\n  \r\n  // Conversion type\r\n  type: null\r\n};\r\n\r\n/**\r\n * Creates a simplified conversion store\r\n * @returns {Object} The conversion store\r\n */\r\nfunction createUnifiedConversionStore() {\r\n  const { subscribe, set, update } = writable(initialState);\r\n  let completionCallbacks = [];\r\n  let timerInterval = null;\r\n  \r\n  return {\r\n    subscribe,\r\n    \r\n    // Common methods\r\n    setStatus: (status) => \r\n      update(state => ({ ...state, status })),\r\n    \r\n    setProgress: (progress) => \r\n      update(state => ({ ...state, progress: Math.min(progress, 100) })),\r\n    \r\n    setError: (error) => \r\n      update(state => ({ \r\n        ...state, \r\n        error, \r\n        status: error ? ConversionState.STATUS.ERROR : state.status \r\n      })),\r\n    \r\n    reset: () => set(initialState),\r\n    \r\n    // Timer methods\r\n    startTimer: () => {\r\n      // Clear any existing timer first\r\n      if (timerInterval) {\r\n        clearInterval(timerInterval);\r\n      }\r\n      \r\n      // Start a new timer that updates elapsedSeconds every second\r\n      const startTime = Date.now();\r\n      update(state => ({ ...state, startTime, elapsedSeconds: 0 }));\r\n      \r\n      timerInterval = setInterval(() => {\r\n        update(state => {\r\n          const elapsedMs = Date.now() - state.startTime;\r\n          const seconds = Math.floor(elapsedMs / 1000);\r\n          return { ...state, elapsedSeconds: seconds };\r\n        });\r\n      }, 1000);\r\n    },\r\n    \r\n    stopTimer: () => {\r\n      if (timerInterval) {\r\n        clearInterval(timerInterval);\r\n        timerInterval = null;\r\n      }\r\n    },\r\n    \r\n    // Format the elapsed seconds into HH:MM:SS\r\n    formatElapsedTime: (seconds) => {\r\n      const h = Math.floor(seconds / 3600);\r\n      const m = Math.floor((seconds % 3600) / 60);\r\n      const s = seconds % 60;\r\n      return [h, m, s].map(n => n.toString().padStart(2, '0')).join(':');\r\n    },\r\n    \r\n    // Start different conversion types\r\n    startFileConversion: async (file) => {\r\n      // Set initial state\r\n      set({\r\n        ...initialState,\r\n        status: ConversionState.STATUS.CONVERTING,\r\n        type: ConversionState.TYPE.FILE,\r\n        currentFile: file,\r\n        startTime: Date.now()\r\n      });\r\n      \r\n      // Start our timer\r\n      unifiedConversion.startTimer();\r\n    },\r\n    \r\n    startBatchConversion: async (files) => {\r\n      // Set initial state\r\n      set({\r\n        ...initialState,\r\n        status: ConversionState.STATUS.CONVERTING,\r\n        type: ConversionState.TYPE.BATCH,\r\n        totalCount: files.length,\r\n        startTime: Date.now()\r\n      });\r\n      \r\n      // Start our timer\r\n      unifiedConversion.startTimer();\r\n    },\r\n    \r\n    startWebsiteConversion: async (url) => {\r\n      // Set initial state\r\n      set({\r\n        ...initialState,\r\n        status: ConversionState.STATUS.CONVERTING, // Start directly in converting state\r\n        type: ConversionState.TYPE.WEBSITE,\r\n        currentFile: url,\r\n        startTime: Date.now()\r\n      });\r\n      \r\n      // Start our timer\r\n      unifiedConversion.startTimer();\r\n    },\r\n    \r\n    // File-specific methods\r\n    setCurrentFile: (currentFile) => \r\n      update(state => ({ ...state, currentFile })),\r\n    \r\n    // Complete conversion\r\n    completeConversion: () => {\r\n      // Stop the timer\r\n      unifiedConversion.stopTimer();\r\n      \r\n      // Update state with completion info\r\n      update(state => ({\r\n        ...state,\r\n        status: ConversionState.STATUS.COMPLETED,\r\n        progress: 100, // Explicitly set to 100%\r\n        completionTime: Date.now()\r\n      }));\r\n      \r\n      // Trigger completion callbacks\r\n      completionCallbacks.forEach(callback => callback());\r\n    },\r\n    \r\n    /**\r\n     * Adds a completion callback\r\n     * @param {Function} callback - The callback function to execute upon completion\r\n     */\r\n    onComplete: (callback) => {\r\n      completionCallbacks.push(callback);\r\n    },\r\n    \r\n    /**\r\n     * Batch updates multiple state properties atomically\r\n     * @param {Object} updates State updates to apply\r\n     */\r\n    batchUpdate: (updates) => {\r\n      update(state => {\r\n        // Create new state with updates\r\n        const newState = {\r\n          ...state,\r\n          ...updates\r\n        };\r\n\r\n\r\n        return newState;\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\n// Create and export the store\r\nexport const unifiedConversion = createUnifiedConversionStore();\r\n\r\n// Derived stores for easy access to specific properties\r\nexport const conversionProgress = derived(unifiedConversion, $state => $state.progress);\r\nexport const currentFile = derived(unifiedConversion, $state => $state.currentFile);\r\nexport const conversionError = derived(unifiedConversion, $state => $state.error);\r\nexport const conversionType = derived(unifiedConversion, $state => $state.type);\r\nexport const conversionStatus = derived(unifiedConversion, $state => $state.status);\r\n\r\n// Derived store to check if conversion is complete\r\nexport const isConversionComplete = derived(\r\n  unifiedConversion,\r\n  $state => $state.status === ConversionState.STATUS.COMPLETED\r\n);\r\n","/**\r\n * Custom Error Classes\r\n * \r\n * Defines custom error classes used throughout the application.\r\n * These help provide more specific error handling and better error messages.\r\n */\r\n\r\n/**\r\n * Base error class for conversion-related errors\r\n */\r\nexport class ConversionError extends Error {\r\n  constructor(message, options = {}) {\r\n    super(message);\r\n    this.name = 'ConversionError';\r\n    this.options = options;\r\n    this.details = options.details || null;\r\n    this.type = options.type || 'generic';\r\n    this.retryable = options.retryable !== false;\r\n  }\r\n}\r\n\r\n/**\r\n * Error class for validation failures\r\n */\r\nexport class ValidationError extends ConversionError {\r\n  constructor(message, options = {}) {\r\n    super(message, { ...options, type: 'validation' });\r\n    this.name = 'ValidationError';\r\n  }\r\n}\r\n\r\n/**\r\n * Error class for file system operation failures\r\n */\r\nexport class FileSystemError extends ConversionError {\r\n  constructor(message, options = {}) {\r\n    super(message, { ...options, type: 'filesystem' });\r\n    this.name = 'FileSystemError';\r\n    this.path = options.path;\r\n    this.operation = options.operation;\r\n  }\r\n}\r\n\r\n/**\r\n * Error class for network-related failures\r\n */\r\nexport class NetworkError extends ConversionError {\r\n  constructor(message, options = {}) {\r\n    super(message, { ...options, type: 'network' });\r\n    this.name = 'NetworkError';\r\n  }\r\n}\r\n\r\n/**\r\n * Error class for API errors\r\n */\r\nexport class ApiError extends NetworkError {\r\n  constructor(message, options = {}) {\r\n    super(message, options);\r\n    this.name = 'ApiError';\r\n    this.statusCode = options.statusCode;\r\n    this.endpoint = options.endpoint;\r\n  }\r\n}\r\n\r\n/**\r\n * Error class for electron IPC errors\r\n */\r\nexport class ElectronError extends ConversionError {\r\n  constructor(message, options = {}) {\r\n    super(message, { ...options, type: 'electron' });\r\n    this.name = 'ElectronError';\r\n    this.channel = options.channel;\r\n  }\r\n}\r\n\r\n/**\r\n * Creates a specific error instance based on type\r\n */\r\nexport function createError(type, message, options = {}) {\r\n  switch (type) {\r\n    case 'validation':\r\n      return new ValidationError(message, options);\r\n    case 'filesystem':\r\n      return new FileSystemError(message, options);\r\n    case 'network':\r\n      return new NetworkError(message, options);\r\n    case 'api':\r\n      return new ApiError(message, options);\r\n    case 'electron':\r\n      return new ElectronError(message, options);\r\n    default:\r\n      return new ConversionError(message, { ...options, type });\r\n  }\r\n}\r\n\r\n/**\r\n * Format error for user display\r\n */\r\nexport function formatError(error) {\r\n  if (error instanceof ConversionError) {\r\n    return {\r\n      message: error.message,\r\n      type: error.type,\r\n      retryable: error.retryable,\r\n      details: error.details\r\n    };\r\n  }\r\n\r\n  return {\r\n    message: error.message || 'An unknown error occurred',\r\n    type: 'unknown',\r\n    retryable: true,\r\n    details: null\r\n  };\r\n}\r\n\r\n/**\r\n * Checks if an error is retryable\r\n */\r\nexport function isRetryable(error) {\r\n  if (error instanceof ConversionError) {\r\n    return error.retryable;\r\n  }\r\n  \r\n  // Network errors are generally retryable\r\n  if (error instanceof NetworkError) {\r\n    return true;\r\n  }\r\n  \r\n  // By default, assume unknown errors are retryable\r\n  return true;\r\n}\r\n\r\n/**\r\n * Helper function to ensure errors are proper Error instances\r\n */\r\nexport function ensureError(error) {\r\n  if (error instanceof Error) {\r\n    return error;\r\n  }\r\n  \r\n  if (typeof error === 'string') {\r\n    return new Error(error);\r\n  }\r\n  \r\n  if (typeof error === 'object') {\r\n    const message = error.message || JSON.stringify(error);\r\n    return new Error(message);\r\n  }\r\n  \r\n  return new Error('An unknown error occurred');\r\n}\r\n\r\n/**\r\n * ErrorUtils - A collection of utility functions for error handling\r\n * \r\n * This object groups all error-related utility functions for easier import\r\n * and usage throughout the application.\r\n */\r\nexport const ErrorUtils = {\r\n  /**\r\n   * Creates a specific error instance based on type\r\n   */\r\n  createError: (type, message, options = {}) => createError(type, message, options),\r\n  \r\n  /**\r\n   * Format error for user display\r\n   */\r\n  formatError: (error) => formatError(error),\r\n  \r\n  /**\r\n   * Checks if an error is retryable\r\n   */\r\n  isRetryable: (error) => isRetryable(error),\r\n  \r\n  /**\r\n   * Helper function to ensure errors are proper Error instances\r\n   */\r\n  ensureError: (error) => ensureError(error),\r\n  \r\n  /**\r\n   * Wraps any error in a ConversionError if it isn't already one\r\n   */\r\n  wrap: (error) => {\r\n    if (error instanceof ConversionError) {\r\n      return error;\r\n    }\r\n    \r\n    if (error instanceof Error) {\r\n      return new ConversionError(\r\n        error.message,\r\n        { \r\n          type: 'unknown',\r\n          details: error.stack\r\n        }\r\n      );\r\n    }\r\n    \r\n    return new ConversionError(\r\n      typeof error === 'string' ? error : 'An unknown error occurred',\r\n      { type: 'unknown' }\r\n    );\r\n  }\r\n};\r\n","/**\r\n * File System Operations for Electron Client\r\n * \r\n * Manages all file system related operations through the Electron IPC bridge.\r\n * Provides a clean interface for file selection, reading, writing, and directory operations.\r\n * \r\n * Related files:\r\n * - client.js: Core client functionality\r\n * - converters/*.js: Converter implementations that use file operations\r\n */\r\n\r\nimport { ConversionError } from '../errors.js';\r\n\r\n/**\r\n * Handles file and directory selection operations\r\n */\r\nclass FileSystemOperations {\r\n/**\r\n * Opens a file selection dialog\r\n * @param {Object} options Dialog options\r\n * @returns {Promise<{success: boolean, paths?: string[]}>}\r\n */\r\nasync selectFiles(options = {}) {\r\n  try {\r\n    return await window.electron.selectFiles(options);\r\n  } catch (error) {\r\n    throw error instanceof ConversionError ? \r\n      error : \r\n      new ConversionError(error.message || 'File selection failed');\r\n  }\r\n}\r\n\r\n/**\r\n * Opens an input directory selection dialog\r\n * @param {Object} options Dialog options\r\n * @returns {Promise<{success: boolean, path?: string}>}\r\n */\r\nasync selectInputDirectory(options = {}) {\r\n  try {\r\n    return await window.electron.selectInputDirectory(options);\r\n  } catch (error) {\r\n    throw error instanceof ConversionError ? \r\n      error : \r\n      new ConversionError(error.message || 'Directory selection failed');\r\n  }\r\n}\r\n\r\n/**\r\n * Opens an output directory selection dialog\r\n * @param {Object} options Dialog options\r\n * @returns {Promise<{success: boolean, path?: string}>}\r\n */\r\nasync selectOutputDirectory(options = {}) {\r\n  try {\r\n    return await window.electron.selectOutput(options);\r\n  } catch (error) {\r\n    throw error instanceof ConversionError ? \r\n      error : \r\n      new ConversionError(error.message || 'Directory selection failed');\r\n  }\r\n}\r\n\r\n/**\r\n * Lists directory contents with detailed information\r\n * @param {string} dirPath Directory path to list\r\n * @param {Object} options Listing options\r\n * @returns {Promise<{success: boolean, items?: Array<Object>}>}\r\n */\r\nasync listDirectory(dirPath, options = {}) {\r\n  try {\r\n    return await window.electron.listDirectoryDetailed(dirPath, options);\r\n  } catch (error) {\r\n    throw error instanceof ConversionError ? \r\n      error : \r\n      new ConversionError(error.message || 'Directory listing failed');\r\n  }\r\n}\r\n\r\n/**\r\n * Shows an item in the system file explorer\r\n * @param {string} path Path to show\r\n * @returns {Promise<void>}\r\n */\r\nasync showItemInFolder(path) {\r\n  try {\r\n    await window.electron.showItemInFolder(path);\r\n  } catch (error) {\r\n    throw error instanceof ConversionError ? \r\n      error : \r\n      new ConversionError(error.message || 'Failed to show item in folder');\r\n  }\r\n}\r\n\r\n/**\r\n * Gets file or directory stats\r\n * @param {string} path Path to check\r\n * @returns {Promise<{success: boolean, stats?: Object}>}\r\n */\r\nasync getStats(path) {\r\n  try {\r\n    return await window.electron.getStats(path);\r\n  } catch (error) {\r\n    throw error instanceof ConversionError ? \r\n      error : \r\n      new ConversionError(error.message || 'Failed to get file stats');\r\n  }\r\n}\r\n\r\n/**\r\n * Reads a file's contents\r\n * @param {string} path Path to read\r\n * @returns {Promise<{success: boolean, data?: string|Buffer}>}\r\n */\r\nasync readFile(path) {\r\n  try {\r\n    return await window.electron.readFile(path);\r\n  } catch (error) {\r\n    throw error instanceof ConversionError ? \r\n      error : \r\n      new ConversionError(error.message || 'Failed to read file');\r\n  }\r\n}\r\n\r\n/**\r\n * Writes content to a file\r\n * @param {string} path Path to write to\r\n * @param {string|Buffer} content Content to write\r\n * @returns {Promise<{success: boolean}>}\r\n */\r\nasync writeFile(path, content) {\r\n  try {\r\n    return await window.electron.writeFile(path, content);\r\n  } catch (error) {\r\n    throw error instanceof ConversionError ? \r\n      error : \r\n      new ConversionError(error.message || 'Failed to write file');\r\n  }\r\n}\r\n\r\n/**\r\n * Creates a directory\r\n * @param {string} path Path to create\r\n * @returns {Promise<{success: boolean}>}\r\n */\r\nasync createDirectory(path) {\r\n  try {\r\n    return await window.electron.createDirectory(path);\r\n  } catch (error) {\r\n    throw error instanceof ConversionError ? \r\n      error : \r\n      new ConversionError(error.message || 'Failed to create directory');\r\n  }\r\n}\r\n\r\n/**\r\n * Moves a file or directory\r\n * @param {string} sourcePath Source path\r\n * @param {string} destPath Destination path\r\n * @returns {Promise<{success: boolean}>}\r\n */\r\nasync moveItem(sourcePath, destPath) {\r\n  try {\r\n    return await window.electron.moveItem(sourcePath, destPath);\r\n  } catch (error) {\r\n    throw error instanceof ConversionError ? \r\n      error : \r\n      new ConversionError(error.message || 'Failed to move item');\r\n  }\r\n}\r\n\r\n/**\r\n * Deletes a file or directory\r\n * @param {string} path Path to delete\r\n * @param {boolean} recursive Whether to delete recursively\r\n * @returns {Promise<{success: boolean}>}\r\n */\r\nasync deleteItem(path, recursive = false) {\r\n  try {\r\n    return await window.electron.deleteItem(path, recursive);\r\n  } catch (error) {\r\n    throw error instanceof ConversionError ? \r\n      error : \r\n      new ConversionError(error.message || 'Failed to delete item');\r\n  }\r\n}\r\n\r\n/**\r\n * Opens a file with the default application\r\n * @param {string} path Path to open\r\n * @returns {Promise<void>}\r\n */\r\nasync openFile(path) {\r\n  try {\r\n    await window.electron.openExternal(`file://${path}`);\r\n  } catch (error) {\r\n    throw error instanceof ConversionError ? \r\n      error : \r\n      new ConversionError(error.message || 'Failed to open file');\r\n  }\r\n}\r\n\r\n/**\r\n * Opens a folder with the default file explorer\r\n * @param {string} path Path to open\r\n * @returns {Promise<void>}\r\n */\r\nasync openFolder(path) {\r\n  try {\r\n    await window.electron.openExternal(`file://${path}`);\r\n  } catch (error) {\r\n    throw error instanceof ConversionError ? \r\n      error : \r\n      new ConversionError(error.message || 'Failed to open folder');\r\n  }\r\n}\r\n}\r\n\r\n// Create and export singleton instance\r\nconst fileSystemOperations = new FileSystemOperations();\r\nexport default fileSystemOperations;\r\n","/**\r\n * Utility functions for the Electron client\r\n * \r\n * This module contains utility functions used across the Electron client,\r\n * including ID generation, URL normalization, and type checking.\r\n * \r\n * Related files:\r\n * - client.js: Core client functionality\r\n * - converters/*.js: Converter implementations\r\n */\r\n\r\n/**\r\n * Generates a unique identifier\r\n * @returns {string} A UUID v4 or timestamp-based fallback\r\n */\r\nexport function generateId(type = '') {\r\n  try {\r\n    const uuid = crypto.randomUUID();\r\n    return type ? `${type}-${uuid}` : uuid;\r\n  } catch (e) {\r\n    const id = `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n    return type ? `${type}-${id}` : id;\r\n  }\r\n}\r\n\r\n/**\r\n * Normalizes a URL for consistent handling\r\n * @param {string} url The URL to normalize\r\n * @returns {string} The normalized URL\r\n */\r\nexport function normalizeUrl(url) {\r\n  try {\r\n    const urlObj = new URL(url);\r\n    const normalizedPath = urlObj.pathname.replace(/\\/+$/, '').toLowerCase();\r\n    urlObj.pathname = normalizedPath;\r\n    return urlObj.href.toLowerCase();\r\n  } catch (error) {\r\n    console.error('URL normalization error:', error);\r\n    return url.toLowerCase();\r\n  }\r\n}\r\n\r\n/**\r\n * Maps file extensions to their appropriate types\r\n */\r\nexport const fileCategories = {\r\n  documents: ['pdf', 'docx', 'pptx', 'html', 'htm'],\r\n  audio: ['mp3', 'wav', 'm4a', 'flac', 'ogg'],\r\n  video: ['mp4', 'webm', 'avi', 'mov', 'mkv'],\r\n  data: ['csv', 'xlsx']\r\n};\r\n\r\n/**\r\n * Checks if a file type is supported\r\n * @param {string} extension The file extension to check\r\n * @returns {boolean} Whether the file type is supported\r\n */\r\nexport function isSupportedFileType(extension) {\r\n  if (!extension) return false;\r\n  \r\n  const ext = extension.toLowerCase();\r\n  return Object.values(fileCategories).some(category => category.includes(ext));\r\n}\r\n\r\n/**\r\n * Checks if a file extension is an audio type\r\n * @param {string} ext The file extension\r\n * @returns {boolean} Whether the extension is an audio type\r\n */\r\nexport function isAudioType(ext) {\r\n  return ext && fileCategories.audio.includes(ext.toLowerCase());\r\n}\r\n\r\n/**\r\n * Checks if a file extension is a video type\r\n * @param {string} ext The file extension\r\n * @returns {boolean} Whether the extension is a video type\r\n */\r\nexport function isVideoType(ext) {\r\n  return ext && fileCategories.video.includes(ext.toLowerCase());\r\n}\r\n\r\n/**\r\n * Gets the category for a specific file type\r\n * @param {string} fileType The file extension or type\r\n * @returns {string|null} The category name or null if not found\r\n */\r\nexport function getFileCategory(fileType) {\r\n  if (!fileType) return null;\r\n  \r\n  const normalizedType = fileType.toLowerCase();\r\n  \r\n  for (const [category, types] of Object.entries(fileCategories)) {\r\n    if (types.includes(normalizedType)) {\r\n      return category;\r\n    }\r\n  }\r\n  \r\n  return null;\r\n}\r\n\r\n/**\r\n * Validates and normalizes an item for conversion\r\n * @param {Object} item The item to validate and normalize\r\n * @param {Array<string>} supportedTypes Array of supported types (defaults to all supported types if not provided)\r\n * @returns {Object} The normalized item\r\n * @throws {Error} If validation fails\r\n */\r\nexport function validateAndNormalizeItem(item, supportedTypes = ['url', 'parent', 'youtube', 'document', 'audio', 'video', 'data']) {\r\n  if (!item?.type) {\r\n    throw new Error('Invalid item: missing type');\r\n  }\r\n\r\n  const type = item.type.toLowerCase();\r\n  \r\n  // Get all specific file types from fileCategories\r\n  const allFileTypes = Object.values(fileCategories).flat();\r\n  \r\n  // Check if the type is a specific file type (like 'pdf') or a category (like 'document')\r\n  if (!supportedTypes.includes(type) && !allFileTypes.includes(type)) {\r\n    // If it's neither a supported category nor a specific file type, reject it\r\n    throw new Error(`Unsupported type: ${type}`);\r\n  }\r\n\r\n  // Special validation for parent URL\r\n  if (type === 'parent' && !item.url) {\r\n    throw new Error('Parent URL is required');\r\n  }\r\n\r\n  // Normalize URLs if present\r\n  const normalizedUrl = item.url ? normalizeUrl(item.url) : null;\r\n  const normalizedContent = item.content && typeof item.content === 'string' ? \r\n    normalizeUrl(item.content) : item.content;\r\n\r\n  // File validation for audio/video/document types\r\n  if (item.file instanceof File) {\r\n    const fileType = item.file.name.split('.').pop().toLowerCase();\r\n    \r\n    // Validate file type\r\n    if (!isSupportedFileType(fileType)) {\r\n      throw new Error(`Unsupported file type: ${fileType}`);\r\n    }\r\n  }\r\n\r\n  // Return normalized item\r\n  return {\r\n    id: item.id || generateId(),\r\n    type,\r\n    name: item.name?.trim() || 'Untitled',\r\n    url: normalizedUrl,\r\n    content: normalizedContent,\r\n    file: item.file,\r\n    options: {\r\n      includeImages: true,\r\n      includeMeta: true,\r\n      convertLinks: true,\r\n      ...(type === 'parent' && {\r\n        depth: item.options?.depth || 1,\r\n        maxPages: item.options?.maxPages || 10\r\n      }),\r\n      ...item.options\r\n    }\r\n  };\r\n}\r\n","/**\r\n * Electron API Entry Point\r\n * \r\n * This module serves as the main entry point for the Electron API implementation.\r\n * It exports all necessary components in a clean, organized way.\r\n */\r\n\r\nimport electronClient, { ConversionError } from './client.js';\r\nimport eventHandlerManager from './eventHandlers.js';\r\nimport fileSystemOperations from './fileSystem.js';\r\nimport * as utils from './utils.js';\r\n\r\n// Export the main client instance as default\r\nexport default electronClient;\r\n\r\n// Export other components for direct access if needed\r\nexport {\r\n  ConversionError,\r\n  eventHandlerManager,\r\n  fileSystemOperations,\r\n  utils\r\n};\r\n\r\n// Re-export utility functions for convenience\r\nexport const {\r\n  generateId,\r\n  normalizeUrl,\r\n  isSupportedFileType,\r\n  isAudioType,\r\n  isVideoType,\r\n  validateAndNormalizeItem\r\n} = utils;\r\n\r\n// Explicitly export getFileCategory to fix import issues\r\nexport function getFileCategory(fileType) {\r\n  return utils.getFileCategory(fileType);\r\n}\r\n\r\n// Re-export converters for direct access\r\nexport { convertFile, convertBatch, getResult } from './converters/fileConverter.js';\r\nexport { convertUrl, convertParentUrl, convertYoutube } from './converters/urlConverter.js';\r\n\r\n// Export file categories constant\r\nexport const { fileCategories } = utils;\r\n","<!-- \r\n  Container.svelte - Common layout component\r\n  Provides consistent width and padding for content sections.\r\n  Used across various pages to maintain layout consistency.\r\n  \r\n  Features:\r\n  - Responsive width constraints\r\n  - Consistent padding\r\n  - Optional class pass-through for customization\r\n-->\r\n<script>\r\n  export let className = '';\r\n</script>\r\n\r\n<div class=\"container {className}\">\r\n  <slot />\r\n</div>\r\n\r\n<style>\r\n  .container {\r\n    width: 100%;\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n    padding: 0 var(--spacing-md);\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    .container {\r\n      padding: 0 var(--spacing-sm);\r\n    }\r\n  }\r\n</style>\r\n","<!-- src/lib/components/common/TabNavigation.svelte -->\r\n<script>\r\n    import { uploadStore } from '../../stores/uploadStore';\r\n    import { fade } from 'svelte/transition';\r\n    \r\n    const tabs = [\r\n      { id: 'single', icon: '', label: 'Single Page', description: 'Convert a single webpage' },\r\n      { id: 'parent', icon: '', label: 'Full Website', description: 'Convert parent and children URLs' }\r\n      // { id: 'youtube', icon: '', label: 'YouTube', description: 'Convert YouTube videos' }\r\n    ];\r\n</script>\r\n\r\n<div class=\"tabs-nav\" role=\"tablist\">\r\n    <div class=\"tabs-container\">\r\n    {#each tabs as tab}\r\n      <button\r\n        class=\"tab-button\"\r\n        class:active={$uploadStore.activeTab === tab.id}\r\n        on:click={() => uploadStore.setActiveTab(tab.id)}\r\n        aria-selected={$uploadStore.activeTab === tab.id}\r\n        role=\"tab\"\r\n        aria-controls=\"tab-content-{tab.id}\"\r\n        title={tab.description}\r\n      >\r\n        <div class=\"tab-content\" in:fade={{ duration: 200 }}>\r\n          <span class=\"tab-icon\" aria-hidden=\"true\">{tab.icon}</span>\r\n          <span class=\"tab-label\">{tab.label}</span>\r\n        </div>\r\n      </button>\r\n    {/each}\r\n    </div>\r\n</div>\r\n\r\n<style>\r\n    .tabs-nav {\r\n      width: 100%;\r\n      background: transparent;\r\n      padding: var(--spacing-xs);\r\n      margin-bottom: var(--spacing-md);\r\n    }\r\n  \r\n    .tabs-container {\r\n      display: flex;\r\n      gap: var(--spacing-sm);\r\n      position: relative;\r\n      z-index: 1;\r\n      padding: var(--spacing-2xs);\r\n    }\r\n  \r\n    .tab-button {\r\n      flex: 1;\r\n      position: relative;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      padding: var(--spacing-sm);\r\n      background: transparent;\r\n      border: none;\r\n      border-radius: var(--rounded-lg);\r\n      color: var(--color-text-secondary);\r\n      font-size: var(--font-size-base);\r\n      font-weight: var(--font-weight-medium);\r\n      cursor: pointer;\r\n      transition: all var(--transition-duration-normal);\r\n      overflow: hidden;\r\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\r\n    }\r\n\r\n    .tab-button::before {\r\n      content: \"\";\r\n      position: absolute;\r\n      inset: 0;\r\n      background: linear-gradient(135deg, var(--color-prime), var(--color-fourth));\r\n      opacity: 0;\r\n      transition: opacity var(--transition-duration-normal);\r\n      border-radius: var(--rounded-lg);\r\n    }\r\n\r\n    .tab-button:hover:not(.active) {\r\n      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.08);\r\n      transform: translateY(-0.5px);\r\n    }\r\n\r\n    .tab-button:hover:not(.active)::before {\r\n      opacity: 0.05;\r\n    }\r\n\r\n    .tab-button.active {\r\n      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n      transform: translateY(-1px);\r\n    }\r\n\r\n    .tab-button.active::before {\r\n      opacity: 0.1;\r\n    }\r\n\r\n    .tab-content {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: var(--spacing-xs);\r\n      position: relative;\r\n      z-index: 1;\r\n    }\r\n  \r\n    .tab-icon {\r\n      font-size: 1.2em;\r\n      transition: transform var(--transition-duration-normal);\r\n    }\r\n\r\n    .tab-label {\r\n      font-weight: var(--font-weight-medium);\r\n      transition: color var(--transition-duration-normal);\r\n    }\r\n\r\n    .tab-button:hover .tab-icon,\r\n    .tab-button.active .tab-icon {\r\n      transform: scale(1.1);\r\n    }\r\n\r\n    .tab-button.active .tab-label {\r\n      color: var(--color-text);\r\n    }\r\n  \r\n    @media (max-width: 640px) {\r\n      .tabs-container {\r\n        flex-direction: column;\r\n        padding: var(--spacing-2xs);\r\n        gap: var(--spacing-xs);\r\n      }\r\n  \r\n      .tab-button {\r\n        padding: var(--spacing-xs) var(--spacing-sm);\r\n      }\r\n\r\n      .tab-content {\r\n        justify-content: flex-start;\r\n      }\r\n\r\n      .tab-icon {\r\n        font-size: 1.1em;\r\n      }\r\n    }\r\n  \r\n    /* High Contrast Mode */\r\n    @media (prefers-contrast: high) {\r\n      .tab-button.active::before {\r\n        opacity: 0.3;\r\n      }\r\n    }\r\n  \r\n    /* Reduced Motion */\r\n    @media (prefers-reduced-motion: reduce) {\r\n      .tab-button,\r\n      .tab-icon,\r\n      .tab-label {\r\n        transition: none;\r\n      }\r\n\r\n      .tab-button:hover .tab-icon,\r\n      .tab-button.active .tab-icon {\r\n        transform: none;\r\n      }\r\n    }\r\n</style>\r\n","<!-- src/lib/components/common/UrlInput.svelte -->\r\n<script>\r\n    import { createEventDispatcher } from 'svelte';\r\n    import { fade } from 'svelte/transition';\r\n    import { uploadStore } from '../../stores/uploadStore.js';\r\n    import { files } from '../../stores/files.js';\r\n\r\n    const dispatch = createEventDispatcher();\r\n\r\n    // State\r\n    let inputValue = '';\r\n    let errorMessage = '';\r\n    let loading = false;\r\n    let showTooltip = false;\r\n\r\n    // URL type configurations\r\n    const URL_TYPES = {\r\n        parent: {\r\n            icon: '',\r\n            placeholder: 'Enter parent URL to convert all linked pages',\r\n            type: 'parenturl'\r\n        },\r\n        single: {\r\n            icon: '',\r\n            placeholder: 'Enter URL to convert to Markdown',\r\n            type: 'url'\r\n        }\r\n    };\r\n\r\n    // Reactive declarations\r\n    $: activeType = $uploadStore.activeTab;\r\n    $: currentConfig = URL_TYPES[activeType] || URL_TYPES.single;\r\n    $: isValidFormat = inputValue && couldBeValidUrl(inputValue);\r\n    \r\n    // Check if there are any files in the store (to disable URL input if a file exists)\r\n    $: hasFiles = $files.length > 0 && !$files[0].url;\r\n    $: isDisabled = hasFiles || loading;\r\n\r\n    function couldBeValidUrl(input) {\r\n        try {\r\n            const trimmed = input.trim();\r\n            return /^(https?:\\/\\/)?([\\w-]+(\\.[\\w-]+)+|localhost)(:\\d+)?(\\/\\S*)?$/.test(trimmed);\r\n        } catch (error) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    function normalizeUrl(input) {\r\n        if (!input) throw new Error('URL is required');\r\n        \r\n        let url = input.trim().replace(/\\s+/g, '');\r\n        \r\n        if (!/^https?:\\/\\//i.test(url)) {\r\n            url = `https://${url}`;\r\n        }\r\n        \r\n        try {\r\n            new URL(url);\r\n            return url;\r\n        } catch (error) {\r\n            throw new Error('Invalid URL format');\r\n        }\r\n    }\r\n\r\n    function handleInput(event) {\r\n        const value = event.target.value;\r\n        inputValue = value;\r\n        uploadStore.setUrlInput(value);\r\n        errorMessage = '';\r\n    }\r\n\r\n    async function handleSubmit() {\r\n        try {\r\n            if (!inputValue.trim()) {\r\n                throw new Error('Please enter a URL');\r\n            }\r\n\r\n            const normalizedUrl = normalizeUrl(inputValue);\r\n            const urlObj = new URL(normalizedUrl);\r\n            const fileObj = {\r\n                url: normalizedUrl,\r\n                name: `${urlObj.hostname}${urlObj.pathname}`,\r\n                type: currentConfig.type,\r\n                options: {\r\n                    ...((currentConfig.type === 'parenturl') && {\r\n                        maxDepth: 3,\r\n                        maxPages: 100,\r\n                        includeImages: true,\r\n                        includeMeta: true\r\n                    })\r\n                }\r\n            };\r\n\r\n            const result = files.addFile(fileObj);\r\n            \r\n            if (result.success) {\r\n                inputValue = '';\r\n                uploadStore.setUrlInput('');\r\n                dispatch('submitUrl', { \r\n                    url: normalizedUrl, \r\n                    type: currentConfig.type \r\n                });\r\n            } else if (!result.success && result.message) {\r\n                errorMessage = result.message;\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('URL submission error:', error);\r\n            errorMessage = error.message;\r\n        }\r\n    }\r\n\r\n    function handleKeyPress(event) {\r\n        if (event.key === 'Enter' && isValidFormat) {\r\n            handleSubmit();\r\n        }\r\n    }\r\n\r\n    function handlePaste() {\r\n        const input = document.querySelector('.url-input');\r\n        input.classList.add('pasted');\r\n        setTimeout(() => input.classList.remove('pasted'), 300);\r\n    }\r\n</script>\r\n\r\n<div class=\"url-input-section\" in:fade={{ duration: 200 }}>\r\n    <div class=\"input-container\">\r\n        <input\r\n            type=\"text\"\r\n            class=\"url-input\"\r\n            placeholder={hasFiles ? \"Please remove file to add URL\" : currentConfig.placeholder}\r\n            bind:value={inputValue}\r\n            on:input={handleInput}\r\n            on:keypress={handleKeyPress}\r\n            on:paste={handlePaste}\r\n            disabled={isDisabled}\r\n            aria-label={hasFiles ? \"URL input disabled while file is present\" : currentConfig.placeholder}\r\n            aria-describedby=\"url-error\"\r\n        />\r\n\r\n        <button \r\n            class=\"submit-button\"\r\n            on:click={handleSubmit}\r\n            disabled={!isValidFormat || isDisabled}\r\n            aria-label=\"Add URL to queue\"\r\n            on:mouseenter={() => showTooltip = true}\r\n            on:mouseleave={() => showTooltip = false}\r\n        >\r\n            <span class=\"icon\"></span>\r\n            {#if showTooltip}\r\n                <div class=\"tooltip\" transition:fade={{ duration: 150 }}>\r\n                    Add to queue\r\n                </div>\r\n            {/if}\r\n        </button>\r\n    </div>\r\n\r\n    {#if errorMessage}\r\n        <div \r\n            id=\"url-error\" \r\n            class=\"error-message\" \r\n            role=\"alert\"\r\n            in:fade={{ duration: 200 }}\r\n        >\r\n            {errorMessage}\r\n        </div>\r\n    {/if}\r\n\r\n    {#if inputValue && !isValidFormat && !errorMessage}\r\n        <div \r\n            id=\"url-format-warning\" \r\n            class=\"error-message\" \r\n            role=\"alert\"\r\n            in:fade={{ duration: 200 }}\r\n        >\r\n            The URL format looks incorrect.\r\n        </div>\r\n    {/if}\r\n\r\n    {#if hasFiles}\r\n        <div\r\n            class=\"info-message\"\r\n            role=\"status\"\r\n            in:fade={{ duration: 200 }}\r\n        >\r\n            Remove the file first to add a URL instead.\r\n        </div>\r\n    {/if}\r\n</div>\r\n\r\n<style>\r\n    .url-input-section {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: var(--spacing-xs);\r\n        width: 100%;\r\n        max-width: 1000px;\r\n        margin: 0 auto;\r\n    }\r\n\r\n    .input-container {\r\n        display: flex;\r\n        align-items: center;\r\n        background: rgba(var(--color-prime-rgb), 0.03);\r\n        border-radius: var(--rounded-lg);\r\n        padding: var(--spacing-sm);\r\n        transition: all var(--transition-duration-normal) var(--transition-timing-ease);\r\n        position: relative;\r\n        height: 60px;\r\n    }\r\n\r\n    .input-container::before {\r\n        content: \"\";\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        border-radius: var(--rounded-lg);\r\n        padding: 2px;\r\n        background: linear-gradient(135deg, var(--color-prime), var(--color-fourth));\r\n        -webkit-mask: \r\n            linear-gradient(#fff 0 0) content-box, \r\n            linear-gradient(#fff 0 0);\r\n        -webkit-mask-composite: xor;\r\n        mask-composite: exclude;\r\n        pointer-events: none;\r\n    }\r\n\r\n    .input-container:focus-within {\r\n        background: rgba(var(--color-prime-rgb), 0.05);\r\n    }\r\n\r\n    .input-container:focus-within::before {\r\n        background: linear-gradient(135deg, var(--color-fourth), var(--color-prime));\r\n    }\r\n\r\n    .url-input {\r\n        flex: 1;\r\n        border: none;\r\n        background: transparent;\r\n        padding: var(--spacing-sm);\r\n        font-size: var(--font-size-base);\r\n        color: var(--color-text);\r\n        min-width: 0;\r\n        position: relative;\r\n        z-index: 1;\r\n        font-family: var(--font-mono);\r\n    }\r\n\r\n    .url-input:focus {\r\n        outline: none;\r\n    }\r\n\r\n    .url-input:disabled {\r\n        cursor: not-allowed;\r\n        opacity: 0.7;\r\n    }\r\n\r\n    .url-input.pasted {\r\n        animation: flash 0.3s ease-out;\r\n    }\r\n\r\n    @keyframes flash {\r\n        0% { background: rgba(var(--color-prime-rgb), 0); }\r\n        50% { background: rgba(var(--color-prime-rgb), 0.1); }\r\n        100% { background: rgba(var(--color-prime-rgb), 0); }\r\n    }\r\n\r\n    .submit-button {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        background: linear-gradient(135deg, var(--color-prime), var(--color-fourth));\r\n        color: white;\r\n        border: none;\r\n        border-radius: var(--rounded-md);\r\n        width: 40px;\r\n        height: 40px;\r\n        cursor: pointer;\r\n        transition: all var(--transition-duration-normal);\r\n        position: relative;\r\n        margin-left: var(--spacing-xs);\r\n    }\r\n\r\n    .submit-button:hover:not(:disabled) {\r\n        transform: translateY(-2px);\r\n        box-shadow: var(--shadow-md);\r\n    }\r\n\r\n    .submit-button:disabled {\r\n        opacity: 0.5;\r\n        cursor: not-allowed;\r\n        transform: none;\r\n    }\r\n\r\n    .submit-button .icon {\r\n        font-size: 1.2em;\r\n    }\r\n\r\n    .tooltip {\r\n        position: absolute;\r\n        top: -30px;\r\n        left: 50%;\r\n        transform: translateX(-50%);\r\n        background: var(--color-surface);\r\n        color: var(--color-text);\r\n        padding: var(--spacing-2xs) var(--spacing-xs);\r\n        border-radius: var(--rounded-sm);\r\n        font-size: var(--font-size-sm);\r\n        white-space: nowrap;\r\n        box-shadow: var(--shadow-sm);\r\n        pointer-events: none;\r\n    }\r\n\r\n    .error-message {\r\n        color: var(--color-error);\r\n        font-size: var(--font-size-sm);\r\n        padding: var(--spacing-xs) var(--spacing-sm);\r\n        border-radius: var(--rounded-md);\r\n        position: relative;\r\n        background: rgba(var(--color-error-rgb), 0.1);\r\n    }\r\n\r\n    .info-message {\r\n        color: var(--color-info);\r\n        font-size: var(--font-size-sm);\r\n        padding: var(--spacing-xs) var(--spacing-sm);\r\n        border-radius: var(--rounded-md);\r\n        position: relative;\r\n        background: rgba(var(--color-info-rgb), 0.1);\r\n    }\r\n\r\n    /* Mobile Responsiveness */\r\n    @media (max-width: 640px) {\r\n        .input-container {\r\n            height: 50px;\r\n            padding: var(--spacing-xs);\r\n        }\r\n\r\n        .url-input {\r\n            font-size: var(--font-size-sm);\r\n        }\r\n\r\n        .submit-button {\r\n            width: 36px;\r\n            height: 36px;\r\n        }\r\n\r\n        .submit-button .icon {\r\n            font-size: 1em;\r\n        }\r\n    }\r\n\r\n    /* Reduced Motion */\r\n    @media (prefers-reduced-motion: reduce) {\r\n        .input-container,\r\n        .submit-button {\r\n            transition: none;\r\n        }\r\n\r\n        .submit-button:hover:not(:disabled) {\r\n            transform: none;\r\n        }\r\n\r\n        .url-input.pasted {\r\n            animation: none;\r\n        }\r\n    }\r\n\r\n    /* High Contrast */\r\n    @media (prefers-contrast: high) {\r\n        .input-container::before {\r\n            padding: 3px;\r\n        }\r\n\r\n        .submit-button {\r\n            border: 2px solid currentColor;\r\n        }\r\n    }\r\n</style>\r\n","<!-- src/lib/components/common/DropZone.svelte -->\r\n<script>\r\n    import { createEventDispatcher } from 'svelte';\r\n    import { fade, scale } from 'svelte/transition';\r\n    import { uploadStore } from '../../stores/uploadStore';\r\n    import { getFileType } from '../../utils/fileUtils';\r\n  \r\n    export let acceptedTypes = [];\r\n    export let disabled = false;\r\n    let fileInput;\r\n    let dragCounter = 0;\r\n    \r\n    const dispatch = createEventDispatcher();\r\n  \r\n    function handleDrop(event) {\r\n      event.preventDefault();\r\n      if (disabled) return;\r\n      \r\n      uploadStore.setDragOver(false);\r\n      dragCounter = 0;\r\n      \r\n      console.log('Drop event triggered');\r\n      \r\n      const files = Array.from(event.dataTransfer.files);\r\n      // Only take the first file if multiple are dropped\r\n      const singleFile = files.length > 0 ? [files[0]] : [];\r\n      dispatch('filesDropped', { files: singleFile });\r\n    }\r\n  \r\n    function handleDragEnter(event) {\r\n      event.preventDefault();\r\n      if (disabled) return;\r\n      \r\n      dragCounter++;\r\n      uploadStore.setDragOver(true);\r\n      console.log('DragEnter event triggered, dragCounter:', dragCounter);\r\n    }\r\n  \r\n    function handleDragLeave(event) {\r\n      event.preventDefault();\r\n      if (disabled) return;\r\n      \r\n      dragCounter--;\r\n      if (dragCounter === 0) {\r\n        uploadStore.setDragOver(false);\r\n      }\r\n      console.log('DragLeave event triggered, dragCounter:', dragCounter);\r\n    }\r\n    \r\n    function handleDragOver(event) {\r\n      event.preventDefault();\r\n      if (disabled) return;\r\n      // No need to update state on every dragover event as it fires continuously\r\n    }\r\n  \r\n    function handleFileSelect(event) {\r\n      if (disabled) return;\r\n      \r\n      const files = Array.from(event.target.files);\r\n      // Only take the first file if multiple are somehow selected\r\n      const singleFile = files.length > 0 ? [files[0]] : [];\r\n      dispatch('filesSelected', { files: singleFile });\r\n      event.target.value = ''; // Reset input\r\n    }\r\n  \r\n    // Format accepted file types for display\r\n    $: displayTypes = acceptedTypes\r\n      .map(type => type.toUpperCase())\r\n      .join(', ');\r\n  </script>\r\n  \r\n  <div \r\n    class=\"drop-zone\"\r\n    class:drag-over={$uploadStore.dragOver}\r\n    class:disabled={disabled}\r\n    on:dragenter={handleDragEnter}\r\n    on:dragleave={handleDragLeave}\r\n    on:dragover={handleDragOver}\r\n    on:drop={handleDrop}\r\n    on:click={() => fileInput.click()}\r\n    on:keydown={(e) => { if (e.key === 'Enter' || e.key === ' ') fileInput.click(); }}\r\n    role=\"button\"\r\n    tabindex=\"0\"\r\n  >\r\n    <input\r\n      type=\"file\"\r\n      accept={acceptedTypes.map(ext => `.${ext}`).join(',')}\r\n      class=\"file-input\"\r\n      bind:this={fileInput}\r\n      on:change={handleFileSelect}\r\n    />\r\n    \r\n    <div class=\"drop-zone-content\" in:scale={{ duration: 200 }}>\r\n      <!-- Default State -->\r\n      {#if !$uploadStore.dragOver}\r\n        <div class=\"icon-container\">\r\n          <span class=\"icon\"></span>\r\n        </div>\r\n        <div class=\"text-content\">\r\n          <p class=\"primary-text\">Drag and drop a file here</p>\r\n          <p class=\"secondary-text\">or click to browse your computer</p>\r\n          <p class=\"file-types\">\r\n            <b>Supported formats:</b> {displayTypes}\r\n          </p>\r\n        </div>\r\n      <!-- Drag Over State -->\r\n      {:else}\r\n        <div class=\"icon-container\" in:scale={{ duration: 200 }}>\r\n          <span class=\"icon\"></span>\r\n        </div>\r\n        <p class=\"primary-text\">Drop file to convert!</p>\r\n      {/if}\r\n    </div>\r\n  </div>\r\n  \r\n  <style>\r\n    .drop-zone {\r\n      width: 100%;\r\n      min-height: 200px;\r\n      border-radius: var(--rounded-lg);\r\n      background: transparent;\r\n      transition: all var(--transition-duration-normal);\r\n      cursor: pointer;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      padding: var(--spacing-xl);\r\n      position: relative;\r\n    }\r\n\r\n    .drop-zone::before {\r\n      content: \"\";\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      border-radius: var(--rounded-lg);\r\n      padding: 2px;\r\n      background: linear-gradient(135deg, var(--color-prime), var(--color-fourth));\r\n      -webkit-mask: \r\n          linear-gradient(#fff 0 0) content-box, \r\n          linear-gradient(#fff 0 0);\r\n      -webkit-mask-composite: xor;\r\n      mask-composite: exclude;\r\n      pointer-events: none;\r\n      opacity: 0.5;\r\n    }\r\n  \r\n    .drop-zone:hover::before {\r\n      opacity: 1;\r\n    }\r\n  \r\n    .drop-zone.drag-over:not(.disabled) {\r\n      transform: scale(1.02);\r\n      box-shadow: var(--shadow-md);\r\n    }\r\n\r\n    .drop-zone.disabled {\r\n      opacity: 0.5;\r\n      cursor: not-allowed;\r\n      /* Allow pointer events but disable interactions */\r\n      pointer-events: none;\r\n    }\r\n\r\n    .drop-zone.disabled:hover::before {\r\n      opacity: 0.5;\r\n    }\r\n\r\n    .drop-zone.drag-over::before {\r\n      opacity: 1;\r\n      background: linear-gradient(135deg, var(--color-fourth), var(--color-prime));\r\n    }\r\n  \r\n    .drop-zone-content {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      gap: var(--spacing-md);\r\n      text-align: center;\r\n      position: relative;\r\n      z-index: 1;\r\n    }\r\n  \r\n    .icon-container {\r\n      position: relative;\r\n      height: 60px;\r\n      width: 60px;\r\n    }\r\n  \r\n    .icon {\r\n      position: absolute;\r\n      left: 50%;\r\n      top: 50%;\r\n      transform: translate(-50%, -50%);\r\n      font-size: var(--font-size-3xl);\r\n      transition: all var(--transition-duration-normal);\r\n    }\r\n  \r\n    .text-content {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: var(--spacing-xs);\r\n    }\r\n  \r\n    .primary-text {\r\n      font-size: var(--font-size-lg);\r\n      font-weight: var(--font-weight-medium);\r\n      color: var(--color-text);\r\n      margin: 0;\r\n    }\r\n  \r\n    .secondary-text {\r\n      font-size: var(--font-size-base);\r\n      color: var(--color-text-secondary);\r\n      margin: 0;\r\n    }\r\n  \r\n    .file-types {\r\n      font-size: var(--font-size-sm);\r\n      color: var(--color-text-secondary);\r\n      margin-top: var(--spacing-sm);\r\n    }\r\n  \r\n    .file-input {\r\n      display: none;\r\n    }\r\n  \r\n    /* Hover Effects */\r\n    .drop-zone:hover .icon {\r\n      transform: translate(-50%, -50%) scale(1.1);\r\n    }\r\n  \r\n    /* Mobile Adjustments */\r\n    @media (max-width: 640px) {\r\n      .drop-zone {\r\n        min-height: 160px;\r\n        padding: var(--spacing-lg);\r\n      }\r\n  \r\n      .icon-container {\r\n        height: 48px;\r\n        width: 48px;\r\n      }\r\n  \r\n      .primary-text {\r\n        font-size: var(--font-size-base);\r\n      }\r\n  \r\n      .secondary-text {\r\n        font-size: var(--font-size-sm);\r\n      }\r\n    }\r\n  \r\n    /* High Contrast Mode */\r\n    @media (prefers-contrast: high) {\r\n      .drop-zone::before {\r\n        padding: 3px;\r\n        opacity: 1;\r\n      }\r\n    }\r\n  \r\n    /* Reduced Motion */\r\n    @media (prefers-reduced-motion: reduce) {\r\n      .drop-zone,\r\n      .icon {\r\n        transition: none;\r\n      }\r\n  \r\n      .drop-zone.drag-over {\r\n        transform: none;\r\n      }\r\n    }\r\n  </style>\r\n","<!-- src/lib/components/common/ErrorMessage.svelte -->\r\n<script>\r\n  import { fly } from 'svelte/transition';\r\n  import { uploadStore } from '../../../lib/stores/uploadStore';\r\n</script>\r\n\r\n{#if $uploadStore.message}\r\n  <div \r\n    class=\"message {$uploadStore.messageType}\" \r\n    role=\"alert\" \r\n    in:fly={{ y: 10, duration: 200 }}\r\n  >\r\n    <span class=\"icon\">\r\n      {#if $uploadStore.messageType === 'error'}\r\n        \r\n      {:else if $uploadStore.messageType === 'success'}\r\n        \r\n      {:else}\r\n        \r\n      {/if}\r\n    </span>\r\n    <span class=\"text\">{$uploadStore.message}</span>\r\n  </div>\r\n{/if}\r\n\r\n<style>\r\n  .message {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: var(--spacing-xs);\r\n    padding: var(--spacing-sm) var(--spacing-md);\r\n    border-radius: var(--rounded-md);\r\n    font-size: var(--font-size-sm);\r\n    position: relative;\r\n    background: transparent;\r\n  }\r\n\r\n  .message::before {\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    border-radius: var(--rounded-md);\r\n    padding: 2px;\r\n    -webkit-mask: \r\n        linear-gradient(#fff 0 0) content-box, \r\n        linear-gradient(#fff 0 0);\r\n    -webkit-mask-composite: xor;\r\n    mask-composite: exclude;\r\n    pointer-events: none;\r\n  }\r\n\r\n  .error {\r\n    color: var(--color-error);\r\n  }\r\n\r\n  .error::before {\r\n    background: linear-gradient(135deg, var(--color-error), var(--color-error-light));\r\n  }\r\n\r\n  .success {\r\n    color: var(--color-success);\r\n  }\r\n\r\n  .success::before {\r\n    background: linear-gradient(135deg, var(--color-success), var(--color-success-light));\r\n  }\r\n\r\n  .info {\r\n    color: var(--color-info);\r\n  }\r\n\r\n  .info::before {\r\n    background: linear-gradient(135deg, var(--color-info), var(--color-info-light));\r\n  }\r\n\r\n  .icon {\r\n    position: relative;\r\n    z-index: 1;\r\n  }\r\n\r\n  .text {\r\n    position: relative;\r\n    z-index: 1;\r\n  }\r\n\r\n  /* High Contrast Mode */\r\n  @media (prefers-contrast: high) {\r\n    .message::before {\r\n      padding: 3px;\r\n    }\r\n  }\r\n</style>\r\n","/**\r\n * src/lib/utils/iconUtils.js\r\n */\r\n\r\n/**\r\n * Comprehensive icon configuration object\r\n */\r\nexport const FILE_ICONS = {\r\n  // Documents\r\n  txt: { icon: '', color: '#4A90E2', label: 'Text Document' },\r\n  pdf: { icon: '', color: '#E24A4A', label: 'PDF Document' },\r\n  doc: { icon: '', color: '#4A90E2', label: 'Word Document' },\r\n  docx: { icon: '', color: '#4A90E2', label: 'Word Document' },\r\n\r\n  // Data Files\r\n  csv: { icon: '', color: '#4AE266', label: 'CSV File' },\r\n  xlsx: { icon: '', color: '#4AE266', label: 'Excel Spreadsheet' },\r\n  pptx: { icon: '', color: '#E24A4A', label: 'PowerPoint Presentation' },\r\n\r\n  // Audio\r\n  audio: { icon: '', color: '#9E4AE2', label: 'Audio File' },\r\n  mp3: { icon: '', color: '#9E4AE2', label: 'Audio File' },\r\n  wav: { icon: '', color: '#9E4AE2', label: 'Audio File' },\r\n  ogg: { icon: '', color: '#9E4AE2', label: 'Audio File' },\r\n  m4a: { icon: '', color: '#9E4AE2', label: 'Audio File' },\r\n  aac: { icon: '', color: '#9E4AE2', label: 'Audio File' },\r\n  wma: { icon: '', color: '#9E4AE2', label: 'Audio File' },\r\n  mpga: { icon: '', color: '#9E4AE2', label: 'Audio File' },\r\n\r\n  // Video\r\n  video: { icon: '', color: '#E24A4A', label: 'Video File' },\r\n  mp4: { icon: '', color: '#E24A4A', label: 'Video File' },\r\n  webm: { icon: '', color: '#E24A4A', label: 'Video File' },\r\n  avi: { icon: '', color: '#E24A4A', label: 'Video File' },\r\n  mov: { icon: '', color: '#E24A4A', label: 'Video File' },\r\n  mpeg: { icon: '', color: '#E24A4A', label: 'Video File' },\r\n  mkv: { icon: '', color: '#E24A4A', label: 'Video File' },\r\n\r\n  // Special Types\r\n  url: { icon: '', color: '#4AE2B5', label: 'URL Link' },\r\n  parenturl: { icon: '', color: '#9E4AE2', label: 'Parent URL' },\r\n  // Default Fallback\r\n  default: { icon: '', color: '#B8B8B8', label: 'File' }\r\n};\r\n\r\n/**\r\n * Common MIME types mapped to extensions\r\n * Expand this map as needed\r\n */\r\nconst MIME_TYPE_MAP = {\r\n  'audio/mpeg': 'mp3',\r\n  'audio/mp3': 'mp3',\r\n  'audio/wav': 'wav',\r\n  'audio/ogg': 'ogg',\r\n  'audio/x-m4a': 'm4a',\r\n  'audio/aac': 'aac',\r\n  'audio/x-ms-wma': 'wma',\r\n  'audio/mpa': 'mpga',\r\n  'video/mp4': 'mp4',\r\n  'video/webm': 'webm',\r\n  'video/x-msvideo': 'avi',\r\n  'video/quicktime': 'mov',\r\n  'video/mpeg': 'mpeg',\r\n  'video/x-matroska': 'mkv',\r\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'docx',\r\n  'application/pdf': 'pdf',\r\n  'application/vnd.ms-excel': 'xlsx',\r\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'xlsx',\r\n  'text/csv': 'csv',\r\n  'application/csv': 'csv',\r\n  // Add more MIME types as needed\r\n};\r\n\r\n/**\r\n * Returns the icon configuration for a given file type or extension.\r\n *\r\n * @param {string} type - The file type, extension, or possibly a MIME type.\r\n * @returns {Object} Icon configuration object\r\n */\r\nexport function getFileIconConfig(type) {\r\n  console.log('Getting icon config for type:', type);\r\n\r\n  if (!type) {\r\n    console.log('No type provided, using default');\r\n    return FILE_ICONS.default;\r\n  }\r\n\r\n  let normalized = type.toLowerCase();\r\n  console.log('Normalized type:', normalized);\r\n\r\n  // If it's a known MIME type, map it to the extension first\r\n  if (MIME_TYPE_MAP[normalized]) {\r\n    normalized = MIME_TYPE_MAP[normalized];\r\n    console.log('Mapped MIME type to:', normalized);\r\n  }\r\n\r\n  // Remove any leading '.' (e.g., '.pdf' -> 'pdf')\r\n  normalized = normalized.replace(/^\\.*/, '');\r\n\r\n  // Direct lookup first\r\n  if (FILE_ICONS[normalized]) {\r\n    console.log('Found direct icon match:', FILE_ICONS[normalized].icon);\r\n    return FILE_ICONS[normalized];\r\n  }\r\n\r\n  // Try base type\r\n  const baseType = getBaseFileType(normalized);\r\n  if (baseType && FILE_ICONS[baseType]) {\r\n    console.log('Found base type match:', FILE_ICONS[baseType].icon);\r\n    return FILE_ICONS[baseType];\r\n  }\r\n\r\n  console.log('No match found, using default');\r\n  return FILE_ICONS.default;\r\n}\r\n\r\n/**\r\n * Maps an extension to a base file type category (audio, video, etc.)\r\n *\r\n * @param {string} extension - File extension\r\n * @returns {string|null} Base file type or null\r\n */\r\nfunction getBaseFileType(extension) {\r\n  const typeMap = {\r\n    audio: ['mp3', 'wav', 'ogg', 'm4a', 'aac', 'wma', 'mpga'],\r\n    video: ['mp4', 'webm', 'avi', 'mov', 'mpeg', 'mkv'],\r\n    data: ['csv', 'xlsx', 'xls', 'json', 'yaml', 'yml'] // Added data types\r\n  };\r\n\r\n  // Ensure lowercase comparison\r\n  extension = extension.toLowerCase();\r\n  \r\n  for (const [type, extensions] of Object.entries(typeMap)) {\r\n    if (extensions.includes(extension)) {\r\n      return type;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Convenience function that returns only the icon character\r\n *\r\n * @param {string} type - The file type, extension, or MIME type\r\n * @returns {string} The emoji icon\r\n */\r\nexport function getFileIcon(type) {\r\n  return getFileIconConfig(type).icon;\r\n}\r\n","<script>\r\n    import { createEventDispatcher } from 'svelte';\r\n    import { getFileIcon } from '../../../lib/utils/iconUtils.js';\r\n    \r\n    export let file;\r\n    \r\n    const dispatch = createEventDispatcher();\r\n  \r\n    $: fileIcon = getFileIcon(file.type);\r\n    \r\n    function handleRemove() {\r\n      dispatch('remove', { id: file.id });\r\n    }\r\n</script>\r\n  \r\n<div class=\"file-card\">\r\n\r\n  <div class=\"file-info\">\r\n      <span class=\"icon\" aria-hidden=\"true\">\r\n          {fileIcon}\r\n      </span>\r\n      <span class=\"file-name\" title={file.name}>\r\n          {file.name}\r\n      </span>\r\n  </div>\r\n\r\n  <button \r\n      class=\"delete-button\" \r\n      on:click={handleRemove}\r\n      aria-label={`Remove ${file.name}`}\r\n      title=\"Remove file\"\r\n  >\r\n      \r\n  </button>\r\n</div>\r\n  \r\n<style>\r\n  .file-card {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: var(--spacing-sm);\r\n      padding: var(--spacing-sm) var(--spacing-md);\r\n      background: var(--color-background);\r\n      border-radius: var(--rounded-md);\r\n      transition: all 0.2s ease;\r\n      box-shadow: var(--shadow-sm);\r\n  }\r\n\r\n  .file-card:hover {\r\n      background: rgba(var(--color-prime-rgb), 0.05);\r\n      transform: translateY(-1px);\r\n      box-shadow: var(--shadow-md);\r\n  }\r\n\r\n\r\n  .file-info {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: var(--spacing-sm);\r\n      flex: 1;\r\n      min-width: 0;\r\n  }\r\n\r\n  .icon {\r\n      font-size: 1.2em;\r\n      opacity: 0.8;\r\n  }\r\n\r\n  .file-name {\r\n      flex: 1;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n      font-weight: 500;\r\n      color: var(--color-text);\r\n  }\r\n\r\n  .delete-button {\r\n      padding: var(--spacing-xs);\r\n      border: none;\r\n      background: transparent;\r\n      cursor: pointer;\r\n      opacity: 0.5;\r\n      transition: all 0.2s ease;\r\n      border-radius: var(--rounded-sm);\r\n  }\r\n\r\n  .delete-button:hover {\r\n      opacity: 1;\r\n      background: rgba(var(--color-error-rgb), 0.1);\r\n      color: var(--color-error);\r\n      transform: scale(1.1);\r\n  }\r\n\r\n  /* High Contrast Mode */\r\n  @media (prefers-contrast: high) {\r\n\r\n      .file-card {\r\n          box-shadow: var(--shadow-lg);\r\n      }\r\n  }\r\n\r\n  /* Reduced Motion */\r\n  @media (prefers-reduced-motion: reduce) {\r\n      .file-card,\r\n      .select-checkbox,\r\n      .delete-button {\r\n          transition: none;\r\n      }\r\n\r\n      .file-card:hover {\r\n          transform: none;\r\n      }\r\n\r\n      .delete-button:hover {\r\n          transform: none;\r\n      }\r\n  }\r\n</style>\r\n","<!-- src/lib/components/file/FileList.svelte -->\r\n<script>\r\n  import { files, FileStatus } from '../../../lib/stores/files.js';\r\n  import { fade, slide } from 'svelte/transition';\r\n  import FileCard from './FileCard.svelte';\r\n  import { createEventDispatcher } from 'svelte';\r\n  \r\n  const dispatch = createEventDispatcher();\r\n\r\n  // Add prop to accept conversion button\r\n  export let showConversionButton = false;\r\n\r\n  function handleRemove(event) {\r\n      const { id } = event.detail;\r\n      if (!id) return;\r\n\r\n      const result = files.removeFile(id);\r\n      if (result.success) {\r\n          dispatch('fileRemoved', { id, file: result.file });\r\n          if ($files.length === 0) {\r\n              files.clearFiles();\r\n          }\r\n      } else {\r\n          console.error('Error removing file:', result.message);\r\n      }\r\n  }\r\n\r\n  // Reactive declarations\r\n  $: hasFiles = $files && $files.length > 0;\r\n</script>\r\n\r\n{#if hasFiles}\r\n  <div class=\"file-list-container\" in:slide>\r\n      <div class=\"file-list\">\r\n          {#each $files as file (file.id)}\r\n              <div\r\n                  class=\"file-item\"\r\n                  in:fade={{ duration: 200 }}\r\n                  out:fade={{ duration: 150 }}\r\n              >\r\n                  <FileCard\r\n                      {file}\r\n                      on:remove={handleRemove}\r\n                  />\r\n              </div>\r\n          {/each}\r\n      </div>\r\n      \r\n      <!-- Add slot for conversion button -->\r\n      {#if showConversionButton}\r\n        <div class=\"conversion-button-container\">\r\n          <slot name=\"conversion-button\"></slot>\r\n        </div>\r\n      {/if}\r\n  </div>\r\n{:else}\r\n  <div class=\"empty-state\" in:fade>\r\n      <p>No files added yet.</p>\r\n  </div>\r\n{/if}\r\n\r\n<style>\r\n  /* Add style for conversion button container */\r\n  .conversion-button-container {\r\n    margin-top: var(--spacing-md);\r\n    width: 100%;\r\n    padding: 0 var(--spacing-sm);\r\n  }\r\n  .file-list-container {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: var(--spacing-md);\r\n      width: 100%;\r\n      background: transparent;\r\n      border-radius: var(--rounded-lg);\r\n      padding: var(--spacing-md);\r\n      position: relative;\r\n      box-shadow: var(--shadow-sm);\r\n  }\r\n\r\n  .file-list-container::before {\r\n      content: \"\";\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      border-radius: var(--rounded-lg);\r\n      padding: 2px;\r\n      background: linear-gradient(135deg, var(--color-prime), var(--color-fourth));\r\n      -webkit-mask: \r\n          linear-gradient(#fff 0 0) content-box, \r\n          linear-gradient(#fff 0 0);\r\n      -webkit-mask-composite: xor;\r\n      mask-composite: exclude;\r\n      pointer-events: none;\r\n      opacity: 0.3;\r\n  }\r\n\r\n\r\n  /* Ensure the file list doesn't grow too large */\r\n  .file-list {\r\n    max-height: 300px; /* Reduced from 400px to make room for button */\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: var(--spacing-xs);\r\n      max-height: 400px;\r\n      overflow-y: auto;\r\n      padding: var(--spacing-xs);\r\n      background: rgba(var(--color-prime-rgb), 0.02);\r\n      border-radius: var(--rounded-md);\r\n      scrollbar-width: thin;\r\n      scrollbar-color: var(--color-border) transparent;\r\n      position: relative;\r\n      z-index: 1;\r\n  }\r\n\r\n  .file-list::-webkit-scrollbar {\r\n      width: 8px;\r\n  }\r\n\r\n  .file-list::-webkit-scrollbar-track {\r\n      background: transparent;\r\n  }\r\n\r\n  .file-list::-webkit-scrollbar-thumb {\r\n      background-color: var(--color-border);\r\n      border-radius: var(--rounded-full);\r\n      border: 2px solid transparent;\r\n  }\r\n\r\n  .file-item {\r\n      width: 100%;\r\n      position: relative;\r\n      z-index: 1;\r\n  }\r\n\r\n  .empty-state {\r\n      text-align: center;\r\n      padding: var(--spacing-xl);\r\n      color: var(--color-text-secondary);\r\n      background: transparent;\r\n      border-radius: var(--rounded-lg);\r\n      position: relative;\r\n  }\r\n\r\n  .empty-state::before {\r\n      content: \"\";\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      border-radius: var(--rounded-lg);\r\n      padding: 2px;\r\n      background: linear-gradient(135deg, var(--color-prime), var(--color-fourth));\r\n      -webkit-mask: \r\n          linear-gradient(#fff 0 0) content-box, \r\n          linear-gradient(#fff 0 0);\r\n      -webkit-mask-composite: xor;\r\n      mask-composite: exclude;\r\n      pointer-events: none;\r\n      opacity: 0.2;\r\n  }\r\n\r\n  /* High Contrast Mode */\r\n  @media (prefers-contrast: high) {\r\n      .file-list-container::before,\r\n      .empty-state::before {\r\n          padding: 3px;\r\n          opacity: 1;\r\n      }\r\n  }\r\n\r\n  /* Reduced Motion */\r\n  @media (prefers-reduced-motion: reduce) {\r\n      /* Reduced motion styles */\r\n  }\r\n</style>\r\n","<!-- src/lib/components/ApiKeyInput.svelte -->\r\n<script>\r\n  import { onMount, onDestroy } from 'svelte';\r\n  import { slide, fade } from 'svelte/transition';\r\n  import { getApiKey, setApiKey } from '../stores/apiKey.js';\r\n  import Button from './common/Button.svelte';\r\n\r\n  // Props\r\n  export let provider = 'openai';\r\n  export let title = provider === 'openai' ? 'OpenAI API Key' : 'Mistral API Key';\r\n  export let placeholder = provider === 'openai' ? 'Enter your OpenAI API Key' : 'Enter your Mistral API Key';\r\n  export let infoText = provider === 'openai' \r\n    ? 'Required for audio/video transcription.' \r\n    : 'Required for advanced OCR processing.';\r\n  export let helpLink = provider === 'openai' \r\n    ? '/help#api-keys' \r\n    : 'https://console.mistral.ai/';\r\n  export let helpText = provider === 'openai'\r\n    ? 'Learn more about API keys'\r\n    : 'Get a Mistral API key';\r\n\r\n  let apiKeyValue = '';\r\n  let showApiKey = false;\r\n  let saving = false;\r\n  let error = '';\r\n  let keyStatus = { exists: false, valid: false };\r\n  let isInitialized = false;\r\n  let isReady = false;\r\n\r\n  onMount(() => {\r\n    if (window?.electron) {\r\n      window.electron.onReady(async () => {\r\n        try {\r\n          isReady = true;\r\n          await initializeApiKey();\r\n        } catch (err) {\r\n          console.error('Failed to initialize API key component:', err);\r\n          error = 'Failed to initialize: ' + (err.message || 'Unknown error');\r\n        }\r\n      });\r\n    } else {\r\n      error = 'Electron API not available';\r\n    }\r\n  });\r\n\r\n  // Initialize API key state\r\n  async function initializeApiKey() {\r\n    try {\r\n      // Initialize with current value from store\r\n      apiKeyValue = await getApiKey(provider) || '';\r\n      \r\n      // Check if API key exists\r\n      const result = await window.electron.checkApiKeyExists(provider);\r\n      keyStatus = { exists: result.exists, valid: true };\r\n      \r\n      // If key exists, try to load it\r\n      if (result.exists) {\r\n        const response = await window.electron.getApiKey(provider);\r\n        if (response.success && response.key) {\r\n          apiKeyValue = response.key;\r\n          await setApiKey(response.key, provider);\r\n        }\r\n      }\r\n      \r\n      isInitialized = true;\r\n    } catch (err) {\r\n      console.error(`Error initializing ${provider} API key:`, err);\r\n      error = err.message || `Failed to initialize ${provider} API key`;\r\n    }\r\n  }\r\n\r\n  // Update store directly as user types\r\n  function handleInput(event) {\r\n    apiKeyValue = event.target.value;\r\n    setApiKey(apiKeyValue, provider);\r\n    error = '';\r\n  }\r\n\r\n  function toggleShowApiKey() {\r\n    showApiKey = !showApiKey;\r\n  }\r\n  \r\n  // Save API key\r\n  async function saveApiKey() {\r\n    if (!apiKeyValue) return;\r\n    \r\n    saving = true;\r\n    error = '';\r\n    \r\n    try {\r\n      const result = await window.electron.saveApiKey(apiKeyValue, provider);\r\n      if (!result.success) {\r\n        throw new Error(result.error || 'Failed to save API key');\r\n      }\r\n      \r\n      keyStatus = { exists: true, valid: true };\r\n    } catch (e) {\r\n      error = e.message;\r\n    } finally {\r\n      saving = false;\r\n    }\r\n  }\r\n  \r\n  // Delete API key\r\n  async function deleteApiKey() {\r\n    try {\r\n      await window.electron.deleteApiKey(provider);\r\n      keyStatus = { exists: false, valid: false };\r\n      apiKeyValue = '';\r\n      setApiKey('', provider);\r\n    } catch (e) {\r\n      error = e.message;\r\n    }\r\n  }\r\n</script>\r\n\r\n<div class=\"api-key-wrapper api-key-input-section\" class:loading={!isInitialized}>\r\n  {#if !isReady}\r\n    <div class=\"api-key-header\">\r\n      <h3>Loading...</h3>\r\n    </div>\r\n  {:else if error}\r\n    <div class=\"api-key-header error\">\r\n      <h3>{title}</h3>\r\n      <div class=\"error-message\">{error}</div>\r\n    </div>\r\n  {:else}\r\n    <div class=\"api-key-header\">\r\n      <h3>{title}</h3>\r\n      {#if keyStatus.exists}\r\n        <div class=\"key-status success\">\r\n          <span> API key is configured</span>\r\n          <button on:click={deleteApiKey} class=\"delete-btn\">Remove</button>\r\n        </div>\r\n      {/if}\r\n    </div>\r\n  {/if}\r\n\r\n  {#if !keyStatus.exists}\r\n    <div class=\"input-container\">\r\n      <!-- Use separate input elements for text and password -->\r\n      {#if showApiKey}\r\n        <input\r\n          type=\"text\"\r\n          class=\"api-key-input\"\r\n          placeholder={placeholder}\r\n          bind:value={apiKeyValue}\r\n          on:input={handleInput}\r\n          class:error={!!error}\r\n        />\r\n      {:else}\r\n        <input\r\n          type=\"password\"\r\n          class=\"api-key-input\"\r\n          placeholder={placeholder}\r\n          bind:value={apiKeyValue}\r\n          on:input={handleInput}\r\n          class:error={!!error}\r\n        />\r\n      {/if}\r\n\r\n      <!-- Show / Hide API Key -->\r\n      <button\r\n        type=\"button\"\r\n        class=\"toggle-button\"\r\n        on:click={toggleShowApiKey}\r\n        aria-label={showApiKey ? 'Hide API Key' : 'Show API Key'}\r\n      >\r\n        {showApiKey ? '' : ''}\r\n      </button>\r\n      \r\n      <Button\r\n        on:click={saveApiKey}\r\n        disabled={saving || !apiKeyValue}\r\n        variant=\"primary\"\r\n        size=\"small\"\r\n      >\r\n        {#if saving}\r\n          Saving...\r\n        {:else}\r\n          Save\r\n        {/if}\r\n      </Button>\r\n    </div>\r\n  {/if}\r\n\r\n  {#if error}\r\n    <div class=\"error-message\" transition:fade={{ duration: 200 }}>{error}</div>\r\n  {/if}\r\n\r\n  <div class=\"api-key-info\">\r\n    <p>\r\n      {infoText} Your key is stored securely on your device.\r\n    </p>\r\n    <a href={helpLink} target={provider !== 'openai' ? '_blank' : undefined} rel={provider !== 'openai' ? 'noopener noreferrer' : undefined} class=\"help-link\">{helpText}</a>\r\n  </div>\r\n</div>\r\n\r\n<style>\r\n  .api-key-wrapper {\r\n    width: 100%;\r\n    max-width: 1000px; /* Matches FileUploader container width */\r\n    margin: 0 auto;\r\n    padding: var(--spacing-md);\r\n    background: rgba(var(--color-prime-rgb), 0.05);\r\n    border-radius: var(--rounded-md);\r\n  }\r\n\r\n  .api-key-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: var(--spacing-sm);\r\n  }\r\n\r\n  h3 {\r\n    margin: 0;\r\n    font-size: var(--font-size-base);\r\n    font-weight: 600;\r\n    color: var(--color-text);\r\n  }\r\n\r\n  .api-key-input-section {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: var(--spacing-sm);\r\n  }\r\n\r\n  .input-container {\r\n    width: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n    background: var(--color-surface);\r\n    border: 2px solid var(--color-border);\r\n    border-radius: var(--rounded-lg);\r\n    padding: var(--spacing-xs);\r\n    gap: var(--spacing-xs);\r\n  }\r\n\r\n  .input-container:focus-within {\r\n    border-color: var(--color-prime);\r\n    box-shadow: var(--shadow-sm);\r\n  }\r\n\r\n  .api-key-input {\r\n    flex: 1;\r\n    border: none;\r\n    background: transparent;\r\n    padding: var(--spacing-sm);\r\n    font-size: var(--font-size-base);\r\n    color: var(--color-text);\r\n  }\r\n\r\n  .api-key-input:focus {\r\n    outline: none;\r\n  }\r\n  \r\n  .api-key-input.error {\r\n    color: var(--color-error);\r\n  }\r\n\r\n  .toggle-button {\r\n    background: none;\r\n    border: none;\r\n    cursor: pointer;\r\n    padding: var(--spacing-xs);\r\n    font-size: var(--font-size-base);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    color: var(--color-text-light);\r\n  }\r\n  \r\n  .toggle-button:hover {\r\n    color: var(--color-text);\r\n  }\r\n\r\n  .api-key-info {\r\n    font-size: var(--font-size-sm);\r\n    color: var(--color-text-secondary);\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    flex-wrap: wrap;\r\n    gap: var(--spacing-xs);\r\n  }\r\n  \r\n  .api-key-info p {\r\n    margin: 0;\r\n  }\r\n  \r\n  .help-link {\r\n    color: var(--color-prime);\r\n    text-decoration: none;\r\n    font-size: var(--font-size-sm);\r\n  }\r\n  \r\n  .help-link:hover {\r\n    text-decoration: underline;\r\n  }\r\n  \r\n  .key-status {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: var(--spacing-sm);\r\n    font-size: var(--font-size-sm);\r\n  }\r\n  \r\n  .success {\r\n    color: var(--color-success, #4caf50);\r\n  }\r\n  \r\n  .delete-btn {\r\n    background: var(--color-error);\r\n    color: white;\r\n    border: none;\r\n    border-radius: var(--rounded-sm);\r\n    padding: var(--spacing-2xs) var(--spacing-xs);\r\n    font-size: var(--font-size-xs);\r\n    cursor: pointer;\r\n  }\r\n  \r\n  .error-message {\r\n    color: var(--color-error);\r\n    font-size: var(--font-size-sm);\r\n    margin-top: 0;\r\n  }\r\n  \r\n  @media (max-width: 640px) {\r\n    .api-key-wrapper {\r\n      padding: var(--spacing-sm);\r\n    }\r\n    \r\n    .api-key-info {\r\n      flex-direction: column;\r\n      align-items: flex-start;\r\n    }\r\n  }\r\n\r\n  .loading {\r\n    opacity: 0.7;\r\n    pointer-events: none;\r\n  }\r\n\r\n  .error-message {\r\n    color: var(--color-error);\r\n    font-size: var(--font-size-sm);\r\n    margin-top: var(--spacing-xs);\r\n  }\r\n</style>\r\n","<!-- src/lib/components/FileUploader.svelte -->\r\n<script>\r\n  import { createEventDispatcher } from 'svelte';\r\n  import { files } from '../stores/files.js';\r\n  import { uploadStore } from '../stores/uploadStore.js';\r\n  import { fade } from 'svelte/transition';\r\n  import { apiKey } from '../stores/apiKey.js';\r\n  import { requiresApiKey, isValidFileType } from '../utils/fileUtils.js';\r\n  import { fileCategories, generateId, normalizeUrl } from '../api/electron';\r\n  import electronClient from '../api/electron';\r\n  import Container from './common/Container.svelte';\r\n  import TabNavigation from './common/TabNavigation.svelte';\r\n  import UrlInput from './common/UrlInput.svelte';\r\n  import DropZone from './common/DropZone.svelte';\r\n  import ErrorMessage from './common/ErrorMessage.svelte';\r\n  import FileList from './file/FileList.svelte';\r\n  import ApiKeyInput from './ApiKeyInput.svelte';\r\n  import NativeFileSelector from './file/NativeFileSelector.svelte';\r\n  import FolderSelector from './file/FolderSelector.svelte';\r\n  import Button from './common/Button.svelte';\r\n  \r\n  // Add prop to control when to show the conversion button\r\n  export let showConversionButton = false;\r\n  // Add prop for the conversion handler\r\n  export let onStartConversion = () => {};\r\n\r\n  const dispatch = createEventDispatcher();\r\n\r\n  // Use fileCategories from electron utils\r\n  const SUPPORTED_FILES = fileCategories;\r\n  const SUPPORTED_EXTENSIONS = Object.values(SUPPORTED_FILES).flat();\r\n\r\n  // Reactive declarations for UI state\r\n  $: showFileList = $files.length > 0;\r\n  $: needsApiKey = $files.some(file => requiresApiKey(file));\r\n  // Check if there's a URL in the files store (to disable file uploader if a URL exists)\r\n  $: hasUrl = $files.length > 0 && $files[0].url;\r\n  $: fileUploaderDisabled = hasUrl;\r\n  \r\n  // Debug log for disabled state\r\n  $: if (fileUploaderDisabled) {\r\n    console.log('DropZone disabled because hasUrl is true:', $files);\r\n  }\r\n  $: fileUploaderDisabled = hasUrl;\r\n\r\n  function showFeedback(message, type = 'info') {\r\n    if (type !== 'success') {\r\n      uploadStore.setMessage(message, type);\r\n      return setTimeout(() => uploadStore.clearMessage(), 5000);\r\n    }\r\n  }\r\n\r\n  function validateFile(file) {\r\n    // Handle file path (string) from Electron or File object from web\r\n    const isFilePath = typeof file === 'string';\r\n    const fileName = isFilePath ? file.split(/[/\\\\]/).pop() : file.name;\r\n    const extension = fileName.split('.').pop().toLowerCase();\r\n    \r\n    if (!isValidFileType(extension)) {\r\n      return { valid: false, message: `Unsupported file type: ${fileName}` };\r\n    }\r\n\r\n    // Size validation removed - no file size limits\r\n\r\n    return { valid: true };\r\n  }\r\n\r\n  function getFileCategory(extension) {\r\n    extension = extension.toLowerCase();\r\n    \r\n    if (['csv', 'xlsx', 'xls'].includes(extension)) {\r\n      return 'data';\r\n    }\r\n\r\n    for (const [category, extensions] of Object.entries(SUPPORTED_FILES)) {\r\n      if (extensions.includes(extension)) {\r\n        return category;\r\n      }\r\n    }\r\n    return 'unknown';\r\n  }\r\n\r\n  /**\r\n   * Handles files added to the uploader\r\n   * Modified to only process the first file if multiple are provided\r\n   */\r\n  function handleFilesAdded(newFiles) {\r\n    uploadStore.clearMessage();\r\n    \r\n    // Only process the first file if multiple are provided\r\n    if (newFiles.length === 0) return;\r\n    \r\n    // Take only the first file\r\n    const file = newFiles[0];\r\n    \r\n    const validation = validateFile(file);\r\n    if (!validation.valid) {\r\n      showFeedback(validation.message, 'error');\r\n      return;\r\n    }\r\n\r\n    // Handle file path (string) from Electron or File object from web\r\n    const isFilePath = typeof file === 'string';\r\n    const fileName = isFilePath ? file.split(/[/\\\\]/).pop() : file.name;\r\n    const extension = fileName.split('.').pop().toLowerCase();\r\n    const requiresKey = requiresApiKey(isFilePath ? { type: extension } : file);\r\n\r\n    const newFile = {\r\n      id: generateId(),\r\n      name: fileName,\r\n      file: file, // This will be either a File object or a file path string\r\n      path: isFilePath ? file : null, // Store the full path if it's from Electron\r\n      type: extension,\r\n      status: 'Ready',\r\n      progress: 0,\r\n      selected: false,\r\n      requiresApiKey: requiresKey,\r\n      isNative: isFilePath // Flag to indicate if this is a native file path\r\n    };\r\n\r\n    const result = files.addFile(newFile);\r\n    if (result.success) {\r\n      dispatch('filesAdded', { files: [newFile] });\r\n    } else {\r\n      showFeedback(result.message, 'error');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles files selected through the native file selector\r\n   */\r\n  function handleNativeFilesSelected(event) {\r\n    const { paths } = event.detail;\r\n    if (paths && paths.length > 0) {\r\n      // Only pass the first path if multiple are selected\r\n      handleFilesAdded([paths[0]]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles directory selected through the native file selector\r\n   */\r\n  function handleDirectorySelected(event) {\r\n    const { path } = event.detail;\r\n    if (path) {\r\n      // For now, we just store the output directory\r\n      // This will be used when saving conversion results\r\n      localStorage.setItem('lastOutputDirectory', path);\r\n      showFeedback(`Output directory set to: ${path}`, 'success');\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Handles folder selected for input\r\n   */\r\n  function handleFolderSelected(event) {\r\n    const { path, contents } = event.detail;\r\n    if (path) {\r\n      showFeedback(`Input folder selected: ${path}`, 'success');\r\n      \r\n      // If the folder has contents, we can process them\r\n      if (contents && contents.length > 0) {\r\n        // Filter for supported file types\r\n        const supportedFiles = contents\r\n          .filter(item => !item.isDirectory)\r\n          .filter(item => SUPPORTED_EXTENSIONS.includes(item.type))\r\n          .map(item => item.path);\r\n        \r\n        if (supportedFiles.length > 0) {\r\n          // Only pass the first supported file\r\n          handleFilesAdded([supportedFiles[0]]);\r\n        } else {\r\n          showFeedback('No supported files found in the selected folder', 'warning');\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Handles file selected from folder browser\r\n   */\r\n  function handleFileSelectedFromFolder(event) {\r\n    const { path } = event.detail;\r\n    if (path) {\r\n      handleFilesAdded([path]);\r\n    }\r\n  }\r\n\r\n  async function handleFileUpload(event) {\r\n    const uploadedFiles = Array.from(event.target.files || []);\r\n    // Only pass the first file if multiple are somehow selected\r\n    if (uploadedFiles.length > 0) {\r\n      handleFilesAdded([uploadedFiles[0]]);\r\n      \r\n      const needsKey = requiresApiKey(uploadedFiles[0]);\r\n      if (needsKey && !$apiKey) {\r\n        setTimeout(() => {\r\n          const apiKeySection = document.querySelector('.api-key-input-section');\r\n          apiKeySection?.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n        }, 300);\r\n      } else {\r\n        dispatch('startConversion');\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<div class=\"file-uploader\" in:fade={{ duration: 200 }}>\r\n  <Container>\r\n    <div class=\"uploader-content\">\r\n      <!-- Only show input options when no file/URL is present -->\r\n      {#if !showFileList}\r\n        <!-- URL Input Section -->\r\n        <div class=\"section\">\r\n          <TabNavigation />\r\n          <UrlInput />\r\n        </div>\r\n\r\n        <div class=\"section-divider\"></div>\r\n\r\n        <!-- File Upload Section -->\r\n        <div class=\"section\">\r\n          <div>\r\n          <DropZone\r\n            acceptedTypes={SUPPORTED_EXTENSIONS}\r\n            disabled={fileUploaderDisabled}\r\n            on:filesDropped={(event) => {\r\n              console.log('Files dropped event received:', event.detail);\r\n              handleFilesAdded(event.detail.files);\r\n            }}\r\n            on:filesSelected={(event) => {\r\n              console.log('Files selected event received:', event.detail);\r\n              handleFilesAdded(event.detail.files);\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n      \r\n      {#if $uploadStore.message}\r\n        <div class=\"section\">\r\n          <ErrorMessage />\r\n        </div>\r\n      {/if}\r\n\r\n      {/if}\r\n      \r\n      <!-- Error messages and file list always shown when needed -->\r\n      {#if $uploadStore.message}\r\n        <div class=\"section\">\r\n          <ErrorMessage />\r\n        </div>\r\n      {/if}\r\n\r\n      {#if showFileList}\r\n        <div class=\"section\">\r\n          <FileList\r\n            showConversionButton={showConversionButton}\r\n            on:fileRemoved={() => {\r\n              // This will be called when a file is removed\r\n              // The reactive variable showFileList will automatically update\r\n              // based on $files.length, which will re-reveal the input options\r\n            }}\r\n          >\r\n            <div slot=\"conversion-button\">\r\n              <Button\r\n                variant=\"primary\"\r\n                size=\"large\"\r\n                fullWidth\r\n                on:click={onStartConversion}\r\n              >\r\n                Start Conversion\r\n              </Button>\r\n            </div>\r\n          </FileList>\r\n        </div>\r\n      {/if}\r\n\r\n      {#if needsApiKey}\r\n        <div class=\"section\">\r\n          <ApiKeyInput />\r\n        </div>\r\n      {/if}\r\n\r\n    </div>\r\n  </Container>\r\n</div>\r\n\r\n<style>\r\n  .file-uploader {\r\n    width: 100%;\r\n    max-width: 1000px;\r\n    margin: 0 auto;\r\n  }\r\n\r\n  .uploader-content {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: var(--spacing-md);\r\n  }\r\n\r\n  .section {\r\n    width: 100%;\r\n  }\r\n\r\n  .section-divider {\r\n    width: 100%;\r\n    height: 1px;\r\n    background: linear-gradient(90deg, var(--color-prime), var(--color-fourth));\r\n    opacity: 0.3;\r\n  }\r\n  \r\n  .disabled {\r\n    opacity: 0.5;\r\n    pointer-events: none;\r\n    position: relative;\r\n  }\r\n  \r\n  .disabled-message {\r\n    text-align: center;\r\n    padding: var(--spacing-md);\r\n    margin-bottom: var(--spacing-sm);\r\n    background: rgba(var(--color-info-rgb), 0.1);\r\n    border-radius: var(--rounded-md);\r\n    color: var(--color-info);\r\n  }\r\n  \r\n  .disabled-message p {\r\n    margin: var(--spacing-xs) 0;\r\n  }\r\n\r\n  /* Mobile Adjustments */\r\n  @media (max-width: 768px) {\r\n    .uploader-content {\r\n      gap: var(--spacing-sm);\r\n    }\r\n  }\r\n\r\n  @media (max-width: 640px) {\r\n    .uploader-content {\r\n      gap: var(--spacing-xs);\r\n    }\r\n  }\r\n</style>\r\n","/**\r\n * Conversion Result Store\r\n * \r\n * Manages the results of file conversions, supporting both web and Electron environments.\r\n * In web mode, it stores blobs for download.\r\n * In Electron mode, it stores file paths for native file system access.\r\n * \r\n * Related files:\r\n * - frontend/src/lib/utils/conversionManager.js: Manages the conversion process\r\n * - frontend/src/lib/components/ResultDisplay.svelte: Displays conversion results\r\n * - frontend/src/lib/api/electron: Modular Electron client implementation\r\n */\r\n\r\nimport { writable } from 'svelte/store';\r\nimport electronClient from '@lib/api/electron';\r\n\r\nfunction createConversionResultStore() {\r\n  // Default state with null values\r\n  const initialState = {\r\n    success: false,\r\n    outputPath: null,     // For Electron file system\r\n    items: [],            // Converted items\r\n    isNative: true,       // Always true in Electron-only mode\r\n    message: null,        // Success or error message\r\n    error: null           // Error details if any\r\n  };\r\n  \r\n  const { subscribe, set, update } = writable(null);\r\n\r\n  return {\r\n    subscribe,\r\n    \r\n    /**\r\n     * Sets the conversion result\r\n     * @param {Object} result The conversion result\r\n     */\r\n    setResult: (result) => {\r\n      // Handle Electron result (path-based)\r\n      if (result.outputPath) {\r\n        set({\r\n          success: true,\r\n          outputPath: result.outputPath,\r\n          items: result.items || [],\r\n          isNative: true,\r\n          message: result.message || 'Conversion completed successfully',\r\n          error: null\r\n        });\r\n      }\r\n      // Handle error result\r\n      else if (result.error) {\r\n        set({\r\n          success: false,\r\n          error: result.error,\r\n          message: result.message || 'Conversion failed',\r\n          isNative: true\r\n        });\r\n      }\r\n      // Handle other result formats\r\n      else {\r\n        set({\r\n          ...initialState,\r\n          ...result,\r\n          success: result.success !== false,\r\n          isNative: true\r\n        });\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * Sets a native file path result (for Electron)\r\n     * @param {string} outputPath The output file path\r\n     * @param {Array} items The converted items\r\n     * @param {Object} options Additional options\r\n     * @param {string} options.message Optional success message\r\n     * @param {boolean} options.isBatch Whether this is a batch conversion\r\n     * @param {number} options.totalCount Total number of files in the batch\r\n     */\r\n    setNativeResult: (outputPath, items = [], options = {}) => {\r\n      const { message = null, isBatch = false, totalCount = items.length } = options;\r\n      \r\n      set({\r\n        success: true,\r\n        outputPath,\r\n        items,\r\n        isNative: true,\r\n        isBatch,\r\n        totalCount,\r\n        message: message || 'Conversion completed successfully',\r\n        error: null\r\n      });\r\n    },\r\n    \r\n    /**\r\n     * Sets an error result\r\n     * @param {string} error The error message\r\n     * @param {string} message Optional user-friendly message\r\n     */\r\n    setError: (error, message = null) => {\r\n      set({\r\n        success: false,\r\n        error,\r\n        message: message || error,\r\n        isNative: true\r\n      });\r\n    },\r\n    \r\n    /**\r\n     * Clears the result\r\n     */\r\n    clearResult: () => set(null),\r\n    \r\n    /**\r\n     * Checks if there's a valid result\r\n     * @returns {boolean} Whether there's a valid result\r\n     */\r\n    hasResult: () => {\r\n      let currentValue = null;\r\n      subscribe(value => { currentValue = value; })();\r\n      return currentValue !== null && currentValue.success === true;\r\n    },\r\n    \r\n    /**\r\n     * Checks if there's an error\r\n     * @returns {boolean} Whether there's an error\r\n     */\r\n    hasError: () => {\r\n      let currentValue = null;\r\n      subscribe(value => { currentValue = value; })();\r\n      return currentValue !== null && currentValue.success === false;\r\n    }\r\n  };\r\n}\r\n\r\nexport const conversionResult = createConversionResultStore();\r\n","/**\r\n * Shared constants for conversion functionality\r\n */\r\n\r\nexport const CONVERSION_STATUSES = {\r\n    IDLE: 'idle',\r\n    INITIALIZING: 'initializing',\r\n    PREPARING: 'preparing',\r\n    SELECTING_OUTPUT: 'selecting_output',\r\n    CONVERTING: 'converting',\r\n    PROCESSING: 'processing',\r\n    COMPLETED: 'completed',\r\n    ERROR: 'error',\r\n    CANCELLED: 'cancelled'\r\n};\r\n\r\nexport const FILE_TYPES = {\r\n    DOCUMENT: 'document',\r\n    URL: 'url',\r\n    PARENT: 'parent',\r\n    YOUTUBE: 'youtube'\r\n};\r\n\r\nexport const TEMP_FILE_CONFIG = {\r\n    RETRY_COUNT: 3,\r\n    RETRY_DELAY: 500,\r\n    CLEANUP_DELAY: 1000,\r\n    SIZE_THRESHOLD: 100 * 1024 * 1024, // 100MB\r\n    MAX_AGE: 30 * 60 * 1000 // 30 minutes - max time to keep temp files\r\n};\r\n\r\nexport const BINARY_FILE_EXTENSIONS = [\r\n    'pdf', 'pptx', 'docx', 'xlsx',\r\n    'jpg', 'jpeg', 'png', 'gif',\r\n    'mp3', 'mp4', 'wav', 'webm', 'avi'\r\n];\r\n\r\nexport const MIME_TYPES = {\r\n    MARKDOWN: 'text/markdown',\r\n    ZIP: 'application/zip'\r\n};\r\n","/**\r\n * Store Manager\r\n * \r\n * Centralizes all store updates for conversion-related state.\r\n * Acts as a facade for store interactions, providing a single point of access\r\n * for updating conversion status, results, and progress.\r\n * \r\n * Related files:\r\n * - frontend/src/lib/stores/unifiedConversion.js\r\n * - frontend/src/lib/stores/conversionResult.js\r\n * - frontend/src/lib/stores/files.js\r\n */\r\n\r\nimport { get } from 'svelte/store';\r\nimport { unifiedConversion, ConversionState } from '@lib/stores/unifiedConversion.js';\r\nimport { conversionResult } from '@lib/stores/conversionResult.js';\r\nimport { files } from '@lib/stores/files.js';\r\nimport { CONVERSION_STATUSES, FILE_TYPES } from '../constants';\r\n\r\n// Map old status constants to new ones for backward compatibility\r\nconst statusMap = {\r\n  [CONVERSION_STATUSES.IDLE]: ConversionState.STATUS.IDLE,\r\n  [CONVERSION_STATUSES.INITIALIZING]: ConversionState.STATUS.INITIALIZING,\r\n  [CONVERSION_STATUSES.PREPARING]: ConversionState.STATUS.PREPARING,\r\n  [CONVERSION_STATUSES.SELECTING_OUTPUT]: ConversionState.STATUS.PREPARING,\r\n  [CONVERSION_STATUSES.CONVERTING]: ConversionState.STATUS.CONVERTING,\r\n  [CONVERSION_STATUSES.PROCESSING]: ConversionState.STATUS.CONVERTING,\r\n  [CONVERSION_STATUSES.COMPLETED]: ConversionState.STATUS.COMPLETED,\r\n  [CONVERSION_STATUSES.ERROR]: ConversionState.STATUS.ERROR,\r\n  [CONVERSION_STATUSES.CANCELLED]: ConversionState.STATUS.CANCELLED\r\n};\r\n\r\n// Map old phase constants to new status constants\r\nconst phaseMap = {\r\n  'prepare': ConversionState.STATUS.PREPARING,\r\n  'converting': ConversionState.STATUS.CONVERTING,\r\n  'complete': ConversionState.STATUS.COMPLETED\r\n};\r\n\r\n/**\r\n * Manages all store updates related to conversion process\r\n */\r\nclass StoreManager {\r\n    /**\r\n     * Updates the conversion status and progress\r\n     */\r\n    updateConversionStatus(status, progress) {\r\n        if (!Object.values(CONVERSION_STATUSES).includes(status)) {\r\n            console.warn(`Invalid conversion status: ${status}`);\r\n            return;\r\n        }\r\n\r\n        // Map old status to new status\r\n        const newStatus = statusMap[status] || status;\r\n        unifiedConversion.setStatus(newStatus);\r\n        \r\n        if (typeof progress === 'number') {\r\n            unifiedConversion.setProgress(progress);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates the current file being processed\r\n     */\r\n    updateCurrentFile(filename) {\r\n        if (!filename) {\r\n            console.warn('No filename provided for current file update');\r\n            return;\r\n        }\r\n        unifiedConversion.setCurrentFile(filename);\r\n    }\r\n\r\n    /**\r\n     * Sets an error state\r\n     */\r\n    setError(error) {\r\n        // Stop the timer when an error occurs\r\n        unifiedConversion.stopTimer();\r\n        \r\n        const errorMessage = error?.message || error || 'An unknown error occurred';\r\n        unifiedConversion.setError(errorMessage);\r\n        console.error('[StoreManager] Error:', errorMessage);\r\n    }\r\n\r\n    /**\r\n     * Updates website conversion progress\r\n     */\r\n    updateWebsiteProgress(phase, message) {\r\n        // Map old phase to new status\r\n        const status = phaseMap[phase] || phase;\r\n        \r\n        if (!status) {\r\n            console.warn(`Invalid website conversion phase: ${phase}`);\r\n            return;\r\n        }\r\n        \r\n        unifiedConversion.setStatus(status);\r\n        \r\n        // If there's additional data, update it\r\n        if (message) {\r\n            unifiedConversion.batchUpdate({ message });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates a specific file's status\r\n     */\r\n    updateFileStatus(fileId, status, outputPath = null) {\r\n        if (!fileId) {\r\n            console.warn('No fileId provided for status update');\r\n            return;\r\n        }\r\n\r\n        const currentFiles = get(files);\r\n        const fileExists = currentFiles.some(f => f.id === fileId);\r\n        \r\n        if (!fileExists) {\r\n            console.warn(`File with id ${fileId} not found`);\r\n            return;\r\n        }\r\n\r\n        files.updateFile(fileId, {\r\n            status,\r\n            ...(outputPath ? { outputPath } : {})\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Sets the conversion result\r\n     */\r\n    setConversionResult(result, items, options = {}) {\r\n        if (!result) {\r\n            console.warn('No result provided to setConversionResult');\r\n            return;\r\n        }\r\n\r\n        if (result.outputPath) {\r\n            conversionResult.setNativeResult(result.outputPath, items, options);\r\n        } else if (result.blob) {\r\n            conversionResult.setWebResult(result.blob, items, options);\r\n        } else {\r\n            console.warn('Invalid result format - missing outputPath or blob');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates batch conversion progress\r\n     */\r\n    updateBatchProgress(current, total) {\r\n        if (typeof current !== 'number' || typeof total !== 'number') {\r\n            console.warn('Invalid batch progress values');\r\n            return;\r\n        }\r\n\r\n        const progress = Math.min(Math.round((current / total) * 100), 100);\r\n        this.updateConversionStatus(CONVERSION_STATUSES.CONVERTING, progress);\r\n    }\r\n\r\n    /**\r\n     * Handles conversion completion\r\n     */\r\n    completeConversion() {\r\n        // Ensure timer is stopped and final time is captured\r\n        unifiedConversion.stopTimer();\r\n        unifiedConversion.completeConversion();\r\n    }\r\n\r\n    /**\r\n     * Cancels the ongoing conversion\r\n     */\r\n    cancelConversion() {\r\n        // Stop the timer\r\n        unifiedConversion.stopTimer();\r\n        \r\n        unifiedConversion.setStatus(ConversionState.STATUS.CANCELLED);\r\n        unifiedConversion.setProgress(0);\r\n        \r\n        const currentFiles = get(files);\r\n        currentFiles.forEach(file => {\r\n            if (file.status === CONVERSION_STATUSES.CONVERTING) {\r\n                this.updateFileStatus(file.id, CONVERSION_STATUSES.CANCELLED);\r\n            }\r\n        });\r\n\r\n        // Update website progress if it's a website conversion\r\n        const firstFile = currentFiles[0];\r\n        if (firstFile?.type === FILE_TYPES.PARENT) {\r\n            unifiedConversion.setStatus(ConversionState.STATUS.CANCELLED);\r\n            unifiedConversion.batchUpdate({ message: 'Website conversion cancelled' });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Resets all conversion-related stores\r\n     */\r\n    resetStores() {\r\n        // Stop the timer\r\n        unifiedConversion.stopTimer();\r\n        \r\n        // Reset all stores\r\n        unifiedConversion.reset();\r\n        conversionResult.clearResult();\r\n        files.clearFiles();\r\n    }\r\n\r\n    /**\r\n     * Gets whether there are any files in processing state\r\n     */\r\n    hasProcessingFiles() {\r\n        const currentFiles = get(files);\r\n        return currentFiles.some(file => \r\n            file.status === CONVERSION_STATUSES.CONVERTING || \r\n            file.status === CONVERSION_STATUSES.PROCESSING\r\n        );\r\n    }\r\n}\r\n\r\n// Export a singleton instance\r\nexport const storeManager = new StoreManager();\r\n","/**\r\n * Conversion Handler\r\n * \r\n * Manages the core conversion process for single file conversion.\r\n * Uses direct buffer handling for audio/video files to avoid temp files.\r\n */\r\n\r\nimport { get } from 'svelte/store';\r\nimport { files } from '@lib/stores/files.js';\r\nimport apiKeyStore, { apiKey } from '@lib/stores/apiKey.js';\r\nimport { unifiedConversion, ConversionState } from '@lib/stores/unifiedConversion.js';\r\nimport electronClient from '@lib/api/electron';\r\nimport { storeManager } from '../manager/storeManager.js';\r\nimport { CONVERSION_STATUSES, FILE_TYPES } from '../constants';\r\nimport { getFileHandlingInfo } from '@lib/utils/files';\r\n\r\n// Map old Phase constants to new ConversionState constants for backward compatibility\r\nconst Phase = {\r\n    PREPARE: ConversionState.STATUS.PREPARING,\r\n    CONVERTING: ConversionState.STATUS.CONVERTING,\r\n    COMPLETE: ConversionState.STATUS.COMPLETED\r\n};\r\n\r\nclass ConversionHandler {\r\n    /**\r\n     * Starts the conversion process\r\n     */\r\n    async startConversion() {\r\n        console.log(' [VERBOSE] ConversionHandler.startConversion called');\r\n        console.time(' [VERBOSE] Total conversion handler time');\r\n        \r\n        const currentFiles = get(files);\r\n        const currentApiKey = get(apiKey);\r\n\r\n        console.log(' [VERBOSE] Conversion starting with:', {\r\n            fileCount: currentFiles.length,\r\n            hasApiKey: !!currentApiKey,\r\n            files: currentFiles.map(f => ({\r\n                id: f.id,\r\n                name: f.name,\r\n                type: f.type,\r\n                size: f.size,\r\n                hasUrl: !!f.url\r\n            }))\r\n        });\r\n\r\n        if (currentFiles.length === 0) {\r\n            const error = new Error('No files available for conversion.');\r\n            storeManager.setError(error.message);\r\n            console.error(' [VERBOSE] No files available for conversion');\r\n            console.timeEnd(' [VERBOSE] Total conversion handler time');\r\n            return;\r\n        }\r\n\r\n        // Reset and start the unified conversion timer\r\n        console.log(' [VERBOSE] Resetting and starting unified conversion timer');\r\n        unifiedConversion.reset();\r\n        unifiedConversion.startTimer();\r\n        \r\n        storeManager.updateConversionStatus(CONVERSION_STATUSES.INITIALIZING, 0);\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n\r\n        try {\r\n            console.log(' [VERBOSE] Initializing conversion');\r\n            storeManager.updateConversionStatus(CONVERSION_STATUSES.INITIALIZING, 0);\r\n            \r\n            console.log(' [VERBOSE] Starting Electron conversion for file:', currentFiles[0].name);\r\n            await this.handleElectronConversion(currentFiles[0], currentApiKey);\r\n\r\n            console.log(' [VERBOSE] Electron conversion completed successfully');\r\n            storeManager.updateConversionStatus(CONVERSION_STATUSES.PROCESSING, 50);\r\n            this.showFeedback(' Processing started! You will be notified when the conversion is complete.', 'success');\r\n            \r\n            console.timeEnd(' [VERBOSE] Total conversion handler time');\r\n        } catch (error) {\r\n            console.timeEnd(' [VERBOSE] Total conversion handler time');\r\n            console.error(' [VERBOSE] Conversion error in startConversion:', error);\r\n            \r\n            // Check for API key related errors\r\n            const errorMessage = error.message || '';\r\n            if (errorMessage.includes('Unauthorized') || \r\n                errorMessage.includes('401') || \r\n                errorMessage.includes('API key')) {\r\n                \r\n                // Provide a more user-friendly error message for API key issues\r\n                const friendlyError = 'OCR conversion failed: Invalid or missing Mistral API key. Please check your API key in Settings.';\r\n                storeManager.setError(friendlyError);\r\n                this.showFeedback(friendlyError, 'error');\r\n            } else {\r\n                // Use the original error message\r\n                storeManager.setError(errorMessage || 'An unexpected error occurred during conversion');\r\n                this.showFeedback(errorMessage, 'error');\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles conversion in Electron environment\r\n     * @private\r\n     */\r\n    async handleElectronConversion(item, openaiApiKey) {\r\n        console.log(' [VERBOSE] handleElectronConversion called with item:', {\r\n            id: item.id,\r\n            name: item.name,\r\n            type: item.type,\r\n            size: item.size,\r\n            hasUrl: !!item.url,\r\n            hasPath: !!item.path,\r\n            hasFile: !!item.file,\r\n            hasApiKey: !!openaiApiKey\r\n        });\r\n        console.time(' [VERBOSE] Electron conversion time');\r\n        \r\n        try {\r\n            // First prompt for output directory\r\n            console.log(' [VERBOSE] Prompting for output directory');\r\n            storeManager.updateConversionStatus(CONVERSION_STATUSES.SELECTING_OUTPUT, 0);\r\n            const outputResult = await electronClient.selectOutputDirectory();\r\n            \r\n            console.log(' [VERBOSE] Output directory selection result:', {\r\n                success: outputResult.success,\r\n                path: outputResult.path ? outputResult.path.substring(0, 50) + '...' : 'none'\r\n            });\r\n            \r\n            if (!outputResult.success) {\r\n                console.log(' [VERBOSE] Conversion cancelled: No output directory selected');\r\n                storeManager.updateConversionStatus(CONVERSION_STATUSES.CANCELLED, 0);\r\n                this.showFeedback('Conversion cancelled: No output directory selected', 'info');\r\n                console.timeEnd(' [VERBOSE] Electron conversion time');\r\n                return;\r\n            }\r\n\r\n            // Get current OCR settings\r\n            console.log(' [VERBOSE] Getting OCR settings');\r\n            const ocrEnabled = await window.electron.getSetting('ocr.enabled');\r\n            console.log(' [VERBOSE] OCR enabled:', ocrEnabled);\r\n            \r\n            // Get Mistral API key from store\r\n            const apiKeyState = get(apiKeyStore);\r\n            const mistralApiKey = apiKeyState.keys.mistral || '';\r\n            \r\n            console.log(`Using API keys - OpenAI: ${openaiApiKey ? ' (set)' : ' (not set)'}, Mistral: ${mistralApiKey ? ' (set)' : ' (not set)'}`);\r\n            \r\n            // Create options object with separate keys for each service\r\n            const options = {\r\n                outputDir: outputResult.path,\r\n                createSubdirectory: false,\r\n                ...(openaiApiKey ? { apiKey: openaiApiKey } : {}), // OpenAI key for general use\r\n                useOcr: ocrEnabled,\r\n                mistralApiKey: mistralApiKey // Dedicated Mistral key for OCR\r\n            };\r\n            \r\n            console.log(' [VERBOSE] Conversion options prepared:', {\r\n                outputDir: options.outputDir ? options.outputDir.substring(0, 50) + '...' : 'none',\r\n                createSubdirectory: options.createSubdirectory,\r\n                hasApiKey: !!options.apiKey,\r\n                useOcr: options.useOcr,\r\n                hasMistralApiKey: !!options.mistralApiKey\r\n            });\r\n\r\n            console.log(' [VERBOSE] Starting single item conversion');\r\n            await this.handleSingleItemConversion(item, options);\r\n            console.log(' [VERBOSE] Single item conversion completed');\r\n            \r\n            console.timeEnd(' [VERBOSE] Electron conversion time');\r\n        } catch (error) {\r\n            console.timeEnd(' [VERBOSE] Electron conversion time');\r\n            console.error(' [VERBOSE] Electron conversion error:', error);\r\n            console.log(' [VERBOSE] Error details:', {\r\n                name: error.name,\r\n                message: error.message,\r\n                stack: error.stack\r\n            });\r\n            storeManager.setError(error.message);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles single item conversion\r\n     * @private\r\n     */\r\n    async handleSingleItemConversion(item, options) {\r\n        console.log(' [VERBOSE] handleSingleItemConversion called with item:', {\r\n            id: item.id,\r\n            name: item.name,\r\n            type: item.type,\r\n            size: item.size,\r\n            hasUrl: !!item.url,\r\n            hasPath: !!item.path,\r\n            hasFile: !!item.file\r\n        });\r\n        console.time(' [VERBOSE] Single item conversion time');\r\n        \r\n        storeManager.updateCurrentFile(item.name || item.url || 'File');\r\n        storeManager.updateConversionStatus(CONVERSION_STATUSES.CONVERTING, 0);\r\n        \r\n        try {\r\n            // Determine file type ONCE at the beginning\r\n            console.log(' [VERBOSE] Getting file handling info');\r\n            const fileInfo = getFileHandlingInfo(item.file || item);\r\n            console.log(' [VERBOSE] File handling info:', fileInfo);\r\n            \r\n            let result;\r\n            \r\n            // Explicitly include fileType in conversion options\r\n            const baseOptions = {\r\n                ...options,\r\n                fileType: fileInfo.fileType, // Single source of truth\r\n                category: fileInfo.category,\r\n                handling: fileInfo.handling,\r\n                isTemporary: fileInfo.isBinary,\r\n                originalFileName: fileInfo.fileName\r\n            };\r\n\r\n            // For URLs, preserve original type and options\r\n            const conversionOptions = fileInfo.isWeb\r\n                ? {\r\n                    ...baseOptions,\r\n                    type: item.type, // Preserve original type (url/parenturl)\r\n                    ...item.options, // Include any URL-specific options\r\n                    // Ensure parent URL specific options are preserved\r\n                    ...(item.type === 'parenturl' && {\r\n                        maxDepth: item.options?.maxDepth || 3,\r\n                        maxPages: item.options?.maxPages || 100,\r\n                        includeImages: item.options?.includeImages ?? true,\r\n                        includeMeta: item.options?.includeMeta ?? true\r\n                    })\r\n                  }\r\n                : {\r\n                    ...baseOptions,\r\n                    type: fileInfo.converter\r\n                  };\r\n\r\n            // Log extended debug info for URL conversions\r\n            if (fileInfo.isWeb) {\r\n                console.log(' Web conversion details:', {\r\n                    originalType: item.type,\r\n                    fileType: conversionOptions.fileType, // Log the fileType we're sending\r\n                    originalOptions: item.options,\r\n                    finalType: conversionOptions.type,\r\n                    isParentUrl: item.type === 'parenturl',\r\n                    finalOptions: conversionOptions\r\n                });\r\n            }\r\n\r\n            if (item.isNative && item.path) {\r\n                // Native file path - use unified file converter\r\n                result = await electronClient.convertFile(\r\n                    item.path,\r\n                    conversionOptions,\r\n                    progress => {\r\n                        storeManager.updateConversionStatus(CONVERSION_STATUSES.CONVERTING, progress);\r\n                    }\r\n                );\r\n            } else if (item.file instanceof File) {\r\n                // Browser File object\r\n                let content;\r\n                \r\n                if (fileInfo.isBinary) {\r\n                    // For other binary files (audio/video/office/etc), read as buffer\r\n                    content = await item.file.arrayBuffer();\r\n                } else if (fileInfo.converter === 'data' && fileInfo.fileType === 'csv') {\r\n                    // Special case for CSV files - handle as text\r\n                    content = await item.file.text();\r\n                    conversionOptions.isContent = true;\r\n                    conversionOptions.content = content;\r\n                } else {\r\n                    // For text files, read as text\r\n                    content = await item.file.text();\r\n                }\r\n                \r\n                result = await electronClient.convertFile(\r\n                    content,\r\n                    conversionOptions,\r\n                    progress => {\r\n                        storeManager.updateConversionStatus(CONVERSION_STATUSES.CONVERTING, progress);\r\n                    }\r\n                );\r\n            } else if (fileInfo.isWeb && item.url) {\r\n                // For URLs, pass the URL string directly with the correct type\r\n                // For URLs, pass options directly without modification\r\n                result = await electronClient.convertFile(\r\n                    item.url,\r\n                    conversionOptions,\r\n                    progress => {\r\n                        storeManager.updateConversionStatus(CONVERSION_STATUSES.CONVERTING, progress);\r\n                    }\r\n                );\r\n\r\n                // Log the conversion options for debugging\r\n                console.log(' URL conversion options:', {\r\n                    type: conversionOptions.type,\r\n                    isParentUrl: conversionOptions.type === 'parenturl',\r\n                    options: conversionOptions\r\n                });\r\n            } else {\r\n                throw new Error(`Unsupported item type: ${item.type || 'unknown'}`);\r\n            }\r\n            \r\n            // Validate the conversion result\r\n            if (!result) {\r\n                console.error(' [conversionHandler] No result returned from conversion');\r\n                throw new Error('Conversion failed: No result returned');\r\n            }\r\n            \r\n            // Log the result structure for debugging\r\n            console.log(` [conversionHandler] Conversion result structure:`, {\r\n                success: result.success,\r\n                hasOutputPath: !!result.outputPath,\r\n                hasContent: !!result.content,\r\n                hasError: !!result.error,\r\n                type: result.type,\r\n                fileType: result.fileType,\r\n                category: fileInfo.category,\r\n                handlingType: fileInfo.handling\r\n            });\r\n            \r\n            // Check for success flag\r\n            if (result.success === false) {\r\n                console.error(' [conversionHandler] Conversion failed with error:', result.error);\r\n                throw new Error(`Conversion failed: ${result.error || 'Unknown error'}`);\r\n            }\r\n            \r\n            // Check for output path specifically\r\n            if (!result.outputPath) {\r\n                console.error(' [conversionHandler] Result missing outputPath:', result);\r\n                throw new Error('Conversion failed: No output path returned');\r\n            }\r\n            \r\n            // Success path\r\n            storeManager.updateConversionStatus(CONVERSION_STATUSES.COMPLETED, 100);\r\n            storeManager.setConversionResult(result, [item]);\r\n            storeManager.updateFileStatus(item.id, CONVERSION_STATUSES.COMPLETED, result.outputPath);\r\n            return result;\r\n        } catch (error) {\r\n            console.error(`Error converting ${item.name || item.url}:`, {\r\n                error: error.message,\r\n                stack: error.stack,\r\n                item: {\r\n                    id: item.id,\r\n                    type: item.type,\r\n                    name: item.name,\r\n                    url: item.url\r\n                }\r\n                // No reference to fileInfo here\r\n            });\r\n            \r\n            // Check for API key related errors\r\n            const errorMessage = error.message || '';\r\n            if (errorMessage.includes('Unauthorized') || \r\n                errorMessage.includes('401') || \r\n                errorMessage.includes('API key')) {\r\n                \r\n                // Provide a more user-friendly error message for API key issues\r\n                const friendlyError = 'OCR conversion failed: Invalid or missing Mistral API key. Please check your API key in Settings.';\r\n                storeManager.setError(friendlyError);\r\n                storeManager.updateFileStatus(item.id, CONVERSION_STATUSES.ERROR);\r\n                throw new Error(friendlyError);\r\n            } else {\r\n                // Use the original error message\r\n                storeManager.setError(errorMessage);\r\n                storeManager.updateFileStatus(item.id, CONVERSION_STATUSES.ERROR);\r\n                throw error;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Cancels the ongoing conversion process\r\n     */\r\n    cancelConversion() {\r\n        electronClient.cancelRequests();\r\n        storeManager.cancelConversion();\r\n        this.showFeedback('Conversion cancelled by user', 'info');\r\n    }\r\n\r\n    /**\r\n     * Shows feedback message\r\n     * @private\r\n     */\r\n    showFeedback(message, type = 'info') {\r\n        console.log(`${type.toUpperCase()}: ${message}`);\r\n    }\r\n}\r\n\r\n// Export singleton instance\r\nexport const conversionHandler = new ConversionHandler();\r\n","/**\r\n * Download Handler\r\n * \r\n * Manages the file operations after conversion is complete.\r\n * Handles opening files and showing them in the file explorer.\r\n * \r\n * Related files:\r\n * - frontend/src/lib/stores/conversionResult.js\r\n * - frontend/src/lib/components/ResultDisplay.svelte\r\n */\r\n\r\nimport { get } from 'svelte/store';\r\nimport { conversionResult } from '@lib/stores/conversionResult.js';\r\nimport { files } from '@lib/stores/files.js';\r\nimport { storeManager } from '../manager/storeManager.js';\r\n\r\nclass DownloadHandler {\r\n    /**\r\n     * Clears the files store after conversion is complete\r\n     */\r\n    clearFiles() {\r\n        storeManager.clearFiles();\r\n    }\r\n    \r\n    /**\r\n     * Opens a file in the default application\r\n     */\r\n    openFile(filePath) {\r\n        if (!filePath) {\r\n            console.error('No file path provided to open');\r\n            return;\r\n        }\r\n        \r\n        window.electron.openFile(filePath)\r\n            .then(result => {\r\n                if (!result.success) {\r\n                    console.error(`Failed to open file: ${result.error}`);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.error('Error opening file:', error);\r\n            });\r\n    }\r\n    \r\n    /**\r\n     * Shows the file in the file explorer\r\n     */\r\n    showInFolder(filePath) {\r\n        if (!filePath) {\r\n            console.error('No file path provided to show in folder');\r\n            return;\r\n        }\r\n        \r\n        window.electron.showItemInFolder(filePath)\r\n            .then(result => {\r\n                if (!result.success) {\r\n                    console.error(`Failed to show item in folder: ${result.error}`);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.error('Error showing item in folder:', error);\r\n            });\r\n    }\r\n}\r\n\r\n// Export singleton instance\r\nexport const downloadHandler = new DownloadHandler();\r\n","/**\r\n * Temp File Manager\r\n * \r\n * Handles all temporary file operations during the conversion process.\r\n * This includes saving files to temp storage, cleanup, and tracking file status.\r\n * \r\n * Implements aggressive cleanup to ensure temporary files don't persist.\r\n * \r\n * Related files:\r\n * - frontend/src/lib/api/electron/fileSystem.js\r\n * - src/electron/services/FileSystemService.js\r\n */\r\n\r\nimport fileSystemOperations from '@lib/api/electron/fileSystem.js';\r\nimport { BINARY_FILE_EXTENSIONS, TEMP_FILE_CONFIG } from '../constants';\r\n\r\n/**\r\n * Registry to track temporary files and their status\r\n * @type {Map<string, {path: string, created: number, inUse: boolean, metadata: Object}>}\r\n */\r\nconst tempFileRegistry = new Map();\r\n\r\nclass TempFileManager {\r\n    /**\r\n     * Saves a File object to a temporary file\r\n     */\r\n    async saveTempFile(file, onProgress) {\r\n        if (!file) {\r\n            throw new Error('No file provided to save');\r\n        }\r\n        \r\n        console.log(` [TempFileManager] Starting file transfer for: ${file.name}`);\r\n        console.log(` [TempFileManager] File size: ${file.size} bytes, Type: ${file.type}`);\r\n        \r\n        const fileExt = file.name.split('.').pop().toLowerCase();\r\n        const tempFileName = `temp_${Date.now()}_${file.name}`;\r\n        const tempDir = 'temp';\r\n        \r\n        // Create temp directory if needed\r\n        await fileSystemOperations.createDirectory(tempDir);\r\n        const tempFilePath = `${tempDir}/${tempFileName}`;\r\n        \r\n        const isBinaryFile = BINARY_FILE_EXTENSIONS.includes(fileExt.toLowerCase());\r\n        const isLargeFile = file.size > TEMP_FILE_CONFIG.SIZE_THRESHOLD;\r\n        const isVideoFile = ['mp4', 'webm', 'avi'].includes(fileExt.toLowerCase());\r\n        \r\n        try {\r\n            if (isVideoFile && isLargeFile) {\r\n                await this.handleLargeVideoFile(file, tempFilePath, onProgress);\r\n            } else if (isBinaryFile) {\r\n                await this.handleBinaryFile(file, tempFilePath);\r\n            } else {\r\n                await this.handleTextFile(file, tempFilePath);\r\n            }\r\n            \r\n            this.registerFile(tempFilePath, {\r\n                originalName: file.name,\r\n                originalSize: file.size,\r\n                originalType: file.type,\r\n                isBinaryFile,\r\n                isVideoFile,\r\n                isLargeFile\r\n            });\r\n            \r\n            return tempFilePath;\r\n        } catch (error) {\r\n            console.error(` [TempFileManager] Error saving temp file:`, error);\r\n            throw new Error(`Failed to save temporary file: ${error.message}`);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Handles saving of large video files using chunked transfer\r\n     * Uses a three-step process:\r\n     * 1. Initialize transfer\r\n     * 2. Send chunks\r\n     * 3. Finalize transfer\r\n     */\r\n    async handleLargeVideoFile(file, tempFilePath, onProgress) {\r\n        console.log(` [TempFileManager] Handling large video file (${Math.round(file.size / (1024 * 1024))}MB)`);\r\n        \r\n        const metadataObj = {\r\n            originalName: file.name,\r\n            originalSize: file.size,\r\n            originalType: file.type,\r\n            timestamp: Date.now(),\r\n            needsStreamProcessing: true\r\n        };\r\n        \r\n        const metadataStr = `LARGE_FILE:${JSON.stringify(metadataObj)}`;\r\n        const writeResult = await fileSystemOperations.writeFile(tempFilePath, metadataStr);\r\n        \r\n        if (!writeResult.success) {\r\n            throw new Error(`Failed to write temporary file metadata: ${writeResult.error}`);\r\n        }\r\n        \r\n        try {\r\n            // Step 1: Initialize transfer\r\n            const initResult = await window.electron.initLargeFileTransfer({\r\n                tempFilePath,\r\n                fileName: file.name,\r\n                fileSize: file.size,\r\n                fileType: file.type,\r\n                chunkSize: 8 * 1024 * 1024 // 8MB chunks\r\n            });\r\n            \r\n            if (!initResult.success) {\r\n                throw new Error(`Failed to initialize large file transfer: ${initResult.error}`);\r\n            }\r\n            \r\n            const transferId = initResult.transferId;\r\n            const chunkSize = 8 * 1024 * 1024; // 8MB chunks\r\n            const totalChunks = Math.ceil(file.size / chunkSize);\r\n            \r\n            console.log(` [TempFileManager] Transfer initialized with ID: ${transferId}, total chunks: ${totalChunks}`);\r\n            \r\n            // Step 2: Send chunks\r\n            for (let chunkIndex = 0; chunkIndex < totalChunks; chunkIndex++) {\r\n                const start = chunkIndex * chunkSize;\r\n                const end = Math.min(start + chunkSize, file.size);\r\n                const chunk = file.slice(start, end);\r\n                \r\n                // Read chunk as base64\r\n                const chunkBase64 = await this.readFileAsBase64(chunk);\r\n                \r\n                // Send chunk\r\n                const chunkResult = await window.electron.transferFileChunk({\r\n                    transferId,\r\n                    chunkIndex,\r\n                    data: chunkBase64,\r\n                    size: chunk.size\r\n                });\r\n                \r\n                if (!chunkResult.success) {\r\n                    throw new Error(`Failed to transfer chunk ${chunkIndex + 1}/${totalChunks}: ${chunkResult.error}`);\r\n                }\r\n                \r\n                // Update progress\r\n                const progress = ((chunkIndex + 1) / totalChunks) * 100;\r\n                console.log(` [TempFileManager] Transfer progress: ${Math.round(progress)}%`);\r\n                onProgress?.(progress);\r\n            }\r\n            \r\n            // Step 3: Finalize transfer\r\n            const finalizeResult = await window.electron.finalizeLargeFileTransfer({\r\n                transferId\r\n            });\r\n            \r\n            if (!finalizeResult.success) {\r\n                throw new Error(`Failed to finalize large file transfer: ${finalizeResult.error}`);\r\n            }\r\n            \r\n            console.log(` [TempFileManager] Transfer completed in ${finalizeResult.transferTime.toFixed(2)}s (${finalizeResult.transferSpeed}MB/s)`);\r\n            \r\n            return finalizeResult.finalPath;\r\n        } catch (error) {\r\n            console.error(` [TempFileManager] Large file transfer failed:`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Handles saving of binary files\r\n     */\r\n    async handleBinaryFile(file, tempFilePath) {\r\n        console.log(` [TempFileManager] Handling binary file`);\r\n        \r\n        const base64Data = await this.readFileAsBase64(file);\r\n        if (!base64Data) {\r\n            throw new Error(`Failed to convert file to base64: ${file.name}`);\r\n        }\r\n        \r\n        // Add prefix for main process handling\r\n        const prefixedData = `BASE64:${base64Data}`;\r\n        const writeResult = await fileSystemOperations.writeFile(tempFilePath, prefixedData);\r\n        \r\n        if (!writeResult.success) {\r\n            throw new Error(`Failed to write temporary binary file: ${writeResult.error}`);\r\n        }\r\n        \r\n        await this.verifyFileWrite(tempFilePath, file.size);\r\n    }\r\n    \r\n    /**\r\n     * Handles saving of text files\r\n     */\r\n    async handleTextFile(file, tempFilePath) {\r\n        console.log(` [TempFileManager] Handling text file`);\r\n        \r\n        const textData = await file.text();\r\n        const writeResult = await fileSystemOperations.writeFile(tempFilePath, textData);\r\n        \r\n        if (!writeResult.success) {\r\n            throw new Error(`Failed to write temporary text file: ${writeResult.error}`);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Reads a file as base64\r\n     */\r\n    readFileAsBase64(file) {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = () => resolve(reader.result.split(',')[1]);\r\n            reader.onerror = error => reject(error);\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * Verifies file was written correctly\r\n     */\r\n    async verifyFileWrite(filePath, expectedSize) {\r\n        const stats = await fileSystemOperations.getStats(filePath);\r\n        if (stats.success) {\r\n            if (stats.stats.size < expectedSize * 0.9) {\r\n                console.warn(` [TempFileManager] File size mismatch! Expected: ${expectedSize}, Written: ${stats.stats.size}`);\r\n            }\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Registers a temporary file for tracking\r\n     */\r\n    registerFile(filePath, metadata = {}) {\r\n        if (!filePath) return;\r\n        \r\n        tempFileRegistry.set(filePath, {\r\n            path: filePath,\r\n            created: Date.now(),\r\n            inUse: true,\r\n            metadata\r\n        });\r\n        \r\n        console.log(` [TempFileManager] Registered temporary file: ${filePath}`);\r\n    }\r\n    \r\n    /**\r\n     * Marks a temporary file as ready for cleanup\r\n     */\r\n    markForCleanup(filePath) {\r\n        if (!filePath || !tempFileRegistry.has(filePath)) return;\r\n        \r\n        const fileInfo = tempFileRegistry.get(filePath);\r\n        fileInfo.inUse = false;\r\n        fileInfo.readyForCleanup = Date.now();\r\n        \r\n        console.log(` [TempFileManager] Marked file as ready for cleanup: ${filePath}`);\r\n    }\r\n    \r\n    /**\r\n     * Cleans up a temporary file\r\n     */\r\n    async cleanup(filePath, options = {}) {\r\n        const {\r\n            force = false,\r\n            retryCount = TEMP_FILE_CONFIG.RETRY_COUNT,\r\n            retryDelay = TEMP_FILE_CONFIG.RETRY_DELAY\r\n        } = options;\r\n        \r\n        if (!filePath) {\r\n            console.warn(` [TempFileManager] Invalid file path for cleanup`);\r\n            return;\r\n        }\r\n        \r\n        if (tempFileRegistry.has(filePath)) {\r\n            const fileInfo = tempFileRegistry.get(filePath);\r\n            if (fileInfo.inUse && !force) {\r\n                console.warn(` [TempFileManager] File still in use, scheduling cleanup for later: ${filePath}`);\r\n                // Schedule cleanup for later\r\n                setTimeout(() => {\r\n                    this.cleanup(filePath, { ...options, force: true });\r\n                }, TEMP_FILE_CONFIG.CLEANUP_DELAY * 2);\r\n                return;\r\n            }\r\n        }\r\n        \r\n        // Attempt delete with retries\r\n        let attempts = 0;\r\n        while (attempts <= retryCount) {\r\n            try {\r\n                const deleteResult = await fileSystemOperations.deleteItem(filePath, false);\r\n                if (deleteResult.success) {\r\n                    tempFileRegistry.delete(filePath);\r\n                    console.log(` [TempFileManager] Cleaned up temporary file: ${filePath}`);\r\n                    return;\r\n                }\r\n                \r\n                if (attempts < retryCount) {\r\n                    await new Promise(resolve => setTimeout(resolve, retryDelay * (attempts + 1)));\r\n                }\r\n            } catch (error) {\r\n                console.warn(` [TempFileManager] Cleanup attempt ${attempts + 1} failed:`, error);\r\n                \r\n                if (attempts < retryCount) {\r\n                    await new Promise(resolve => setTimeout(resolve, retryDelay * (attempts + 1)));\r\n                }\r\n            }\r\n            attempts++;\r\n        }\r\n        \r\n        console.warn(` [TempFileManager] Could not clean up file after ${retryCount} attempts: ${filePath}`);\r\n        \r\n        // Add to cleanup queue for later retry\r\n        this.scheduleForceCleanup(filePath);\r\n    }\r\n    \r\n    /**\r\n     * Schedule a forced cleanup for a file that couldn't be deleted\r\n     */\r\n    scheduleForceCleanup(filePath) {\r\n        if (!filePath) return;\r\n        \r\n        console.log(` [TempFileManager] Scheduling forced cleanup for: ${filePath}`);\r\n        \r\n        // Try again after a longer delay with force=true\r\n        setTimeout(() => {\r\n            this.cleanup(filePath, { force: true, retryCount: 5 });\r\n        }, TEMP_FILE_CONFIG.CLEANUP_DELAY * 5);\r\n    }\r\n    \r\n    /**\r\n     * Clean up all unused temporary files\r\n     */\r\n    async cleanupAllUnusedFiles() {\r\n        console.log(` [TempFileManager] Running cleanup for all unused temporary files`);\r\n        \r\n        const unusedFiles = [];\r\n        const now = Date.now();\r\n        \r\n        // Find all files that are not in use\r\n        for (const [filePath, fileInfo] of tempFileRegistry.entries()) {\r\n            if (!fileInfo.inUse || (now - fileInfo.created > TEMP_FILE_CONFIG.MAX_AGE)) {\r\n                unusedFiles.push(filePath);\r\n            }\r\n        }\r\n        \r\n        if (unusedFiles.length === 0) {\r\n            console.log(` [TempFileManager] No unused temporary files to clean up`);\r\n            return;\r\n        }\r\n        \r\n        console.log(` [TempFileManager] Cleaning up ${unusedFiles.length} unused temporary files`);\r\n        \r\n        // Clean up each file\r\n        for (const filePath of unusedFiles) {\r\n            await this.cleanup(filePath, { force: true });\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Gets information about a temporary file\r\n     */\r\n    getFileInfo(filePath) {\r\n        return tempFileRegistry.get(filePath);\r\n    }\r\n    \r\n    /**\r\n     * Checks if a file is still in use\r\n     */\r\n    isFileInUse(filePath) {\r\n        const fileInfo = tempFileRegistry.get(filePath);\r\n        return fileInfo?.inUse || false;\r\n    }\r\n}\r\n\r\n// Create singleton instance\r\nconst tempFileManager = new TempFileManager();\r\n\r\n// Set up automatic cleanup interval\r\nconst CLEANUP_INTERVAL = 5 * 60 * 1000; // 5 minutes\r\nsetInterval(() => {\r\n    tempFileManager.cleanupAllUnusedFiles();\r\n}, CLEANUP_INTERVAL);\r\n\r\n// Export singleton instance\r\nexport { tempFileManager };\r\n","/**\r\n * Conversion Manager\r\n * \r\n * Main orchestrator for the file conversion process.\r\n * Coordinates between different handlers and provides a simplified API\r\n * for components to interact with the conversion system.\r\n * \r\n * This is the primary entry point for conversion operations and replaces\r\n * the original monolithic conversionManager.js.\r\n * \r\n * Related files:\r\n * - frontend/src/lib/utils/conversion/manager/storeManager.js\r\n * - frontend/src/lib/utils/conversion/handlers/conversionHandler.js\r\n * - frontend/src/lib/utils/conversion/handlers/batchHandler.js\r\n * - frontend/src/lib/utils/conversion/handlers/downloadHandler.js\r\n * - frontend/src/lib/utils/conversion/handlers/tempFileManager.js\r\n */\r\n\r\nimport { storeManager } from './storeManager.js';\r\nimport { conversionHandler } from '../handlers/conversionHandler.js';\r\nimport { downloadHandler } from '../handlers/downloadHandler.js';\r\nimport { tempFileManager } from '../handlers/tempFileManager.js';\r\n\r\n/**\r\n * Main conversion manager class that orchestrates the conversion process\r\n */\r\nclass ConversionManager {\r\n    /**\r\n     * Starts the conversion process\r\n     * This is the main entry point for conversion operations\r\n     */\r\n    async startConversion() {\r\n        try {\r\n            await conversionHandler.startConversion();\r\n        } catch (error) {\r\n            console.error('Error in conversion process:', error);\r\n            storeManager.setError(error.message || 'An unexpected error occurred');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Cancels the ongoing conversion process\r\n     */\r\n    cancelConversion() {\r\n        try {\r\n            conversionHandler.cancelConversion();\r\n        } catch (error) {\r\n            console.error('Error cancelling conversion:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clears files after conversion is complete\r\n     */\r\n    clearFiles() {\r\n        try {\r\n            downloadHandler.clearFiles();\r\n        } catch (error) {\r\n            console.error('Error clearing files:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Opens a file in the default application\r\n     */\r\n    openFile(filePath) {\r\n        try {\r\n            downloadHandler.openFile(filePath);\r\n        } catch (error) {\r\n            console.error('Error opening file:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Shows the file in the file explorer\r\n     */\r\n    showInFolder(filePath) {\r\n        try {\r\n            downloadHandler.showInFolder(filePath);\r\n        } catch (error) {\r\n            console.error('Error showing file in folder:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Cleans up temporary files\r\n     */\r\n    cleanupTempFiles() {\r\n        // This could be called during app shutdown or when switching views\r\n        // to ensure no temporary files are left behind\r\n    }\r\n}\r\n\r\n// Create and export a singleton instance\r\nconst conversionManager = new ConversionManager();\r\n\r\n// Export the main methods for backward compatibility with the original API\r\nexport const {\r\n    startConversion,\r\n    cancelConversion,\r\n    clearFiles,\r\n    openFile,\r\n    showInFolder\r\n} = conversionManager;\r\n\r\n// Export the manager instance for advanced usage\r\nexport default conversionManager;\r\n","<!-- \r\n  Timer.svelte\r\n  \r\n  A simple time display component that shows elapsed time in HH:MM:SS format.\r\n  \r\n  Related files:\r\n  - frontend/src/lib/stores/conversionTimer.js: Timer functionality\r\n  - frontend/src/lib/components/ConversionProgress.svelte: Primary consumer\r\n-->\r\n<script>\r\n  import { unifiedConversion } from '../../../lib/stores/unifiedConversion';\r\n  \r\n  export let time = '00:00:00';\r\n  export let label = 'Time elapsed';\r\n  \r\n  let hours = '00';\r\n  let minutes = '00';\r\n  let seconds = '00';\r\n  \r\n  // Get formatted time from unifiedConversion store\r\n  $: formattedTime = unifiedConversion.formatElapsedTime($unifiedConversion.elapsedSeconds);\r\n  \r\n  // Update time segments\r\n  $: {\r\n    [hours, minutes, seconds] = formattedTime.split(':');\r\n  }\r\n</script>\r\n\r\n<div class=\"timer-display\" role=\"timer\" aria-label={label}>\r\n  <span class=\"time-segment\">{hours}</span>\r\n  <span class=\"separator\">:</span>\r\n  <span class=\"time-segment\">{minutes}</span>\r\n  <span class=\"separator\">:</span>\r\n  <span class=\"time-segment\">{seconds}</span>\r\n</div>\r\n\r\n<style>\r\n  .timer-display {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-family: var(--font-mono);\r\n    font-size: var(--font-size-2xl);\r\n    color: var(--color-text);\r\n    margin: var(--spacing-md) auto;\r\n    max-width: fit-content;\r\n  }\r\n\r\n  .time-segment {\r\n    min-width: 1.8em;\r\n    text-align: center;\r\n    font-variant-numeric: tabular-nums;\r\n    font-weight: 600;\r\n    background: linear-gradient(135deg,\r\n      var(--color-prime) 0%,\r\n      var(--color-fourth) 100%\r\n    );\r\n    -webkit-background-clip: text;\r\n    background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n  }\r\n\r\n  .separator {\r\n    color: var(--color-text-light);\r\n    font-weight: 300;\r\n    opacity: 0.4;\r\n    margin: 0 2px;\r\n  }\r\n\r\n  @media (max-width: 640px) {\r\n    .timer-display {\r\n    font-size: var(--font-size-xl);\r\n    padding: var(--spacing-xs) var(--spacing-md);\r\n    }\r\n  }\r\n</style>\r\n","/**\r\n * Conversion Messages\r\n * \r\n * A collection of fun, entertaining messages to display during file conversions.\r\n * These messages are randomly selected and displayed in the ConversionProgress component\r\n * with a typing animation effect to make them appear more dynamic and engaging.\r\n * \r\n * Messages now support rich text formatting using markdown-style syntax:\r\n * - **text** for bold text\r\n * - *text* for italic text\r\n * - # for headings (rendered as h3)\r\n * - [text](url) for links\r\n * \r\n * Includes both general conversion messages and educational \"Did you know?\" messages\r\n * about Markdown to help users understand what Markdown is and how to use it.\r\n * \r\n * Exports:\r\n * - conversionMessages: Array of all available messages\r\n * - getRandomMessage: Function that returns a random, formatted message\r\n * \r\n * Related files:\r\n * - frontend/src/lib/components/ConversionProgress.svelte\r\n * - frontend/src/lib/components/common/ChatBubble.svelte\r\n */\r\n\r\n/**\r\n * Formats a message with markdown-style syntax into HTML\r\n * @param {string} message - The message to format\r\n * @returns {string} HTML formatted message\r\n */\r\nfunction formatMessage(message) {\r\n  return message\r\n    // Convert headings (only h3 for chat messages)\r\n    .replace(/^# (.+)$/gm, '<h3>$1</h3>')\r\n    // Convert bold\r\n    .replace(/\\*\\*([^*]+)\\*\\*/g, '<strong>$1</strong>')\r\n    // Convert italics\r\n    .replace(/\\*([^*]+)\\*/g, '<em>$1</em>')\r\n    // Convert links\r\n    .replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\" class=\"help-link\" target=\"_blank\" rel=\"noopener noreferrer\">$1</a>')\r\n    // Wrap text in paragraphs\r\n    .split('\\n')\r\n    .map(line => line.trim() ? `<p>${line}</p>` : '')\r\n    .join('');\r\n}\r\n\r\n// Initialize an array to store pre-formatted messages\r\nlet formattedMessages;\r\n\r\n// Original messages array\r\nconst messages = [\r\n  // Original conversion messages\r\n  \"Converting digital knowledge to *markdown*... \",\r\n  \"Transforming content into **readable** format... \",\r\n  \"Extracting the *essence* of your files... \",\r\n  \"Translating digital content to *markdown*... \",\r\n  \"Processing your content with **care**... \",\r\n  \"Organizing information for better **readability**... \",\r\n  \"Converting bytes to *beautiful* markdown... \",\r\n  \"Distilling **knowledge** from your files... \",\r\n  \"Teaching robots to read your content... \",\r\n  \"Turning complex data into **simple** markdown... \",\r\n  \"Weaving words into *markdown magic*... \",\r\n  \"Crafting the **perfect** markdown output... \",\r\n  \"Polishing pixels into *perfect prose*... \",\r\n  \"Decoding digital documents... \",\r\n  \"Translating tech to text... \",\r\n  \"Converting content at the *speed of light*... \",\r\n  \"Turning information into **insight**... \",\r\n  \"Making your content more *accessible*... \",\r\n  \"Preparing your **perfect** markdown files... \",\r\n  \"Transforming files with *markdown magic*... \",\r\n  \r\n  // What Markdown is\r\n  \"# Quick Markdown Facts\\nMarkdown is a *lightweight* markup language for creating **formatted text**! \",\r\n  \"# History Time\\nMarkdown was created by **John Gruber** and **Aaron Swartz** in 2004! \",\r\n  \"# File Facts\\nMarkdown files use the *.md* extension and are **plain text** files! \",\r\n  \"# Design Philosophy\\nMarkdown is designed to be **readable** even in its *raw text* form! \",\r\n  \"# Wide Adoption\\nMarkdown is widely used for **documentation**, *notes*, and web content! \",\r\n  \r\n  // Markdown syntax basics\r\n  \"# Markdown Tips\\nCreate headings with # symbols - more # means *smaller* headings! \",\r\n  \"# Styling Text\\nMake text *italic* using single asterisks! \",\r\n  \"# Text Formatting\\nMake text **bold** using double asterisks! \",\r\n  \"# List Making\\nCreate lists using - or * symbols at the start of lines! \",\r\n  \"# Adding Links\\nCreate links using [text](URL) syntax! \",\r\n  \"# Image Support\\nAdd images using ![alt text](image-url) syntax! \",\r\n  \"# Quote Blocks\\nCreate blockquotes using the > symbol! \",\r\n  \"# Code Formatting\\nCreate code blocks using triple backticks! \",\r\n  \r\n  // Obsidian-specific features\r\n  \"# Obsidian Links\\nObsidian uses **[[double brackets]]** for *internal links* between notes! \",\r\n  \"# Note Embedding\\nEmbed notes within notes using **![[note name]]** syntax! \",\r\n  \"# Knowledge Graph\\nObsidian can display your notes as a *visual knowledge graph*! \",\r\n  \"# Using Tags\\nObsidian supports tags using the **#tag** syntax! \",\r\n  \"# Plugin Support\\nObsidian has a **thriving** community of *open-source* plugins! \",\r\n  \r\n  // Benefits of Markdown\r\n  \"# Future-Proof Notes\\nMarkdown files are **future-proof** because they're just *plain text*! \",\r\n  \"# Perfect for Notes\\nMarkdown is **perfect** for note-taking because it's *quick to write* and *easy to read*! \",\r\n  \"# Universal Support\\nMarkdown is supported by **thousands** of applications across all platforms! \",\r\n  \"# Focus on Content\\nMarkdown helps you focus on **content** instead of *formatting*! \",\r\n  \"# Space Efficient\\nMarkdown files are typically *much smaller* than formatted document files! \",\r\n\r\n  // Knowledge Management Best Practices\r\n  \"# PARA Method\\nUsing the **PARA** method (*Projects, Areas, Resources, Archives*) helps organize notes! \",\r\n  \"# Map of Content\\nCreating **MOCs** (*Maps of Content*) helps navigate complex knowledge structures! \",\r\n  \"# Progressive Learning\\n**Progressive summarization** helps distill knowledge into *actionable insights*! \",\r\n  \"# Atomic Notes\\n**Atomic notes** (one idea per note) make knowledge more *reusable*! \",\r\n  \"# Connected Thinking\\n**Bidirectional linking** creates a *network of connected thoughts*! \",\r\n  \"# Metadata Magic\\n**Consistent metadata** helps track and organize your knowledge over time! \",\r\n  \"# Regular Reviews\\n**Regular knowledge reviews** help *strengthen* your understanding! \",\r\n  \"# Natural Growth\\nTopic hierarchies can evolve *naturally* through **linked notes**! \",\r\n\r\n  // Advanced Obsidian Features\r\n  \"# Power of Dataview\\n**Obsidian Dataview** lets you create *dynamic content views*! \",\r\n  \"# Visual Thinking\\n**Obsidian Canvas** helps *visualize* complex relationships! \",\r\n  \"# Custom Styling\\nUse **CSS snippets** to *customize* your Obsidian workspace! \",\r\n  \"# Template Power\\n**Obsidian templates** can *automate* note creation! \",\r\n  \"# Structured Data\\n**Properties** help add *structured metadata* to your notes! \",\r\n  \"# Stay in Sync\\n**Obsidian sync** keeps your knowledge base *consistent* across devices! \",\r\n  \"# Share Knowledge\\nPublish your notes as a **beautiful website** with [Obsidian Publish](https://obsidian.md/publish)! \",\r\n\r\n  // Modern PKM & AI Integration\r\n  \"# AI Analysis\\n**AI** can help *analyze patterns* in your knowledge base! \",\r\n  \"# Smart Summaries\\n**LLMs** can generate *structured summaries* from your notes! \",\r\n  \"# Semantic Search\\n**Knowledge graphs** enable *semantic search* of your notes! \",\r\n  \"# Smart Connections\\n**Machine learning** can suggest *relevant note connections*! \",\r\n  \"# AI Assistance\\n**AI assistants** can help *maintain* your knowledge base! \",\r\n  \"# Vector Search\\n**Vector embeddings** enable *semantic similarity search*! \",\r\n  \"# Gap Analysis\\n**AI** can help identify *knowledge gaps* in your notes! \",\r\n  \"# Enhanced Learning\\n**Modern PKM tools** integrate with *AI* for enhanced learning! \",\r\n\r\n  // Synaptic Labs Integration\r\n  \"# Flow Products\\nSynaptic Labs offers [Flow products](https://www.synapticlabs.ai/flows) for **guided knowledge workflows**! \",\r\n  \"# Optimize Your Workflow\\nStreamline your process with our [Flow system](https://www.synapticlabs.ai/flows) for *enhanced productivity*! \",\r\n  \r\n  \"# Join Our Community\\nJoin our [Discord community](https://discord.gg/z5DgD5ZHNJ) for **PKM tips** and *discussions*! \",\r\n  \"# Connect with Peers\\nShare ideas in our [Discord space](https://discord.gg/z5DgD5ZHNJ) with fellow **knowledge enthusiasts**! \",\r\n  \r\n  \"# AI Agents\\nLearn about our [AI agents](https://www.synapticlabs.ai/agents) and **automations**! \",\r\n  \"# Smart Automation\\nDiscover how our [AI assistants](https://www.synapticlabs.ai/agents) can *transform* your workflow! \",\r\n  \r\n  \"# Level Up\\nLevel up your skills with our [bootcamps](https://www.synapticlabs.ai/bootcamps)! \",\r\n  \"# Skill Building\\nAccelerate your learning through our intensive [training programs](https://www.synapticlabs.ai/bootcamps)! \",\r\n  \r\n  \"# Latest Insights\\nRead our latest insights at [our blog](https://blog.synapticlabs.ai)! \",\r\n  \"# Knowledge Hub\\nStay updated with fresh perspectives on our [blog](https://blog.synapticlabs.ai)! \",\r\n  \r\n  \"# Tutorials & Tips\\nGet tutorials and tips at our [YouTube channel](https://www.youtube.com/@SynapticLabs)! \",\r\n  \"# Video Resources\\nLearn visually through our [YouTube content](https://www.youtube.com/@SynapticLabs)! \",\r\n  \r\n  \"# About Us\\nLearn more at [Synaptic Labs](https://www.synapticlabs.ai/about)! \",\r\n  \"# Our Story\\nDiscover what drives us at [Synaptic Labs](https://www.synapticlabs.ai/about)! \",\r\n  \r\n  \"# Contact Us\\nHave questions? [Reach out](https://www.synapticlabs.ai/contact-us) to us! \",\r\n  \"# Get In Touch\\nNeed assistance? [Contact our team](https://www.synapticlabs.ai/contact-us) for support! \"\r\n];\r\n\r\n/**\r\n * Initialize the formatted messages array by pre-formatting all messages.\r\n * This is called immediately to prepare messages at startup time.\r\n */\r\nfunction initializeFormattedMessages() {\r\n  formattedMessages = messages.map(message => formatMessage(message));\r\n}\r\n\r\n/**\r\n * Returns a random message from the pre-formatted messages array\r\n * @returns {string} A randomly selected message, already formatted with HTML\r\n */\r\nexport function getRandomMessage() {\r\n  const randomIndex = Math.floor(Math.random() * formattedMessages.length);\r\n  return formattedMessages[randomIndex];\r\n}\r\n\r\n// Format all messages at startup\r\ninitializeFormattedMessages();\r\n\r\n// Export the original messages for reference if needed\r\nexport const conversionMessages = messages;\r\n","<!-- \r\n  ConversionProgress.svelte\r\n  \r\n  A simplified component that shows conversion progress with a timer and rotating fun messages.\r\n  Messages rotate on a fixed interval, completely independent of actual conversion progress.\r\n  \r\n  Related files:\r\n  - frontend/src/lib/utils/conversionMessages.js: Source of fun messages\r\n  - frontend/src/lib/stores/conversionTimer.js: Timer functionality\r\n  - frontend/src/lib/stores/unifiedConversion.js: Basic conversion state\r\n-->\r\n<script>\r\n  import { onDestroy, onMount, createEventDispatcher } from 'svelte';\r\n  import ChatBubble from './common/ChatBubble.svelte';\r\n  import Timer from './common/Timer.svelte';\r\n  import Button from './common/Button.svelte';\r\n  \r\n  const dispatch = createEventDispatcher();\r\n  import { unifiedConversion, ConversionState } from '../stores/unifiedConversion';\r\n  import { getRandomMessage } from '../utils/conversionMessages';\r\n  \r\n  // Track bubble position to alternate\r\n  let bubblePosition = 'left';\r\n  \r\n  // Function to toggle and return position\r\n  function togglePosition() {\r\n    bubblePosition = bubblePosition === 'left' ? 'right' : 'left';\r\n    return bubblePosition;\r\n  }\r\n\r\n  // State for message rotation and typing animation\r\n  let messageTimeout;\r\n  let typingTimeout;\r\n  let typingInterval;\r\n  let currentMessage = '';\r\n  let displayedMessage = '';\r\n  let isTyping = true;\r\n  let showMessage = true;\r\n  let isAnimating = false;\r\n  \r\n  // Animation configuration\r\n  const typingSpeed = 40; // milliseconds per character\r\n  const messageDisplayTime = 4000; // Time to display message\r\n  const typingIndicatorTime = 800; // Time to show typing indicator\r\n\r\n  // Persistent state for completion\r\n  let isPersistentlyCompleted = false;\r\n  let completionMessage = '';\r\n  let finalTotalCount = 0;\r\n  let finalElapsedTime = '';\r\n\r\n  // Subscribe to minimal set of store properties\r\n  let status = ConversionState.STATUS.IDLE;\r\n  let totalCount = 0;\r\n  let error = null;\r\n\r\n  // Function to capture completion state\r\n  function captureCompletionState() {\r\n    isPersistentlyCompleted = true;\r\n    finalTotalCount = totalCount;\r\n    \r\n    // Get the elapsed seconds directly from the unifiedConversion store\r\n    const elapsedSeconds = $unifiedConversion.elapsedSeconds;\r\n    \r\n    // Format the elapsed seconds into HH:MM:SS\r\n    finalElapsedTime = unifiedConversion.formatElapsedTime(elapsedSeconds);\r\n    \r\n    // Ensure we have a valid time (not 00:00:00)\r\n    if (finalElapsedTime === '00:00:00' || elapsedSeconds === 0) {\r\n      console.warn('Timer captured zero time, using fallback');\r\n      // Use a fallback time of at least 1 second\r\n      finalElapsedTime = '00:00:01';\r\n    }\r\n    \r\n    completionMessage = `Successfully converted ${finalTotalCount > 0 ? `all ${finalTotalCount} files` : 'your content'}! <br>Time taken: ${finalElapsedTime}`;\r\n    stopMessageAnimation();\r\n  }\r\n\r\n  // Function to reset state\r\n  export function resetState() {\r\n    // Reset all local state variables\r\n    isPersistentlyCompleted = false;\r\n    completionMessage = '';\r\n    finalTotalCount = 0;\r\n    finalElapsedTime = '';\r\n    stopMessageAnimation();\r\n    \r\n    // Only start animation if we're in an active conversion state\r\n    if (status !== ConversionState.STATUS.IDLE && \r\n        status !== ConversionState.STATUS.COMPLETED && \r\n        status !== ConversionState.STATUS.ERROR &&\r\n        status !== ConversionState.STATUS.CANCELLED) {\r\n      animateMessage();\r\n    }\r\n  }\r\n\r\n  function animateMessage() {\r\n    if (isAnimating) return;\r\n    \r\n    isAnimating = true;\r\n    currentMessage = getRandomMessage();\r\n    displayedMessage = '';\r\n    isTyping = true;\r\n    showMessage = true;\r\n    \r\n    typingTimeout = setTimeout(() => {\r\n      isTyping = false;\r\n      \r\n      let charIndex = 0;\r\n      let fullMessage = currentMessage;\r\n      \r\n      typingInterval = setInterval(() => {\r\n        if (charIndex < fullMessage.length) {\r\n          displayedMessage = fullMessage.substring(0, charIndex + 1);\r\n          charIndex++;\r\n        } else {\r\n          clearInterval(typingInterval);\r\n          typingInterval = null;\r\n          \r\n          typingTimeout = setTimeout(() => {\r\n            messageTimeout = setTimeout(() => {\r\n              isAnimating = false;\r\n              animateMessage();\r\n            }, 100);\r\n          }, messageDisplayTime);\r\n        }\r\n      }, typingSpeed);\r\n    }, typingIndicatorTime);\r\n  }\r\n\r\n  function stopMessageAnimation() {\r\n    isAnimating = false;\r\n    \r\n    if (messageTimeout) {\r\n      clearTimeout(messageTimeout);\r\n      messageTimeout = null;\r\n    }\r\n    \r\n    if (typingTimeout) {\r\n      clearTimeout(typingTimeout);\r\n      typingTimeout = null;\r\n    }\r\n    \r\n    if (typingInterval) {\r\n      clearInterval(typingInterval);\r\n      typingInterval = null;\r\n    }\r\n  }\r\n\r\n  // Subscription to conversion state with enhanced completion handling\r\n  const unsubStatus = unifiedConversion.subscribe(value => {\r\n    const prevStatus = status;\r\n    status = value.status;\r\n    totalCount = value.totalCount || 0;\r\n    error = value.error;\r\n\r\n    // Handle transition to active state\r\n    if (status !== ConversionState.STATUS.IDLE && \r\n        status !== ConversionState.STATUS.COMPLETED && \r\n        status !== ConversionState.STATUS.ERROR &&\r\n        status !== ConversionState.STATUS.CANCELLED) {\r\n      \r\n      if (!isAnimating) {\r\n        animateMessage();\r\n      }\r\n    }\r\n    \r\n    // Handle completion state\r\n    if (status === ConversionState.STATUS.COMPLETED) {\r\n      if (!isPersistentlyCompleted) {\r\n        captureCompletionState();\r\n      }\r\n    }\r\n    \r\n    // Handle error and cancellation states\r\n    if ((status === ConversionState.STATUS.ERROR || \r\n         status === ConversionState.STATUS.CANCELLED) &&\r\n        prevStatus !== status) {  // Only handle state change\r\n      stopMessageAnimation();\r\n    }\r\n  });\r\n\r\n  onMount(() => {\r\n    if (status !== ConversionState.STATUS.IDLE && \r\n        status !== ConversionState.STATUS.COMPLETED && \r\n        status !== ConversionState.STATUS.ERROR &&\r\n        status !== ConversionState.STATUS.CANCELLED &&\r\n        !isPersistentlyCompleted) {\r\n      \r\n      if (!isAnimating) {\r\n        animateMessage();\r\n      }\r\n    }\r\n  });\r\n\r\n  // Ensure cleanup on component destroy\r\n  onDestroy(() => {\r\n    unsubStatus();\r\n    stopMessageAnimation();\r\n  });\r\n</script>\r\n\r\n{#if status !== ConversionState.STATUS.IDLE && status !== ConversionState.STATUS.CANCELLED}\r\n  <div class=\"conversion-progress\" class:fade-in={status !== ConversionState.STATUS.IDLE}>\r\n    <!-- Chat Bubbles -->\r\n    <div class=\"chat-container\">\r\n      {#if status === ConversionState.STATUS.COMPLETED || isPersistentlyCompleted}\r\n        <ChatBubble\r\n          name=\"Codex\"\r\n          avatar=\"\"\r\n          message={completionMessage}\r\n          avatarPosition={togglePosition()}\r\n        />\r\n      {:else if status === ConversionState.STATUS.ERROR}\r\n        <ChatBubble\r\n          name=\"Codex\"\r\n          avatar=\"\"\r\n          message={`Encountered an error during conversion: ${error || 'Unknown error'}. Please try again.`}\r\n          avatarPosition={togglePosition()}\r\n        />\r\n      {:else if status === 'stopped' || status === ConversionState.STATUS.CANCELLED}\r\n        <ChatBubble\r\n          name=\"Codex\"\r\n          avatar=\"\"\r\n          message={`Conversion ${status === ConversionState.STATUS.CANCELLED ? 'cancelled' : 'stopped'}. ${totalCount > 0 ? `Processed some of ${totalCount} files.` : ''}`}\r\n          avatarPosition={togglePosition()}\r\n        />\r\n      {:else}\r\n        <!-- Show rotating fun messages during active conversion with typing effect -->\r\n        <ChatBubble\r\n          name=\"Codex\"\r\n          avatar=\"\"\r\n          message={displayedMessage}\r\n          avatarPosition={togglePosition()}\r\n          isTyping={isTyping}\r\n        />\r\n      {/if}\r\n    </div>\r\n\r\n    <!-- Conversion Timer and Cancel Button - only show during active conversion -->\r\n    {#if !isPersistentlyCompleted && status !== ConversionState.STATUS.COMPLETED && status !== ConversionState.STATUS.ERROR && status !== ConversionState.STATUS.CANCELLED}\r\n      <div class=\"conversion-actions\">\r\n        <Timer />\r\n        <Button \r\n          variant=\"danger\"\r\n          size=\"medium\"\r\n          fullWidth\r\n          on:click={() => dispatch('cancel')}\r\n        >\r\n          <span class=\"icon\"></span>\r\n          Cancel\r\n        </Button>\r\n      </div>\r\n    {/if}\r\n  </div>\r\n{/if}\r\n\r\n<style>\r\n  .conversion-actions {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    gap: var(--spacing-md);\r\n    margin-top: var(--spacing-sm);\r\n    width: 100%;\r\n    max-width: 300px;\r\n  }\r\n\r\n  .icon {\r\n    margin-right: var(--spacing-xs);\r\n  }\r\n  \r\n  .conversion-progress {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n    padding: 1rem;\r\n    max-width: 900px;\r\n    margin: 0 auto;\r\n    align-items: center;\r\n  }\r\n  \r\n  .chat-container {\r\n    margin-bottom: 0;\r\n    width: 100%;\r\n  }\r\n\r\n  .fade-in {\r\n    animation: fadeIn 0.3s ease-in;\r\n  }\r\n\r\n  @keyframes fadeIn {\r\n    from { opacity: 0; }\r\n    to { opacity: 1; }\r\n  }\r\n</style>\r\n","<script>\r\n  import { createEventDispatcher, onMount } from 'svelte';\r\n  import { fade } from 'svelte/transition';\r\n  import Button from './common/Button.svelte';\r\n  import Container from './common/Container.svelte';\r\n  import ConversionProgress from './ConversionProgress.svelte';\r\n  import { unifiedConversion, ConversionState, currentFile } from '../stores/unifiedConversion.js';\r\n  import { conversionResult } from '../stores/conversionResult.js';\r\n  import { clearFiles, downloadHandler, storeManager } from '../utils/conversion';\r\n  import { files } from '../stores/files.js';\r\n\r\n  const dispatch = createEventDispatcher();\r\n  \r\n  /**\r\n   * Handles cancellation of the current conversion\r\n   */\r\n  function handleCancel() {\r\n    storeManager.cancelConversion();\r\n  }\r\n  \r\n  // Reference to ConversionProgress component\r\n  let conversionProgressComponent;\r\n\r\n  // Local state for persistent completion\r\n  let persistentCompletion = false;\r\n  let hasCompletedOnce = false;\r\n\r\n  // Reactive declarations for status\r\n  $: isConverting = !persistentCompletion && [\r\n    ConversionState.STATUS.PREPARING, \r\n    ConversionState.STATUS.CONVERTING, \r\n    'selecting_output', // Legacy status\r\n    ConversionState.STATUS.INITIALIZING, \r\n    'initializing_workers', // Legacy status\r\n    ConversionState.STATUS.CLEANING_UP,\r\n    // Website-specific states (legacy)\r\n    'finding_sitemap',\r\n    'parsing_sitemap',\r\n    'crawling_pages',\r\n    'processing_pages',\r\n    'generating_index'\r\n  ].includes($unifiedConversion.status);\r\n  $: {\r\n    // Track completion state in a way that persists\r\n    const statusCompleted = $unifiedConversion.status === ConversionState.STATUS.COMPLETED || $unifiedConversion.completionTime !== null;\r\n    const resultCompleted = $conversionResult && $conversionResult.success;\r\n    const hasValidResult = $conversionResult?.outputPath != null;\r\n    \r\n    if (statusCompleted || resultCompleted || hasValidResult) {\r\n      persistentCompletion = true;\r\n      hasCompletedOnce = true;\r\n    }\r\n  }\r\n  \r\n  // Use the persistent completion flag for completed state\r\n  $: isCompleted = persistentCompletion;\r\n  $: hasError = $unifiedConversion.error !== null;\r\n  \r\n  // Check if we have a native file path result\r\n  $: hasNativeResult = $conversionResult && $conversionResult.isNative && $conversionResult.outputPath;\r\n  \r\n  /**\r\n   * Opens the output folder directly in the file explorer\r\n   */\r\n  function showInFolder() {\r\n    if (!$conversionResult?.outputPath) return;\r\n    downloadHandler.showInFolder($conversionResult.outputPath);\r\n  }\r\n  \r\n  /**\r\n   * Resets the application state to allow converting more files\r\n   * without reloading the page\r\n   */\r\n  function handleConvertMore() {\r\n    try {\r\n      // Reset ConversionProgress component state if exists\r\n      if (conversionProgressComponent) {\r\n        conversionProgressComponent.resetState();\r\n      }\r\n\r\n      // Reset local state\r\n      persistentCompletion = false;\r\n      hasCompletedOnce = false;\r\n\r\n      // Use storeManager to reset all stores\r\n      storeManager.resetStores();\r\n\r\n      // Dispatch event to parent component to switch mode\r\n      dispatch('convertMore');\r\n    } catch (error) {\r\n      console.error('Error resetting state:', error);\r\n      // Still try to dispatch event even if cleanup fails\r\n      dispatch('convertMore');\r\n    }\r\n  }\r\n</script>\r\n\r\n<Container>\r\n  <div class=\"conversion-status\" transition:fade>\r\n    {#if isConverting || isCompleted || hasError}\r\n      <!-- Progress section -->\r\n      <div class=\"progress-section\">\r\n        <!-- Use the simplified conversion progress for all conversion types -->\r\n        <ConversionProgress \r\n          bind:this={conversionProgressComponent} \r\n          on:cancel={handleCancel}\r\n        />\r\n      </div>\r\n\r\n      <!-- Action buttons - only show when completed -->\r\n      {#if isCompleted}\r\n        <div class=\"action-section\">\r\n          <div class=\"button-container\">\r\n            {#if hasNativeResult}\r\n              <!-- Button for native file system -->\r\n              <Button \r\n                variant=\"secondary\"\r\n                size=\"large\"\r\n                on:click={showInFolder}\r\n              >\r\n                <span class=\"button-icon\"></span> Open Folder\r\n              </Button>\r\n            {/if}\r\n            <Button \r\n              variant=\"secondary\"\r\n              size=\"large\"\r\n              on:click={handleConvertMore}\r\n            >\r\n              <span class=\"button-icon\"></span> Convert More\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      {:else if hasError}\r\n        <div class=\"action-section\">\r\n          <div class=\"button-container\">\r\n            <Button \r\n              variant=\"primary\"\r\n              size=\"large\"\r\n              on:click={handleConvertMore}\r\n            >\r\n              <span class=\"button-icon\"></span> Try Again\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      {/if}\r\n    {:else}\r\n      <!-- Initial state - Show nothing -->\r\n    {/if}\r\n  </div>\r\n</Container>\r\n\r\n<style>\r\n  .conversion-status {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: var(--spacing-md);\r\n    padding: var(--spacing-md) 0;\r\n  }\r\n\r\n  .progress-section {\r\n    width: 100%;\r\n    margin: 0 auto;\r\n    padding: var(--spacing-md);\r\n    border-radius: var(--rounded-lg);\r\n    background-color: var(--color-background);\r\n    box-shadow: var(--shadow-sm);\r\n  }\r\n\r\n  .action-section {\r\n    margin-top: var(--spacing-sm);\r\n  }\r\n\r\n  .button-container {\r\n    width: 100%;\r\n    display: flex;\r\n    gap: var(--spacing-md);\r\n    justify-content: center;\r\n    padding: var(--spacing-sm) 0;\r\n  }\r\n\r\n  .button-icon {\r\n    margin-right: var(--spacing-xs);\r\n  }\r\n\r\n  /* Mobile Adjustments */\r\n  @media (max-width: 640px) {\r\n    .conversion-status {\r\n      gap: var(--spacing-sm);\r\n      padding: var(--spacing-sm) 0;\r\n    }\r\n\r\n    .button-container {\r\n      flex-direction: column;\r\n    }\r\n  }\r\n</style>\r\n","<script>\r\n  import { onMount } from 'svelte';\r\n  import WelcomeChat from './common/WelcomeChat.svelte';\r\n  import FileUploader from './FileUploader.svelte';\r\n  import Container from './common/Container.svelte';\r\n  import { files } from '../stores/files.js';\r\n  import { startConversion } from '../utils/conversion';\r\n  import { conversionResult } from '../stores/conversionResult.js';\r\n  import { unifiedConversion, ConversionState } from '../stores/unifiedConversion.js';\r\n  import welcomeState, { MESSAGE_TYPES } from '../stores/welcomeState.js';\r\n  import ResultDisplay from './ResultDisplay.svelte';\r\n\r\n  let mode = 'welcome'; // Start with welcome mode\r\n  let showWelcome = false;\r\n  let hasCompletedConversion = false; // Track if a conversion has completed\r\n  \r\n  // Function to smoothly scroll to top of page\r\n  function scrollToTop() {\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  }\r\n\r\n  // Check if current conversion is a website conversion\r\n  $: isWebsiteConversion = $unifiedConversion.type === ConversionState.TYPE.WEBSITE;\r\n  \r\n  // Subscribe to conversion status and result changes\r\n  $: if ($unifiedConversion.status === ConversionState.STATUS.COMPLETED || $unifiedConversion.completionTime) {\r\n    mode = 'converted';\r\n    hasCompletedConversion = true;\r\n    scrollToTop();\r\n  } else if (isWebsiteConversion) {\r\n    // Ensure we're in converting mode for website conversions\r\n    mode = 'converting';\r\n  }\r\n  \r\n  // If we have a result, ensure we're in converted mode\r\n  $: if ($conversionResult && $conversionResult.success) {\r\n    if (!hasCompletedConversion) {\r\n      mode = 'converted';\r\n      hasCompletedConversion = true;\r\n      scrollToTop();\r\n    }\r\n  }\r\n\r\n  function handleStartConversion() {\r\n    mode = 'converting';\r\n    scrollToTop();\r\n    conversionResult.clearResult();\r\n    startConversion();\r\n  }\r\n\r\n  function handleConvertMore() {\r\n    scrollToTop();\r\n    files.clearFiles();\r\n    unifiedConversion.reset();\r\n    conversionResult.clearResult();\r\n    hasCompletedConversion = false; // Reset the completion flag\r\n    mode = 'upload';\r\n  }\r\n  \r\n  // Handle welcome chat closed event\r\n  function handleWelcomeClosed() {\r\n    mode = 'upload';\r\n  }\r\n  \r\n  // Handle welcome chat continue event\r\n  function handleWelcomeContinue() {\r\n    mode = 'upload';\r\n  }\r\n\r\n  // Setup on mount\r\n  onMount(() => {\r\n    // Check if we should show welcome messages\r\n    showWelcome = welcomeState.shouldShowWelcome();\r\n    \r\n    // If we shouldn't show welcome, go straight to upload mode\r\n    if (!showWelcome) {\r\n      mode = 'upload';\r\n    }\r\n  });\r\n</script>\r\n\r\n<div class=\"app-container\">\r\n  <div class=\"converter-app\">\r\n    {#if mode === 'welcome'}\r\n      <WelcomeChat \r\n        messageType={MESSAGE_TYPES.WELCOME}\r\n        on:closed={handleWelcomeClosed}\r\n        on:continue={handleWelcomeContinue}\r\n      />\r\n    {:else if mode === 'upload'}\r\n      <div class=\"main-content\">\r\n        <FileUploader\r\n          showConversionButton={$files.length > 0}\r\n          onStartConversion={handleStartConversion}\r\n        />\r\n      </div>\r\n    {:else if mode === 'converting'}\r\n      <ResultDisplay \r\n        on:startConversion={handleStartConversion}\r\n        on:convertMore={handleConvertMore} \r\n      />\r\n    {:else if mode === 'converted'}\r\n      <ResultDisplay \r\n        on:startConversion={handleStartConversion}\r\n        on:convertMore={handleConvertMore}\r\n      />\r\n    {/if}\r\n  </div>\r\n</div>\r\n\r\n<style>\r\n  .app-container {\r\n    width: 100%;\r\n    min-height: 100vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    padding: var(--spacing-sm);\r\n    background-color: var(--color-background);\r\n  }\r\n\r\n  .converter-app {\r\n    width: 100%;\r\n    max-width: 1200px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: var(--spacing-2xs);\r\n  }\r\n\r\n  .main-content {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: var(--spacing-md);\r\n    padding: var(--spacing-sm);\r\n  }\r\n  \r\n  /* Button container styling moved to FileList.svelte */\r\n</style>\r\n","<!-- \r\n  Home.svelte - Main converter interface\r\n  This is the primary page component that hosts the file conversion interface.\r\n  Migrated from SvelteKit routes to a standard Svelte component.\r\n  \r\n  Key features:\r\n  - File upload and conversion interface\r\n  - Progress tracking\r\n  - Result display\r\n  \r\n  Connected components:\r\n  - CodexMdConverter.svelte: Main converter component\r\n-->\r\n<script>\r\n  import CodexMdConverter from '../lib/components/CodexMdConverter.svelte';\r\n</script>\r\n\r\n<div class=\"home-container\">\r\n  <CodexMdConverter />\r\n</div>\r\n\r\n<style>\r\n  .home-container {\r\n    width: 100%;\r\n    height: 100%;\r\n    padding: 1rem;\r\n  }\r\n</style>\r\n","<!-- \r\n  About.svelte - Company and product information page\r\n  Provides detailed information about codex.md and Synaptic Labs.\r\n  Migrated from SvelteKit routes to a standard Svelte component.\r\n  \r\n  Features:\r\n  - Product information and key features\r\n  - Company mission and services\r\n  - Social media and contact links\r\n  - Responsive design with bento grid layout\r\n  \r\n  Dependencies:\r\n  - Static assets (synaptic-labs-logo.png)\r\n  - Global CSS variables for theming\r\n-->\r\n<script>\r\n  // No imports needed\r\n</script>\r\n\r\n<div class=\"about-container\">\r\n  <section class=\"about-section\">\r\n    <h1>About <span class=\"codex-md-brand\">codex.md</span></h1>\r\n\r\n    <p>\r\n      <span class=\"codex-md-brand\">codex.md</span> is an elegant, cross-platform desktop application developed by Synaptic Labs, and designed to convert various file formats into pristine Markdown for seamless integration with applications .md first applications like Obsidian. Built with Electron and Svelte, <span class=\"codex-md-brand\">codex.md</span> bridges the gap between different content formats and your knowledge base.\r\n    </p>\r\n\r\n    <h2>Key Features</h2>\r\n    <ul>\r\n      <li>\r\n        <strong>Multi-format Support</strong>: Convert documents (PDF, DOCX, PPTX), data files (CSV, XLSX), web content (URLs, parent pages), and multimedia (audio, video) to structured Markdown.\r\n      </li>\r\n      <li>\r\n        <strong>Local Processing</strong>: Process most files locally without internet dependency, ensuring privacy and data security (Audio, Video and advanced PDFs require APIs).\r\n      </li>\r\n      <li>\r\n        <strong>Intelligent Formatting</strong>: Preserve document structure, headings, tables, and formatting during conversion for high-fidelity output.\r\n      </li>\r\n      <li>\r\n        <strong>Batch Processing</strong>: Convert multiple files at once with organized output files and proper metadata.\r\n      </li>\r\n      <li>\r\n        <strong>AI Integration</strong>: Transcribe audio and video content, and use more advanced PDf processing using state-of-the-art AI technology (requires API key).\r\n      </li>\r\n    </ul>\r\n\r\n    <h2>Development</h2>\r\n    <p>\r\n      <span class=\"codex-md-brand\">codex.md</span> is an open-source project developed by Synaptic Labs, leveraging modern web technologies to create powerful desktop software. The application combines Electron for native desktop capabilities, Svelte for a responsive user interface, and Node.js for processing.\r\n    </p>\r\n\r\n    <h3>Contribution</h3>\r\n    <p>\r\n      We welcome contributions from the community! Visit our <a href=\"https://github.com/SynapticLabs/codex-md\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub repository</a> to get involved, submit issues, or create pull requests.\r\n    </p>\r\n\r\n    <h3>License</h3>\r\n    <p>\r\n      <span class=\"codex-md-brand\">codex.md</span> is released under the MIT License, allowing for free use, modification, and distribution.\r\n    </p>\r\n  </section>\r\n\r\n  <hr class=\"divider\" />\r\n\r\n  <div class=\"synaptic-banner\">\r\n    <img src=\"/static/synaptic-labs-logo.png\" alt=\"Synaptic Labs Logo\">\r\n  </div>\r\n  \r\n  <section class=\"about-section\">\r\n    <h2>Our Mission</h2>\r\n    <p class=\"mission-statement\">\r\n      \"Powering equitable access to emerging technologies through education and integration\"\r\n    </p>\r\n\r\n    <h2>What We Do</h2>\r\n    <p>\r\n      Synaptic Labs delivers specialized AI solutions and knowledge management tools to help organizations leverage emerging technologies:\r\n    </p>\r\n    \r\n    <div class=\"bento-grid services-grid\">\r\n      <a href=\"https://www.synapticlabs.ai/agents\" class=\"bento-card ai-card\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n        <div class=\"card-emoji\"></div>\r\n        <h3>AI Agents</h3>\r\n        <p>Custom AI agents and automation solutions</p>\r\n      </a>\r\n      \r\n      <a href=\"https://www.synapticlabs.ai/flows\" class=\"bento-card flow-card\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n        <div class=\"card-emoji\"></div>\r\n        <h3>Flow Products</h3>\r\n        <p>Guided knowledge workflows</p>\r\n      </a>\r\n      \r\n      <a href=\"https://www.synapticlabs.ai/bootcamps\" class=\"bento-card bootcamp-card\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n        <div class=\"card-emoji\"></div>\r\n        <h3>Bootcamps</h3>\r\n        <p>Level up your skills with expert training</p>\r\n      </a>\r\n      \r\n      <a href=\"https://blog.synapticlabs.ai\" class=\"bento-card blog-card\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n        <div class=\"card-emoji\"></div>\r\n        <h3>Blog</h3>\r\n        <p>Latest insights and knowledge management tips</p>\r\n      </a>\r\n    </div>\r\n\r\n    <h2>Connect With Us</h2>\r\n    <div class=\"bento-container\">\r\n      <div class=\"contact-grid\">\r\n        <a href=\"https://www.synapticlabs.ai/about\" class=\"contact-card website\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          <span class=\"contact-emoji\"></span>\r\n          <span class=\"contact-name\">About Us</span>\r\n        </a>\r\n        \r\n        <a href=\"https://www.synapticlabs.ai/contact-us\" class=\"contact-card contact\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          <span class=\"contact-emoji\"></span>\r\n          <span class=\"contact-name\">Contact Us</span>\r\n        </a>\r\n      </div>\r\n      \r\n      <div class=\"social-grid\">\r\n        <a href=\"https://discord.gg/z5DgD5ZHNJ\" class=\"social-card discord\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          <span class=\"social-emoji\"></span>\r\n          <span class=\"social-name\">Discord</span>\r\n        </a>\r\n        \r\n        <a href=\"https://www.linkedin.com/company/synaptic-labs/\" class=\"social-card linkedin\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          <span class=\"social-emoji\"></span>\r\n          <span class=\"social-name\">LinkedIn</span>\r\n        </a>\r\n        \r\n        <a href=\"https://www.youtube.com/@SynapticLabs\" class=\"social-card youtube\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          <span class=\"social-emoji\"></span>\r\n          <span class=\"social-name\">YouTube</span>\r\n        </a>\r\n        \r\n        <a href=\"https://www.instagram.com/synapticlabs\" class=\"social-card instagram\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          <span class=\"social-emoji\"></span>\r\n          <span class=\"social-name\">Instagram</span>\r\n        </a>\r\n      </div>\r\n    </div>\r\n  </section>\r\n\r\n  <div class=\"copyright\">\r\n     2025 Synaptic Labs. All rights reserved.\r\n  </div>\r\n</div>\r\n\r\n<style>\r\n  .about-container {\r\n    max-width: 900px;\r\n    margin: 0 auto;\r\n    padding: var(--spacing-md);\r\n    color: var(--color-text);\r\n    line-height: 1.6;\r\n  }\r\n\r\n  .about-section {\r\n    margin-bottom: var(--spacing-xl);\r\n  }\r\n\r\n  h1 {\r\n    font-size: var(--font-size-3xl);\r\n    color: var(--color-prime);\r\n    margin-bottom: var(--spacing-md);\r\n    font-weight: 700;\r\n    line-height: 1.2;\r\n  }\r\n\r\n  h2 {\r\n    font-size: var(--font-size-xl);\r\n    color: var(--color-fourth);\r\n    margin-top: var(--spacing-lg);\r\n    margin-bottom: var(--spacing-sm);\r\n    font-weight: 600;\r\n  }\r\n\r\n  h3 {\r\n    font-size: var(--font-size-lg);\r\n    color: var(--color-text);\r\n    margin-top: var(--spacing-md);\r\n    margin-bottom: var(--spacing-xs);\r\n    font-weight: 600;\r\n  }\r\n\r\n  p {\r\n    margin-bottom: var(--spacing-md);\r\n  }\r\n\r\n  ul {\r\n    margin-bottom: var(--spacing-md);\r\n    padding-left: var(--spacing-lg);\r\n  }\r\n\r\n  li {\r\n    margin-bottom: var(--spacing-xs);\r\n  }\r\n\r\n  /* codex.md brand styling */\r\n  :global(.about-container .codex-md-brand) {\r\n    font-weight: 700;\r\n    background: linear-gradient(135deg, \r\n      #00A99D 0%,\r\n      #00A99D 40%,\r\n      #F7931E 100%\r\n    );\r\n    background-size: 400% 400%;\r\n    animation: gradientFlow 8s ease infinite;\r\n    -webkit-background-clip: text;\r\n    background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n    display: inline-block;\r\n  }\r\n\r\n  @keyframes gradientFlow {\r\n    0% {\r\n      background-position: 0% 0%;\r\n    }\r\n    50% {\r\n      background-position: 100% 100%;\r\n    }\r\n    100% {\r\n      background-position: 0% 0%;\r\n    }\r\n  }\r\n\r\n  strong {\r\n    font-weight: 600;\r\n    color: var(--color-text-emphasis);\r\n  }\r\n\r\n  a {\r\n    color: var(--color-prime);\r\n    text-decoration: none;\r\n    transition: all 0.2s ease;\r\n  }\r\n\r\n  a:hover {\r\n    color: var(--color-fourth);\r\n    text-decoration: none;\r\n  }\r\n\r\n  .divider {\r\n    border: 0;\r\n    height: 1px;\r\n    background: var(--color-border);\r\n    margin: var(--spacing-xl) 0;\r\n  }\r\n\r\n  .synaptic-banner {\r\n    text-align: center;\r\n    margin: var(--spacing-xl) 0;\r\n  }\r\n  \r\n  .synaptic-banner img {\r\n    max-width: 300px;\r\n  }\r\n\r\n  .mission-statement {\r\n    font-style: italic;\r\n    font-weight: 500;\r\n    color: var(--color-text-emphasis);\r\n    text-align: center;\r\n    padding: var(--spacing-md);\r\n    border-left: 4px solid var(--color-prime);\r\n    background: var(--color-surface);\r\n    border-radius: var(--rounded-md);\r\n  }\r\n\r\n  /* Bento Grid Styles */\r\n  .bento-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(2, 1fr);\r\n    gap: var(--spacing-md);\r\n    margin: var(--spacing-lg) 0;\r\n  }\r\n\r\n  .bento-card {\r\n    background-color: var(--color-surface);\r\n    border-radius: var(--rounded-lg);\r\n    padding: var(--spacing-lg);\r\n    padding-bottom: calc(var(--spacing-lg) + 30px); /* Extra space for the \"Learn More\" text */\r\n    box-shadow: var(--shadow-sm);\r\n    transition: transform 0.3s ease, box-shadow 0.3s ease;\r\n    text-decoration: none;\r\n    color: var(--color-text);\r\n    display: flex;\r\n    flex-direction: column;\r\n    border: 2px solid var(--color-border);\r\n  }\r\n\r\n  .bento-card {\r\n    position: relative;\r\n  }\r\n\r\n  .bento-card:hover {\r\n    transform: translateY(-5px);\r\n    box-shadow: var(--shadow-md);\r\n  }\r\n\r\n  .bento-card:hover::after {\r\n    content: \"Learn More \";\r\n    position: absolute;\r\n    bottom: var(--spacing-sm);\r\n    right: var(--spacing-sm);\r\n    font-size: var(--font-size-xs);\r\n    color: var(--color-prime);\r\n    font-weight: var(--font-weight-medium);\r\n    background-color: rgba(255, 255, 255, 0.9);\r\n    padding: 4px 8px;\r\n    border-radius: var(--rounded-sm);\r\n    box-shadow: var(--shadow-sm);\r\n  }\r\n\r\n  .ai-card:hover::after {\r\n    color: var(--color-prime);\r\n  }\r\n\r\n  .flow-card:hover::after {\r\n    color: var(--color-second);\r\n  }\r\n\r\n  .card-emoji {\r\n    font-size: 2.5rem;\r\n    margin-bottom: var(--spacing-sm);\r\n    text-align: center;\r\n  }\r\n\r\n  .bento-card h3 {\r\n    color: var(--color-prime);\r\n    margin-bottom: var(--spacing-xs);\r\n    font-size: var(--font-size-lg);\r\n  }\r\n\r\n  .bento-card p {\r\n    margin-bottom: 0;\r\n    font-size: var(--font-size-sm);\r\n    color: var(--color-text-light);\r\n  }\r\n\r\n  /* Service card specific colors */\r\n  .ai-card {\r\n    border-color: var(--color-prime);\r\n  }\r\n\r\n  .flow-card {\r\n    border-color: var(--color-second);\r\n  }\r\n\r\n  .bootcamp-card {\r\n    border-color: var(--color-fourth);\r\n  }\r\n\r\n  .blog-card {\r\n    border-color: var(--color-fifth);\r\n  }\r\n\r\n  /* Contact and Social Section */\r\n  .bento-container {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr;\r\n    gap: var(--spacing-lg);\r\n    margin: var(--spacing-lg) 0;\r\n  }\r\n\r\n  .contact-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(2, 1fr);\r\n    grid-template-rows: repeat(1, 1fr);\r\n    gap: var(--spacing-sm);\r\n    width: 100%;\r\n  }\r\n\r\n  .contact-card {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: var(--spacing-sm);\r\n    border-radius: var(--rounded-md);\r\n    text-decoration: none;\r\n    color: var(--color-text);\r\n    transition: transform 0.3s ease, box-shadow 0.3s ease;\r\n    box-shadow: var(--shadow-sm);\r\n    background-color: var(--color-surface);\r\n    border: 2px solid;\r\n    height: 100%;\r\n  }\r\n\r\n  .contact-card:hover {\r\n    transform: translateY(-3px);\r\n    box-shadow: var(--shadow-md);\r\n  }\r\n\r\n  .contact-emoji {\r\n    font-size: 1.5rem;\r\n    margin-bottom: var(--spacing-xs);\r\n    text-align: center;\r\n  }\r\n\r\n  .contact-name {\r\n    font-size: var(--font-size-sm);\r\n    font-weight: var(--font-weight-medium);\r\n  }\r\n\r\n  .website {\r\n    border-color: var(--color-prime);\r\n  }\r\n\r\n  .website:hover {\r\n    color: var(--color-prime);\r\n  }\r\n\r\n  .contact {\r\n    border-color: var(--color-fourth);\r\n  }\r\n\r\n  .contact:hover {\r\n    color: var(--color-fourth);\r\n  }\r\n\r\n  .social-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(2, 1fr);\r\n    grid-template-rows: repeat(2, 1fr);\r\n    gap: var(--spacing-sm);\r\n    width: 100%;\r\n  }\r\n\r\n  .social-card {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: var(--spacing-sm);\r\n    border-radius: var(--rounded-md);\r\n    text-decoration: none;\r\n    color: var(--color-text);\r\n    transition: transform 0.3s ease, box-shadow 0.3s ease;\r\n    box-shadow: var(--shadow-sm);\r\n    background-color: var(--color-surface);\r\n    border: 2px solid;\r\n  }\r\n\r\n  .social-card:hover {\r\n    transform: translateY(-3px);\r\n    box-shadow: var(--shadow-md);\r\n  }\r\n\r\n  .social-emoji {\r\n    font-size: 1.5rem;\r\n    margin-bottom: var(--spacing-xs);\r\n    text-align: center;\r\n  }\r\n\r\n  .social-name {\r\n    font-size: var(--font-size-sm);\r\n    font-weight: var(--font-weight-medium);\r\n  }\r\n\r\n  .linkedin {\r\n    border-color: #0077B5;\r\n  }\r\n\r\n  .linkedin:hover {\r\n    color: #0077B5;\r\n  }\r\n\r\n  .instagram {\r\n    border-color: #E1306C;\r\n  }\r\n\r\n  .instagram:hover {\r\n    color: #E1306C;\r\n  }\r\n\r\n  .discord {\r\n    border-color: #5865F2;\r\n  }\r\n\r\n  .discord:hover {\r\n    color: #5865F2;\r\n  }\r\n\r\n  .youtube {\r\n    border-color: #FF0000;\r\n  }\r\n\r\n  .youtube:hover {\r\n    color: #FF0000;\r\n  }\r\n\r\n  /* Responsive Adjustments */\r\n  @media (max-width: 768px) {\r\n    .bento-grid,\r\n    .bento-container {\r\n      grid-template-columns: 1fr;\r\n    }\r\n\r\n    .social-grid {\r\n      grid-template-columns: repeat(2, 1fr);\r\n    }\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    .social-grid {\r\n      grid-template-columns: 1fr;\r\n    }\r\n  }\r\n\r\n  .copyright {\r\n    text-align: center;\r\n    margin-top: var(--spacing-xl);\r\n    color: var(--color-text-secondary);\r\n    font-size: var(--font-size-sm);\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    .about-container {\r\n      padding: var(--spacing-sm);\r\n    }\r\n\r\n    h1 {\r\n      font-size: var(--font-size-2xl);\r\n    }\r\n\r\n    h2 {\r\n      font-size: var(--font-size-lg);\r\n    }\r\n  }\r\n\r\n  /* High Contrast Mode */\r\n  @media (prefers-contrast: high) {\r\n    .mission-statement {\r\n      border-left-width: 6px;\r\n    }\r\n\r\n    a {\r\n      text-decoration: underline;\r\n    }\r\n  }\r\n</style>\r\n","<!-- \r\n  Help.svelte - Help and instructions page\r\n  Provides comprehensive documentation and FAQs for codex.md users.\r\n  Migrated from SvelteKit routes to a standard Svelte component.\r\n  \r\n  Features:\r\n  - Purpose and benefits explanation\r\n  - Detailed conversion instructions\r\n  - API key documentation\r\n  - Resource links\r\n  - Frequently asked questions\r\n  \r\n  Dependencies:\r\n  - Container.svelte for layout\r\n-->\r\n<script>\r\n  import Container from '../lib/components/common/Container.svelte';\r\n</script>\r\n\r\n<div class=\"help-page\">\r\n  <Container>\r\n    <div class=\"help-content\">\r\n      <h1>Help & Instructions</h1>\r\n      \r\n      <section class=\"help-section\">\r\n        <h2> Purpose</h2>\r\n        <p>\r\n          <span class=\"codex-md-brand\">codex.md</span> helps you convert your digital content into Markdown files optimized for\r\n          <a href=\"https://obsidian.md/\" target=\"_blank\" rel=\"noopener noreferrer\">Obsidian</a>,\r\n          a powerful personal knowledge management system.\r\n        </p>\r\n        <p>By converting your content into Markdown, you're:</p>\r\n        <ul>\r\n          <li>Creating a portable, future-proof knowledge base</li>\r\n          <li>Making your information more searchable and interconnected</li>\r\n          <li>Preparing your data for local AI tools and Large Language Models</li>\r\n          <li>Building a personal knowledge graph that you fully control</li>\r\n        </ul>\r\n      </section>\r\n\r\n      <section class=\"help-section\">\r\n        <h2> Different Ways to Convert</h2>\r\n        <ul>\r\n          <li>\r\n            <strong>Single Web Page</strong> - Just paste any website URL (like \"<em>www.example.com/article</em>\"). \r\n            This will convert just that one page into a note.\r\n          </li>\r\n          <li>\r\n            <strong>Parent URL</strong> - If you want to convert multiple linked pages, use a parent URL. \r\n            For example, if you put in \"<em>www.example.com/guide</em>\", it will convert that page <strong>AND</strong> all the pages it links to.\r\n          </li>\r\n          <li>\r\n            <strong>Files from Your Computer</strong> - Click the upload box or drag files into it. You can add:\r\n            <ul class=\"sub-list\">\r\n              <li>Regular documents (like Word files or PDFs)</li>\r\n              <li>Audio files (these need an API key)</li>\r\n              <li>Video files (these need an API key)</li>\r\n            </ul>\r\n          </li>\r\n        </ul>\r\n      </section>\r\n\r\n      <section class=\"help-section\">\r\n        <h2> About API Keys</h2>\r\n        <ul>\r\n          <li>You need API keys for specific conversion features:\r\n            <ul class=\"sub-list\">\r\n              <li><strong>OpenAI API key</strong> - Required for audio/video transcription</li>\r\n              <li><strong>Mistral API key</strong> - Required for advanced OCR processing of PDF files</li>\r\n            </ul>\r\n          </li>\r\n          <li>Get your API keys from:\r\n            <ul class=\"sub-list\">\r\n              <li><a href=\"https://platform.openai.com/api-keys\" target=\"_blank\" rel=\"noopener noreferrer\">OpenAI's platform</a> - For audio/video transcription</li>\r\n              <li><a href=\"https://console.mistral.ai/\" target=\"_blank\" rel=\"noopener noreferrer\">Mistral's platform</a> - For OCR processing</li>\r\n            </ul>\r\n          </li>\r\n          <li>You'll need to set up billing with these services, but usage is typically affordable</li>\r\n          <li>Your API keys are stored securely on your device and persist between sessions</li>\r\n          <li>Don't worry if you don't have these keys - you can still convert most documents without them!</li>\r\n        </ul>\r\n      </section>\r\n\r\n      <section class=\"help-section\">\r\n        <h2> Steps to Convert</h2>\r\n        <ol>\r\n          <li>Add your content (either paste a URL or upload files)</li>\r\n          <li>If you're converting audio/video, add your API key when prompted</li>\r\n          <li>Click the \"<strong>Start Conversion</strong>\" button</li>\r\n          <li>Wait for processing (this might take a minute)</li>\r\n          <li>Download your converted notes in an organized .zip file</li>\r\n        </ol>\r\n      </section>\r\n\r\n      <section class=\"help-section resources-section\">\r\n        <h2> Resources</h2>\r\n        <p><strong>New to <span class=\"codex-md-brand\">codex.md</span>?</strong> Check out these resources:</p>\r\n        <ul>\r\n          <li><a href=\"https://obsidian.md/\" target=\"_blank\" rel=\"noopener noreferrer\">Download Obsidian</a> - Free personal knowledge base</li>\r\n          <li><a href=\"https://www.youtube.com/watch?v=vdD2FB-bmiE&list=PLa9S_7NRneu-XYTNzCA8T_B3B37ZVrgxx\" target=\"_blank\" rel=\"noopener noreferrer\">Build your second brain</a> - Video Tutorials</li>\r\n          <li><a href=\"https://discord.gg/z5DgD5ZHNJ\" target=\"_blank\" rel=\"noopener noreferrer\">Discord</a> - Community support</li>\r\n          <li><a href=\"https://www.synapticlabs.ai\" target=\"_blank\" rel=\"noopener noreferrer\">Synaptic Labs</a> - Work with Us</li>\r\n        </ul>\r\n      </section>\r\n\r\n      <section class=\"help-section faq-section\">\r\n        <h2> Frequently Asked Questions</h2>\r\n        \r\n        <div class=\"faq-item\">\r\n          <h3>What file types can I convert?</h3>\r\n          <p><span class=\"codex-md-brand\">codex.md</span> supports a wide range of file types:</p>\r\n          <ul>\r\n            <li><strong>Documents:</strong> PDF, DOCX, PPTX</li>\r\n            <li><strong>Data:</strong> CSV, XLSX</li>\r\n            <li><strong>Audio:</strong> MP3, WAV, M4A (requires API key)</li>\r\n            <li><strong>Video:</strong> MP4, WEBM, AVI (requires API key)</li>\r\n            <li><strong>Web:</strong> Any URL</li>\r\n          </ul>\r\n        </div>\r\n        \r\n        <div class=\"faq-item\">\r\n          <h3>Is my data secure?</h3>\r\n          <p>Yes! <span class=\"codex-md-brand\">codex.md</span> processes your files locally on your device. Your files never leave your computer unless you're using the API key for audio/video transcription, in which case only those specific files are sent to OpenAI's servers.</p>\r\n        </div>\r\n        \r\n        <div class=\"faq-item\">\r\n          <h3>What happens to my API keys?</h3>\r\n          <p>Your API keys are stored securely on your device using machine-specific encryption. They persist between sessions so you don't need to re-enter them each time. Your keys are never sent to our servers and are only used for the specific services they're intended for (OpenAI for transcription, Mistral for OCR).</p>\r\n        </div>\r\n        \r\n        <div class=\"faq-item\">\r\n          <h3>Can I use this offline?</h3>\r\n          <p>Yes! The desktop version of <span class=\"codex-md-brand\">codex.md</span> works offline for document conversions. Only audio/video transcription and web page conversion require an internet connection.</p>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  </Container>\r\n</div>\r\n\r\n<style>\r\n  /* Ensure the codex-md-brand class is properly styled */\r\n  :global(.help-page .codex-md-brand) {\r\n    font-weight: 700;\r\n    background: linear-gradient(135deg, \r\n      #00A99D 0%,\r\n      #00A99D 40%,\r\n      #F7931E 100%\r\n    );\r\n    background-size: 400% 400%;\r\n    animation: gradientFlow 8s ease infinite;\r\n    -webkit-background-clip: text;\r\n    background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n    display: inline-block;\r\n  }\r\n\r\n  .help-page {\r\n    padding: var(--spacing-md) 0;\r\n  }\r\n\r\n  .help-content {\r\n    max-width: 800px;\r\n    margin: 0 auto;\r\n  }\r\n\r\n  h1 {\r\n    font-size: var(--font-size-2xl);\r\n    font-weight: 700;\r\n    margin-bottom: var(--spacing-lg);\r\n    color: var(--color-text);\r\n    text-align: center;\r\n    position: relative;\r\n    padding-bottom: var(--spacing-sm);\r\n  }\r\n\r\n  h1::after {\r\n    content: \"\";\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    width: 100px;\r\n    height: 3px;\r\n    background: linear-gradient(90deg, var(--color-prime), var(--color-fourth));\r\n    border-radius: var(--rounded-full);\r\n  }\r\n\r\n  .help-section {\r\n    margin-bottom: var(--spacing-xl);\r\n  }\r\n\r\n  h2 {\r\n    font-size: var(--font-size-xl);\r\n    font-weight: 600;\r\n    margin-bottom: var(--spacing-md);\r\n    color: var(--color-text);\r\n    position: relative;\r\n    padding-left: var(--spacing-sm);\r\n  }\r\n\r\n  h2::before {\r\n    content: \"\";\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 3px;\r\n    background: linear-gradient(180deg, var(--color-prime), var(--color-fourth));\r\n    border-radius: var(--rounded-full);\r\n  }\r\n\r\n  h3 {\r\n    font-size: var(--font-size-lg);\r\n    font-weight: 600;\r\n    margin: var(--spacing-md) 0 var(--spacing-xs);\r\n    color: var(--color-text);\r\n  }\r\n\r\n  p {\r\n    margin-bottom: var(--spacing-sm);\r\n    line-height: 1.6;\r\n    color: var(--color-text);\r\n  }\r\n\r\n  ul, ol {\r\n    margin: 0 0 var(--spacing-sm) 0;\r\n    padding-left: var(--spacing-lg);\r\n    line-height: 1.6;\r\n  }\r\n\r\n  .sub-list {\r\n    margin-top: var(--spacing-2xs);\r\n    padding-left: var(--spacing-md);\r\n  }\r\n\r\n  li {\r\n    margin-bottom: var(--spacing-xs);\r\n  }\r\n\r\n  li:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n\r\n  strong {\r\n    font-weight: 600;\r\n    color: var(--color-text);\r\n  }\r\n\r\n  em {\r\n    background: rgba(var(--color-prime-rgb), 0.05);\r\n    padding: 0.2em 0.4em;\r\n    border-radius: var(--rounded-sm);\r\n    font-family: var(--font-mono);\r\n    font-size: 0.9em;\r\n    font-style: normal;\r\n  }\r\n\r\n  a {\r\n    color: var(--color-prime);\r\n    text-decoration: none;\r\n    border-bottom: 1px solid var(--color-prime);\r\n    transition: all 0.2s ease;\r\n  }\r\n\r\n  a:hover {\r\n    color: var(--color-second);\r\n    border-color: var(--color-second);\r\n  }\r\n\r\n  .resources-section {\r\n    background: rgba(var(--color-prime-rgb), 0.05);\r\n    padding: var(--spacing-md);\r\n    border-radius: var(--rounded-md);\r\n  }\r\n\r\n  .resources-section h2 {\r\n    margin-top: 0;\r\n  }\r\n\r\n  .faq-section {\r\n    border-top: 1px solid var(--color-border);\r\n    padding-top: var(--spacing-lg);\r\n  }\r\n\r\n  .faq-item {\r\n    margin-bottom: var(--spacing-md);\r\n    padding-bottom: var(--spacing-md);\r\n    border-bottom: 1px solid var(--color-border-light);\r\n  }\r\n\r\n  .faq-item:last-child {\r\n    margin-bottom: 0;\r\n    padding-bottom: 0;\r\n    border-bottom: none;\r\n  }\r\n\r\n  .faq-item h3 {\r\n    margin-top: 0;\r\n    color: var(--color-text);\r\n  }\r\n\r\n  @keyframes gradientFlow {\r\n    0% {\r\n      background-position: 0% 0%;\r\n    }\r\n    50% {\r\n      background-position: 100% 100%;\r\n    }\r\n    100% {\r\n      background-position: 0% 0%;\r\n    }\r\n  }\r\n\r\n  /* Mobile Adjustments */\r\n  @media (max-width: 768px) {\r\n    .help-page {\r\n      padding: var(--spacing-sm) 0;\r\n    }\r\n\r\n    h1 {\r\n      font-size: var(--font-size-xl);\r\n      margin-bottom: var(--spacing-md);\r\n    }\r\n\r\n    h2 {\r\n      font-size: var(--font-size-lg);\r\n    }\r\n\r\n    h3 {\r\n      font-size: var(--font-size-base);\r\n    }\r\n\r\n    .help-section {\r\n      margin-bottom: var(--spacing-lg);\r\n    }\r\n  }\r\n\r\n  @media (max-width: 640px) {\r\n    .help-page {\r\n      padding: var(--spacing-xs) 0;\r\n    }\r\n\r\n    h1 {\r\n      font-size: var(--font-size-lg);\r\n      margin-bottom: var(--spacing-sm);\r\n    }\r\n\r\n    h2 {\r\n      font-size: var(--font-size-base);\r\n      margin-bottom: var(--spacing-sm);\r\n    }\r\n\r\n    h3 {\r\n      font-size: var(--font-size-sm);\r\n    }\r\n\r\n    p, ul, ol {\r\n      font-size: var(--font-size-sm);\r\n    }\r\n\r\n    .help-section {\r\n      margin-bottom: var(--spacing-md);\r\n    }\r\n\r\n    .resources-section {\r\n      padding: var(--spacing-sm);\r\n    }\r\n  }\r\n\r\n  /* High Contrast Mode */\r\n  @media (prefers-contrast: high) {\r\n    .mission-statement {\r\n      border-left-width: 6px;\r\n    }\r\n\r\n    a {\r\n      text-decoration: underline;\r\n    }\r\n  }\r\n</style>\r\n","/**\r\n * Settings Store\r\n * \r\n * Manages application settings including OCR toggle state.\r\n * Provides methods for getting and setting OCR settings.\r\n * Persists settings to electron store when in electron environment.\r\n * \r\n * Related files:\r\n * - frontend/src/routes/settings/+page.svelte: Settings UI\r\n * - src/electron/ipc/handlers/settings.js: Settings IPC handlers\r\n * - src/electron/adapters/pdfConverterAdapter.js: Uses OCR settings\r\n */\r\n\r\nimport { writable } from 'svelte/store';\r\n\r\n// Default settings\r\nconst DEFAULT_SETTINGS = {\r\n  ocr: {\r\n    enabled: false\r\n  }\r\n};\r\n\r\n// Create the settings store\r\nconst createSettingsStore = () => {\r\n  const { subscribe, set, update } = writable(DEFAULT_SETTINGS);\r\n  \r\n  return {\r\n    subscribe,\r\n    set,\r\n    update,\r\n    \r\n    /**\r\n     * Set OCR enabled state\r\n     * @param {boolean} enabled - Whether OCR is enabled\r\n     */\r\n    setOcrEnabled: (enabled) => {\r\n      update(settings => {\r\n        // Create ocr object if it doesn't exist\r\n        if (!settings.ocr) {\r\n          settings.ocr = {};\r\n        }\r\n        \r\n        // Update enabled state\r\n        settings.ocr.enabled = enabled;\r\n        \r\n        // Save to electron store\r\n        window.electron.setSetting('ocr.enabled', enabled)\r\n          .catch(err => console.error('Error saving OCR setting:', err));\r\n        \r\n        return settings;\r\n      });\r\n    },\r\n    \r\n    /**\r\n     * Reset settings to defaults\r\n     */\r\n    reset: () => {\r\n      set(DEFAULT_SETTINGS);\r\n      \r\n      // Save to electron store\r\n      Object.entries(DEFAULT_SETTINGS).forEach(([key, value]) => {\r\n        window.electron.setSetting(key, value)\r\n          .catch(err => console.error(`Error resetting setting ${key}:`, err));\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\n// Create and export the settings store\r\nexport const settings = createSettingsStore();\r\n\r\n// Export helper functions\r\nexport const setOcrEnabled = settings.setOcrEnabled;\r\nexport const resetSettings = settings.reset;\r\n\r\n/**\r\n * Get settings object\r\n * @returns {Object} Settings object\r\n */\r\nexport const getSettings = () => {\r\n  let result;\r\n  settings.subscribe(value => {\r\n    result = value;\r\n  })();\r\n  return result;\r\n};\r\n\r\n/**\r\n * Update a setting\r\n * @param {string} key - Setting key\r\n * @param {any} value - Setting value\r\n */\r\nexport const updateSetting = (key, value) => {\r\n  settings.update(settings => {\r\n    // Handle nested keys\r\n    const keys = key.split('.');\r\n    let current = settings;\r\n    \r\n    // Navigate to the right nesting level\r\n    for (let i = 0; i < keys.length - 1; i++) {\r\n      if (!current[keys[i]]) {\r\n        current[keys[i]] = {};\r\n      }\r\n      current = current[keys[i]];\r\n    }\r\n    \r\n    // Set the value\r\n    current[keys[keys.length - 1]] = value;\r\n    \r\n    // Save to electron store\r\n    window.electron.setSetting(key, value)\r\n      .catch(err => console.error(`Error updating setting ${key}:`, err));\r\n    \r\n    return settings;\r\n  });\r\n};\r\n\r\n/**\r\n * Check if OCR is enabled\r\n * @returns {boolean} Whether OCR is enabled\r\n */\r\nexport const isOcrEnabled = () => {\r\n  let result = false;\r\n  settings.subscribe(value => {\r\n    result = value.ocr?.enabled || false;\r\n  })();\r\n  return result;\r\n};\r\n\r\n/**\r\n * Set transcription model\r\n * @param {string} model - Transcription model\r\n */\r\nexport const setTranscriptionModel = (model) => {\r\n  updateSetting('transcription.model', model);\r\n};\r\n\r\n/**\r\n * Get transcription model\r\n * @returns {string} Transcription model\r\n */\r\nexport const getTranscriptionModel = () => {\r\n  let result = 'whisper-1';\r\n  settings.subscribe(value => {\r\n    result = value.transcription?.model || 'whisper-1';\r\n  })();\r\n  return result;\r\n};\r\n","<!-- \r\n  Toggle.svelte - Reusable toggle switch component\r\n  Used for boolean settings and preferences throughout the application.\r\n  \r\n  Features:\r\n  - Custom styling with CSS variables\r\n  - Label support\r\n  - Animation for state changes\r\n  - Keyboard accessibility\r\n  \r\n  Props:\r\n  - checked: boolean - Current state of the toggle\r\n  - label: string - Optional label text\r\n  - disabled: boolean - Optional disabled state\r\n  \r\n  Events:\r\n  - change: Dispatched when toggle state changes\r\n-->\r\n<script>\r\n  import { createEventDispatcher } from 'svelte';\r\n  \r\n  export let checked = false;\r\n  export let label = '';\r\n  export let disabled = false;\r\n  \r\n  const dispatch = createEventDispatcher();\r\n  \r\n  function handleChange() {\r\n    if (!disabled) {\r\n      checked = !checked;\r\n      dispatch('change', { checked });\r\n    }\r\n  }\r\n  \r\n  function handleKeydown(event) {\r\n    if (!disabled && (event.key === 'Enter' || event.key === ' ')) {\r\n      event.preventDefault();\r\n      handleChange();\r\n    }\r\n  }\r\n</script>\r\n\r\n<label class=\"toggle-container\" class:disabled>\r\n  <input\r\n    type=\"checkbox\"\r\n    bind:checked\r\n    {disabled}\r\n    on:change={handleChange}\r\n    on:keydown={handleKeydown}\r\n  />\r\n  <span class=\"toggle-track\">\r\n    <span class=\"toggle-thumb\" />\r\n  </span>\r\n  {#if label}\r\n    <span class=\"toggle-label\">{label}</span>\r\n  {/if}\r\n</label>\r\n\r\n<style>\r\n  .toggle-container {\r\n    display: inline-flex;\r\n    align-items: center;\r\n    cursor: pointer;\r\n    user-select: none;\r\n    gap: var(--spacing-sm);\r\n  }\r\n  \r\n  .toggle-container.disabled {\r\n    cursor: not-allowed;\r\n    opacity: 0.6;\r\n  }\r\n  \r\n  input {\r\n    position: absolute;\r\n    opacity: 0;\r\n    width: 0;\r\n    height: 0;\r\n  }\r\n  \r\n  .toggle-track {\r\n    position: relative;\r\n    display: inline-block;\r\n    width: 36px;\r\n    height: 20px;\r\n    background-color: var(--color-surface-variant);\r\n    border-radius: 10px;\r\n    transition: background-color 0.2s ease;\r\n  }\r\n  \r\n  input:checked + .toggle-track {\r\n    background-color: var(--color-prime);\r\n  }\r\n  \r\n  .toggle-thumb {\r\n    position: absolute;\r\n    top: 2px;\r\n    left: 2px;\r\n    width: 16px;\r\n    height: 16px;\r\n    background-color: var(--color-surface);\r\n    border-radius: 50%;\r\n    transition: transform 0.2s ease;\r\n  }\r\n  \r\n  input:checked + .toggle-track .toggle-thumb {\r\n    transform: translateX(16px);\r\n  }\r\n  \r\n  .toggle-label {\r\n    color: var(--color-text);\r\n    font-size: var(--font-size-sm);\r\n  }\r\n  \r\n  /* Focus styles */\r\n  input:focus-visible + .toggle-track {\r\n    box-shadow: 0 0 0 2px var(--color-prime-light);\r\n  }\r\n  \r\n  /* High Contrast */\r\n  @media (prefers-contrast: high) {\r\n    .toggle-track {\r\n      border: 2px solid currentColor;\r\n    }\r\n    \r\n    .toggle-thumb {\r\n      border: 1px solid currentColor;\r\n    }\r\n  }\r\n  \r\n  /* Reduced Motion */\r\n  @media (prefers-reduced-motion: reduce) {\r\n    .toggle-track,\r\n    .toggle-thumb {\r\n      transition: none;\r\n    }\r\n  }\r\n</style>\r\n","<!-- \r\n  Accordion.svelte - Collapsible content component\r\n  Provides an expandable/collapsible section for organizing content.\r\n  \r\n  Features:\r\n  - Smooth animation for expand/collapse\r\n  - Customizable title and icon\r\n  - Keyboard accessibility\r\n  - ARIA attributes for screen readers\r\n  \r\n  Props:\r\n  - title: string - Title text for the accordion header\r\n  - icon: string - Optional icon (emoji) to display before title\r\n  - open: boolean - Optional initial open state\r\n  \r\n  Usage:\r\n  <Accordion title=\"Section Title\" icon=\"\">\r\n    Content goes here\r\n  </Accordion>\r\n-->\r\n<script>\r\n  import { slide } from 'svelte/transition';\r\n  import { createEventDispatcher } from 'svelte';\r\n  \r\n  export let title = '';\r\n  export let icon = '';\r\n  export let open = false;\r\n  \r\n  const dispatch = createEventDispatcher();\r\n  \r\n  function toggle() {\r\n    open = !open;\r\n    dispatch('toggle', { open });\r\n  }\r\n  \r\n  function handleKeydown(event) {\r\n    if (event.key === 'Enter' || event.key === ' ') {\r\n      event.preventDefault();\r\n      toggle();\r\n    }\r\n  }\r\n</script>\r\n\r\n<div class=\"accordion\">\r\n  <button\r\n    class=\"accordion-header\"\r\n    on:click={toggle}\r\n    on:keydown={handleKeydown}\r\n    aria-expanded={open}\r\n    aria-controls=\"accordion-content\"\r\n  >\r\n    {#if icon}\r\n      <span class=\"icon\">{icon}</span>\r\n    {/if}\r\n    <span class=\"title\">{title}</span>\r\n    <span class=\"chevron\" class:open></span>\r\n  </button>\r\n  \r\n  {#if open}\r\n    <div\r\n      class=\"accordion-content\"\r\n      id=\"accordion-content\"\r\n      transition:slide={{ duration: 200 }}\r\n    >\r\n      <slot />\r\n    </div>\r\n  {/if}\r\n</div>\r\n\r\n<style>\r\n  .accordion {\r\n    width: 100%;\r\n    border: 1px solid var(--color-border);\r\n    border-radius: var(--rounded-md);\r\n    background-color: var(--color-surface);\r\n    margin-bottom: var(--spacing-sm);\r\n  }\r\n  \r\n  .accordion-header {\r\n    width: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: var(--spacing-sm);\r\n    padding: var(--spacing-sm);\r\n    background: none;\r\n    border: none;\r\n    cursor: pointer;\r\n    font-size: var(--font-size-sm);\r\n    color: var(--color-text);\r\n    text-align: left;\r\n    transition: background-color 0.2s ease;\r\n  }\r\n  \r\n  .accordion-header:hover {\r\n    background-color: var(--color-surface-hover);\r\n  }\r\n  \r\n  .accordion-header:focus-visible {\r\n    outline: 2px solid var(--color-prime);\r\n    outline-offset: -2px;\r\n  }\r\n  \r\n  .icon {\r\n    flex-shrink: 0;\r\n    font-size: 1.2em;\r\n  }\r\n  \r\n  .title {\r\n    flex-grow: 1;\r\n    font-weight: var(--font-weight-medium);\r\n  }\r\n  \r\n  .chevron {\r\n    flex-shrink: 0;\r\n    font-size: 0.8em;\r\n    transition: transform 0.2s ease;\r\n  }\r\n  \r\n  .chevron.open {\r\n    transform: rotate(180deg);\r\n  }\r\n  \r\n  .accordion-content {\r\n    padding: var(--spacing-md);\r\n    border-top: 1px solid var(--color-border);\r\n  }\r\n  \r\n  /* High Contrast */\r\n  @media (prefers-contrast: high) {\r\n    .accordion {\r\n      border-width: 2px;\r\n    }\r\n    \r\n    .accordion-content {\r\n      border-top-width: 2px;\r\n    }\r\n  }\r\n  \r\n  /* Reduced Motion */\r\n  @media (prefers-reduced-motion: reduce) {\r\n    .chevron {\r\n      transition: none;\r\n    }\r\n  }\r\n</style>\r\n","<!-- \r\n  TranscriptionSettings.svelte - Audio/Video transcription settings component\r\n  Controls and configuration for transcription features.\r\n  \r\n  Features:\r\n  - Model selection\r\n  - Language settings\r\n  - Quality options\r\n  - Processing preferences\r\n-->\r\n<script>\r\n  import { onMount } from 'svelte';\r\n  import { settings } from '../../stores/settings.js';\r\n  import Toggle from '../common/Toggle.svelte';\r\n  import Accordion from '../common/Accordion.svelte';\r\n  \r\n  let autoDetectLanguage = true;\r\n  let selectedLanguage = 'en';\r\n  let highQualityMode = false;\r\n  \r\n  // Subscribe to settings store\r\n  const unsubscribe = settings.subscribe(value => {\r\n    autoDetectLanguage = value.transcription?.autoDetectLanguage ?? true;\r\n    selectedLanguage = value.transcription?.language ?? 'en';\r\n    highQualityMode = value.transcription?.highQuality ?? false;\r\n  });\r\n  \r\n  // Update settings when values change\r\n  function updateSettings() {\r\n    settings.update(current => ({\r\n      ...current,\r\n      transcription: {\r\n        ...current.transcription,\r\n        autoDetectLanguage,\r\n        language: selectedLanguage,\r\n        highQuality: highQualityMode\r\n      }\r\n    }));\r\n  }\r\n  \r\n  onMount(() => {\r\n    // Load settings from Electron if available\r\n    if (window?.electron?.getSettings) {\r\n      window.electron.getSettings('transcription')\r\n        .then(value => {\r\n          if (value) {\r\n            autoDetectLanguage = value.autoDetectLanguage ?? true;\r\n            selectedLanguage = value.language ?? 'en';\r\n            highQualityMode = value.highQuality ?? false;\r\n            updateSettings();\r\n          }\r\n        })\r\n        .catch(err => console.error('Error loading transcription settings:', err));\r\n    }\r\n    \r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  });\r\n</script>\r\n\r\n<div class=\"transcription-settings\">\r\n  <div class=\"setting-group\">\r\n    <Toggle\r\n      bind:checked={autoDetectLanguage}\r\n      label=\"Auto-detect language\"\r\n      on:change={updateSettings}\r\n    />\r\n    {#if !autoDetectLanguage}\r\n      <select\r\n        bind:value={selectedLanguage}\r\n        on:change={updateSettings}\r\n        class=\"language-select\"\r\n      >\r\n        <option value=\"en\">English</option>\r\n        <option value=\"es\">Spanish</option>\r\n        <option value=\"fr\">French</option>\r\n        <option value=\"de\">German</option>\r\n        <option value=\"it\">Italian</option>\r\n        <option value=\"pt\">Portuguese</option>\r\n        <option value=\"nl\">Dutch</option>\r\n        <option value=\"pl\">Polish</option>\r\n        <option value=\"ru\">Russian</option>\r\n        <option value=\"ja\">Japanese</option>\r\n        <option value=\"ko\">Korean</option>\r\n        <option value=\"zh\">Chinese</option>\r\n      </select>\r\n    {/if}\r\n  </div>\r\n\r\n  <div class=\"setting-group\">\r\n    <Toggle\r\n      bind:checked={highQualityMode}\r\n      label=\"High-quality transcription\"\r\n      on:change={updateSettings}\r\n    />\r\n    <p class=\"description\">\r\n      Uses Whisper's large model for better accuracy but takes longer to process.\r\n    </p>\r\n  </div>\r\n\r\n  <Accordion title=\"About Language Settings\" icon=\"\">\r\n    <div class=\"info-content\">\r\n      <p>\r\n        Auto-detect language uses AI to identify the spoken language in your audio/video.\r\n        For best results with a known language, disable auto-detect and select the specific language.\r\n      </p>\r\n      <h4>Processing Times:</h4>\r\n      <ul>\r\n        <li>Standard Quality: ~1x content duration</li>\r\n        <li>High Quality: ~2-3x content duration</li>\r\n      </ul>\r\n    </div>\r\n  </Accordion>\r\n</div>\r\n\r\n<style>\r\n  .transcription-settings {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: var(--spacing-md);\r\n  }\r\n\r\n  .setting-group {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: var(--spacing-xs);\r\n  }\r\n\r\n  .language-select {\r\n    margin-top: var(--spacing-xs);\r\n    padding: var(--spacing-xs) var(--spacing-sm);\r\n    border: 1px solid var(--color-border);\r\n    border-radius: var(--rounded-sm);\r\n    background-color: var(--color-surface);\r\n    color: var(--color-text);\r\n    font-size: var(--font-size-sm);\r\n  }\r\n\r\n  .language-select:focus {\r\n    outline: 2px solid var(--color-prime);\r\n    outline-offset: -2px;\r\n  }\r\n\r\n  .description {\r\n    font-size: var(--font-size-sm);\r\n    color: var(--color-text-secondary);\r\n    margin-left: calc(36px + var(--spacing-sm)); /* Align with toggle label */\r\n  }\r\n\r\n  .info-content {\r\n    font-size: var(--font-size-sm);\r\n    color: var(--color-text-secondary);\r\n  }\r\n\r\n  .info-content p {\r\n    margin-bottom: var(--spacing-sm);\r\n  }\r\n\r\n  .info-content h4 {\r\n    font-size: var(--font-size-sm);\r\n    font-weight: var(--font-weight-medium);\r\n    margin-bottom: var(--spacing-xs);\r\n    color: var(--color-text);\r\n  }\r\n\r\n  .info-content ul {\r\n    list-style-type: disc;\r\n    padding-left: var(--spacing-lg);\r\n    margin-bottom: var(--spacing-sm);\r\n  }\r\n\r\n  .info-content li {\r\n    margin-bottom: var(--spacing-xs);\r\n  }\r\n\r\n  /* High Contrast Mode */\r\n  @media (prefers-contrast: high) {\r\n    .language-select {\r\n      border-width: 2px;\r\n    }\r\n  }\r\n</style>\r\n","<!-- \r\n  Settings.svelte - Application settings page\r\n  Handles configuration of API keys, transcription options, and OCR settings.\r\n  Migrated from SvelteKit routes to a standard Svelte component.\r\n  \r\n  Features:\r\n  - API key management\r\n  - Transcription settings\r\n  - OCR configuration\r\n  - Persistent storage integration\r\n  \r\n  Dependencies:\r\n  - settings store for state management\r\n  - ApiKeyInput for key management\r\n  - TranscriptionSettings for audio/video options\r\n  - Common components (Toggle, Accordion, Container)\r\n-->\r\n<script>\r\n  import { onMount } from 'svelte';\r\n  import { settings, setOcrEnabled } from '../lib/stores/settings.js';\r\n  import ApiKeyInput from '../lib/components/ApiKeyInput.svelte';\r\n  import TranscriptionSettings from '../lib/components/settings/TranscriptionSettings.svelte';\r\n  import Toggle from '../lib/components/common/Toggle.svelte';\r\n  import Accordion from '../lib/components/common/Accordion.svelte';\r\n  import Container from '../lib/components/common/Container.svelte';\r\n  \r\n  // Local binding for OCR enabled state\r\n  let ocrEnabled = false;\r\n  \r\n  // Subscribe to settings store\r\n  const unsubscribe = settings.subscribe(value => {\r\n    ocrEnabled = value.ocr?.enabled || false;\r\n  });\r\n  \r\n  // Update settings when toggle changes\r\n  function handleToggleChange(event) {\r\n    setOcrEnabled(ocrEnabled);\r\n  }\r\n  \r\n  onMount(() => {\r\n    // Initialize from electron settings if available\r\n    if (window?.electron?.getSetting) {\r\n      window.electron.getSetting('ocr.enabled')\r\n        .then(value => {\r\n          if (value !== undefined) {\r\n            ocrEnabled = value;\r\n            setOcrEnabled(value);\r\n          }\r\n        })\r\n        .catch(err => console.error('Error loading OCR settings:', err));\r\n    }\r\n    \r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  });\r\n</script>\r\n\r\n<div class=\"settings-container\">\r\n  <h1>Settings</h1>\r\n  \r\n  <div class=\"settings-grid\">\r\n    <Container>\r\n      <div class=\"container-header\">\r\n        <h2>API Keys</h2>\r\n        <p class=\"subtitle\">Configure API keys for external services used by codex.md.</p>\r\n      </div>\r\n      \r\n      <div class=\"api-keys-section\">\r\n        <h3>OpenAI API Key</h3>\r\n        <ApiKeyInput provider=\"openai\" />\r\n        \r\n        <h3>Mistral API Key</h3>\r\n        <ApiKeyInput provider=\"mistral\" />\r\n      </div>\r\n    </Container>\r\n    \r\n    <Container>\r\n      <div class=\"container-header\">\r\n        <h2>Document Processing</h2>\r\n        <p class=\"subtitle\">Configure transcription and OCR settings for document conversions.</p>\r\n      </div>\r\n      \r\n      <div class=\"processing-settings\">\r\n        <h3>Transcription</h3>\r\n        <TranscriptionSettings />\r\n        \r\n        <h3>Advanced PDF Processing</h3>\r\n        <div class=\"ocr-toggle-section\">\r\n          <Toggle \r\n            bind:checked={ocrEnabled} \r\n            on:change={handleToggleChange}\r\n            label=\"Enable advanced OCR for PDF documents\" \r\n          />\r\n          <p class=\"description\">\r\n            When enabled, Mistral's advanced OCR will be used to process PDF documents,\r\n            providing better text extraction and document understanding capabilities.\r\n          </p>\r\n          \r\n          <Accordion title=\"About Mistral OCR\" icon=\"\">\r\n            <div class=\"info-content\">\r\n              <p>\r\n                Mistral's OCR (Optical Character Recognition) technology provides enhanced PDF processing with:\r\n              </p>\r\n              <ul>\r\n                <li>Better text extraction from complex layouts</li>\r\n                <li>Preservation of document structure and formatting</li>\r\n                <li>Support for tables, lists, and other complex elements</li>\r\n                <li>Higher accuracy for difficult-to-read documents</li>\r\n              </ul>\r\n            </div>\r\n          </Accordion>\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  </div>\r\n</div>\r\n\r\n<style>\r\n  /* Keep codex-md-brand styling consistent */\r\n  :global(.settings-container .codex-md-brand) {\r\n    font-weight: 700;\r\n    background: linear-gradient(135deg, \r\n      #00A99D 0%,\r\n      #00A99D 40%,\r\n      #F7931E 100%\r\n    );\r\n    background-size: 400% 400%;\r\n    animation: gradientFlow 8s ease infinite;\r\n    -webkit-background-clip: text;\r\n    background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n    display: inline-block;\r\n  }\r\n\r\n  @keyframes gradientFlow {\r\n    0% { background-position: 0% 0%; }\r\n    50% { background-position: 100% 100%; }\r\n    100% { background-position: 0% 0%; }\r\n  }\r\n\r\n  .settings-container {\r\n    max-width: 800px;\r\n    margin: 0 auto;\r\n    padding: var(--spacing-lg);\r\n  }\r\n  \r\n  .settings-grid {\r\n    display: grid;\r\n    gap: var(--spacing-lg);\r\n  }\r\n  \r\n  h1 {\r\n    font-size: var(--font-size-2xl);\r\n    font-weight: 700;\r\n    margin-bottom: var(--spacing-xl);\r\n    color: var(--color-text);\r\n  }\r\n\r\n  .container-header {\r\n    margin-bottom: var(--spacing-lg);\r\n  }\r\n\r\n  h2 {\r\n    font-size: var(--font-size-xl);\r\n    font-weight: 600;\r\n    margin-bottom: var(--spacing-xs);\r\n    color: var(--color-text);\r\n  }\r\n\r\n  .subtitle {\r\n    font-size: var(--font-size-sm);\r\n    color: var(--color-text-secondary);\r\n  }\r\n\r\n  /* API keys section styles */\r\n  .api-keys-section {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: var(--spacing-lg);\r\n  }\r\n  \r\n  /* Processing settings styles */\r\n  .processing-settings {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: var(--spacing-lg);\r\n  }\r\n  \r\n  h3 {\r\n    font-size: var(--font-size-lg);\r\n    font-weight: 600;\r\n    margin-bottom: var(--spacing-sm);\r\n    color: var(--color-text);\r\n  }\r\n  \r\n  /* OCR toggle section styles */\r\n  .ocr-toggle-section {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: var(--spacing-sm);\r\n  }\r\n  \r\n  .description {\r\n    font-size: var(--font-size-sm);\r\n    color: var(--color-text-secondary);\r\n    margin-left: calc(36px + var(--spacing-sm)); /* Align with toggle label */\r\n  }\r\n  \r\n  .info-content {\r\n    font-size: var(--font-size-sm);\r\n    color: var(--color-text-secondary);\r\n  }\r\n  \r\n  .info-content p {\r\n    margin-bottom: var(--spacing-sm);\r\n  }\r\n  \r\n  .info-content ul {\r\n    padding-left: var(--spacing-md);\r\n    margin-bottom: var(--spacing-sm);\r\n  }\r\n  \r\n  .info-content li {\r\n    margin-bottom: var(--spacing-xs);\r\n  }\r\n  \r\n  /* Responsive adjustments */\r\n  @media (max-width: 600px) {\r\n    .settings-container {\r\n      padding: var(--spacing-md);\r\n    }\r\n    \r\n    .settings-grid {\r\n      gap: var(--spacing-md);\r\n    }\r\n    \r\n    h1 {\r\n      font-size: var(--font-size-xl);\r\n      margin-bottom: var(--spacing-lg);\r\n    }\r\n    \r\n    .processing-settings {\r\n      gap: var(--spacing-md);\r\n    }\r\n  }\r\n\r\n  /* Reduced Motion */\r\n  @media (prefers-reduced-motion: reduce) {\r\n    :global(.settings-container .codex-md-brand) {\r\n      animation: none;\r\n    }\r\n  }\r\n</style>\r\n","/**\r\n * routes.js - Application routing configuration\r\n * Defines client-side routes for the application using svelte-spa-router.\r\n * Migrated from SvelteKit's routing to a single-page application approach.\r\n * \r\n * Routes:\r\n * - / : Home/converter page\r\n * - /about : About page with application information\r\n * - /help : Help and documentation\r\n * - /settings : Application settings\r\n * \r\n * Note: All components are loaded from the pages directory to maintain\r\n * clear separation between routes and component implementations.\r\n */\r\n\r\n// Import route components\r\nimport Home from './pages/Home.svelte';\r\nimport About from './pages/About.svelte';\r\nimport Help from './pages/Help.svelte';\r\nimport Settings from './pages/Settings.svelte';\r\n\r\n// Define routes\r\nexport const routes = {\r\n  // Home page - main converter interface\r\n  '/': Home,\r\n  \r\n  // About page - application information\r\n  '/about': About,\r\n  \r\n  // Help page - user documentation and guides\r\n  '/help': Help,\r\n  \r\n  // Settings page - application configuration\r\n  '/settings': Settings,\r\n  \r\n  // Catch-all route - redirect to home\r\n  '*': Home\r\n};\r\n","/**\r\n * Offline Store\r\n * Manages offline state and initialization state for the application.\r\n * \r\n * This store handles:\r\n * - Online/offline status\r\n * - API connectivity status\r\n * - Offline operation tracking\r\n * - Store initialization state\r\n * - Periodic status checks\r\n * \r\n * Related files:\r\n * - components/OfflineStatusBar.svelte: UI for offline status\r\n * - services/api.js: API client with offline support\r\n */\r\n\r\nimport { writable, derived } from 'svelte/store';\r\n\r\n// Platform check\r\nconst isBrowser = typeof window !== 'undefined';\r\n\r\n// Create the base store\r\nfunction createOfflineStore() {\r\n  // Initial state with initialization tracking\r\n  const initialState = {\r\n    online: true,\r\n    apiStatus: {},\r\n    lastSync: null,\r\n    pendingOperations: [],\r\n    isInitialized: false,\r\n    error: null\r\n  };\r\n  \r\n  // Create the writable store\r\n  const { subscribe, set, update } = writable(initialState);\r\n  \r\n  // Status check interval reference\r\n  let statusCheckInterval;\r\n  \r\n  // Check status with electron\r\n  async function checkStatus() {\r\n  if (!isBrowser || !window?.electron) return;\r\n    \r\n    try {\r\n      const status = await window.electron.getOfflineStatus();\r\n      update(state => ({\r\n        ...state,\r\n        online: status.online,\r\n        apiStatus: status.apiStatus,\r\n        error: null\r\n      }));\r\n    } catch (error) {\r\n      console.error('Failed to get offline status:', error);\r\n      update(state => ({\r\n        ...state,\r\n        error: error.message\r\n      }));\r\n    }\r\n  }\r\n\r\n  // Initialize store\r\n  async function initialize() {\r\n  if (!isBrowser) return;\r\n\r\n    try {\r\n      if (!window?.electron) {\r\n        update(state => ({\r\n          ...state,\r\n          isInitialized: true,\r\n          error: 'Electron API not available'\r\n        }));\r\n        return;\r\n      }\r\n\r\n      window.electron.onReady(async () => {\r\n        try {\r\n          // Get initial status\r\n          await checkStatus();\r\n          \r\n          // Start periodic checks\r\n          statusCheckInterval = setInterval(checkStatus, 30000); // Check every 30s\r\n          \r\n          update(state => ({\r\n            ...state,\r\n            isInitialized: true,\r\n            error: null\r\n          }));\r\n        } catch (error) {\r\n          console.error('Failed to initialize offline store:', error);\r\n          update(state => ({\r\n            ...state,\r\n            isInitialized: true,\r\n            error: error.message\r\n          }));\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to initialize offline store:', error);\r\n      update(state => ({\r\n        ...state,\r\n        isInitialized: true,\r\n        error: error.message\r\n      }));\r\n    }\r\n  }\r\n\r\n  // Clean up on window unload\r\n  if (isBrowser) {\r\n    window.addEventListener('beforeunload', () => {\r\n      if (statusCheckInterval) {\r\n        clearInterval(statusCheckInterval);\r\n      }\r\n    });\r\n    \r\n    // Initialize when in browser\r\n    initialize();\r\n  }\r\n  \r\n  return {\r\n    subscribe,\r\n    \r\n    // Set online status\r\n    setOnlineStatus: (online) => update(state => ({\r\n      ...state,\r\n      online,\r\n      error: null\r\n    })),\r\n    \r\n    // Set API status\r\n    setApiStatus: (apiStatus) => update(state => ({\r\n      ...state,\r\n      apiStatus,\r\n      error: null\r\n    })),\r\n    \r\n    // Update last sync time\r\n    updateLastSync: () => update(state => ({\r\n      ...state,\r\n      lastSync: new Date(),\r\n      error: null\r\n    })),\r\n    \r\n    // Add pending operation\r\n    addPendingOperation: (operation) => update(state => ({\r\n      ...state,\r\n      pendingOperations: [...state.pendingOperations, {\r\n        ...operation,\r\n        timestamp: Date.now()\r\n      }],\r\n      error: null\r\n    })),\r\n    \r\n    // Remove pending operation\r\n    removePendingOperation: (operationId) => update(state => ({\r\n      ...state,\r\n      pendingOperations: state.pendingOperations.filter(op => op.id !== operationId)\r\n    })),\r\n    \r\n    // Set pending operations\r\n    setPendingOperations: (operations) => update(state => ({\r\n      ...state,\r\n      pendingOperations: operations\r\n    })),\r\n    \r\n    // Reset store to initial state\r\n    reset: () => {\r\n      if (statusCheckInterval) {\r\n        clearInterval(statusCheckInterval);\r\n      }\r\n      set({\r\n        ...initialState,\r\n        isInitialized: false,\r\n        error: null\r\n      });\r\n      initialize();\r\n    }\r\n  };\r\n}\r\n\r\n// Create derived stores for specific aspects\r\nexport const offlineStore = createOfflineStore();\r\n\r\n// Derived store for checking if any API is available\r\nexport const anyApiAvailable = derived(\r\n  offlineStore,\r\n  $offlineStore => Object.values($offlineStore.apiStatus).some(status => status === true)\r\n);\r\n\r\n// Derived store for checking if specific API is available\r\nexport function apiAvailable(apiName) {\r\n  return derived(\r\n    offlineStore,\r\n    $offlineStore => $offlineStore.apiStatus[apiName] === true\r\n  );\r\n}\r\n\r\n// Derived store for pending operations count\r\nexport const pendingOperationsCount = derived(\r\n  offlineStore,\r\n  $offlineStore => $offlineStore.pendingOperations.length\r\n);\r\n\r\n// Helper function to check if we can perform online operations\r\nexport function canPerformOnlineOperations(requiredApis = []) {\r\n  return derived(\r\n    offlineStore,\r\n    $offlineStore => {\r\n      // Must be online\r\n      if (!$offlineStore.online) return false;\r\n      \r\n      // If no specific APIs required, just check online status\r\n      if (requiredApis.length === 0) return true;\r\n      \r\n      // Check if all required APIs are available\r\n      return requiredApis.every(api => $offlineStore.apiStatus[api] === true);\r\n    }\r\n  );\r\n}\r\n","<!--\r\n  OfflineStatusBar.svelte\r\n  Displays the current online status and provides offline functionality controls.\r\n  \r\n  This component shows the current network status, API connectivity,\r\n  and provides controls for managing offline operations.\r\n  \r\n  Related files:\r\n  - lib/stores/offlineStore.js: Offline state management\r\n  - lib/services/api.js: API client with offline support\r\n-->\r\n\r\n<script>\r\n  import { onMount, onDestroy } from 'svelte';\r\n  import { fade, slide } from 'svelte/transition';\r\n  import { offlineStore } from '../../lib/stores/offlineStore';\r\n  import electronClient from '../../lib/api/electron/client';\r\n  \r\n  // Local state\r\n  let expanded = false;\r\n  let queuedOperations = [];\r\n  let showQueuedOperations = false;\r\n  let mounted = false;\r\n  \r\n  // Handle offline events\r\n  function handleOfflineEvent(event) {\r\n    // Log the event structure to help with debugging\r\n    console.log('[OfflineStatusBar] Received offline event:', event);\r\n    \r\n    try {\r\n      // Safely handle each event type with null checks\r\n      if (!event || typeof event !== 'object') {\r\n        console.error('[OfflineStatusBar] Invalid event received');\r\n        return;\r\n      }\r\n\r\n      switch (event.type) {\r\n        case 'status-change':\r\n          if (typeof event.online === 'boolean') {\r\n            offlineStore.setOnlineStatus(event.online);\r\n          }\r\n          break;\r\n          \r\n        case 'api-status':\r\n          if (event.status) {\r\n            offlineStore.setApiStatus(event.status);\r\n          }\r\n          break;\r\n          \r\n        case 'operation-complete':\r\n        case 'operation-failed':\r\n          // Refresh queued operations\r\n          loadQueuedOperations();\r\n          \r\n          // Log operation details if available\r\n          if (event.operation) {\r\n            console.log(`[OfflineStatusBar] Operation ${event.type}:`, event.operation);\r\n          }\r\n          break;\r\n          \r\n        default:\r\n          console.warn('[OfflineStatusBar] Unknown offline event type:', event.type);\r\n      }\r\n    } catch (error) {\r\n      console.error('[OfflineStatusBar] Error handling offline event:', error);\r\n    }\r\n  }\r\n  \r\n  // Load queued operations\r\n  async function loadQueuedOperations() {\r\n    try {\r\n      const operations = await electronClient.getQueuedOperations();\r\n      queuedOperations = operations;\r\n    } catch (error) {\r\n      console.error('Failed to load queued operations:', error);\r\n    }\r\n  }\r\n  \r\n  // Clear cache\r\n  async function clearCache() {\r\n    try {\r\n      await electronClient.clearCache();\r\n      alert('Cache cleared successfully');\r\n    } catch (error) {\r\n      console.error('Failed to clear cache:', error);\r\n      alert(`Failed to clear cache: ${error.message}`);\r\n    }\r\n  }\r\n  \r\n  // Toggle expanded state\r\n  function toggleExpanded() {\r\n    expanded = !expanded;\r\n    if (expanded) {\r\n      loadQueuedOperations();\r\n    }\r\n  }\r\n  \r\n  // Toggle queued operations visibility\r\n  function toggleQueuedOperations() {\r\n    showQueuedOperations = !showQueuedOperations;\r\n    if (showQueuedOperations) {\r\n      loadQueuedOperations();\r\n    }\r\n  }\r\n  \r\n  // Format timestamp\r\n  function formatTime(timestamp) {\r\n    return new Date(timestamp).toLocaleTimeString();\r\n  }\r\n  \r\n  // Setup on mount\r\n  onMount(async () => {\r\n    mounted = true;\r\n    \r\n    // Get initial status\r\n    try {\r\n      // Wait for store to be initialized\r\n      if (!$offlineStore.isInitialized) {\r\n        // Initialization is handled by the store itself\r\n        // Just wait for it to be ready\r\n        return;\r\n      }\r\n      \r\n      // Listen for offline events\r\n      const cleanup = electronClient.onOfflineEvent((event) => handleOfflineEvent(event));\r\n      \r\n      // Return cleanup function for onDestroy\r\n      return () => {\r\n        mounted = false;\r\n        if (typeof cleanup === 'function') {\r\n          cleanup();\r\n        }\r\n      };\r\n    } catch (error) {\r\n      console.error('Failed to setup offline status bar:', error);\r\n    }\r\n  });\r\n</script>\r\n\r\n{#if mounted}\r\n  {#if $offlineStore.isInitialized}\r\n    {#if $offlineStore.error}\r\n      <div class=\"offline-status-bar error\" transition:fade>\r\n        <div class=\"status-text\">Error: {$offlineStore.error}</div>\r\n      </div>\r\n    {:else}\r\n      <div class=\"offline-status-bar\" class:expanded>\r\n        <button \r\n          class=\"status-indicator\" \r\n          on:click={toggleExpanded}\r\n          on:keydown={(e) => e.key === 'Enter' && toggleExpanded()}\r\n          aria-expanded={expanded}\r\n          aria-controls=\"offline-expanded-content\"\r\n          role=\"button\"\r\n          tabindex=\"0\"\r\n        >\r\n          <div class=\"status-icon\" class:online={$offlineStore.online}>\r\n            {#if $offlineStore.online}\r\n              <span class=\"icon\"></span>\r\n            {:else}\r\n              <span class=\"icon\"></span>\r\n            {/if}\r\n          </div>\r\n          <div class=\"status-text\">\r\n            {$offlineStore.online ? 'Online' : 'Offline'}\r\n          </div>\r\n          <div class=\"expand-icon\">\r\n            {expanded ? '' : ''}\r\n          </div>\r\n        </button>\r\n        \r\n        {#if expanded}\r\n          <div id=\"offline-expanded-content\" class=\"expanded-content\" transition:slide={{ duration: 300 }}>\r\n            <div class=\"api-status\">\r\n              <h4>API Status</h4>\r\n              <ul>\r\n                {#each Object.entries($offlineStore.apiStatus) as [api, status]}\r\n                  <li>\r\n                    <span class=\"api-name\">{api}:</span>\r\n                    <span class=\"api-status-indicator\" class:online={status}>\r\n                      {status ? ' Connected' : ' Disconnected'}\r\n                    </span>\r\n                  </li>\r\n                {/each}\r\n              </ul>\r\n            </div>\r\n            \r\n            <div class=\"offline-controls\">\r\n              <button on:click={toggleQueuedOperations} class=\"control-button\">\r\n                {showQueuedOperations ? 'Hide' : 'Show'} Queued Operations ({queuedOperations.length})\r\n              </button>\r\n              <button on:click={clearCache} class=\"control-button\">\r\n                Clear Cache\r\n              </button>\r\n            </div>\r\n            \r\n            {#if showQueuedOperations}\r\n              <div class=\"queued-operations\" transition:fade={{ duration: 200 }}>\r\n                <h4>Queued Operations</h4>\r\n                {#if queuedOperations.length === 0}\r\n                  <p class=\"empty-message\">No operations in queue</p>\r\n                {:else}\r\n                  <ul>\r\n                    {#each queuedOperations as operation}\r\n                      <li>\r\n                        <div class=\"operation-type\">{operation.type}</div>\r\n                        <div class=\"operation-time\">{formatTime(operation.timestamp)}</div>\r\n                      </li>\r\n                    {/each}\r\n                  </ul>\r\n                {/if}\r\n              </div>\r\n            {/if}\r\n          </div>\r\n        {/if}\r\n      </div>\r\n    {/if}\r\n  {:else}\r\n    <div class=\"offline-status-bar loading\" transition:fade>\r\n      <div class=\"status-text\">Checking connection status...</div>\r\n    </div>\r\n  {/if}\r\n{/if}\r\n\r\n<style>\r\n  .offline-status-bar {\r\n    position: fixed;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    background: var(--color-surface);\r\n    border-top: 1px solid var(--color-border);\r\n    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);\r\n    z-index: 1000;\r\n    font-family: var(--font-family);\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .status-indicator {\r\n    display: flex;\r\n    align-items: center;\r\n    width: 100%;\r\n    padding: 10px 20px;\r\n    cursor: pointer;\r\n    user-select: none;\r\n    background: none;\r\n    border: none;\r\n    text-align: left;\r\n    transition: background-color 0.2s ease;\r\n  }\r\n  \r\n  .status-indicator:hover {\r\n    background-color: var(--color-background);\r\n  }\r\n  \r\n  .status-indicator:focus {\r\n    outline: 2px solid var(--color-prime);\r\n    outline-offset: -2px;\r\n  }\r\n  \r\n  .status-icon {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 16px;\r\n    height: 16px;\r\n    border-radius: 50%;\r\n    margin-right: 10px;\r\n    background-color: var(--color-error);\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .status-icon.online {\r\n    background-color: var(--color-success, #4caf50);\r\n  }\r\n  \r\n  .icon {\r\n    font-size: 12px;\r\n  }\r\n  \r\n  .status-text {\r\n    flex-grow: 1;\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n    color: var(--color-text);\r\n  }\r\n  \r\n  .expand-icon {\r\n    font-size: 12px;\r\n    color: var(--color-text-light);\r\n    transition: transform 0.3s ease;\r\n  }\r\n  \r\n  .expanded .expand-icon {\r\n    transform: rotate(180deg);\r\n  }\r\n  \r\n  .expanded-content {\r\n    padding: 16px 20px;\r\n    border-top: 1px solid var(--color-border);\r\n    background-color: var(--color-surface);\r\n  }\r\n  \r\n  .api-status h4, .queued-operations h4 {\r\n    margin-top: 0;\r\n    margin-bottom: 8px;\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n    color: #333;\r\n  }\r\n  \r\n  .api-status ul, .queued-operations ul {\r\n    list-style: none;\r\n    padding: 0;\r\n    margin: 0;\r\n  }\r\n  \r\n  .api-status li, .queued-operations li {\r\n    display: flex;\r\n    padding: 4px 0;\r\n    font-size: 13px;\r\n  }\r\n  \r\n  .api-name {\r\n    width: 100px;\r\n    font-weight: 500;\r\n  }\r\n  \r\n  .api-status-indicator {\r\n    color: #ff3e3e;\r\n  }\r\n  \r\n  .api-status-indicator.online {\r\n    color: #4caf50;\r\n  }\r\n  \r\n  .offline-controls {\r\n    display: flex;\r\n    gap: 12px;\r\n    margin: 16px 0;\r\n  }\r\n  \r\n  .control-button {\r\n    padding: 8px 16px;\r\n    background-color: var(--color-background);\r\n    color: var(--color-text);\r\n    border: 1px solid var(--color-border);\r\n    border-radius: var(--rounded-md);\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n    transition: all 0.2s ease;\r\n  }\r\n  \r\n  .control-button:hover {\r\n    background-color: var(--color-background-hover);\r\n    border-color: var(--color-prime);\r\n  }\r\n  \r\n  .control-button:focus {\r\n    outline: 2px solid var(--color-prime);\r\n    outline-offset: 2px;\r\n  }\r\n  \r\n  .queued-operations {\r\n    margin-top: 16px;\r\n  }\r\n  \r\n  .empty-message {\r\n    font-size: 13px;\r\n    color: #666;\r\n    font-style: italic;\r\n  }\r\n  \r\n  .operation-type {\r\n    flex-grow: 1;\r\n    font-weight: 500;\r\n  }\r\n  \r\n  .operation-time {\r\n    color: #666;\r\n    font-size: 12px;\r\n  }\r\n</style>\r\n","<script>\r\n  export let size = 'medium'; // tiny, small, medium, large, extra-large\r\n  export let showText = true;\r\n  export let className = '';\r\n</script>\r\n\r\n<div class=\"logo {size} {className}\">\r\n  <div class=\"logo-icon\">\r\n    <img src=\"./logo.png\" alt=\"codex.md Logo\" />\r\n  </div>\r\n  {#if showText}\r\n    <div class=\"logo-text\">\r\n      <span class=\"codex-md-brand\">codex.md</span>\r\n    </div>\r\n  {/if}\r\n</div>\r\n\r\n<style>\r\n  .logo {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: var(--spacing-xs);\r\n    transition: transform 0.3s ease;\r\n  }\r\n  \r\n  .logo:hover {\r\n    transform: scale(1.05);\r\n  }\r\n  \r\n  .logo-icon {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));\r\n    transition: filter 0.3s ease;\r\n  }\r\n  \r\n  .logo:hover .logo-icon {\r\n    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.15));\r\n  }\r\n  \r\n  .logo-icon img {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: contain;\r\n    max-width: 100%;\r\n  }\r\n  \r\n  .logo-text {\r\n    font-weight: 700;\r\n    display: flex;\r\n    align-items: center;\r\n    position: relative;\r\n    transition: transform 0.3s ease;\r\n  }\r\n  \r\n  .logo:hover .logo-text {\r\n    transform: translateY(-1px);\r\n  }\r\n  \r\n  \r\n  /* Brand gradient text */\r\n  .logo-text :global(.codex-md-brand) {\r\n    font-weight: 700;\r\n    background: linear-gradient(135deg, \r\n      #00A99D 0%,\r\n      #00A99D 40%,\r\n      #F7931E 100%\r\n    );\r\n    background-size: 400% 400%;\r\n    animation: gradientFlow 8s ease infinite;\r\n    -webkit-background-clip: text;\r\n    background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n    display: inline-block;\r\n    position: relative;\r\n    z-index: 1;\r\n  }\r\n\r\n  @keyframes gradientFlow {\r\n    0% {\r\n      background-position: 0% 0%;\r\n    }\r\n    50% {\r\n      background-position: 100% 100%;\r\n    }\r\n    100% {\r\n      background-position: 0% 0%;\r\n    }\r\n  }\r\n\r\n  /* Sizes */\r\n  .tiny .logo-icon {\r\n    width: 48px;\r\n    height: 48px;\r\n  }\r\n  \r\n  .tiny .logo-text {\r\n    font-size: var(--font-size-base);\r\n  }\r\n  \r\n  .small .logo-icon {\r\n    width: 56px;\r\n    height: 56px;\r\n  }\r\n  \r\n  .small .logo-text {\r\n    font-size: var(--font-size-lg);\r\n  }\r\n  \r\n  .medium .logo-icon {\r\n    width: 64px;\r\n    height: 64px;\r\n  }\r\n  \r\n  .medium .logo-text {\r\n    font-size: var(--font-size-xl);\r\n  }\r\n  \r\n  .large .logo-icon {\r\n    width: 72px;\r\n    height: 72px;\r\n  }\r\n  \r\n  .large .logo-text {\r\n    font-size: var(--font-size-2xl);\r\n  }\r\n  \r\n  .extra-large .logo-icon {\r\n    width: 84px;\r\n    height: 84px;\r\n  }\r\n  \r\n  .extra-large .logo-text {\r\n    font-size: var(--font-size-3xl);\r\n  }\r\n  \r\n  @media (max-width: 640px) {\r\n    .medium .logo-icon {\r\n      width: 52px;\r\n      height: 52px;\r\n    }\r\n    \r\n    .medium .logo-text {\r\n      font-size: var(--font-size-lg);\r\n    }\r\n    \r\n    .large .logo-icon {\r\n      width: 60px;\r\n      height: 60px;\r\n    }\r\n    \r\n    .large .logo-text {\r\n      font-size: var(--font-size-xl);\r\n    }\r\n    \r\n    .extra-large .logo-icon {\r\n      width: 72px;\r\n      height: 72px;\r\n    }\r\n    \r\n    .extra-large .logo-text {\r\n      font-size: var(--font-size-2xl);\r\n    }\r\n  }\r\n</style>\r\n","<!-- \r\n  Navigation.svelte - Main navigation component\r\n  Provides application-wide navigation with active route tracking.\r\n  \r\n  Features:\r\n  - Route-aware navigation links\r\n  - Responsive design\r\n  - Brand logo/link\r\n  - Active state highlighting\r\n  \r\n  Dependencies:\r\n  - svelte-spa-router for navigation and route tracking\r\n  - Logo component for branding\r\n-->\r\n<script>\r\n  import { location, push } from 'svelte-spa-router';\r\n  import { onMount } from 'svelte';\r\n  import Logo from './Logo.svelte';\r\n  \r\n  // Handle client-side navigation\r\n  function handleClick(e, path) {\r\n    e.preventDefault();\r\n    push(path);\r\n  }\r\n</script>\r\n\r\n<nav class=\"navigation\">\r\n  <div class=\"nav-brand\">\r\n    <a href=\"/\" on:click={(e) => handleClick(e, '/')} class=\"brand-link\">\r\n      <Logo size=\"medium\" />\r\n    </a>\r\n  </div>\r\n  \r\n  <div class=\"nav-links\">\r\n    <a \r\n      href=\"/\" \r\n      on:click={(e) => handleClick(e, '/')}\r\n      class=\"nav-link\" \r\n      class:active={$location === '/'}\r\n    >\r\n      Convert\r\n    </a>\r\n    \r\n    <a \r\n      href=\"/help\" \r\n      on:click={(e) => handleClick(e, '/help')}\r\n      class=\"nav-link\" \r\n      class:active={$location === '/help'}\r\n    >\r\n      Help\r\n    </a>\r\n    \r\n    <a \r\n      href=\"/about\" \r\n      on:click={(e) => handleClick(e, '/about')}\r\n      class=\"nav-link\" \r\n      class:active={$location === '/about'}\r\n    >\r\n      About\r\n    </a>\r\n    \r\n    <a \r\n      href=\"/settings\" \r\n      on:click={(e) => handleClick(e, '/settings')}\r\n      class=\"nav-link\" \r\n      class:active={$location === '/settings'}\r\n    >\r\n      Settings\r\n    </a>\r\n  </div>\r\n</nav>\r\n\r\n<style>\r\n  .navigation {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100%;\r\n    padding: 1.25rem;\r\n    background: var(--color-surface);\r\n    border-bottom: 1px solid var(--color-border);\r\n    box-shadow: var(--shadow-sm);\r\n  }\r\n  \r\n  .nav-brand {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0.5rem;\r\n    border-radius: var(--rounded-md);\r\n    transition: transform 0.3s ease;\r\n    z-index: 10; /* Ensure the brand is above other elements */\r\n  }\r\n  \r\n  .nav-brand:hover {\r\n    transform: translateY(-1px);\r\n  }\r\n  \r\n  .brand-link {\r\n    text-decoration: none;\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0.25rem 0.5rem;\r\n  }\r\n  \r\n  .nav-links {\r\n    display: flex;\r\n    gap: 1.5rem;\r\n    background: var(--color-surface);\r\n    border-radius: var(--rounded-lg);\r\n    padding: 0.25rem 0.5rem;\r\n  }\r\n  \r\n  .nav-link {\r\n    color: var(--color-text);\r\n    text-decoration: none;\r\n    font-weight: 500;\r\n    padding: 0.6rem 1rem;\r\n    border-radius: var(--rounded-md);\r\n    transition: all 0.2s ease;\r\n    position: relative;\r\n  }\r\n  \r\n  .nav-link::after {\r\n    content: '';\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 50%;\r\n    width: 0;\r\n    height: 2px;\r\n    background: var(--color-prime);\r\n    transition: all 0.3s ease;\r\n    transform: translateX(-50%);\r\n    opacity: 0;\r\n  }\r\n  \r\n  .nav-link:hover {\r\n    color: var(--color-prime);\r\n    background: color-mix(in srgb, var(--color-prime) 5%, transparent);\r\n  }\r\n  \r\n  .nav-link:hover::after {\r\n    width: 70%;\r\n    opacity: 1;\r\n  }\r\n  \r\n  .nav-link.active {\r\n    color: var(--color-prime);\r\n    font-weight: 600;\r\n    background: color-mix(in srgb, var(--color-prime) 8%, transparent);\r\n  }\r\n  \r\n  .nav-link.active::after {\r\n    width: 70%;\r\n    opacity: 1;\r\n  }\r\n  \r\n  @media (max-width: 640px) {\r\n    .navigation {\r\n      padding: 0.75rem;\r\n    }\r\n    \r\n    .nav-brand {\r\n      font-size: 1.25rem;\r\n    }\r\n    \r\n    .nav-links {\r\n      gap: 0.5rem;\r\n      padding: 0.15rem 0.25rem;\r\n    }\r\n    \r\n    .nav-link {\r\n      padding: 0.5rem 0.75rem;\r\n      font-size: 0.9rem;\r\n    }\r\n  }\r\n\r\n  /* High Contrast Mode */\r\n  @media (prefers-contrast: high) {\r\n    .nav-link {\r\n      outline: 1px solid transparent;\r\n    }\r\n    \r\n    .nav-link.active {\r\n      outline: 2px solid currentColor;\r\n      outline-offset: -2px;\r\n    }\r\n    \r\n    .nav-link::after {\r\n      height: 3px;\r\n    }\r\n  }\r\n</style>\r\n","<!-- \r\n  App.svelte - Main application component\r\n  This component serves as the root of our application, handling:\r\n  - Client-side routing via svelte-spa-router\r\n  - Global layout and styling\r\n  - Welcome state management\r\n  - Meta tags and global styles\r\n  Connects to:\r\n  - /src/routes.js for route definitions\r\n  - lib/stores/welcomeState.js for welcome message tracking\r\n  - lib/components/OfflineStatusBar.svelte for offline status display\r\n  - lib/styles/global.css for global styles\r\n-->\r\n<script>\r\n  import Router from 'svelte-spa-router';\r\n  import { routes } from './routes';\r\n  import { onMount } from 'svelte';\r\n  import welcomeState from './lib/stores/welcomeState';\r\n  import OfflineStatusBar from './lib/components/OfflineStatusBar.svelte';\r\n  import Navigation from './lib/components/common/Navigation.svelte';\r\n  import './lib/styles/global.css';\r\n\r\n  let hasSeenWelcome;\r\n  \r\n  // Subscribe to welcome state\r\n  const unsubscribe = welcomeState.subscribe(state => {\r\n    hasSeenWelcome = state.hasSeenWelcome;\r\n  });\r\n  \r\n  onMount(() => {\r\n    // Clean up subscription\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  });\r\n</script>\r\n\r\n<svelte:head>\r\n  <title>codex.md | Markdown Converter for Obsidian</title>\r\n  <meta name=\"description\" content=\"Convert various file types and web content to Markdown format for Obsidian\" />\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n  <meta name=\"theme-color\" content=\"#13151a\" />\r\n  <meta charset=\"utf-8\" />\r\n  <link rel=\"icon\" href=\"/favicon.png\" />\r\n</svelte:head>\r\n\r\n<div class=\"app-layout\">\r\n  <OfflineStatusBar />\r\n  <Navigation />\r\n  <main>\r\n    <div class=\"app-container\">\r\n      <Router {routes} />\r\n    </div>\r\n  </main>\r\n</div>\r\n\r\n<style>\r\n  :global(body) {\r\n    margin: 0;\r\n    font-family: var(--font-family-base);\r\n    background-color: var(--color-background);\r\n    color: var(--color-text);\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n  }\r\n\r\n  .app-layout {\r\n    display: flex;\r\n    flex-direction: column;\r\n    min-height: 100vh;\r\n  }\r\n\r\n  .app-container {\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n    padding: 1rem;\r\n  }\r\n  \r\n  main {\r\n    flex: 1;\r\n    background-color: var(--color-background);\r\n    padding: var(--spacing-md);\r\n    box-sizing: border-box;\r\n    /* Add padding to account for the offline status bar */\r\n    padding-bottom: calc(var(--spacing-md) + 36px);\r\n  }\r\n</style>\r\n","/**\r\n * main.js - Application entry point\r\n * Initializes the Svelte application and mounts it to the DOM.\r\n * Also imports global styles and handles any necessary initialization.\r\n * \r\n * Key responsibilities:\r\n * - Import global CSS\r\n * - Create and mount the root App component\r\n * - Set up any global initialization logic\r\n */\r\n\r\n// Import global styles\r\nimport './lib/styles/global.css';\r\n\r\n// Import root component\r\nimport App from './App.svelte';\r\n\r\n// Create and mount the application\r\nconst app = new App({\r\n  target: document.getElementById('app')\r\n});\r\n\r\nexport default app;\r\n"],"names":["noop","identity","x","assign","tar","src","k","run","fn","blank_object","run_all","fns","is_function","thing","safe_not_equal","a","b","is_empty","obj","subscribe","store","callbacks","callback","unsub","get_store_value","value","_","component_subscribe","component","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","get_slot_changes","dirty","lets","merged","len","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","get_all_dirty_from_scope","length","i","exclude_internal_props","props","result","compute_rest_props","keys","rest","split_css_unit","split","is_client","now","raf","cb","tasks","run_tasks","task","loop","fulfill","append","target","node","get_root_for_style","root","append_empty_stylesheet","style_element","element","append_stylesheet","style","insert","anchor","detach","destroy_each","iterations","detaching","name","text","data","space","empty","listen","event","handler","options","self","attr","attribute","always_set_through_set_attribute","set_attributes","attributes","descriptors","key","children","set_data","set_input_value","input","set_style","important","select_option","select","mounting","option","select_value","selected_option","toggle_class","toggle","custom_event","type","detail","bubbles","cancelable","construct_svelte_component","managed_styles","active","hash","str","create_style_information","doc","info","create_rule","duration","delay","ease","uid","step","keyframes","p","t","rule","stylesheet","rules","animation","delete_rule","previous","next","anim","deleted","clear_rules","ownerNode","current_component","set_current_component","get_current_component","onMount","afterUpdate","onDestroy","createEventDispatcher","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","update_scheduled","schedule_update","flush","tick","add_render_callback","add_flush_callback","seen_callbacks","flushidx","saved_component","update","$$","flush_render_callbacks","filtered","targets","c","promise","wait","dispatch","direction","kind","outroing","outros","group_outros","check_outros","transition_in","block","local","transition_out","null_transition","create_in_transition","params","config","running","animation_name","cleanup","go","easing","linear","css","start_time","end_time","started","create_out_transition","group","original_inert_value","reset","create_bidirectional_transition","intro","running_program","pending_program","clear_animation","init","program","d","ensure_array_like","array_like_or_iterator","outro_and_destroy_block","lookup","update_keyed_each","old_blocks","get_key","dynamic","list","destroy","create_each_block","get_context","o","n","old_indexes","new_blocks","new_lookup","deltas","updates","child_ctx","will_move","did_move","new_block","old_block","new_key","old_key","get_spread_update","levels","to_null_out","accounted_for","get_spread_object","spread_props","bind","index","create_component","mount_component","fragment","after_update","new_on_destroy","destroy_component","make_dirty","instance","create_fragment","not_equal","append_styles","parent_component","ready","ret","nodes","SvelteComponent","__publicField","PUBLIC_VERSION","subscriber_queue","readable","start","writable","stop","subscribers","set","new_value","run_queue","subscriber","invalidate","derived","stores","initial_value","single","stores_array","auto","values","pending","sync","unsubscribers","parse","loose","tmp","ext","pattern","arr","switch_instance_spread_levels","getLocation","hashPosition","location","qsPosition","querystring","loc","_loc","push","restoreScroll","state","routes","$$props","prefix","restoreScrollState","RouteItem","path","match","matches","out","routesList","route","componentParams","dispatchNextTick","previousScrollState","popStateChanged","lastLoc","componentObj","unsubscribeLoc","newLoc","$$invalidate","loaded","backOut","cubicOut","f","elasticOut","fade","fly","y","opacity","target_opacity","transform","od","xValue","xUnit","yValue","yUnit","u","slide","axis","primary_property","primary_property_value","secondary_properties","capitalized_secondary_properties","e","padding_start_value","padding_end_value","margin_start_value","margin_end_value","border_width_start_value","border_width_end_value","scale","sd","_t","div","div_intro","create_if_block_2","create_if_block_1","create_if_block","div1","div3","div4","div0","span","div2","div4_intro","avatar","message","avatarPosition","showName","isTyping","showMessage","button_class_value","button","current","variant","disabled","fullWidth","size","restProps","isBrowser","CURRENT_VERSION","MESSAGE_TYPES","defaultState","welcomeStateStore","initializeStore","storedState","hasSeenWelcomeThisSession","updateSettings","isInitialized","error","stateToSave","currentState","welcomeState","newState","initialState","apiKeyStore","openaiExists","mistralExists","getApiKey","provider","get","setApiKey","$store","apiKey","create_if_block_4","create_if_block_5","create_if_block_6","if_block1","div7","div6","h3","div5","div7_transition","chatbubble_changes","create_if_block_3","if_block","messageType","showOnMount","isOpen","visibleMessages","apiKeyValue","shouldShow","unsubApiKey","animateMessages","messageTemplates","handleMinimize","goToHelp","goToSettings","handleContinue","allMessages","resolve","byteToHex","unsafeStringify","offset","getRandomValues","rnds8","rng","randomUUID","native","v4","buf","rnds","_a","FILE_CATEGORIES","HANDLING_TYPES","CONVERTER_CONFIG","API_REQUIRED_TYPES","getFileHandlingInfo","file","fileName","fileType","category","cat","extensions","getFileContent","getFileType","requiresApiKey","types","isValidFileType","files","createFilesStore","$files","activeFile","FileStatus","FileUtils","success","isFilePath","extension","uuidv4","newFile","createAction","args","updateFiles","updater","successMsg","updated","existingFile","id","updatedFile","updatedFiles","fileToRemove","count","createUploadStore","tab","uploadStore","ElectronClient","onProgress","progress","fileInfo","conversionOptions","arrayBuffer","ConversionError","electronClient","ConversionState","createUnifiedConversionStore","completionCallbacks","timerInterval","status","startTime","elapsedMs","seconds","h","m","s","unifiedConversion","url","currentFile","$state","FileSystemOperations","dirPath","content","sourcePath","destPath","recursive","fileSystemOperations","generateId","uuid","normalizeUrl","urlObj","normalizedPath","fileCategories","isSupportedFileType","isAudioType","isVideoType","getFileCategory","normalizedType","validateAndNormalizeItem","item","supportedTypes","allFileTypes","normalizedUrl","normalizedContent","_b","_c","utils","className","span0","span1","button_aria_selected_value","div_transition","button_disabled_value","handlePaste","div1_intro","loading","couldBeValidUrl","trimmed","inputValue","errorMessage","showTooltip","URL_TYPES","handleInput","handleSubmit","fileObj","currentConfig","handleKeyPress","isValidFormat","mouseenter_handler","mouseleave_handler","activeType","$uploadStore","hasFiles","isDisabled","p0","p1","p2","input_accept_value","func","div0_intro","acceptedTypes","fileInput","dragCounter","handleDrop","singleFile","handleDragEnter","handleDragLeave","handleDragOver","handleFileSelect","$$value","click_handler","displayTypes","t1_value","div_class_value","t1","FILE_ICONS","MIME_TYPE_MAP","getFileIconConfig","normalized","baseType","getBaseFileType","typeMap","getFileIcon","t2_value","span1_title_value","button_aria_label_value","t2","handleRemove","fileIcon","div_outro","showConversionButton","button0","button1_changes","a_target_value","a_rel_value","title","placeholder","infoText","helpLink","helpText","showApiKey","saving","keyStatus","isReady","initializeApiKey","err","response","toggleShowApiKey","saveApiKey","deleteApiKey","onStartConversion","SUPPORTED_EXTENSIONS","showFeedback","validateFile","handleFilesAdded","newFiles","validation","requiresKey","showFileList","needsApiKey","hasUrl","fileUploaderDisabled","createConversionResultStore","outputPath","items","isBatch","totalCount","currentValue","conversionResult","CONVERSION_STATUSES","FILE_TYPES","TEMP_FILE_CONFIG","BINARY_FILE_EXTENSIONS","statusMap","phaseMap","StoreManager","newStatus","filename","phase","fileId","total","currentFiles","firstFile","storeManager","ConversionHandler","currentApiKey","friendlyError","openaiApiKey","outputResult","ocrEnabled","mistralApiKey","baseOptions","_d","conversionHandler","DownloadHandler","filePath","downloadHandler","tempFileRegistry","TempFileManager","fileExt","tempFileName","tempDir","tempFilePath","isBinaryFile","isLargeFile","isVideoFile","metadataObj","metadataStr","writeResult","initResult","transferId","chunkSize","totalChunks","chunkIndex","end","chunk","chunkBase64","chunkResult","finalizeResult","base64Data","prefixedData","textData","reject","reader","expectedSize","stats","metadata","force","retryCount","retryDelay","attempts","unusedFiles","tempFileManager","CLEANUP_INTERVAL","ConversionManager","conversionManager","startConversion","cancelConversion","clearFiles","openFile","showInFolder","span2","span3","span4","time","label","hours","minutes","formattedTime","$unifiedConversion","formatMessage","line","formattedMessages","messages","initializeFormattedMessages","getRandomMessage","randomIndex","typingSpeed","messageDisplayTime","typingIndicatorTime","bubblePosition","togglePosition","messageTimeout","typingTimeout","typingInterval","currentMessage","displayedMessage","isAnimating","isPersistentlyCompleted","completionMessage","finalTotalCount","finalElapsedTime","captureCompletionState","elapsedSeconds","stopMessageAnimation","resetState","animateMessage","charIndex","fullMessage","unsubStatus","prevStatus","handleCancel","conversionProgressComponent","persistentCompletion","hasCompletedOnce","$conversionResult","handleConvertMore","statusCompleted","resultCompleted","hasValidResult","isConverting","isCompleted","hasError","hasNativeResult","scrollToTop","mode","showWelcome","hasCompletedConversion","handleStartConversion","handleWelcomeClosed","handleWelcomeContinue","isWebsiteConversion","div10","DEFAULT_SETTINGS","createSettingsStore","enabled","settings","setOcrEnabled","label_1","checked","handleChange","handleKeydown","icon","open","option0","option1","option2","option3","option4","option5","option6","option7","option8","option9","option10","option11","autoDetectLanguage","selectedLanguage","highQualityMode","unsubscribe","h30","h31","h1","handleToggleChange","Home","About","Help","Settings","createOfflineStore","statusCheckInterval","checkStatus","initialize","online","apiStatus","operation","operationId","op","operations","offlineStore","$offlineStore","t3","t3_value","t5_value","each_value_1","h4","ul","button1","t5","div2_transition","li","t0","t0_value","formatTime","timestamp","expanded","queuedOperations","showQueuedOperations","mounted","handleOfflineEvent","loadQueuedOperations","clearCache","toggleExpanded","toggleQueuedOperations","div1_class_value","showText","a1","a2","a3","a4","nav","a0","handleClick","meta0","meta1","meta2","meta3","link","main","App"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,23,24,25,26]}